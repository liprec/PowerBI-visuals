{"version":3,"sources":["visuals/asterPlot/visual/asterPlot.ts","visuals/tornadoChart/visual/tornadoChart.ts","visuals/mekkoChart/visual/mekkoChart.ts","visuals/sankeyDiagram/visual/sankeyDiagram.ts","visuals/bulletChart/visual/bulletChart.ts","visuals/wordCloud/visual/wordCloud.ts","visuals/chicletSlicer/visual/chicletSlicer.ts","visuals/chordChart/visual/chordChart.ts","visuals/enhancedScatterChart/visual/enhancedScatterChart.ts","visuals/globeMap/visual/globeMap.ts","visuals/radarChart/visual/radarChart.ts","visuals/histogram/visual/histogram.ts","visuals/dotPlot/visual/dotPlot.ts","visuals/forceGraph/visual/forceGraph.ts","visuals/gantt/visual/gantt.ts","visuals/timeline/visual/timeline.ts","visuals/streamGraph/visual/streamGraph.ts","visuals/sunburst/visual/sunburst.ts","visuals/lineDotChart/visual/lineDotChart.ts","plugins.ts","services/customVisualPluginService.ts"],"names":[],"mappings":"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","file":"CustomVisuals.js","sourcesContent":["/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.visuals.samples {\r\n    import ArcDescriptor = D3.Layout.ArcDescriptor;\r\n    import ClassAndSelector = jsCommon.CssConstants.ClassAndSelector;\r\n    import createClassAndSelector = jsCommon.CssConstants.createClassAndSelector;\r\n    import PixelConverter = jsCommon.PixelConverter;\r\n    import ValueFormatter = powerbi.visuals.valueFormatter;\r\n\r\n    const AsterPlotVisualClassName: string = 'asterPlot';\r\n    const AsterPlotLegendObjectName: string = 'legend';\r\n    const AsterDefaultOuterLineThickness: number = 1;\r\n    const AsterDefaultLabelFill: Fill = { solid: { color: '#333' } };\r\n    const AsterDefaultLegendFontSize: number = 8;\r\n    const AsterRadiusRatio: number = 0.9;\r\n    const AsterConflictRatio = 0.9;\r\n    const MaxPrecision: number = 17;\r\n\r\n    export interface AsterData {\r\n        dataPoints: AsterDataPoint[];\r\n        highlightedDataPoints?: AsterDataPoint[];\r\n        legendData: LegendData;\r\n        valueFormatter: IValueFormatter;\r\n        legendSettings: AsterPlotLegendSettings;\r\n        labelSettings: VisualDataLabelsSettings;\r\n        showOuterLine: boolean;\r\n        outerLineThickness: number;\r\n    }\r\n\r\n    export interface AsterPlotLegendSettings {\r\n        show: boolean;\r\n        position: string;\r\n        showTitle: boolean;\r\n        labelColor: string;\r\n        titleText: string;\r\n        fontSize: number;\r\n    }\r\n\r\n    export interface AsterArcDescriptor extends ArcDescriptor {\r\n        isLabelHasConflict?: boolean;\r\n    }\r\n\r\n    export interface AsterDataPoint extends SelectableDataPoint {\r\n        color: string;\r\n        sliceHeight: number;\r\n        sliceWidth: number;\r\n        label: string;\r\n        highlight?: boolean;\r\n        tooltipInfo: TooltipDataItem[];\r\n        labelFontSize: string;\r\n    }\r\n\r\n    export interface AsterPlotBehaviorOptions {\r\n        selection: D3.Selection;\r\n        highlightedSelection: D3.Selection;\r\n        clearCatcher: D3.Selection;\r\n        interactivityService: IInteractivityService;\r\n    }\r\n\r\n    class AsterPlotWebBehavior implements IInteractiveBehavior {\r\n        private selection: D3.Selection;\r\n        private highlightedSelection: D3.Selection;\r\n        private clearCatcher: D3.Selection;\r\n        private interactivityService: IInteractivityService;\r\n\r\n        public bindEvents(options: AsterPlotBehaviorOptions, selectionHandler: ISelectionHandler) {\r\n            this.selection = options.selection;\r\n            this.highlightedSelection = options.highlightedSelection;\r\n            this.clearCatcher = options.clearCatcher;\r\n            this.interactivityService = options.interactivityService;\r\n\r\n            this.selection.on('click', (d, i: number) => {\r\n                selectionHandler.handleSelection(d.data, d3.event.ctrlKey);\r\n            });\r\n\r\n            if (this.highlightedSelection)\r\n                this.highlightedSelection.on('click', (d, i: number) => {\r\n                    selectionHandler.handleSelection(d.data, d3.event.ctrlKey);\r\n                });\r\n\r\n            this.clearCatcher.on('click', () => {\r\n                selectionHandler.handleClearSelection();\r\n            });\r\n        }\r\n\r\n        public renderSelection(hasSelection: boolean) {\r\n            let hasHighlights = this.interactivityService.hasSelection();\r\n            this.selection.style(\"fill-opacity\", (d) => {\r\n                return ColumnUtil.getFillOpacity(d.data.selected, d.data.highlight, !d.data.highlight && hasSelection, !d.data.selected && hasHighlights);\r\n            });\r\n        }\r\n    }\r\n\r\n    export class AsterPlotWarning implements IVisualWarning {\r\n        private message: string;\r\n        constructor(message: string) {\r\n            this.message = message;\r\n        }\r\n\r\n        public get code(): string {\r\n            return \"AsterPlotWarning\";\r\n        }\r\n\r\n        public getMessages(resourceProvider: jsCommon.IStringResourceProvider): IVisualErrorMessage {\r\n            return {\r\n                message: this.message,\r\n                title: resourceProvider.get(\"\"),\r\n                detail: resourceProvider.get(\"\")\r\n            };\r\n        }\r\n    }\r\n\r\n    export class AsterPlot implements IVisual {\r\n        public static capabilities: VisualCapabilities = {\r\n            dataRoles: [\r\n                {\r\n                    displayName: 'Category',\r\n                    name: 'Category',\r\n                    kind: powerbi.VisualDataRoleKind.Grouping,\r\n                },\r\n                {\r\n                    displayName: 'Y Axis',\r\n                    name: 'Y',\r\n                    kind: powerbi.VisualDataRoleKind.Measure,\r\n                },\r\n            ],\r\n            dataViewMappings: [{\r\n                conditions: [\r\n                    { 'Category': { max: 1 }, 'Y': { max: 2 } }\r\n                ],\r\n                categorical: {\r\n                    categories: {\r\n                        for: { in: 'Category' },\r\n                        dataReductionAlgorithm: { top: {} }\r\n                    },\r\n                    values: {\r\n                        select: [{ bind: { to: 'Y' } }]\r\n                    },\r\n                }\r\n            }],\r\n            objects: {\r\n                general: {\r\n                    displayName: data.createDisplayNameGetter('Visual_General'),\r\n                    properties: {\r\n                        formatString: {\r\n                            type: { formatting: { formatString: true } },\r\n                        },\r\n                    },\r\n                },\r\n                legend: {\r\n                    displayName: 'Legend',\r\n                    description: 'Display legend options',\r\n                    properties: {\r\n                        show: {\r\n                            displayName: 'Show',\r\n                            type: { bool: true }\r\n                        },\r\n                        position: {\r\n                            displayName: 'Position',\r\n                            description: 'Select the location for the legend',\r\n                            type: { enumeration: legendPosition.type }\r\n                        },\r\n                        showTitle: {\r\n                            displayName: 'Title',\r\n                            description: 'Display a title for legend symbols',\r\n                            type: { bool: true }\r\n                        },\r\n                        titleText: {\r\n                            displayName: 'Legend Name',\r\n                            description: 'Title text',\r\n                            type: { text: true },\r\n                            suppressFormatPainterCopy: true\r\n                        },\r\n                        labelColor: {\r\n                            displayName: 'Color',\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        fontSize: {\r\n                            displayName: 'Text Size',\r\n                            type: { formatting: { fontSize: true } }\r\n                        }\r\n                    }\r\n                },\r\n                label: {\r\n                    displayName: 'Center Label',\r\n                    properties: {\r\n                        fill: {\r\n                            displayName: 'Fill',\r\n                            type: { fill: { solid: { color: true } } }\r\n                        }\r\n                    }\r\n                },\r\n                labels: {\r\n                    displayName: 'Detail Labels',\r\n                    properties: {\r\n                        show: {\r\n                            type: { bool: true }\r\n                        },\r\n                        color: {\r\n                            displayName: 'Color',\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        labelDisplayUnits: {\r\n                            displayName: 'Display Units',\r\n                            type: { formatting: { labelDisplayUnits: true } },\r\n                        },\r\n                        labelPrecision: {\r\n                            displayName: 'Decimal Places',\r\n                            placeHolderText: 'Auto',\r\n                            type: { numeric: true },\r\n                        },\r\n                        fontSize: {\r\n                            displayName: 'Text Size',\r\n                            type: { formatting: { fontSize: true } },\r\n                        },\r\n                    },\r\n                },\r\n                outerLine: {\r\n                    displayName: 'Outer line',\r\n                    properties: {\r\n                        show: {\r\n                            displayName: 'Show',\r\n                            type: { bool: true }\r\n                        },\r\n                        thickness: {\r\n                            displayName: 'Thickness',\r\n                            type: { numeric: true }\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            supportsHighlight: true,\r\n        };\r\n\r\n        private static Properties: any = {\r\n            general: {\r\n                formatString: <DataViewObjectPropertyIdentifier>{ objectName: 'general', propertyName: 'formatString' },\r\n            },\r\n            dataPoint: {\r\n                fill: <DataViewObjectPropertyIdentifier>{ objectName: 'dataPoint', propertyName: 'fill' },\r\n            },\r\n            legend: {\r\n                show: <DataViewObjectPropertyIdentifier>{ objectName: AsterPlotLegendObjectName, propertyName: 'show' },\r\n                position: <DataViewObjectPropertyIdentifier>{ objectName: AsterPlotLegendObjectName, propertyName: 'position' },\r\n                showTitle: <DataViewObjectPropertyIdentifier>{ objectName: AsterPlotLegendObjectName, propertyName: 'showTitle' },\r\n                titleText: <DataViewObjectPropertyIdentifier>{ objectName: AsterPlotLegendObjectName, propertyName: 'titleText' },\r\n                labelColor: <DataViewObjectPropertyIdentifier>{ objectName: AsterPlotLegendObjectName, propertyName: 'labelColor' },\r\n                fontSize: <DataViewObjectPropertyIdentifier>{ objectName: AsterPlotLegendObjectName, propertyName: 'fontSize' },\r\n            },\r\n            label: {\r\n                fill: <DataViewObjectPropertyIdentifier>{ objectName: 'label', propertyName: 'fill' },\r\n            },\r\n            labels: {\r\n                show: <DataViewObjectPropertyIdentifier>{ objectName: 'labels', propertyName: 'show' },\r\n                color: <DataViewObjectPropertyIdentifier>{ objectName: 'labels', propertyName: 'color' },\r\n                labelDisplayUnits: <DataViewObjectPropertyIdentifier>{ objectName: 'labels', propertyName: 'labelDisplayUnits' },\r\n                labelPrecision: <DataViewObjectPropertyIdentifier>{ objectName: 'labels', propertyName: 'labelPrecision' },\r\n                fontSize: <DataViewObjectPropertyIdentifier>{ objectName: 'labels', propertyName: 'fontSize' },\r\n            },\r\n            outerLine: {\r\n                show: <DataViewObjectPropertyIdentifier>{ objectName: 'outerLine', propertyName: 'show' },\r\n                thickness: <DataViewObjectPropertyIdentifier>{ objectName: 'outerLine', propertyName: 'thickness' },\r\n            }\r\n        };\r\n\r\n        private static AsterSlice: ClassAndSelector = createClassAndSelector('asterSlice');\r\n        private static AsterHighlightedSlice: ClassAndSelector = createClassAndSelector('asterHighlightedSlice');\r\n        private static OuterLine: ClassAndSelector = createClassAndSelector('outerLine');\r\n        private static labelGraphicsContextClass: ClassAndSelector = createClassAndSelector('labels');\r\n        private static linesGraphicsContextClass: ClassAndSelector = createClassAndSelector('lines');\r\n        private static CenterLabelClass: ClassAndSelector = createClassAndSelector('centerLabel');\r\n        private static CenterTextFontHeightCoefficient = 0.4;\r\n        private static CenterTextFontWidthCoefficient = 1.9;\r\n\r\n        private margin: IMargin = {\r\n            top: 10,\r\n            right: 10,\r\n            bottom: 15,\r\n            left: 10\r\n        };\r\n\r\n        private svg: D3.Selection;\r\n        private mainGroupElement: D3.Selection;\r\n        private mainLabelsElement: D3.Selection;\r\n        private centerText: D3.Selection;\r\n        private clearCatcher: D3.Selection;\r\n        private colors: IDataColorPalette;\r\n        private dataView: DataView;\r\n        private hostService: IVisualHostServices;\r\n        private interactivityService: IInteractivityService;\r\n        private legend: ILegend;\r\n        private data: AsterData;\r\n        private currentViewport: IViewport;\r\n        private behavior: IInteractiveBehavior;\r\n        private hasHighlights: boolean;\r\n\r\n        private getDefaultAsterData(): AsterData {\r\n            return <AsterData>{\r\n                dataPoints: [],\r\n                highlightedDataPoints: [],\r\n                legendData: <LegendData>{\r\n                    dataPoints: [],\r\n                    title: null,\r\n                    fontSize: AsterDefaultLegendFontSize,\r\n                    labelColor: LegendData.DefaultLegendLabelFillColor\r\n                },\r\n                legendSettings: {\r\n                    show: false,\r\n                    position: 'Top',\r\n                    showTitle: true,\r\n                    labelColor: LegendData.DefaultLegendLabelFillColor,\r\n                    titleText: '',\r\n                    fontSize: AsterDefaultLegendFontSize,\r\n                },\r\n                valueFormatter: null,\r\n                labelSettings: {\r\n                    show: false,\r\n                    displayUnits: 0,\r\n                    precision: dataLabelUtils.defaultLabelPrecision,\r\n                    labelColor: dataLabelUtils.defaultLabelColor,\r\n                    fontSize: dataLabelUtils.DefaultFontSizeInPt,\r\n                },\r\n                showOuterLine: false,\r\n                outerLineThickness: AsterDefaultOuterLineThickness,\r\n            };\r\n        }\r\n\r\n        public converter(dataView: DataView, colors: IDataColorPalette): AsterData {\r\n            let asterDataResult: AsterData = this.getDefaultAsterData();\r\n            if (!this.dataViewContainsCategory(dataView) || dataView.categorical.categories.length !== 1)\r\n                return asterDataResult;\r\n\r\n            let catDv: DataViewCategorical = dataView.categorical;\r\n            let cat = catDv.categories[0];\r\n            let catSource = cat.source;\r\n            let catValues = cat.values;\r\n            let values = catDv.values;\r\n            let catObjects: DataViewObjects[] = cat.objects;\r\n            let colorHelper: ColorHelper = new ColorHelper(colors, AsterPlot.Properties.dataPoint.fill);\r\n\r\n            let hasHighlights: boolean = this.hasHighlights = !!(values && values.length > 0 && values[0].highlights);\r\n\r\n            if (dataView.metadata || dataView.metadata.objects) {\r\n                let objects: DataViewObjects = dataView.metadata.objects;\r\n                asterDataResult.labelSettings = this.getLabelSettings(objects, asterDataResult.labelSettings);\r\n                this.updateLegendSettings(objects, catSource, asterDataResult.legendSettings);\r\n                asterDataResult.showOuterLine = DataViewObjects.getValue<boolean>(objects, AsterPlot.Properties.outerLine.show, asterDataResult.showOuterLine);\r\n                asterDataResult.outerLineThickness = DataViewObjects.getValue<number>(objects, AsterPlot.Properties.outerLine.thickness, AsterDefaultOuterLineThickness);\r\n            }\r\n\r\n            let labelSettings: VisualDataLabelsSettings = asterDataResult.labelSettings;\r\n            if (!catValues || catValues.length < 1 || !values || values.length < 1)\r\n                return asterDataResult;\r\n\r\n            let formatStringProp = AsterPlot.Properties.general.formatString;\r\n            let maxValue: number = Math.max(d3.min(values[0].values));\r\n            let minValue: number = Math.min(0, d3.min(values[0].values));\r\n            let labelFormatter: IValueFormatter = ValueFormatter.create({\r\n                format: ValueFormatter.getFormatString(values[0].source, formatStringProp),\r\n                precision: labelSettings.precision,\r\n                value: (labelSettings.displayUnits === 0) && (maxValue != null) ? maxValue : labelSettings.displayUnits,\r\n            });\r\n            let categorySourceFormatString = valueFormatter.getFormatString(catSource, formatStringProp);\r\n            let fontSizeInPx: string = PixelConverter.fromPoint(labelSettings.fontSize);\r\n\r\n            for (let i = 0; i < catValues.length; i++) {\r\n                let formattedCategoryValue = valueFormatter.format(catValues[i], categorySourceFormatString);\r\n                let currentValue = values[0].values[i];\r\n\r\n                let tooltipInfo: TooltipDataItem[] = TooltipBuilder.createTooltipInfo(\r\n                    formatStringProp,\r\n                    catDv,\r\n                    formattedCategoryValue,\r\n                    currentValue,\r\n                    null,\r\n                    null,\r\n                    0);\r\n\r\n                if (values.length > 1) {\r\n                    let toolTip: TooltipDataItem = TooltipBuilder.createTooltipInfo(\r\n                        formatStringProp,\r\n                        catDv,\r\n                        formattedCategoryValue,\r\n                        values[1].values[i],\r\n                        null,\r\n                        null,\r\n                        1)[1];\r\n                    if (toolTip)\r\n                        tooltipInfo.push(toolTip);\r\n\r\n                    currentValue += values[1].values[i];\r\n                }\r\n\r\n                let identity: DataViewScopeIdentity = cat.identity[i];\r\n                let color: string = colorHelper.getColorForMeasure(catObjects && catObjects[i], identity.key);\r\n                let selector: SelectionId = SelectionId.createWithId(identity);\r\n                let sliceWidth: number = Math.max(0, values.length > 1 ? values[1].values[i] : 1);\r\n\r\n                asterDataResult.dataPoints.push({\r\n                    sliceHeight: values[0].values[i] - minValue,\r\n                    sliceWidth: sliceWidth,\r\n                    label: labelFormatter.format(currentValue),\r\n                    color: color,\r\n                    identity: selector,\r\n                    selected: false,\r\n                    tooltipInfo: tooltipInfo,\r\n                    labelFontSize: fontSizeInPx,\r\n                    highlight: false,\r\n                });\r\n                \r\n                // Handle legend data\r\n                if (asterDataResult.legendSettings.show)\r\n                    asterDataResult.legendData.dataPoints.push({\r\n                        label: catValues[i],\r\n                        color: color,\r\n                        icon: LegendIcon.Box,\r\n                        selected: false,\r\n                        identity: selector\r\n                    });\r\n                \r\n                // Handle highlights\r\n                if (hasHighlights) {\r\n                    let highlightIdentity: SelectionId = SelectionId.createWithHighlight(selector);\r\n                    let notNull: boolean = values[0].highlights[i] != null;\r\n                    currentValue = notNull ? values[0].highlights[i] : 0;\r\n\r\n                    tooltipInfo = TooltipBuilder.createTooltipInfo(\r\n                        formatStringProp,\r\n                        catDv,\r\n                        formattedCategoryValue,\r\n                        currentValue,\r\n                        null,\r\n                        null,\r\n                        0);\r\n\r\n                    if (values.length > 1) {\r\n                        let toolTip: TooltipDataItem = TooltipBuilder.createTooltipInfo(\r\n                            formatStringProp,\r\n                            catDv,\r\n                            formattedCategoryValue,\r\n                            values[1].highlights[i],\r\n                            null,\r\n                            null,\r\n                            1)[1];\r\n                        if (toolTip)\r\n                            tooltipInfo.push(toolTip);\r\n\r\n                        currentValue += values[1].highlights[i] !== null ? values[1].highlights[i] : 0;\r\n                    }\r\n\r\n                    asterDataResult.highlightedDataPoints.push({\r\n                        sliceHeight: notNull ? values[0].highlights[i] - minValue : null,\r\n                        sliceWidth: Math.max(0, (values.length > 1 && values[1].highlights[i] !== null) ? values[1].highlights[i] : sliceWidth),\r\n                        label: labelFormatter.format(currentValue),\r\n                        color: color,\r\n                        identity: highlightIdentity,\r\n                        selected: false,\r\n                        tooltipInfo: tooltipInfo,\r\n                        labelFontSize: fontSizeInPx,\r\n                        highlight: true,\r\n                    });\r\n                }\r\n            }\r\n\r\n            return asterDataResult;\r\n        }\r\n\r\n        private dataViewContainsCategory(dataView: DataView) {\r\n            return dataView &&\r\n                dataView.categorical &&\r\n                dataView.categorical.values &&\r\n                dataView.categorical.categories &&\r\n                dataView.categorical.categories[0];\r\n        }\r\n\r\n        private getLabelSettings(objects: DataViewObjects, labelSettings: VisualDataLabelsSettings): VisualDataLabelsSettings {\r\n            let asterPlotLabelsProperties = AsterPlot.Properties;\r\n            let precision = DataViewObjects.getValue<number>(objects, asterPlotLabelsProperties.labels.labelPrecision, labelSettings.precision);\r\n            labelSettings.precision = precision === undefined ? precision : Math.min(precision, MaxPrecision);\r\n            labelSettings.show = DataViewObjects.getValue<boolean>(objects, asterPlotLabelsProperties.labels.show, labelSettings.show);\r\n            labelSettings.fontSize = DataViewObjects.getValue<number>(objects, asterPlotLabelsProperties.labels.fontSize, labelSettings.fontSize);\r\n            labelSettings.displayUnits = DataViewObjects.getValue<number>(objects, asterPlotLabelsProperties.labels.labelDisplayUnits, labelSettings.displayUnits);\r\n            let colorHelper: ColorHelper = new ColorHelper(this.colors, asterPlotLabelsProperties.labels.color, labelSettings.labelColor);\r\n            labelSettings.labelColor = colorHelper.getColorForMeasure(objects, \"\");\r\n\r\n            return labelSettings;\r\n        }\r\n\r\n        private updateLegendSettings(objects: DataViewObjects, catSource: DataViewMetadataColumn, legendSettings: AsterPlotLegendSettings): void {\r\n            let legendProperties = AsterPlot.Properties.legend;\r\n\r\n            legendSettings.show = DataViewObjects.getValue<boolean>(objects, legendProperties.show, legendSettings.show);\r\n            legendSettings.position = DataViewObjects.getValue<string>(objects, legendProperties.position, legendSettings.position);\r\n            legendSettings.showTitle = DataViewObjects.getValue<boolean>(objects, legendProperties.showTitle, legendSettings.showTitle);\r\n            let titleText = DataViewObjects.getValue<string>(objects, legendProperties.titleText, '');\r\n            legendSettings.titleText = _.isEmpty(titleText) && catSource ? catSource.displayName : titleText;\r\n            legendSettings.labelColor = <string>DataViewObjects.getFillColor(objects, legendProperties.labelColor, legendSettings.labelColor);\r\n            legendSettings.fontSize = DataViewObjects.getValue<number>(objects, legendProperties.fontSize, legendSettings.fontSize);\r\n        }\r\n\r\n        public init(options: VisualInitOptions): void {\r\n            this.hostService = options.host;\r\n            let element: JQuery = options.element;\r\n            let svg: D3.Selection = this.svg = d3.select(element.get(0))\r\n                .append('svg')\r\n                .classed(AsterPlotVisualClassName, true)\r\n                .style('position', 'absolute');\r\n\r\n            this.colors = options.style.colorPalette.dataColors;\r\n            this.mainGroupElement = svg.append('g');\r\n            this.mainLabelsElement = svg.append('g');\r\n            this.behavior = new AsterPlotWebBehavior();\r\n            this.clearCatcher = appendClearCatcher(this.mainGroupElement);\r\n            let interactivity = options.interactivity;\r\n            this.interactivityService = createInteractivityService(this.hostService);\r\n            this.legend = createLegend(element, interactivity && interactivity.isInteractiveLegend, this.interactivityService, true);\r\n        }\r\n\r\n        public update(options: VisualUpdateOptions) {\r\n            if (!options.dataViews || !options.dataViews[0]) return; // or clear the view, display an error, etc.\r\n\r\n            let duration = options.suppressAnimations ? 0 : AnimatorCommon.MinervaAnimationDuration;\r\n\r\n            this.currentViewport = {\r\n                height: Math.max(0, options.viewport.height),\r\n                width: Math.max(0, options.viewport.width)\r\n            };\r\n\r\n            let dataView: DataView = this.dataView = options.dataViews[0];\r\n            let convertedData: AsterData = this.data = this.converter(dataView, this.colors);\r\n\r\n            if (!convertedData || !convertedData.dataPoints || convertedData.dataPoints.length === 0) {\r\n                this.clearData();\r\n                return;\r\n            }\r\n\r\n            if (this.interactivityService) {\r\n                this.interactivityService.applySelectionStateToData(convertedData.dataPoints);\r\n                this.interactivityService.applySelectionStateToData(convertedData.highlightedDataPoints);\r\n            }\r\n\r\n            this.renderLegend(convertedData);\r\n            this.updateViewPortAccordingToLegend();\r\n\r\n            this.svg\r\n                .attr({\r\n                    height: Math.max(0, this.currentViewport.height),\r\n                    width: Math.max(0, this.currentViewport.width)\r\n                });\r\n\r\n            let margin: IMargin = this.margin;\r\n            let transformX: number = (this.currentViewport.width - margin.left) / 2;\r\n            let transformY: number = (this.currentViewport.height - margin.top) / 2;\r\n            this.mainGroupElement.attr('transform', SVGUtil.translate(transformX, transformY));\r\n            this.mainLabelsElement.attr('transform', SVGUtil.translate(transformX, transformY));\r\n            \r\n            // Move back the clearCatcher\r\n            this.clearCatcher.attr('transform', SVGUtil.translate(-transformX, -transformY));\r\n            \r\n            // Clear previous data\r\n            this.mainGroupElement.selectAll(AsterPlot.AsterSlice.selector).remove();\r\n            this.mainGroupElement.selectAll(AsterPlot.AsterHighlightedSlice.selector).remove();\r\n            dataLabelUtils.cleanDataLabels(this.mainLabelsElement, true);\r\n\r\n            let dataPoints = convertedData.dataPoints;\r\n            if (!dataPoints || dataPoints.length === 0)\r\n                return;\r\n\r\n            let selection: D3.UpdateSelection = this.renderArcsAndLabels(dataPoints, duration, convertedData.labelSettings);\r\n            let highlightedSelection: D3.UpdateSelection;\r\n\r\n            if (this.hasHighlights)\r\n                highlightedSelection = this.renderArcsAndLabels(convertedData.highlightedDataPoints, duration, convertedData.labelSettings, true);\r\n\r\n            let interactivityService = this.interactivityService;\r\n\r\n            if (interactivityService) {\r\n                let behaviorOptions: AsterPlotBehaviorOptions = {\r\n                    selection: selection,\r\n                    highlightedSelection: highlightedSelection,\r\n                    clearCatcher: this.clearCatcher,\r\n                    interactivityService: this.interactivityService,\r\n                };\r\n                interactivityService.bind(convertedData.dataPoints.concat(convertedData.highlightedDataPoints), this.behavior, behaviorOptions);\r\n            }\r\n        }\r\n\r\n        private renderArcsAndLabels(dataPoints: AsterDataPoint[], duration: number, labelSettings: VisualDataLabelsSettings, isHighlight: boolean = false): D3.UpdateSelection {\r\n            let margin: IMargin = this.margin;\r\n            let width: number = this.currentViewport.width - margin.left - margin.right;\r\n            let height: number = this.currentViewport.height - margin.top - margin.bottom;\r\n            let radius: number = Math.min(width, height) / 2;\r\n            let innerRadius: number = 0.3 * (labelSettings.show ? radius * AsterRadiusRatio : radius);\r\n            let maxScore: number = d3.max(dataPoints, d => d.sliceHeight);\r\n            let totalWeight: number = d3.sum(dataPoints, d => d.sliceWidth);\r\n            let hasSelection: boolean = this.interactivityService && this.interactivityService.hasSelection();\r\n            let hasHighlights: boolean = this.hasHighlights;\r\n\r\n            let pie: D3.Layout.PieLayout = d3.layout.pie()\r\n                .sort(null)\r\n                .value(d => (d && !isNaN(d.sliceWidth) ? d.sliceWidth : 0) / totalWeight);\r\n\r\n            let arc: D3.Svg.Arc = d3.svg.arc()\r\n                .innerRadius(innerRadius)\r\n                .outerRadius(d => {\r\n                    let height: number = (radius - innerRadius) * (d && d.data && !isNaN(d.data.sliceHeight) ? d.data.sliceHeight : 1) / maxScore;\r\n                    //The chart should shrink if data labels are on\r\n                    let heightIsLabelsOn = innerRadius + (labelSettings.show ? height * AsterRadiusRatio : height);\r\n                    // Prevent from data to be inside the inner radius\r\n                    return Math.max(heightIsLabelsOn, innerRadius);\r\n                });\r\n\r\n            let arcDescriptorDataPoints: ArcDescriptor[] = pie(dataPoints);\r\n            let classSelector: ClassAndSelector = isHighlight ? AsterPlot.AsterHighlightedSlice : AsterPlot.AsterSlice;\r\n\r\n            let selection = this.mainGroupElement.selectAll(classSelector.selector)\r\n                .data(arcDescriptorDataPoints, (d, idx) => d.data ? d.data.identity.getKey() : idx);\r\n\r\n            selection.enter()\r\n                .append('path')\r\n                .attr('stroke', '#333')\r\n                .classed(classSelector.class, true);\r\n\r\n            selection\r\n                .attr('fill', d => d.data.color)\r\n                .style(\"fill-opacity\", (d) => ColumnUtil.getFillOpacity(d.data.selected, d.data.highlight, hasSelection, hasHighlights))\r\n                .transition().duration(duration)\r\n                .attrTween('d', function (data) {\r\n                    if (!this.oldData) {\r\n                        this.oldData = data;\r\n                        return () => arc(data);\r\n                    }\r\n\r\n                    let interpolation = d3.interpolate(this.oldData, data);\r\n                    this.oldData = interpolation(0);\r\n                    return (x) => arc(interpolation(x));\r\n                });\r\n\r\n            selection\r\n                .exit()\r\n                .remove();\r\n\r\n            TooltipManager.addTooltip(selection, (tooltipEvent: TooltipEvent) => tooltipEvent.data.data.tooltipInfo);\r\n            \r\n            // Draw data labels only if they are on and there are no highlights or there are highlights and this is the highlighted data labels\r\n            if (labelSettings.show && (!hasHighlights || (hasHighlights && isHighlight))) {\r\n                let labelRadCalc = (d: AsterDataPoint) => {\r\n                    let height: number = radius * (d && !isNaN(d.sliceHeight) ? d.sliceHeight : 1) / maxScore + innerRadius;\r\n                    return Math.max(height, innerRadius);\r\n                };\r\n                let labelArc = d3.svg.arc()\r\n                    .innerRadius(d => labelRadCalc(d.data))\r\n                    .outerRadius(d => labelRadCalc(d.data));\r\n\r\n                let lineRadCalc = (d: AsterDataPoint) => {\r\n                    let height: number = (radius - innerRadius) * (d && !isNaN(d.sliceHeight) ? d.sliceHeight : 1) / maxScore;\r\n                    height = innerRadius + height * AsterRadiusRatio;\r\n                    return Math.max(height, innerRadius);\r\n                };\r\n                let outlineArc = d3.svg.arc()\r\n                    .innerRadius(d => lineRadCalc(d.data))\r\n                    .outerRadius(d => lineRadCalc(d.data));\r\n\r\n                let layout = this.getLabelLayout(labelSettings, labelArc, this.currentViewport);\r\n                this.drawLabels(arcDescriptorDataPoints, this.mainLabelsElement, layout, this.currentViewport, outlineArc, labelArc);\r\n            }\r\n            else\r\n                dataLabelUtils.cleanDataLabels(this.mainLabelsElement, true);\r\n            \r\n            // Draw center text and outline once for original data points\r\n            if (!isHighlight) {\r\n                this.drawCenterText(innerRadius);\r\n                this.drawOuterLine(innerRadius, radius, arcDescriptorDataPoints);\r\n            }\r\n\r\n            return selection;\r\n        }\r\n\r\n        private getLabelLayout(labelSettings: VisualDataLabelsSettings, arc: D3.Svg.Arc, viewport: IViewport): ILabelLayout {\r\n            let midAngle = function (d: ArcDescriptor) { return d.startAngle + (d.endAngle - d.startAngle) / 2; };\r\n            let textProperties: TextProperties = {\r\n                fontFamily: dataLabelUtils.StandardFontFamily,\r\n                fontSize: PixelConverter.fromPoint(labelSettings.fontSize),\r\n                text: '',\r\n            };\r\n            let isLabelsHasConflict = function (d: AsterArcDescriptor) {\r\n                let pos = arc.centroid(d);\r\n                textProperties.text = d.data.label;\r\n                let textWidth = TextMeasurementService.measureSvgTextWidth(textProperties);\r\n                let horizontalSpaceAvaliableForLabels = viewport.width / 2 - Math.abs(pos[0]);\r\n                let textHeight = TextMeasurementService.estimateSvgTextHeight(textProperties);\r\n                let verticalSpaceAvaliableForLabels = viewport.height / 2 - Math.abs(pos[1]);\r\n                d.isLabelHasConflict = textWidth > horizontalSpaceAvaliableForLabels || textHeight > verticalSpaceAvaliableForLabels;\r\n                return d.isLabelHasConflict;\r\n            };\r\n\r\n            return {\r\n                labelText: (d: AsterArcDescriptor) => {\r\n                    textProperties.text = d.data.label;\r\n                    let pos = arc.centroid(d);\r\n                    let xPos = isLabelsHasConflict(d) ? pos[0] * AsterConflictRatio : pos[0];\r\n                    let spaceAvaliableForLabels = viewport.width / 2 - Math.abs(xPos);\r\n                    return TextMeasurementService.getTailoredTextOrDefault(textProperties, spaceAvaliableForLabels);\r\n                },\r\n                labelLayout: {\r\n                    x: (d: AsterArcDescriptor) => {\r\n                        let pos = arc.centroid(d);\r\n                        textProperties.text = d.data.label;\r\n                        let xPos = d.isLabelHasConflict ? pos[0] * AsterConflictRatio : pos[0];\r\n                        return xPos;\r\n                    },\r\n                    y: (d: AsterArcDescriptor) => {\r\n                        let pos = arc.centroid(d);\r\n                        let yPos = d.isLabelHasConflict ? pos[1] * AsterConflictRatio : pos[1];\r\n                        return yPos;\r\n                    },\r\n                },\r\n                filter: (d: AsterArcDescriptor) => (d != null && !_.isEmpty(d.data.label)),\r\n                style: {\r\n                    'fill': labelSettings.labelColor,\r\n                    'font-size': textProperties.fontSize,\r\n                    'text-anchor': (d: AsterArcDescriptor) => midAngle(d) < Math.PI ? 'start' : 'end',\r\n                },\r\n            };\r\n        }\r\n\r\n        private drawLabels(data: ArcDescriptor[],\r\n            context: D3.Selection,\r\n            layout: ILabelLayout,\r\n            viewport: IViewport,\r\n            outlineArc: D3.Svg.Arc,\r\n            labelArc: D3.Svg.Arc): void {\r\n            \r\n            // Hide and reposition labels that overlap\r\n            let dataLabelManager = new DataLabelManager();\r\n            let filteredData = dataLabelManager.hideCollidedLabels(viewport, data, layout, true /* addTransform */);\r\n\r\n            if (filteredData.length === 0) {\r\n                dataLabelUtils.cleanDataLabels(context, true);\r\n                return;\r\n            }\r\n            \r\n            // Draw labels\r\n            if (context.select(AsterPlot.labelGraphicsContextClass.selector).empty())\r\n                context.append('g').classed(AsterPlot.labelGraphicsContextClass.class, true);\r\n\r\n            let labels = context\r\n                .select(AsterPlot.labelGraphicsContextClass.selector)\r\n                .selectAll('.data-labels').data(filteredData, (d: ArcDescriptor) => d.data.identity.getKey());\r\n\r\n            labels.enter().append('text').classed('data-labels', true);\r\n\r\n            if (!labels)\r\n                return;\r\n\r\n            labels\r\n                .attr({ x: (d: LabelEnabledDataPoint) => d.labelX, y: (d: LabelEnabledDataPoint) => d.labelY, dy: '.35em' })\r\n                .text((d: LabelEnabledDataPoint) => d.labeltext)\r\n                .style(layout.style);\r\n\r\n            labels\r\n                .exit()\r\n                .remove();\r\n                \r\n            // Draw lines\r\n            if (context.select(AsterPlot.linesGraphicsContextClass.selector).empty())\r\n                context.append('g').classed(AsterPlot.linesGraphicsContextClass.class, true);\r\n\t\t\t\t\r\n            // Remove lines for null and zero values\r\n            filteredData = _.filter(filteredData, (d: ArcDescriptor) => d.data.sliceHeight !== null && d.data.sliceHeight !== 0);\r\n\r\n            let lines = context.select(AsterPlot.linesGraphicsContextClass.selector).selectAll('polyline')\r\n                .data(filteredData, (d: ArcDescriptor) => d.data.identity.getKey());\r\n\r\n            let labelLinePadding = 4;\r\n            let chartLinePadding = 1.02;\r\n\r\n            let midAngle = function (d: ArcDescriptor) { return d.startAngle + (d.endAngle - d.startAngle) / 2; };\r\n\r\n            lines.enter()\r\n                .append('polyline')\r\n                .classed('line-label', true);\r\n\r\n            lines\r\n                .attr('points', function (d) {\r\n                    let textPoint = [d.labelX, d.labelY];\r\n                    textPoint[0] = textPoint[0] + ((midAngle(d) < Math.PI ? -1 : 1) * labelLinePadding);\r\n                    let chartPoint = outlineArc.centroid(d);\r\n                    chartPoint[0] *= chartLinePadding;\r\n                    chartPoint[1] *= chartLinePadding;\r\n                    return [chartPoint, textPoint];\r\n                }).\r\n                style({\r\n                    'opacity': 0.5,\r\n                    'fill-opacity': 0,\r\n                    'stroke': (d: ArcDescriptor) => this.data.labelSettings.labelColor,\r\n                });\r\n\r\n            lines\r\n                .exit()\r\n                .remove();\r\n\r\n        }\r\n\r\n        private renderLegend(asterPlotData: AsterData): void {\r\n            if (!asterPlotData || !asterPlotData.legendData)\r\n                return;\r\n\r\n            let legendData: LegendData = asterPlotData.legendData;\r\n            let objects: DataViewObjects = this.dataView && this.dataView.metadata ? this.dataView.metadata.objects : null;\r\n            let legendObjectProperties: DataViewObject = DataViewObjects.getObject(objects, AsterPlotLegendObjectName, {});\r\n            if (legendObjectProperties) {\r\n                let legendSettings = asterPlotData.legendSettings;\r\n                \r\n                // Force update for title text\r\n                legendObjectProperties['titleText'] = legendSettings.titleText;\r\n                LegendData.update(legendData, legendObjectProperties);\r\n                this.legend.changeOrientation(LegendPosition[legendSettings.position]);\r\n            }\r\n\r\n            this.legend.drawLegend(legendData, _.clone(this.currentViewport));\r\n            Legend.positionChartArea(this.svg, this.legend);\r\n        }\r\n\r\n        private updateViewPortAccordingToLegend(): void {\r\n            let legendSettings = this.data.legendSettings;\r\n            if (!legendSettings || !legendSettings.show)\r\n                return;\r\n\r\n            let legendMargins: IViewport = this.legend.getMargins();\r\n            let legendPosition: LegendPosition = LegendPosition[legendSettings.position];\r\n\r\n            switch (legendPosition) {\r\n                case LegendPosition.Top:\r\n                case LegendPosition.TopCenter:\r\n                case LegendPosition.Bottom:\r\n                case LegendPosition.BottomCenter: {\r\n                    this.currentViewport.height -= legendMargins.height;\r\n                    break;\r\n                }\r\n                case LegendPosition.Left:\r\n                case LegendPosition.LeftCenter:\r\n                case LegendPosition.Right:\r\n                case LegendPosition.RightCenter: {\r\n                    this.currentViewport.width -= legendMargins.width;\r\n                    break;\r\n                }\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n\r\n        private drawOuterLine(innerRadius: number, radius: number, data: ArcDescriptor[]): void {\r\n            let mainGroup = this.mainGroupElement;\r\n            let outlineArc = d3.svg.arc()\r\n                .innerRadius(innerRadius)\r\n                .outerRadius(radius);\r\n            if (this.data.showOuterLine) {\r\n                let OuterThickness: string = this.data.outerLineThickness + 'px';\r\n                let outerLine = mainGroup.selectAll(AsterPlot.OuterLine.selector).data(data);\r\n                outerLine.enter().append('path');\r\n                outerLine.attr(\"fill\", \"none\")\r\n                    .attr({\r\n                        'stroke': '#333',\r\n                        'stroke-width': OuterThickness,\r\n                        'd': outlineArc\r\n                    })\r\n                    .style('opacity', 1)\r\n                    .classed(AsterPlot.OuterLine.class, true);\r\n                outerLine.exit().remove();\r\n            }\r\n            else\r\n                mainGroup.selectAll(AsterPlot.OuterLine.selector).remove();\r\n        }\r\n\r\n        private getCenterText(dataView: DataView): string {\r\n            if (dataView && dataView.metadata && dataView.metadata.columns && dataView.categorical && dataView.categorical.values)\r\n                for (let column of dataView.metadata.columns)\r\n                    if (!column.isMeasure)\r\n                        return column.displayName;\r\n            return '';\r\n        }\r\n\r\n        private drawCenterText(innerRadius: number): void {\r\n            let text: string = this.getCenterText(this.dataView);\r\n\r\n            if (_.isEmpty(text)) {\r\n                this.mainGroupElement.select(AsterPlot.CenterLabelClass.selector).remove();\r\n                return;\r\n            }\r\n\r\n            let centerTextProperties: TextProperties = {\r\n                fontFamily: dataLabelUtils.StandardFontFamily,\r\n                fontWeight: 'bold',\r\n                fontSize: PixelConverter.toString(innerRadius * AsterPlot.CenterTextFontHeightCoefficient),\r\n                text: text\r\n            };\r\n\r\n            if (this.mainGroupElement.select(AsterPlot.CenterLabelClass.selector).empty())\r\n                this.centerText = this.mainGroupElement.append('text').classed(AsterPlot.CenterLabelClass.class, true);\r\n\r\n            this.centerText\r\n                .style({\r\n                    'line-height': 1,\r\n                    'font-weight': centerTextProperties.fontWeight,\r\n                    'font-size': centerTextProperties.fontSize,\r\n                    'fill': this.getLabelFill(this.dataView).solid.color\r\n                })\r\n                .attr({\r\n                    'dy': '0.35em',\r\n                    'text-anchor': 'middle'\r\n                })\r\n                .text(TextMeasurementService.getTailoredTextOrDefault(centerTextProperties, innerRadius * AsterPlot.CenterTextFontWidthCoefficient));\r\n        }\r\n\r\n        // This extracts fill color of the label from the DataView\r\n        private getLabelFill(dataView: DataView): Fill {\r\n            if (this.dataViewContainsObjects(dataView))\r\n                return DataViewObjects.getValue(dataView.metadata.objects, AsterPlot.Properties.label.fill, AsterDefaultLabelFill);\r\n\r\n            return AsterDefaultLabelFill;\r\n        }\r\n\r\n        private dataViewContainsObjects(dataView: DataView) {\r\n            return dataView && dataView.metadata && dataView.metadata.objects;\r\n        }\r\n\r\n        private enumerateLegend(instances: VisualObjectInstance[]) {\r\n            let legendSettings: AsterPlotLegendSettings = this.data.legendSettings;\r\n            let instance: VisualObjectInstance = {\r\n                selector: null,\r\n                objectName: AsterPlotLegendObjectName,\r\n                displayName: 'Legend',\r\n                properties: {\r\n                    show: legendSettings.show,\r\n                    position: legendSettings.position,\r\n                    showTitle: legendSettings.showTitle,\r\n                    titleText: legendSettings.titleText,\r\n                    labelColor: legendSettings.labelColor,\r\n                    fontSize: legendSettings.fontSize,\r\n                }\r\n            };\r\n\r\n            instances.push(instance);\r\n        }\r\n\r\n        private clearData(): void {\r\n            this.mainGroupElement.selectAll(\"path\").remove();\r\n            dataLabelUtils.cleanDataLabels(this.mainLabelsElement, true);\r\n            this.legend.drawLegend({ dataPoints: [] }, this.currentViewport);\r\n        }\r\n\r\n        public onClearSelection(): void {\r\n            if (this.interactivityService)\r\n                this.interactivityService.clearSelection();\r\n        }\r\n\r\n        private enumerateLabels(instances: VisualObjectInstance[]): void {\r\n            let labelSettings = this.data.labelSettings;\r\n            let labels: VisualObjectInstance = {\r\n                objectName: 'labels',\r\n                displayName: 'Labels',\r\n                selector: null,\r\n                properties: {\r\n                    show: labelSettings.show,\r\n                    fontSize: labelSettings.fontSize,\r\n                    labelPrecision: labelSettings.precision,\r\n                    labelDisplayUnits: labelSettings.displayUnits,\r\n                    color: labelSettings.labelColor,\r\n                }\r\n            };\r\n            instances.push(labels);\r\n        }\r\n        \r\n        // This function retruns the values to be displayed in the property pane for each object.\r\n        // Usually it is a bind pass of what the property pane gave you, but sometimes you may want to do\r\n        // validation and return other values/defaults\r\n        public enumerateObjectInstances(options: EnumerateVisualObjectInstancesOptions): VisualObjectInstance[] {\r\n            let instances: VisualObjectInstance[] = [];\r\n            if (!this.dataViewContainsCategory(this.dataView))\r\n                return instances;\r\n            switch (options.objectName) {\r\n                case AsterPlotLegendObjectName:\r\n                    if (this.data)\r\n                        this.enumerateLegend(instances);\r\n                    break;\r\n                case 'label':\r\n                    let label: VisualObjectInstance = {\r\n                        objectName: 'label',\r\n                        displayName: 'Label',\r\n                        selector: null,\r\n                        properties: {\r\n                            fill: this.getLabelFill(this.dataView)\r\n                        }\r\n                    };\r\n                    instances.push(label);\r\n                    break;\r\n                case 'labels':\r\n                    this.enumerateLabels(instances);\r\n                    break;\r\n                case 'outerLine':\r\n                    let outerLine: VisualObjectInstance = {\r\n                        objectName: 'outerLine',\r\n                        displayName: 'Outer Line',\r\n                        selector: null,\r\n                        properties: {\r\n                            show: this.data.showOuterLine,\r\n                            thickness: this.data.outerLineThickness,\r\n                        }\r\n                    };\r\n                    instances.push(outerLine);\r\n                    break;\r\n            }\r\n\r\n            return instances;\r\n        }\r\n    }\r\n}","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved.\r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *\r\n *  The above copyright notice and this permission notice shall be included in\r\n *  all copies or substantial portions of the Software.\r\n *\r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.visuals.samples {\r\n    import IStringResourceProvider = jsCommon.IStringResourceProvider;\r\n    import ClassAndSelector = jsCommon.CssConstants.ClassAndSelector;\r\n    import PixelConverter = jsCommon.PixelConverter;\r\n\r\n    export interface TornadoChartTextOptions {\r\n        fontFamily?: string;\r\n        fontSize?: number;\r\n        sizeUnit?: string;\r\n    }\r\n\r\n    export interface TornadoChartConstructorOptions {\r\n        svg?: D3.Selection;\r\n        animator?: IGenericAnimator;\r\n        margin?: IMargin;\r\n        columnPadding?: number;\r\n    }\r\n\r\n    export interface TornadoChartSeries {\r\n        fill: string;\r\n        name: string;\r\n        selectionId: SelectionId;\r\n        categoryAxisEnd: number;\r\n    }\r\n\r\n    export interface TornadoChartSettings {\r\n        labelOutsideFillColor: string;\r\n        categoriesFillColor: string;\r\n        labelSettings: VisualDataLabelsSettings;\r\n        showLegend?: boolean;\r\n        showCategories?: boolean;\r\n        legendFontSize?: number;\r\n        legendColor?: string;\r\n        labelValueFormatter?: IValueFormatter;\r\n    }\r\n\r\n    export interface TornadoChartDataView {\r\n        categories: TextData[];\r\n        series: TornadoChartSeries[];\r\n        settings: TornadoChartSettings;\r\n        legend: LegendData;\r\n        dataPoints: TornadoChartPoint[];\r\n        highlightedDataPoints?: TornadoChartPoint[];\r\n    }\r\n\r\n    export interface TornadoChartPoint extends SelectableDataPoint {\r\n        dx?: number;\r\n        dy?: number;\r\n        px?: number;\r\n        py?: number;\r\n        angle?: number;\r\n        width?: number;\r\n        height?: number;\r\n        label?: LabelData;\r\n        color: string;\r\n        tooltipData: TooltipDataItem[];\r\n        categoryIndex: number;\r\n        highlight?: boolean;\r\n        value: number;\r\n        minValue: number;\r\n        maxValue: number;\r\n        formatString: string;\r\n    }\r\n\r\n    export interface LabelData {\r\n        dx: number;\r\n        value: number | string;\r\n        source: number | string;\r\n        color: string;\r\n    }\r\n\r\n    export interface LineData {\r\n        x1: number;\r\n        y1: number;\r\n        x2: number;\r\n        y2: number;\r\n    }\r\n\r\n    export interface TextData {\r\n        text: string;\r\n        height: number;\r\n        width: number;\r\n        textProperties: TextProperties;\r\n    }\r\n\r\n    export interface TornadoBehaviorOptions {\r\n        columns: D3.Selection;\r\n        clearCatcher: D3.Selection;\r\n        interactivityService: IInteractivityService;\r\n    }\r\n\r\n    class TornadoWebBehavior implements IInteractiveBehavior {\r\n        private columns: D3.Selection;\r\n        private clearCatcher: D3.Selection;\r\n        private interactivityService: IInteractivityService;\r\n\r\n        public bindEvents(options: TornadoBehaviorOptions, selectionHandler: ISelectionHandler) {\r\n            this.columns = options.columns;\r\n            this.clearCatcher = options.clearCatcher;\r\n            this.interactivityService = options.interactivityService;\r\n\r\n            this.columns.on('click', (d: SelectableDataPoint, i: number) => {\r\n                selectionHandler.handleSelection(d, d3.event.ctrlKey);\r\n            });\r\n\r\n            this.clearCatcher.on('click', () => {\r\n                selectionHandler.handleClearSelection();\r\n            });\r\n        }\r\n\r\n        public renderSelection(hasSelection: boolean) {\r\n            let hasHighlights = this.interactivityService.hasSelection();\r\n            this.columns.style(\"fill-opacity\", (d: TornadoChartPoint) => ColumnUtil.getFillOpacity(d.selected, d.highlight, !d.highlight && hasSelection, !d.selected && hasHighlights));\r\n        }\r\n    }\r\n\r\n    class TornadoChartScrolling {\r\n        public isScrollable: boolean;\r\n        public scrollViewport: IViewport;\r\n\r\n        private static ScrollBarMinLength = 15;\r\n        private isYScrollBarVisible: boolean;\r\n        private brushGraphicsContextY: D3.Selection;\r\n        private scrollYBrush: D3.Svg.Brush = d3.svg.brush();\r\n\r\n        private getRoot: () => D3.Selection;\r\n        private getViewport: () => IViewport;\r\n\r\n        private get root(): D3.Selection {\r\n            return this.getRoot();\r\n        }\r\n\r\n        private get viewport(): IViewport {\r\n            return this.getViewport();\r\n        }\r\n\r\n        constructor(getRoot: () => D3.Selection, getViewport: () => IViewport, getMargin: () => IMargin, isScrollable: boolean) {\r\n            this.getRoot = getRoot;\r\n            this.getViewport = getViewport;\r\n            this.isScrollable = isScrollable;\r\n        }\r\n\r\n        public renderY(data: TornadoChartDataView, prefferedHeight: number, onScroll: () => {}): void {\r\n            this.isYScrollBarVisible = prefferedHeight > this.viewport.height\r\n                && this.viewport.height > 0\r\n                && this.viewport.width > 0;\r\n\r\n            this.brushGraphicsContextY = this.createOrRemoveScrollbar(this.isYScrollBarVisible, this.brushGraphicsContextY, 'y brush');\r\n            this.updateScrollViewport();\r\n\r\n            if (!this.isYScrollBarVisible) {\r\n                onScroll.call(this, jQuery.extend(true, {}, data), 0, 1);\r\n                return;\r\n            }\r\n\r\n            let scrollSpaceLength: number = this.viewport.height;\r\n            let extentData: any = this.getExtentData(prefferedHeight, scrollSpaceLength);\r\n\r\n            let onRender = (wheelDelta: number = 0) => {\r\n                let position: number[] = this.scrollYBrush.extent();\r\n                if (wheelDelta !== 0) {\r\n\r\n                    // Handle mouse wheel manually by moving the scrollbar half of its size\r\n                    let halfScrollsize: number = (position[1] - position[0]) / 2;\r\n                    position[0] += (wheelDelta > 0) ? halfScrollsize : -halfScrollsize;\r\n                    position[1] += (wheelDelta > 0) ? halfScrollsize : -halfScrollsize;\r\n\r\n                    if (position[0] < 0) {\r\n                        let offset: number = 0 - position[0];\r\n                        position[0] += offset;\r\n                        position[1] += offset;\r\n                    }\r\n                    if (position[1] > scrollSpaceLength) {\r\n                        let offset: number = position[1] - scrollSpaceLength;\r\n                        position[0] -= offset;\r\n                        position[1] -= offset;\r\n                    }\r\n\r\n                    // Update the scroll bar accordingly and redraw\r\n                    this.scrollYBrush.extent(position);\r\n                    this.brushGraphicsContextY.select('.extent').attr('y', position[0]);\r\n                }\r\n                let scrollPosition = extentData.toScrollPosition(position, scrollSpaceLength);\r\n                onScroll.call(this, jQuery.extend(true, {}, data), scrollPosition[0], scrollPosition[1]);\r\n                this.setScrollBarSize(this.brushGraphicsContextY, extentData.value[1], true);\r\n            };\r\n\r\n            let scrollYScale: D3.Scale.OrdinalScale = d3.scale.ordinal().rangeBands([0, scrollSpaceLength]);\r\n            this.scrollYBrush.y(scrollYScale).extent(extentData.value);\r\n\r\n            this.renderScrollbar(\r\n                this.scrollYBrush,\r\n                this.brushGraphicsContextY,\r\n                this.viewport.width,\r\n                onRender);\r\n\r\n            onRender();\r\n        }\r\n\r\n        private updateScrollViewport() {\r\n            this.scrollViewport = { height: this.viewport.height, width: this.viewport.width };\r\n\r\n            if (this.isYScrollBarVisible && this.isScrollable) {\r\n                this.scrollViewport.width -= TornadoChart.ScrollBarWidth;\r\n            }\r\n        }\r\n\r\n        private createOrRemoveScrollbar(isVisible, brushGraphicsContext, brushClass) {\r\n            if (isVisible && this.isScrollable) {\r\n                return brushGraphicsContext || this.root.append(\"g\").classed(brushClass, true);\r\n            }\r\n\r\n            return brushGraphicsContext ? void brushGraphicsContext.remove() : undefined;\r\n        }\r\n\r\n        private renderScrollbar(brush: D3.Svg.Brush,\r\n            brushGraphicsContext: D3.Selection,\r\n            brushX: number,\r\n            onRender: (number) => void): void {\r\n\r\n            brush.on(\"brush\", () => window.requestAnimationFrame(() => onRender(0)));\r\n            this.root.on('wheel', () => {\r\n                if (!this.isYScrollBarVisible) return;\r\n                let wheelEvent: any = d3.event; // Casting to any to avoid compilation errors\r\n                onRender(wheelEvent.deltaY);\r\n            });\r\n\r\n            brushGraphicsContext.attr({\r\n                \"transform\": visuals.SVGUtil.translate(brushX, 0),\r\n                \"drag-resize-disabled\": \"true\" /*disables resizing of the visual when dragging the scrollbar in edit mode*/\r\n            });\r\n\r\n            brushGraphicsContext.call(brush); /*call the brush function, causing it to create the rectangles   */\r\n            /* Disabling the zooming feature */\r\n            brushGraphicsContext.selectAll(\".resize\").remove();\r\n            brushGraphicsContext.select(\".background\").remove();\r\n            brushGraphicsContext.selectAll(\".extent\").style({\r\n                \"fill-opacity\": 0.125,\r\n                \"cursor\": \"default\",\r\n            });\r\n        }\r\n\r\n        private setScrollBarSize(brushGraphicsContext: D3.Selection, minExtent: number, isVertical: boolean): void {\r\n            brushGraphicsContext.selectAll(\"rect\").attr(isVertical ? \"width\" : \"height\", TornadoChart.ScrollBarWidth);\r\n            brushGraphicsContext.selectAll(\"rect\").attr(isVertical ? \"height\" : \"width\", minExtent);\r\n        }\r\n\r\n        private getExtentData(svgLength: number, scrollSpaceLength: number): any {\r\n            let value: number = scrollSpaceLength * scrollSpaceLength / svgLength;\r\n\r\n            let scaleMultipler: number = TornadoChartScrolling.ScrollBarMinLength <= value\r\n                ? 1\r\n                : value / TornadoChartScrolling.ScrollBarMinLength;\r\n\r\n            value = Math.max(value, TornadoChartScrolling.ScrollBarMinLength);\r\n\r\n            let toScrollPosition = (extent: number[], scrollSpaceLength: number) => {\r\n                let scrollSize: number = extent[1] - extent[0];\r\n                let scrollPosition: number = extent[0] / (scrollSpaceLength - scrollSize);\r\n\r\n                scrollSize *= scaleMultipler;\r\n\r\n                let start: number = (scrollPosition * (scrollSpaceLength - scrollSize));\r\n                let end: number = (start + scrollSize);\r\n\r\n                return [start / scrollSpaceLength, end / scrollSpaceLength];\r\n            };\r\n\r\n            return { value: [0, value], toScrollPosition: toScrollPosition };\r\n        }\r\n\r\n        public clearData(): void {\r\n            if (this.brushGraphicsContextY)\r\n                this.brushGraphicsContextY.selectAll(\"*\").remove();\r\n        }\r\n    }\r\n\r\n    export class TornadoChartWarning implements IVisualWarning {\r\n        public get code(): string {\r\n            return \"TornadoChartWarning\";\r\n        }\r\n\r\n        public getMessages(resourceProvider: IStringResourceProvider): IVisualErrorMessage {\r\n            let message: string = \"This visual requires two distinct values to be returned for the Legend field.\",\r\n                titleKey: string = \"\",\r\n                detailKey: string = \"\",\r\n                visualMessage: IVisualErrorMessage;\r\n\r\n            visualMessage = {\r\n                message: message,\r\n                title: resourceProvider.get(titleKey),\r\n                detail: resourceProvider.get(detailKey)\r\n            };\r\n\r\n            return visualMessage;\r\n        }\r\n    }\r\n\r\n    export function getTornadoChartWarning(): IVisualWarning {\r\n        return new TornadoChartWarning();\r\n    }\r\n\r\n    export class TornadoChart implements IVisual {\r\n        private static ClassName: string = \"tornado-chart\";\r\n\r\n        private static Properties: any = {\r\n            general: {\r\n                formatString: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"general\",\r\n                    propertyName: \"formatString\"\r\n                }\r\n            },\r\n            labels: {\r\n                show: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"labels\",\r\n                    propertyName: \"show\"\r\n                },\r\n                fontSize: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"labels\",\r\n                    propertyName: \"fontSize\"\r\n                },\r\n                labelPrecision: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"labels\",\r\n                    propertyName: \"labelPrecision\"\r\n                },\r\n                labelDisplayUnits: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"labels\",\r\n                    propertyName: \"labelDisplayUnits\"\r\n                },\r\n                insideFill: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"labels\",\r\n                    propertyName: \"insideFill\"\r\n                },\r\n                outsideFill: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"labels\",\r\n                    propertyName: \"outsideFill\"\r\n                }\r\n            },\r\n            dataPoint: {\r\n                fill: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"dataPoint\",\r\n                    propertyName: \"fill\"\r\n                }\r\n            },\r\n            legend: {\r\n                show: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"legend\",\r\n                    propertyName: \"show\"\r\n                },\r\n                labelColor: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"legend\",\r\n                    propertyName: \"labelColor\"\r\n                },\r\n                fontSize: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"legend\",\r\n                    propertyName: \"fontSize\"\r\n                },\r\n            },\r\n            categories: {\r\n                show: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"categories\",\r\n                    propertyName: \"show\"\r\n                },\r\n                fill: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"categories\",\r\n                    propertyName: \"fill\"\r\n                }\r\n            }\r\n        };\r\n\r\n        private static Columns: ClassAndSelector = {\r\n            \"class\": \"columns\",\r\n            selector: \".columns\"\r\n        };\r\n\r\n        private static Column: ClassAndSelector = {\r\n            \"class\": \"column\",\r\n            selector: \".column\"\r\n        };\r\n\r\n        private static Axes: ClassAndSelector = {\r\n            \"class\": \"axes\",\r\n            selector: \".axes\"\r\n        };\r\n\r\n        private static Axis: ClassAndSelector = {\r\n            \"class\": \"axis\",\r\n            selector: \".axis\"\r\n        };\r\n\r\n        private static Labels: ClassAndSelector = {\r\n            \"class\": \"labels\",\r\n            selector: \".labels\"\r\n        };\r\n\r\n        private static Label: ClassAndSelector = {\r\n            \"class\": \"label\",\r\n            selector: \".label\"\r\n        };\r\n\r\n        private static LabelTitle: ClassAndSelector = {\r\n            \"class\": \"label-title\",\r\n            selector: \".label-title\"\r\n        };\r\n\r\n        private static LabelText: ClassAndSelector = {\r\n            \"class\": \"label-text\",\r\n            selector: \".label-text\"\r\n        };\r\n\r\n        private static Categories: ClassAndSelector = {\r\n            \"class\": \"categories\",\r\n            selector: \".categories\"\r\n        };\r\n\r\n        private static Category: ClassAndSelector = {\r\n            \"class\": \"category\",\r\n            selector: \".category\"\r\n        };\r\n\r\n        private static CategoryTitle: ClassAndSelector = {\r\n            \"class\": \"category-title\",\r\n            selector: \".category-title\"\r\n        };\r\n\r\n        private static CategoryText: ClassAndSelector = {\r\n            \"class\": \"category-text\",\r\n            selector: \".category-text\"\r\n        };\r\n\r\n        private static MaxSeries: number = 2;\r\n        private static MaxPrecision: number = 17; // max number of decimals in float\r\n        private static LabelPadding: number = 2.5;\r\n        private static CategoryMinHeight: number = 25;\r\n        private static DefaultFontSize: number = 9;\r\n        private static DefaultLegendFontSize: number = 8;\r\n        private static HighlightedShapeFactor: number = 0.5;\r\n\r\n        public static ScrollBarWidth = 10;\r\n\r\n        public static capabilities: VisualCapabilities = {\r\n            dataRoles: [{\r\n                name: \"Category\",\r\n                kind: VisualDataRoleKind.Grouping,\r\n                displayName: data.createDisplayNameGetter(\"Role_DisplayName_Group\")\r\n            }, {\r\n                    name: \"Series\",\r\n                    kind: VisualDataRoleKind.Grouping,\r\n                    displayName: data.createDisplayNameGetter('Role_DisplayName_Legend')\r\n                }, {\r\n                    name: \"Values\",\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: data.createDisplayNameGetter(\"Role_DisplayName_Values\")\r\n                }],\r\n            dataViewMappings: [{\r\n                conditions: [\r\n                    { \"Category\": { max: 1 }, \"Values\": { min: 0, max: 1 }, \"Series\": { min: 0, max: 1 } },\r\n                    { \"Category\": { max: 1 }, \"Values\": { min: 2, max: 2 }, \"Series\": { max: 0 } }\r\n                ],\r\n                categorical: {\r\n                    categories: {\r\n                        for: {\r\n                            in: \"Category\"\r\n                        }\r\n                    },\r\n                    values: {\r\n                        group: {\r\n                            by: \"Series\",\r\n                            select: [{ for: { in: \"Values\" } }],\r\n                            dataReductionAlgorithm: { top: {} }\r\n                        }\r\n                    }\r\n                }\r\n            }],\r\n            objects: {\r\n                general: {\r\n                    displayName: 'General',\r\n                    properties: {\r\n                        formatString: {\r\n                            type: {\r\n                                formatting: {\r\n                                    formatString: true\r\n                                }\r\n                            },\r\n                        }\r\n                    }\r\n                },\r\n                dataPoint: {\r\n                    displayName: 'Data Colors',\r\n                    properties: {\r\n                        fill: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Fill'),\r\n                            type: { fill: { solid: { color: true } } }\r\n                        }\r\n                    }\r\n                },\r\n                categoryAxis: {\r\n                    displayName: 'X-Axis',\r\n                    properties: {\r\n                        end: {\r\n                            displayName: 'End',\r\n                            type: { numeric: true },\r\n                            suppressFormatPainterCopy: true,\r\n                        },\r\n                    }\r\n                },\r\n                labels: {\r\n                    displayName: 'Data Labels',\r\n                    properties: {\r\n                        show: {\r\n                            displayName: 'Show',\r\n                            type: { bool: true }\r\n                        },\r\n                        labelPrecision: {\r\n                            displayName: 'Decimal Places',\r\n                            placeHolderText: 'Auto',\r\n                            type: { numeric: true }\r\n                        },\r\n                        fontSize: {\r\n                            displayName: data.createDisplayNameGetter('Visual_TextSize'),\r\n                            type: { formatting: { fontSize: true } }\r\n                        },\r\n                        labelDisplayUnits: {\r\n                            displayName: 'Display Units',\r\n                            type: { formatting: { labelDisplayUnits: true } },\r\n                        },\r\n                        insideFill: {\r\n                            displayName: 'Inside fill',\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        outsideFill: {\r\n                            displayName: 'Outside fill',\r\n                            type: { fill: { solid: { color: true } } }\r\n                        }\r\n                    }\r\n                },\r\n                legend: {\r\n                    displayName: 'Legend',\r\n                    properties: {\r\n                        show: {\r\n                            displayName: 'Show',\r\n                            type: { bool: true }\r\n                        },\r\n                        position: {\r\n                            displayName: 'Position',\r\n                            description: data.createDisplayNameGetter('Visual_LegendPositionDescription'),\r\n                            type: { enumeration: legendPosition.type }\r\n                        },\r\n                        showTitle: {\r\n                            displayName: 'Title',\r\n                            description: data.createDisplayNameGetter('Visual_LegendShowTitleDescription'),\r\n                            type: { bool: true }\r\n                        },\r\n                        titleText: {\r\n                            displayName: 'Legend Name',\r\n                            description: data.createDisplayNameGetter('Visual_LegendNameDescription'),\r\n                            type: { text: true }\r\n                        },\r\n                        labelColor: {\r\n                            displayName: 'Color',\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        fontSize: {\r\n                            displayName: 'TextSize',\r\n                            type: { formatting: { fontSize: true } }\r\n                        },\r\n                    }\r\n                },\r\n                categories: {\r\n                    displayName: 'Group',\r\n                    properties: {\r\n                        show: {\r\n                            displayName: 'Show',\r\n                            type: { bool: true }\r\n                        },\r\n                        fill: {\r\n                            displayName: 'Color',\r\n                            type: { fill: { solid: { color: true } } }\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            supportsHighlight: true,\r\n        };\r\n\r\n        private DefaultTornadoChartSettings: TornadoChartSettings = {\r\n            labelOutsideFillColor: dataLabelUtils.defaultLabelColor,\r\n            labelSettings: {\r\n                show: true,\r\n                precision: null,\r\n                fontSize: TornadoChart.DefaultFontSize,\r\n                displayUnits: 0,\r\n                labelColor: dataLabelUtils.defaultInsideLabelColor,\r\n            },\r\n            showCategories: true,\r\n            showLegend: true,\r\n            legendFontSize: TornadoChart.DefaultLegendFontSize,\r\n            legendColor: LegendData.DefaultLegendLabelFillColor,\r\n            categoriesFillColor: \"#777\"\r\n        };\r\n\r\n        private DefaultFillColors: string[] = [\r\n            \"purple\", \"teal\"\r\n        ];\r\n\r\n        private columnPadding: number = 5;\r\n        private leftLabelMargin: number = 4;\r\n        private durationAnimations: number;\r\n        private InnerTextHeightDelta: number = 2;\r\n        private textOptions: TornadoChartTextOptions = {};\r\n\r\n        private margin: IMargin = {\r\n            top: 10,\r\n            right: 5,\r\n            bottom: 10,\r\n            left: 10\r\n        };\r\n\r\n        private root: D3.Selection;\r\n        private svg: D3.Selection;\r\n        private main: D3.Selection;\r\n        private columns: D3.Selection;\r\n        private axes: D3.Selection;\r\n        private labels: D3.Selection;\r\n        private categories: D3.Selection;\r\n        private clearCatcher: D3.Selection;\r\n\r\n        private legendObjectProperties: DataViewObject;\r\n        private legend: ILegend;\r\n        private hasDynamicSeries: boolean;\r\n        private hasHighlights: boolean;\r\n        private behavior: IInteractiveBehavior;\r\n        private colors: IDataColorPalette;\r\n        private interactivityService: IInteractivityService;\r\n        private animator: IGenericAnimator;\r\n        private hostService: IVisualHostServices;\r\n        private scrolling: TornadoChartScrolling;\r\n\r\n        private viewport: IViewport;\r\n        private tornadoChartDataView: TornadoChartDataView;\r\n        private defaultTornadoChartDataView: TornadoChartDataView;\r\n        private labelHeight: number;\r\n        private heightColumn: number = 0;\r\n        private widthLeftSection: number = 0;\r\n        private widthRightSection: number = 0;\r\n\r\n        constructor(tornadoChartConstructorOptions?: TornadoChartConstructorOptions) {\r\n            if (tornadoChartConstructorOptions) {\r\n                this.svg = tornadoChartConstructorOptions.svg || this.svg;\r\n                this.margin = tornadoChartConstructorOptions.margin || this.margin;\r\n                this.columnPadding = tornadoChartConstructorOptions.columnPadding || this.columnPadding;\r\n                this.animator = tornadoChartConstructorOptions.animator;\r\n            }\r\n        }\r\n\r\n        public init(visualInitOptions: VisualInitOptions): void {\r\n            let style: IVisualStyle = visualInitOptions.style,\r\n                fontSize: string;\r\n\r\n            this.hostService = visualInitOptions.host;\r\n            let element: JQuery = visualInitOptions.element;\r\n            this.colors = style.colorPalette.dataColors;\r\n            let interactivity = visualInitOptions.interactivity;\r\n            this.interactivityService = createInteractivityService(this.hostService);\r\n\r\n            let root: D3.Selection;\r\n            if (this.svg)\r\n                this.root = root = this.svg;\r\n            else\r\n                this.root = root = d3.select(element.get(0))\r\n                    .append(\"svg\");\r\n\r\n            root\r\n                .classed(TornadoChart.ClassName, true)\r\n                .style('position', 'absolute');\r\n\r\n            fontSize = root.style(\"font-size\");\r\n\r\n            this.textOptions.sizeUnit = fontSize.slice(fontSize.length - 2);\r\n            this.textOptions.fontSize = Number(fontSize.slice(0, fontSize.length - 2));\r\n            this.textOptions.fontFamily = root.style(\"font-family\");\r\n            this.scrolling = new TornadoChartScrolling(() => root, () => this.viewport, () => this.margin, true);\r\n            let main: D3.Selection = this.main = root.append(\"g\");\r\n            this.clearCatcher = appendClearCatcher(main);\r\n            this.columns = main\r\n                .append(\"g\")\r\n                .classed(TornadoChart.Columns.class, true);\r\n\r\n            this.axes = main\r\n                .append(\"g\")\r\n                .classed(TornadoChart.Axes.class, true);\r\n\r\n            this.labels = main\r\n                .append(\"g\")\r\n                .classed(TornadoChart.Labels.class, true);\r\n\r\n            this.categories = main\r\n                .append(\"g\")\r\n                .classed(TornadoChart.Categories.class, true);\r\n\r\n            this.behavior = new TornadoWebBehavior();\r\n            this.defaultTornadoChartDataView = {\r\n                categories: [],\r\n                series: [],\r\n                settings: null,\r\n                legend: null,\r\n                dataPoints: [],\r\n                highlightedDataPoints: [],\r\n            };\r\n\r\n            this.legend = createLegend(element, interactivity && interactivity.isInteractiveLegend, this.interactivityService, true);\r\n        }\r\n\r\n        public update(visualUpdateOptions: VisualUpdateOptions): void {\r\n            if (!visualUpdateOptions ||\r\n                !visualUpdateOptions.dataViews ||\r\n                !visualUpdateOptions.dataViews[0]) {\r\n                return;\r\n            }\r\n\r\n            this.viewport = {\r\n                height: Math.max(0, visualUpdateOptions.viewport.height - this.margin.top - this.margin.bottom),\r\n                width: Math.max(0, visualUpdateOptions.viewport.width - this.margin.left - this.margin.right)\r\n            };\r\n\r\n            if (this.animator)\r\n                this.durationAnimations = AnimatorCommon.GetAnimationDuration(this.animator, visualUpdateOptions.suppressAnimations);\r\n            else\r\n                this.durationAnimations = visualUpdateOptions.suppressAnimations ? 0 : 250;\r\n\r\n            this.tornadoChartDataView = this.converter(visualUpdateOptions.dataViews[0]);\r\n\r\n            if (this.interactivityService) {\r\n                this.interactivityService.applySelectionStateToData(this.tornadoChartDataView.dataPoints);\r\n                this.interactivityService.applySelectionStateToData(this.tornadoChartDataView.highlightedDataPoints);\r\n            }\r\n\r\n            this.render();\r\n        }\r\n\r\n        private updateElements(): void {\r\n            let elementsTranslate: string = SVGUtil.translate(this.widthLeftSection, 0);\r\n\r\n            this.root.attr({\r\n                \"height\": this.viewport.height + this.margin.top + this.margin.bottom,\r\n                \"width\": this.viewport.width + this.margin.left + this.margin.right\r\n            });\r\n\r\n            this.columns\r\n                .attr(\"transform\", elementsTranslate);\r\n\r\n            this.labels\r\n                .attr(\"transform\", elementsTranslate);\r\n\r\n            this.axes\r\n                .attr(\"transform\", elementsTranslate);\r\n        }\r\n\r\n        public converter(dataView: DataView): TornadoChartDataView {\r\n            if (!dataView ||\r\n                !dataView.categorical ||\r\n                !dataView.categorical.categories ||\r\n                !dataView.categorical.categories[0] ||\r\n                !dataView.categorical.categories[0].source ||\r\n                !dataView.categorical.values ||\r\n                !dataView.categorical.values[0]) {\r\n                return this.defaultTornadoChartDataView;\r\n            }\r\n\r\n            let categorical: DataViewCategorical = dataView.categorical;\r\n            let categories: DataViewCategoryColumn[] = categorical.categories || [];\r\n            let values: DataViewValueColumns = categorical.values;\r\n            if (values.length > TornadoChart.MaxSeries) {\r\n                this.hostService.setWarnings([getTornadoChartWarning()]);\r\n                return this.defaultTornadoChartDataView;\r\n            }\r\n            let category: DataViewCategoricalColumn = categories[0];\r\n            let categoryValues: number[] = category.values;\r\n            let categoryValuesLength: number = categoryValues.length;\r\n            let objects: DataViewObjects = this.getObjectsFromDataView(dataView);\r\n\r\n            let formatStringProp: DataViewObjectPropertyIdentifier = TornadoChart.Properties.general.formatString;\r\n            let valuesSourceFormatString: string = valueFormatter.getFormatString(values[0].source, formatStringProp);\r\n            let maxValue: number = d3.max(values[0].values);\r\n            let settings: TornadoChartSettings = this.parseSettings(objects, valuesSourceFormatString, maxValue);\r\n            this.hasDynamicSeries = !!values.source;\r\n            let hasHighlights: boolean = this.hasHighlights = !!(values.length > 0 && values[0].highlights);\r\n            this.labelHeight = TextMeasurementService.estimateSvgTextHeight({\r\n                fontFamily: dataLabelUtils.StandardFontFamily,\r\n                fontSize: PixelConverter.fromPoint(settings.labelSettings.fontSize),\r\n            });\r\n\r\n            let series: TornadoChartSeries[] = [];\r\n            let dataPoints: TornadoChartPoint[] = [];\r\n            let highlightedDataPoints: TornadoChartPoint[] = [];\r\n            let categoriesLabels: TextData[] = [];\r\n\r\n            let groupedValues: DataViewValueColumnGroup[] = [];\r\n            if (values.grouped)\r\n                groupedValues = values.grouped();\r\n\r\n            // Parse category labels and compute maximum category length\r\n            let maxCategoryLength: number = 0;\r\n            let showCategories = settings.showCategories;\r\n            let categorySourceFormatString: string = valueFormatter.getFormatString(category.source, formatStringProp);\r\n            for (let i = 0; i < categoryValuesLength; i++) {\r\n                let formattedCategoryValue = valueFormatter.format(categoryValues[i], categorySourceFormatString);\r\n                let textData = this.getTextData(formattedCategoryValue, true);\r\n                categoriesLabels.push(textData);\r\n                if (showCategories && textData.width > maxCategoryLength)\r\n                    maxCategoryLength = textData.width;\r\n            }\r\n\r\n            let scrollBarWidth: number = (categoryValuesLength * TornadoChart.CategoryMinHeight > this.viewport.height) ? TornadoChart.ScrollBarWidth : 0;\r\n            this.widthLeftSection = maxCategoryLength + TornadoChart.LabelPadding;\r\n            let maxColumnWidth = this.widthRightSection = this.viewport.width - this.widthLeftSection - scrollBarWidth;\r\n            this.updateElements();\r\n\r\n            let minValue: number = Math.min(d3.min(values[0].values), 0);\r\n            if (values.length === TornadoChart.MaxSeries) {\r\n                minValue = d3.min([minValue, d3.min(values[1].values)]);\r\n                maxValue = d3.max([maxValue, d3.max(values[1].values)]);\r\n                maxColumnWidth = maxColumnWidth / TornadoChart.MaxSeries;\r\n            }\r\n\r\n            for (let seriesIndex = 0; seriesIndex < values.length; seriesIndex++) {\r\n                let parsedSeries: TornadoChartSeries = this.parseSeries(values, seriesIndex, this.hasDynamicSeries, groupedValues);\r\n                series.push(parsedSeries);\r\n                let currentSeries = values[seriesIndex];\r\n                let measureName = currentSeries.source.queryName;\r\n\r\n                for (let i = 0; i < categoryValuesLength; i++) {\r\n                    let value = currentSeries.values[i] == null || isNaN(currentSeries.values[i]) ? 0 : currentSeries.values[i];\r\n                    let identity = SelectionIdBuilder.builder()\r\n                        .withCategory(category, i)\r\n                        .withSeries(values, currentSeries)\r\n                        .withMeasure(measureName)\r\n                        .createSelectionId();\r\n                    let formattedCategoryValue = categoriesLabels[i].text;\r\n                    let tooltipInfo: TooltipDataItem[];\r\n                    tooltipInfo = TooltipBuilder.createTooltipInfo(formatStringProp, categorical, formattedCategoryValue, value, null, null, seriesIndex, i, null);\r\n\r\n                    // Limit maximum value with what the user choose\r\n                    let currentMaxValue = parsedSeries.categoryAxisEnd ? Math.min(parsedSeries.categoryAxisEnd, maxValue) : maxValue;\r\n                    let formatString = dataView.categorical.values[seriesIndex].source.format;\r\n\r\n                    dataPoints.push({\r\n                        value: value,\r\n                        minValue: minValue,\r\n                        maxValue: currentMaxValue,\r\n                        formatString: formatString,\r\n                        color: parsedSeries.fill,\r\n                        selected: false,\r\n                        identity: identity,\r\n                        tooltipData: tooltipInfo,\r\n                        categoryIndex: i,\r\n                    });\r\n\r\n                    if (hasHighlights) {\r\n                        let highlightIdentity = SelectionId.createWithHighlight(identity);\r\n                        let highlight = currentSeries.highlights[i];\r\n                        let highlightedValue = highlight != null ? highlight : 0;\r\n                        tooltipInfo = TooltipBuilder.createTooltipInfo(formatStringProp, categorical, formattedCategoryValue, value, null, null, seriesIndex, i, highlightedValue);\r\n\r\n                        highlightedDataPoints.push({\r\n                            value: highlightedValue,\r\n                            minValue: minValue,\r\n                            maxValue: currentMaxValue,\r\n                            formatString: formatString,\r\n                            color: parsedSeries.fill,\r\n                            selected: false,\r\n                            identity: highlightIdentity,\r\n                            tooltipData: tooltipInfo,\r\n                            categoryIndex: i,\r\n                            highlight: true,\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n\r\n            return {\r\n                categories: categoriesLabels,\r\n                series: series,\r\n                settings: settings,\r\n                legend: this.getLegendData(series),\r\n                dataPoints: dataPoints,\r\n                highlightedDataPoints: highlightedDataPoints,\r\n            };\r\n        }\r\n\r\n        private parseSettings(objects: DataViewObjects, formatString: string, value: number): TornadoChartSettings {\r\n            let precision: number = this.getPrecision(objects);\r\n\r\n            let displayUnits: number = DataViewObjects.getValue<number>(\r\n                objects,\r\n                TornadoChart.Properties.labels.labelDisplayUnits,\r\n                this.DefaultTornadoChartSettings.labelSettings.displayUnits);\r\n\r\n            let labelSettings = this.DefaultTornadoChartSettings.labelSettings;\r\n\r\n            let labelValueFormatter = valueFormatter.create({\r\n                format: formatString,\r\n                precision: precision,\r\n                value: (displayUnits === 0) && (value != null) ? value : displayUnits,\r\n            });\r\n\r\n            return {\r\n                labelOutsideFillColor: this.getColor(TornadoChart.Properties.labels.outsideFill, this.DefaultTornadoChartSettings.labelOutsideFillColor, objects),\r\n                labelSettings: {\r\n                    show: DataViewObjects.getValue<boolean>(objects, TornadoChart.Properties.labels.show, labelSettings.show),\r\n                    precision: precision,\r\n                    fontSize: DataViewObjects.getValue<number>(objects, TornadoChart.Properties.labels.fontSize, labelSettings.fontSize),\r\n                    displayUnits: displayUnits,\r\n                    labelColor: this.getColor(TornadoChart.Properties.labels.insideFill, labelSettings.labelColor, objects),\r\n                },\r\n                showCategories: DataViewObjects.getValue<boolean>(objects, TornadoChart.Properties.categories.show, this.DefaultTornadoChartSettings.showCategories),\r\n                showLegend: DataViewObjects.getValue<boolean>(objects, TornadoChart.Properties.legend.show, this.DefaultTornadoChartSettings.showLegend),\r\n                legendFontSize: DataViewObjects.getValue<number>(objects, TornadoChart.Properties.legend.fontSize, this.DefaultTornadoChartSettings.legendFontSize),\r\n                legendColor: this.getColor(TornadoChart.Properties.legend.labelColor, this.DefaultTornadoChartSettings.legendColor, objects),\r\n                categoriesFillColor: this.getColor(TornadoChart.Properties.categories.fill, this.DefaultTornadoChartSettings.categoriesFillColor, objects),\r\n                labelValueFormatter: labelValueFormatter\r\n            };\r\n        }\r\n\r\n        private getColor(properties: any, defaultColor: string, objects: DataViewObjects): string {\r\n            let colorHelper: ColorHelper = new ColorHelper(this.colors, properties, defaultColor);\r\n            return colorHelper.getColorForMeasure(objects, \"\");\r\n        }\r\n\r\n        private getPrecision(objects: DataViewObjects): number {\r\n            let precision: number = DataViewObjects.getValue<number>(\r\n                objects,\r\n                TornadoChart.Properties.labels.labelPrecision,\r\n                this.DefaultTornadoChartSettings.labelSettings.precision);\r\n\r\n            if (precision >= TornadoChart.MaxPrecision) {\r\n                return TornadoChart.MaxPrecision;\r\n            }\r\n\r\n            return precision;\r\n        }\r\n\r\n        private getObjectsFromDataView(dataView: DataView): DataViewObjects {\r\n            if (!dataView ||\r\n                !dataView.metadata ||\r\n                !dataView.metadata.columns ||\r\n                !dataView.metadata.objects) {\r\n                this.legendObjectProperties = {};\r\n                return null;\r\n            }\r\n            this.legendObjectProperties = DataViewObjects.getObject(dataView.metadata.objects, \"legend\", {});\r\n            return dataView.metadata.objects;\r\n        }\r\n\r\n        private parseSeries(dataViewValueColumns: DataViewValueColumns, index: number, isGrouped: boolean, grouped: DataViewValueColumnGroup[]): TornadoChartSeries {\r\n            let dataViewValueColumn: DataViewValueColumn = dataViewValueColumns[index];\r\n            let seriesGroup: DataViewValueColumnGroup | DataViewValueColumn = isGrouped ? grouped[index] : grouped[0].values[index];\r\n            let source: DataViewMetadataColumn = dataViewValueColumn.source;\r\n\r\n            let selectionId: SelectionId = seriesGroup.identity\r\n                ? SelectionId.createWithId(seriesGroup.identity)\r\n                : SelectionIdBuilder.builder()\r\n                    .withSeries(dataViewValueColumns, seriesGroup)\r\n                    .withMeasure(source.queryName)\r\n                    .createSelectionId();\r\n\r\n            let displayName: string = source.groupName ? source.groupName : source.displayName;\r\n            let objects;\r\n            let categoryAxisObject: DataViewObject | DataViewObjectWithId[];\r\n\r\n            if (isGrouped) {\r\n                categoryAxisObject = seriesGroup.objects ? seriesGroup.objects['categoryAxis'] : null;\r\n                objects = seriesGroup.objects;\r\n            }\r\n            else {\r\n                objects = source.objects;\r\n                categoryAxisObject = objects ? objects['categoryAxis'] : null;\r\n            }\r\n\r\n            let color: string = this.getColor(\r\n                TornadoChart.Properties.dataPoint.fill,\r\n                this.DefaultFillColors[index],\r\n                objects);\r\n            let categoryAxisEnd: number = categoryAxisObject ? categoryAxisObject['end'] : null;\r\n\r\n            return <TornadoChartSeries>{\r\n                fill: color,\r\n                name: displayName,\r\n                selectionId: selectionId,\r\n                categoryAxisEnd: categoryAxisEnd,\r\n            };\r\n        }\r\n\r\n        private getLegendData(series: TornadoChartSeries[]): LegendData {\r\n            let legendDataPoints: LegendDataPoint[] = [];\r\n\r\n            if (this.hasDynamicSeries)\r\n                legendDataPoints = series.map((series: TornadoChartSeries) => {\r\n                    return <LegendDataPoint>{\r\n                        label: series.name,\r\n                        color: series.fill,\r\n                        icon: LegendIcon.Box,\r\n                        selected: false,\r\n                        identity: series.selectionId\r\n                    };\r\n                });\r\n\r\n            return {\r\n                dataPoints: legendDataPoints\r\n            };\r\n        }\r\n\r\n        private clearData(): void {\r\n            this.columns.selectAll(\"*\").remove();\r\n            this.axes.selectAll(\"*\").remove();\r\n            this.labels.selectAll(\"*\").remove();\r\n            this.categories.selectAll(\"*\").remove();\r\n            this.legend.drawLegend({ dataPoints: [] }, this.viewport);\r\n            this.scrolling.clearData();\r\n        }\r\n\r\n        public onClearSelection(): void {\r\n            if (this.interactivityService)\r\n                this.interactivityService.clearSelection();\r\n        }\r\n\r\n        private render(): void {\r\n            let tornadoChartDataView: TornadoChartDataView = this.tornadoChartDataView;\r\n            if (!tornadoChartDataView ||\r\n                !tornadoChartDataView.settings) {\r\n                this.clearData();\r\n                return;\r\n            }\r\n\r\n            this.renderLegend();\r\n\r\n            this.scrolling.renderY(\r\n                tornadoChartDataView,\r\n                tornadoChartDataView.categories.length * TornadoChart.CategoryMinHeight,\r\n                this.renderWithScrolling.bind(this));\r\n        }\r\n\r\n        private renderWithScrolling(tornadoChartDataView: TornadoChartDataView, scrollStart: number, scrollEnd: number): void {\r\n            if (!this.tornadoChartDataView || !this.tornadoChartDataView.settings)\r\n                return;\r\n            let categoriesLength = tornadoChartDataView.categories.length;\r\n            let startIndex: number = scrollStart * categoriesLength;\r\n            let endIndex: number = scrollEnd * categoriesLength;\r\n\r\n            let startIndexRound: number = Math.floor(startIndex);\r\n            let endIndexRound: number = Math.floor(endIndex);\r\n\r\n            let maxValues: number = Math.floor(this.scrolling.scrollViewport.height / TornadoChart.CategoryMinHeight);\r\n\r\n            if (scrollEnd - scrollStart < 1 && maxValues < endIndexRound - startIndexRound) {\r\n                if (startIndex - startIndexRound > endIndex - endIndexRound) {\r\n                    startIndexRound++;\r\n                }\r\n                else {\r\n                    endIndex--;\r\n                }\r\n            }\r\n\r\n            if (this.interactivityService) {\r\n                this.interactivityService.applySelectionStateToData(tornadoChartDataView.dataPoints);\r\n                this.interactivityService.applySelectionStateToData(tornadoChartDataView.highlightedDataPoints);\r\n            }\r\n\r\n            let scrollBarWidth: number = (tornadoChartDataView.categories.length * TornadoChart.CategoryMinHeight > this.viewport.height) ? TornadoChart.ScrollBarWidth : 0;\r\n\r\n            // Filter data according to the visible visual area\r\n            tornadoChartDataView.categories = tornadoChartDataView.categories.slice(startIndexRound, endIndexRound);\r\n            tornadoChartDataView.dataPoints = _.filter(tornadoChartDataView.dataPoints, (d: TornadoChartPoint) => d.categoryIndex >= startIndexRound && d.categoryIndex < endIndexRound);\r\n            tornadoChartDataView.highlightedDataPoints = _.filter(tornadoChartDataView.highlightedDataPoints, (d: TornadoChartPoint) => d.categoryIndex >= startIndexRound && d.categoryIndex < endIndexRound);\r\n\r\n            this.tornadoChartDataView = tornadoChartDataView;\r\n            this.computeHeightColumn();\r\n            this.renderMiddleSection(scrollBarWidth);\r\n            this.renderAxes();\r\n            this.renderCategories();\r\n        }\r\n\r\n        private updateViewport(): void {\r\n            let legendMargins: IViewport = this.legend.getMargins(),\r\n                legendPosition: LegendPosition;\r\n\r\n            legendPosition = LegendPosition[<string>this.legendObjectProperties[legendProps.position]];\r\n\r\n            switch (legendPosition) {\r\n                case LegendPosition.Top:\r\n                case LegendPosition.TopCenter:\r\n                case LegendPosition.Bottom:\r\n                case LegendPosition.BottomCenter: {\r\n                    this.viewport.height -= legendMargins.height;\r\n\r\n                    break;\r\n                }\r\n                case LegendPosition.Left:\r\n                case LegendPosition.LeftCenter:\r\n                case LegendPosition.Right:\r\n                case LegendPosition.RightCenter: {\r\n                    this.viewport.width -= legendMargins.width;\r\n\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        private computeHeightColumn(): void {\r\n            let length: number = this.tornadoChartDataView.categories.length;\r\n            this.heightColumn = (this.scrolling.scrollViewport.height - ((length - 1) * this.columnPadding)) / length;\r\n        }\r\n\r\n        private renderMiddleSection(scrollBarWidth: number): void {\r\n            let tornadoChartDataView: TornadoChartDataView = this.tornadoChartDataView;\r\n            this.calculateDataPoints(tornadoChartDataView.dataPoints, scrollBarWidth);\r\n            this.calculateDataPoints(tornadoChartDataView.highlightedDataPoints, scrollBarWidth);\r\n            let dataPointsWithHighlights: TornadoChartPoint[] = tornadoChartDataView.dataPoints.concat(tornadoChartDataView.highlightedDataPoints);\r\n            this.renderColumns(dataPointsWithHighlights, tornadoChartDataView.series.length === 2);\r\n            this.renderLabels(this.hasHighlights ? tornadoChartDataView.highlightedDataPoints : tornadoChartDataView.dataPoints, tornadoChartDataView.settings.labelSettings);\r\n        }\r\n\r\n        /**\r\n         * Calculate the width, dx value and label info for every data point\r\n         */\r\n        private calculateDataPoints(dataPoints: TornadoChartPoint[], scrollBarWidth: number): void {\r\n            let maxColumnWidth: number = this.widthRightSection = (this.viewport.width - this.widthLeftSection - scrollBarWidth);\r\n            let categoriesLength: number = this.tornadoChartDataView.categories.length;\r\n            let settings: TornadoChartSettings = this.tornadoChartDataView.settings;\r\n            let hasHighlights: boolean = this.hasHighlights;\r\n            let heightColumn = Math.max(this.heightColumn, 0);\r\n            let py = heightColumn / 2;\r\n            let pyHighlighted = heightColumn * TornadoChart.HighlightedShapeFactor / 2;\r\n            let maxSeries: boolean = this.tornadoChartDataView.series.length === TornadoChart.MaxSeries;\r\n\r\n            if (maxSeries)\r\n                maxColumnWidth /= 2;\r\n\r\n            for (let i = 0; i < dataPoints.length; i++) {\r\n                let dataPoint = dataPoints[i];\r\n\r\n                let shiftToMiddle = i < categoriesLength && maxSeries;\r\n                let shiftToRight: boolean = i > categoriesLength - 1;\r\n                let widthOfColumn: number = this.getColumnWidth(dataPoint.value, dataPoint.minValue, dataPoint.maxValue, maxColumnWidth);\r\n                let dx: number = (maxColumnWidth - widthOfColumn) * Number(shiftToMiddle) + maxColumnWidth * Number(shiftToRight) - scrollBarWidth;\r\n                dx = Math.max(dx, 0);\r\n\r\n                let highlighted: boolean = hasHighlights && dataPoint.highlight;\r\n                let highlightOffset: number = highlighted ? heightColumn * (1 - TornadoChart.HighlightedShapeFactor) / 2 : 0;\r\n                let dy: number = (heightColumn + this.columnPadding) * (i % categoriesLength) + highlightOffset;\r\n\r\n                let label: LabelData = this.getLabelData(\r\n                    dataPoint.value,\r\n                    dx,\r\n                    widthOfColumn,\r\n                    shiftToMiddle,\r\n                    dataPoint.formatString,\r\n                    settings);\r\n\r\n                dataPoint.dx = dx;\r\n                dataPoint.dy = dy;\r\n                dataPoint.px = widthOfColumn / 2;\r\n                dataPoint.py = highlighted ? pyHighlighted : py;\r\n                dataPoint.angle = shiftToMiddle ? 180 : 0;\r\n                dataPoint.width = widthOfColumn;\r\n                dataPoint.height = highlighted ? heightColumn * TornadoChart.HighlightedShapeFactor : heightColumn;\r\n                dataPoint.label = label;\r\n            }\r\n        }\r\n\r\n        private renderColumns(columnsData: TornadoChartPoint[], selectSecondSeries: boolean = false): void {\r\n            let hasSelection: boolean = this.interactivityService && this.interactivityService.hasSelection();\r\n            let hasHighlights: boolean = this.hasHighlights;\r\n\r\n            let columnsSelection: D3.UpdateSelection = this.columns\r\n                .selectAll(TornadoChart.Column.selector)\r\n                .data(columnsData);\r\n\r\n            columnsSelection\r\n                .enter()\r\n                .append(\"svg:rect\")\r\n                .classed(TornadoChart.Column.class, true);\r\n\r\n            columnsSelection\r\n                .style(\"fill\", (p: TornadoChartPoint) => p.color)\r\n                .style(\"fill-opacity\", (p: TornadoChartPoint) => ColumnUtil.getFillOpacity(p.selected, p.highlight, hasSelection, hasHighlights))\r\n                .attr(\"transform\", (p: TornadoChartPoint) => SVGUtil.translateAndRotate(p.dx, p.dy, p.px, p.py, p.angle))\r\n                .attr(\"height\", (p: TornadoChartPoint) => p.height)\r\n                .attr(\"width\", (p: TornadoChartPoint) => p.width);\r\n\r\n            columnsSelection\r\n                .exit()\r\n                .remove();\r\n\r\n            let interactivityService = this.interactivityService;\r\n\r\n            if (interactivityService) {\r\n                interactivityService.applySelectionStateToData(columnsData);\r\n                let behaviorOptions: TornadoBehaviorOptions = {\r\n                    columns: columnsSelection,\r\n                    clearCatcher: this.clearCatcher,\r\n                    interactivityService: this.interactivityService,\r\n                };\r\n                interactivityService.bind(columnsData, this.behavior, behaviorOptions);\r\n            }\r\n\r\n            this.renderTooltip(columnsSelection);\r\n        }\r\n\r\n        private renderTooltip(selection: D3.UpdateSelection): void {\r\n            TooltipManager.addTooltip(selection, (tooltipEvent: TooltipEvent) => {\r\n                return (<TornadoChartPoint>tooltipEvent.data).tooltipData;\r\n            });\r\n        }\r\n\r\n        private getColumnWidth(value: number, minValue: number, maxValue: number, width: number): number {\r\n            if (minValue === maxValue) {\r\n                return width;\r\n            }\r\n            let columnWidth = width * (value - minValue) / (maxValue - minValue);\r\n\r\n            // In case the user specifies a custom category axis end we limit the\r\n            // column width to the maximum available width\r\n            return Math.max(0, Math.min(width, columnWidth));\r\n        }\r\n\r\n        private getLabelData(\r\n            value: number,\r\n            dxColumn: number,\r\n            columnWidth: number,\r\n            isColumnPositionLeft: boolean,\r\n            formatStringProp: string,\r\n            settings?: TornadoChartSettings): LabelData {\r\n\r\n            let dx: number,\r\n                tornadoChartSettings: TornadoChartSettings = settings ? settings : this.tornadoChartDataView.settings,\r\n                labelSettings: VisualDataLabelsSettings = tornadoChartSettings.labelSettings,\r\n                fontSize: number = labelSettings.fontSize,\r\n                color: string = labelSettings.labelColor;\r\n\r\n            let maxOutsideLabelWidth = isColumnPositionLeft\r\n                ? dxColumn - this.leftLabelMargin\r\n                : this.widthRightSection - (dxColumn + columnWidth + this.leftLabelMargin);\r\n            let maxLabelWidth = Math.max(maxOutsideLabelWidth, columnWidth - this.leftLabelMargin);\r\n\r\n            let textProperties: TextProperties = {\r\n                fontFamily: dataLabelUtils.StandardFontFamily,\r\n                fontSize: PixelConverter.fromPoint(fontSize),\r\n                text: tornadoChartSettings.labelValueFormatter.format(value)\r\n            };\r\n            let valueAfterValueFormatter: string = TextMeasurementService.getTailoredTextOrDefault(textProperties, maxLabelWidth);\r\n            let textDataAfterValueFormatter: TextData = this.getTextData(valueAfterValueFormatter, true, false, fontSize);\r\n\r\n            if (columnWidth > textDataAfterValueFormatter.width + TornadoChart.LabelPadding) {\r\n                dx = dxColumn + columnWidth / 2 - textDataAfterValueFormatter.width / 2;\r\n            } else {\r\n                if (isColumnPositionLeft) {\r\n                    dx = dxColumn - this.leftLabelMargin - textDataAfterValueFormatter.width;\r\n                } else {\r\n                    dx = dxColumn + columnWidth + this.leftLabelMargin;\r\n                }\r\n                color = tornadoChartSettings.labelOutsideFillColor;\r\n            }\r\n\r\n            return {\r\n                dx: dx,\r\n                source: value,\r\n                value: valueAfterValueFormatter,\r\n                color: color\r\n            };\r\n        }\r\n\r\n        private renderAxes(): void {\r\n            let linesData: LineData[],\r\n                axesSelection: D3.UpdateSelection,\r\n                axesElements: D3.Selection = this.main\r\n                    .select(TornadoChart.Axes.selector)\r\n                    .selectAll(TornadoChart.Axis.selector);\r\n\r\n            if (this.tornadoChartDataView.series.length !== TornadoChart.MaxSeries) {\r\n                axesElements.remove();\r\n                return;\r\n            }\r\n\r\n            linesData = this.generateAxesData();\r\n\r\n            axesSelection = axesElements.data(linesData);\r\n\r\n            axesSelection\r\n                .enter()\r\n                .append(\"svg:line\")\r\n                .classed(TornadoChart.Axis.class, true);\r\n\r\n            axesSelection\r\n                .transition()\r\n                .duration(this.durationAnimations)\r\n                .attr(\"x1\", (data: LineData) => data.x1)\r\n                .attr(\"y1\", (data: LineData) => data.y1)\r\n                .attr(\"x2\", (data: LineData) => data.x2)\r\n                .attr(\"y2\", (data: LineData) => data.y2);\r\n\r\n            axesSelection\r\n                .exit()\r\n                .remove();\r\n        }\r\n\r\n        private generateAxesData(): LineData[] {\r\n            let x: number,\r\n                y1: number,\r\n                y2: number;\r\n\r\n            x = this.widthRightSection / 2;\r\n            y1 = 0;\r\n            y2 = this.scrolling.scrollViewport.height;\r\n\r\n            return [{\r\n                x1: x,\r\n                y1: y1,\r\n                x2: x,\r\n                y2: y2\r\n            }];\r\n        }\r\n\r\n        private renderLabels(dataPoints: TornadoChartPoint[], labelsSettings: VisualDataLabelsSettings): void {\r\n            let labelEnterSelection: D3.Selection,\r\n                labelSelection: D3.UpdateSelection = this.main\r\n                    .select(TornadoChart.Labels.selector)\r\n                    .selectAll(TornadoChart.Label.selector)\r\n                    .data(_.filter(dataPoints, (p: TornadoChartPoint) => p.label.dx >= 0));\r\n\r\n            // Check if labels can be displayed\r\n            if (!labelsSettings.show || this.labelHeight >= this.heightColumn) {\r\n                this.labels.selectAll(\"*\").remove();\r\n                return;\r\n            }\r\n\r\n            let fontSizeInPx: string = PixelConverter.fromPoint(labelsSettings.fontSize);\r\n            let labelYOffset: number = this.heightColumn / 2 + this.labelHeight / 2 - this.InnerTextHeightDelta;\r\n            let categoriesLength: number = this.tornadoChartDataView.categories.length;\r\n\r\n            labelEnterSelection = labelSelection\r\n                .enter()\r\n                .append(\"g\");\r\n\r\n            labelEnterSelection\r\n                .append(\"svg:title\")\r\n                .classed(TornadoChart.LabelTitle.class, true);\r\n\r\n            labelEnterSelection\r\n                .append(\"svg:text\")\r\n                .attr(\"dy\", dataLabelUtils.DefaultDy)\r\n                .classed(TornadoChart.LabelText.class, true);\r\n\r\n            labelSelection\r\n                .attr(\"pointer-events\", \"none\")\r\n                .classed(TornadoChart.Label.class, true);\r\n\r\n            labelSelection\r\n                .select(TornadoChart.LabelTitle.selector)\r\n                .text((p: TornadoChartPoint) => p.label.source);\r\n\r\n            labelSelection\r\n                .attr(\"transform\", (p: TornadoChartPoint, index: number) => {\r\n                    let dy = (this.heightColumn + this.columnPadding) * (index % categoriesLength);\r\n                    return SVGUtil.translate(p.label.dx, dy + labelYOffset);\r\n                });\r\n\r\n            labelSelection\r\n                .select(TornadoChart.LabelText.selector)\r\n                .attr(\"fill\", (p: TornadoChartPoint) => p.label.color)\r\n                .attr(\"font-size\", (p: TornadoChartPoint) => fontSizeInPx)\r\n                .text((p: TornadoChartPoint) => p.label.value);\r\n\r\n            labelSelection\r\n                .exit()\r\n                .remove();\r\n        }\r\n\r\n        private renderCategories(): void {\r\n            let settings: TornadoChartSettings = this.tornadoChartDataView.settings,\r\n                color: string = settings.categoriesFillColor,\r\n                categoriesEnterSelection: D3.Selection,\r\n                categoriesSelection: D3.UpdateSelection,\r\n                categoryElements: D3.Selection = this.main\r\n                    .select(TornadoChart.Categories.selector)\r\n                    .selectAll(TornadoChart.Category.selector),\r\n                self: TornadoChart = this;\r\n\r\n            if (!settings.showCategories) {\r\n                categoryElements.remove();\r\n                return;\r\n            }\r\n\r\n            categoriesSelection = categoryElements.data(this.tornadoChartDataView.categories);\r\n\r\n            categoriesEnterSelection = categoriesSelection\r\n                .enter()\r\n                .append(\"g\");\r\n\r\n            categoriesEnterSelection\r\n                .append(\"svg:title\")\r\n                .classed(TornadoChart.CategoryTitle.class, true);\r\n\r\n            categoriesEnterSelection\r\n                .append(\"svg:text\")\r\n                .classed(TornadoChart.CategoryText.class, true);\r\n\r\n            categoriesSelection\r\n                .attr(\"transform\", (text: string, index: number) => {\r\n                    let shift: number = (this.heightColumn + this.columnPadding) * index + this.heightColumn / 2,\r\n                        textData: TextData = this.getTextData(text, false, true);\r\n\r\n                    shift = shift + textData.height / 2 - this.InnerTextHeightDelta;\r\n\r\n                    return SVGUtil.translate(0, shift);\r\n                })\r\n                .classed(TornadoChart.Category.class, true);\r\n\r\n            categoriesSelection\r\n                .select(TornadoChart.CategoryTitle.selector)\r\n                .text((text: TextData) => text.text);\r\n\r\n            categoriesSelection\r\n                .select(TornadoChart.CategoryText.selector)\r\n                .attr(\"fill\", color)\r\n                .text((data: TextData) => {\r\n                    let textData: TextData = self.getTextData(data.text);\r\n\r\n                    return TextMeasurementService.getTailoredTextOrDefault(textData.textProperties, self.widthLeftSection);\r\n                });\r\n\r\n            categoriesSelection\r\n                .exit()\r\n                .remove();\r\n        }\r\n\r\n        private renderLegend(): void {\r\n            let legend = this.tornadoChartDataView.legend;\r\n            if (!legend) {\r\n                return;\r\n            }\r\n            let settings: TornadoChartSettings = this.tornadoChartDataView.settings;\r\n\r\n            let legendData: LegendData = {\r\n                title: legend.title,\r\n                dataPoints: legend.dataPoints,\r\n                fontSize: settings.legendFontSize,\r\n                labelColor: settings.legendColor,\r\n            };\r\n\r\n            if (this.legendObjectProperties) {\r\n                let position: string;\r\n\r\n                LegendData.update(legendData, this.legendObjectProperties);\r\n\r\n                position = <string>this.legendObjectProperties[legendProps.position];\r\n\r\n                if (position) {\r\n                    this.legend.changeOrientation(LegendPosition[position]);\r\n                }\r\n            }\r\n\r\n            // Draw the legend on a viewport with the original height and width\r\n            let viewport: IViewport = {\r\n                height: this.viewport.height + this.margin.top + this.margin.bottom,\r\n                width: this.viewport.width + this.margin.left + this.margin.right,\r\n            };\r\n            this.legend.drawLegend(legendData, viewport);\r\n            Legend.positionChartArea(this.root, this.legend);\r\n\r\n            if (legendData.dataPoints.length > 0 && settings.showLegend)\r\n                this.updateViewport();\r\n        }\r\n\r\n        private getTextData(text: string, measureWidth: boolean = false, measureHeight: boolean = false, overrideFontSize?: number): TextData {\r\n            let width: number = 0,\r\n                height: number = 0,\r\n                fontSize: string,\r\n                textProperties: TextProperties;\r\n\r\n            text = text || \"\";\r\n\r\n            fontSize = overrideFontSize\r\n                ? PixelConverter.fromPoint(overrideFontSize)\r\n                : `${this.textOptions.fontSize}${this.textOptions.sizeUnit}`;\r\n\r\n            textProperties = {\r\n                text: text,\r\n                fontFamily: this.textOptions.fontFamily,\r\n                fontSize: fontSize\r\n            };\r\n\r\n            if (measureWidth) {\r\n                width = TextMeasurementService.measureSvgTextWidth(textProperties);\r\n            }\r\n\r\n            if (measureHeight) {\r\n                height = TextMeasurementService.estimateSvgTextHeight(textProperties);\r\n            }\r\n\r\n            return {\r\n                text: text,\r\n                width: width,\r\n                height: height,\r\n                textProperties: textProperties\r\n            };\r\n        }\r\n\r\n        public enumerateObjectInstances(options: EnumerateVisualObjectInstancesOptions): VisualObjectInstanceEnumeration {\r\n            let enumeration = new ObjectEnumerationBuilder(),\r\n                settings: TornadoChartSettings;\r\n\r\n            if (!this.tornadoChartDataView ||\r\n                !this.tornadoChartDataView.settings) {\r\n                return [];\r\n            }\r\n\r\n            settings = this.tornadoChartDataView.settings;\r\n\r\n            switch (options.objectName) {\r\n                case \"dataPoint\": {\r\n                    this.enumerateDataPoint(enumeration);\r\n                    break;\r\n                }\r\n                case \"categoryAxis\": {\r\n                    this.enumerateCategoryAxis(enumeration);\r\n                    break;\r\n                }\r\n                case \"labels\": {\r\n                    let labelSettings = settings.labelSettings;\r\n                    let labels: VisualObjectInstance = {\r\n                        objectName: \"labels\",\r\n                        displayName: \"Labels\",\r\n                        selector: null,\r\n                        properties: {\r\n                            show: labelSettings.show,\r\n                            fontSize: labelSettings.fontSize,\r\n                            labelPrecision: labelSettings.precision,\r\n                            labelDisplayUnits: labelSettings.displayUnits,\r\n                            insideFill: labelSettings.labelColor,\r\n                            outsideFill: settings.labelOutsideFillColor\r\n                        }\r\n                    };\r\n\r\n                    enumeration.pushInstance(labels);\r\n                    break;\r\n                }\r\n                case \"legend\": {\r\n                    if (!this.hasDynamicSeries)\r\n                        return;\r\n\r\n                    let showTitle: boolean = true,\r\n                        titleText: string = \"\",\r\n                        legend: VisualObjectInstance;\r\n\r\n                    showTitle = DataViewObject.getValue<boolean>(\r\n                        this.legendObjectProperties,\r\n                        legendProps.showTitle,\r\n                        showTitle);\r\n\r\n                    titleText = DataViewObject.getValue<string>(\r\n                        this.legendObjectProperties,\r\n                        legendProps.titleText,\r\n                        titleText);\r\n\r\n                    legend = {\r\n                        objectName: \"legend\",\r\n                        displayName: \"Legend\",\r\n                        selector: null,\r\n                        properties: {\r\n                            show: settings.showLegend,\r\n                            position: LegendPosition[this.legend.getOrientation()],\r\n                            showTitle: showTitle,\r\n                            titleText: titleText,\r\n                            fontSize: settings.legendFontSize,\r\n                            labelColor: settings.legendColor,\r\n                        }\r\n                    };\r\n\r\n                    enumeration.pushInstance(legend);\r\n                    break;\r\n                }\r\n                case \"categories\": {\r\n                    let categories: VisualObjectInstance = {\r\n                        objectName: \"categories\",\r\n                        displayName: \"Categories\",\r\n                        selector: null,\r\n                        properties: {\r\n                            show: settings.showCategories,\r\n                            fill: settings.categoriesFillColor\r\n                        }\r\n                    };\r\n\r\n                    enumeration.pushInstance(categories);\r\n                    break;\r\n                }\r\n            }\r\n\r\n            return enumeration.complete();\r\n        }\r\n\r\n        private enumerateDataPoint(enumeration: ObjectEnumerationBuilder): void {\r\n            if (!this.tornadoChartDataView ||\r\n                !this.tornadoChartDataView.series) {\r\n                return;\r\n            }\r\n\r\n            let series: TornadoChartSeries[] = this.tornadoChartDataView.series;\r\n\r\n            for (let currentSeries of series) {\r\n                enumeration.pushInstance({\r\n                    objectName: \"dataPoint\",\r\n                    displayName: currentSeries.name,\r\n                    selector: ColorHelper.normalizeSelector(currentSeries.selectionId.getSelector(), false),\r\n                    properties: {\r\n                        fill: { solid: { color: currentSeries.fill } }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        private enumerateCategoryAxis(enumeration: ObjectEnumerationBuilder): void {\r\n            if (!this.tornadoChartDataView || !this.tornadoChartDataView.series)\r\n                return;\r\n\r\n            let series: TornadoChartSeries[] = this.tornadoChartDataView.series;\r\n\r\n            for (let currentSeries of series) {\r\n                enumeration.pushInstance({\r\n                    objectName: \"categoryAxis\",\r\n                    displayName: currentSeries.name,\r\n                    selector: currentSeries.selectionId ? currentSeries.selectionId.getSelector() : null,\r\n                    properties: {\r\n                        end: currentSeries.categoryAxisEnd,\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        public destroy(): void {\r\n            this.root = null;\r\n        }\r\n    }\r\n}","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved.\r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *\r\n *  The above copyright notice and this permission notice shall be included in\r\n *  all copies or substantial portions of the Software.\r\n *\r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.visuals.samples {\r\n    import ClassAndSelector = jsCommon.CssConstants.ClassAndSelector;\r\n    import createClassAndSelector = jsCommon.CssConstants.createClassAndSelector;\r\n    import NewDataLabelUtils = powerbi.visuals.NewDataLabelUtils;\r\n    import ISize = shapes.ISize;\r\n\r\n    export const enum MekkoChartType {\r\n        HundredPercentStackedColumn,\r\n    }\r\n\r\n    export interface MekkoColumnChartDrawInfo /*extends ColumnChartDrawInfo*/ {\r\n        shapesSelection: D3.Selection;\r\n        viewport: IViewport;\r\n        axisOptions: MekkoColumnAxisOptions;\r\n\r\n        labelDataPoints: MekkoLabelDataPoint[];\r\n    }\r\n\r\n    export interface MekkoLabelDataPointsGroup/* extends LabelDataPointsGroup */ {\r\n        labelDataPoints: MekkoLabelDataPoint[];\r\n        maxNumberOfLabels: number;\r\n    }\r\n\r\n    export interface MekkoLabelParentRect {\r\n        /** The rectangle this data label belongs to */\r\n        rect: IRect;\r\n        /** The orientation of the parent rectangle */\r\n        orientation: NewRectOrientation;\r\n        /** Valid positions to place the label ordered by preference */\r\n        validPositions: RectLabelPosition[];\r\n    }\r\n\r\n    export interface MekkoLabelDataPoint/* extends LabelDataPoint*/ {\r\n        isParentRect?: boolean;\r\n        /** Text to be displayed in the label */\r\n        text: string;\r\n        /** The measured size of the text */\r\n        textSize: ISize;\r\n        /** Is data label preferred? Preferred labels will be rendered first */\r\n        isPreferred: boolean;\r\n        /** Color to use for the data label if drawn inside */\r\n        insideFill: string;\r\n        /** Color to use for the data label if drawn outside */\r\n        outsideFill: string;\r\n        /** Whether or not the data label has been rendered */\r\n        hasBeenRendered?: boolean;\r\n        /** Whether the parent type is a rectangle, point or polygon */\r\n        parentType: LabelDataPointParentType;\r\n        /** The parent geometry for the data label */\r\n        parentShape: MekkoLabelParentRect;//LabelParentRect | LabelParentPoint | LabelParentPolygon;\r\n        /** The identity of the data point associated with the data label */\r\n        identity: powerbi.visuals.SelectionId;\r\n        /** The font size of the data point associated with the data label */\r\n        fontSize?: number;\r\n        /** Second row of text to be displayed in the label, for additional information */\r\n        secondRowText?: string;\r\n        /** The calculated weight of the data point associated with the data label */\r\n        weight?: number;\r\n    }\r\n\r\n    export interface MekkoVisualRenderResult {\r\n        dataPoints: SelectableDataPoint[];\r\n        behaviorOptions: any;\r\n        labelDataPoints: MekkoLabelDataPoint[];\r\n        labelsAreNumeric: boolean;\r\n        labelDataPointGroups?: MekkoLabelDataPointsGroup[];\r\n    }\r\n\r\n    export interface MekkoCalculateScaleAndDomainOptions extends CalculateScaleAndDomainOptions {\r\n    }\r\n\r\n    export interface MekkoConstructorOptions {\r\n        chartType: MekkoChartType;\r\n        isScrollable?: boolean;\r\n        animator?: IGenericAnimator;\r\n        cartesianSmallViewPortProperties?: CartesianSmallViewPortProperties;\r\n        behavior?: IInteractiveBehavior;\r\n    }\r\n\r\n    export interface MekkoColumnChartData extends ColumnChartData {\r\n        borderSettings: MekkoBorderSettings;\r\n        categoriesWidth: number[];\r\n    }\r\n\r\n    export interface MekkoBorderSettings {\r\n        show: boolean;\r\n        color: any;\r\n        width: number;\r\n        maxWidth?: number;\r\n    }\r\n\r\n    export interface MekkoLabelSettings {\r\n       maxPrecision: number;\r\n       minPrecision: number;\r\n    }\r\n\r\n    export interface MekkoColumnAxisOptions extends ColumnAxisOptions {\r\n    }\r\n\r\n    export interface IMekkoColumnLayout extends IColumnLayout {\r\n        shapeBorder?: {\r\n            width: (d: ColumnChartDataPoint) => number;\r\n            x: (d: ColumnChartDataPoint) => number;\r\n            y: (d: ColumnChartDataPoint) => number;\r\n            height: (d: ColumnChartDataPoint) => number;\r\n        };\r\n        shapeXAxis?: {\r\n            width: (d: ColumnChartDataPoint) => number;\r\n            x: (d: ColumnChartDataPoint) => number;\r\n            y: (d: ColumnChartDataPoint) => number;\r\n            height: (d: ColumnChartDataPoint) => number;\r\n        };\r\n    }\r\n\r\n    export interface MekkoAxisRenderingOptions {\r\n        axisLabels: ChartAxesLabels;\r\n        legendMargin: number;\r\n        viewport: IViewport;\r\n        margin: IMargin;\r\n        hideXAxisTitle: boolean;\r\n        hideYAxisTitle: boolean;\r\n        hideY2AxisTitle?: boolean;\r\n        xLabelColor?: Fill;\r\n        yLabelColor?: Fill;\r\n        y2LabelColor?: Fill;\r\n    }\r\n\r\n    export interface MekkoDataPoints {\r\n        categoriesWidth: number[];\r\n        series: ColumnChartSeries[];\r\n        hasHighlights: boolean;\r\n        hasDynamicSeries: boolean;\r\n    }\r\n\r\n    export interface MekkoLegendDataPoint extends LegendDataPoint {\r\n        fontSize?: number;\r\n    }\r\n\r\n    export interface MekkoCreateAxisOptions extends CreateAxisOptions {\r\n        formatString: string;\r\n        is100Pct?: boolean;\r\n        shouldClamp?: boolean;\r\n        formatStringProp?: DataViewObjectPropertyIdentifier;\r\n    }\r\n\r\n    export interface MekkoColumnChartContext extends ColumnChartContext {\r\n        height: number;\r\n        width: number;\r\n        duration: number;\r\n        margin: IMargin;\r\n        mainGraphicsContext: D3.Selection;\r\n        labelGraphicsContext: D3.Selection;\r\n        layout: CategoryLayout;\r\n        animator: IColumnChartAnimator;\r\n        onDragStart?: (datum: ColumnChartDataPoint) => void;\r\n        interactivityService: IInteractivityService;\r\n        viewportHeight: number;\r\n        viewportWidth: number;\r\n        is100Pct: boolean;\r\n        hostService: IVisualHostServices;\r\n        isComboChart: boolean;\r\n    }\r\n\r\n    export class MekkoDataWrapper {\r\n        private data: CartesianData;\r\n        private isScalar: boolean;\r\n\r\n        public constructor(columnChartData: CartesianData, isScalar: boolean) {\r\n            this.data = columnChartData;\r\n            this.isScalar = isScalar;\r\n        }\r\n\r\n        public lookupXValue(index: number, type: ValueType): any {\r\n            debug.assertValue(this.data, 'this.data');\r\n\r\n            var isDateTime: boolean = AxisHelper.isDateTime(type);\r\n            if (isDateTime && this.isScalar) {\r\n                return new Date(index);\r\n            }\r\n\r\n            var data = this.data;\r\n            if (type.text) {\r\n                debug.assert(index < data.categories.length, 'category index out of range');\r\n                return data.categories[index];\r\n            }\r\n            else {\r\n                var firstSeries = data.series[0];\r\n                if (firstSeries) {\r\n                    var seriesValues = firstSeries.data;\r\n                    if (seriesValues) {\r\n                        if (this.data.hasHighlights) {\r\n                            index = index * 2;\r\n                        }\r\n                        var dataPoint = seriesValues[index];\r\n                        if (dataPoint) {\r\n                            if (isDateTime) {\r\n                                return new Date(dataPoint.categoryValue);\r\n                            }\r\n                            return dataPoint.categoryValue;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            return index;\r\n        }\r\n    }\r\n\r\n    export class MekkoColumnChartStrategy implements IMekkoColumnChartStrategy {\r\n        private static classes = {\r\n            item: <ClassAndSelector>createClassAndSelector('column'),\r\n            highlightItem: <ClassAndSelector>createClassAndSelector('highlightColumn')\r\n        };\r\n\r\n        private layout: IMekkoColumnLayout;\r\n        private data: MekkoColumnChartData;\r\n        private graphicsContext: MekkoColumnChartContext;\r\n        private width: number;\r\n        private height: number;\r\n        private margin: IMargin;\r\n        private xProps: IAxisProperties;\r\n        private yProps: IAxisProperties;\r\n        private categoryLayout: CategoryLayout;\r\n        private columnsCenters: number[];\r\n        private columnSelectionLineHandle: D3.Selection;\r\n        private animator: IColumnChartAnimator;\r\n        private interactivityService: IInteractivityService;\r\n        private viewportHeight: number;\r\n        private viewportWidth: number;\r\n\r\n        private static validLabelPositions = [1];\r\n\r\n        public setupVisualProps(columnChartProps: MekkoColumnChartContext): void {\r\n            this.graphicsContext = columnChartProps;\r\n            this.margin = columnChartProps.margin;\r\n            this.width = this.graphicsContext.width;\r\n            this.height = this.graphicsContext.height;\r\n            this.categoryLayout = columnChartProps.layout;\r\n            this.animator = columnChartProps.animator;\r\n            this.interactivityService = columnChartProps.interactivityService;\r\n            this.viewportHeight = columnChartProps.viewportHeight;\r\n            this.viewportWidth = columnChartProps.viewportWidth;\r\n        }\r\n\r\n        public setData(data: MekkoColumnChartData) {\r\n            this.data = data;\r\n        }\r\n\r\n        private static createFormatter(\r\n            scaleDomain: any[],\r\n            dataDomain: any[],\r\n            dataType,\r\n            isScalar: boolean,\r\n            formatString: string,\r\n            bestTickCount: number,\r\n            tickValues: any[],\r\n            getValueFn: any,\r\n            useTickIntervalForDisplayUnits: boolean = false): IValueFormatter {\r\n\r\n            var formatter: IValueFormatter;\r\n            if (dataType.dateTime) {\r\n                if (isScalar) {\r\n                    var value = new Date(scaleDomain[0]);\r\n                    var value2 = new Date(scaleDomain[1]);\r\n                    // datetime with only one value needs to pass the same value\r\n                    // (from the original dataDomain value, not the adjusted scaleDomain)\r\n                    // so formatting works correctly.\r\n                    if (bestTickCount === 1)\r\n                        value = value2 = new Date(dataDomain[0]);\r\n                    formatter = valueFormatter.create({ format: formatString, value: value, value2: value2, tickCount: bestTickCount });\r\n                }\r\n                else {\r\n                    if (getValueFn == null) {\r\n                        debug.assertFail('getValueFn must be supplied for ordinal datetime tickValues');\r\n                    }\r\n                    var minDate: Date = getValueFn(0, dataType);\r\n                    var maxDate: Date = getValueFn(scaleDomain.length - 1, dataType);\r\n                    formatter = valueFormatter.create({ format: formatString, value: minDate, value2: maxDate, tickCount: bestTickCount });\r\n                }\r\n            }\r\n            else {\r\n                if (getValueFn == null && !isScalar) {\r\n                    debug.assertFail('getValueFn must be supplied for ordinal tickValues');\r\n                }\r\n                if (useTickIntervalForDisplayUnits && isScalar && tickValues.length > 1) {\r\n                    var domainMin = tickValues[1] - tickValues[0];\r\n                    var domainMax = 0; //force tickInterval to be used with display units\r\n                    formatter = valueFormatter.create({ format: formatString, value: domainMin, value2: domainMax, allowFormatBeautification: true });\r\n                }\r\n                else {\r\n                    // do not use display units, just the basic value formatter\r\n                    // datetime is handled above, so we are ordinal and either boolean, numeric, or text.\r\n                    formatter = valueFormatter.createDefaultFormatter(formatString, true);\r\n                }\r\n            }\r\n\r\n            return formatter;\r\n        }\r\n\r\n        /**\r\n         * Format the linear tick labels or the category labels.\r\n         */\r\n        private static formatAxisTickValues(\r\n            axis: D3.Svg.Axis,\r\n            tickValues: any[],\r\n            formatter: IValueFormatter,\r\n            dataType: ValueType,\r\n            isScalar: boolean,\r\n            getValueFn?: (index: number, type: ValueType) => any) {\r\n\r\n            var formattedTickValues = [];\r\n            if (formatter) {\r\n                // getValueFn takes an ordinal axis index or builds DateTime from milliseconds, do not pass a numeric scalar value.\r\n                if (getValueFn && !(dataType.numeric && isScalar)) {\r\n                    axis.tickFormat(d => formatter.format(getValueFn(d, dataType)));\r\n                    formattedTickValues = tickValues.map(d => formatter.format(getValueFn(d, dataType)));\r\n                }\r\n                else {\r\n                    axis.tickFormat(d => formatter.format(d));\r\n                    formattedTickValues = tickValues.map((d) => formatter.format(d));\r\n                }\r\n            }\r\n            else {\r\n                formattedTickValues = tickValues.map((d) => getValueFn(d, dataType));\r\n            }\r\n\r\n            return formattedTickValues;\r\n        }\r\n\r\n        /**\r\n         * Create a D3 axis including scale. Can be vertical or horizontal, and either datetime, numeric, or text.\r\n         * @param options The properties used to create the axis.\r\n         */\r\n        private createAxis(options): IAxisProperties {\r\n            var pixelSpan = options.pixelSpan,\r\n                dataDomain = options.dataDomain,\r\n                metaDataColumn = options.metaDataColumn,\r\n                formatStringProp = options.formatStringProp,\r\n                outerPadding = options.outerPadding || 0,\r\n                isCategoryAxis = !!options.isCategoryAxis,\r\n                isScalar = !!options.isScalar,\r\n                isVertical = !!options.isVertical,\r\n                useTickIntervalForDisplayUnits = !!options.useTickIntervalForDisplayUnits, // DEPRECATE: same meaning as isScalar?\r\n                getValueFn = options.getValueFn,\r\n                categoryThickness = options.categoryThickness;\r\n\r\n            var formatString = valueFormatter.getFormatString(metaDataColumn, formatStringProp);\r\n            var dataType: ValueType = AxisHelper.getCategoryValueType(metaDataColumn, isScalar);\r\n            var isLogScaleAllowed = AxisHelper.isLogScalePossible(dataDomain, dataType);\r\n\r\n            var scale = d3.scale.linear();\r\n            var scaleDomain = [0, 1];\r\n            var bestTickCount = dataDomain.length || 1;\r\n\r\n            var borderWidth: number = MekkoColumnChart.getBorderWidth(options.borderSettings);\r\n            var chartWidth = pixelSpan - borderWidth * (bestTickCount - 1);\r\n\r\n            if (chartWidth < MekkoChart.MinOrdinalRectThickness) {\r\n                chartWidth = MekkoChart.MinOrdinalRectThickness;\r\n            }\r\n\r\n            scale.domain(scaleDomain)\r\n                .range([0, chartWidth]);\r\n            var tickValues = dataDomain;\r\n\r\n            var formatter = MekkoColumnChartStrategy.createFormatter(\r\n                scaleDomain,\r\n                dataDomain,\r\n                dataType,\r\n                isScalar,\r\n                formatString,\r\n                bestTickCount,\r\n                tickValues,\r\n                getValueFn,\r\n                useTickIntervalForDisplayUnits);\r\n\r\n            // sets default orientation only, cartesianChart will fix y2 for comboChart\r\n            // tickSize(pixelSpan) is used to create gridLines\r\n            var axis = d3.svg.axis()\r\n                .scale(scale)\r\n                .tickSize(6, 0)\r\n                .orient(isVertical ? 'left' : 'bottom')\r\n                .ticks(bestTickCount)\r\n                .tickValues(dataDomain);\r\n\r\n            var formattedTickValues = [];\r\n            if (metaDataColumn) {\r\n                formattedTickValues = MekkoColumnChartStrategy.formatAxisTickValues(axis, tickValues, formatter, dataType, isScalar, getValueFn);\r\n            }\r\n\r\n            var xLabelMaxWidth;\r\n            // Use category layout of labels if specified, otherwise use scalar layout of labels\r\n            if (!isScalar && categoryThickness) {\r\n                xLabelMaxWidth = Math.max(1, categoryThickness - CartesianChart.TickLabelPadding * 2);\r\n            }\r\n            else {\r\n                // When there are 0 or 1 ticks, then xLabelMaxWidth = pixelSpan\r\n                // When there is > 1 ticks then we need to +1 so that their widths don't overlap\r\n                // Example: 2 ticks are drawn at 33.33% and 66.66%, their width needs to be 33.33% so they don't overlap.\r\n                var labelAreaCount = tickValues.length > 1 ? tickValues.length + 1 : tickValues.length;\r\n                xLabelMaxWidth = labelAreaCount > 1 ? pixelSpan / labelAreaCount : pixelSpan;\r\n                xLabelMaxWidth = Math.max(1, xLabelMaxWidth - CartesianChart.TickLabelPadding * 2);\r\n            }\r\n\r\n            return {\r\n                scale: scale,\r\n                axis: axis,\r\n                formatter: formatter,\r\n                values: formattedTickValues,\r\n                axisType: dataType,\r\n                axisLabel: null,\r\n                isCategoryAxis: isCategoryAxis,\r\n                xLabelMaxWidth: xLabelMaxWidth,\r\n                categoryThickness: categoryThickness,\r\n                outerPadding: outerPadding,\r\n                usingDefaultDomain: false,//scaleResult.usingDefaultDomain,\r\n                isLogScaleAllowed: isLogScaleAllowed\r\n            };\r\n        }\r\n\r\n        private getCategoryAxis(\r\n            data: MekkoColumnChartData,\r\n            size: number,\r\n            layout: CategoryLayout,\r\n            isVertical: boolean,\r\n            forcedXMin?: DataViewPropertyValue,\r\n            forcedXMax?: DataViewPropertyValue,\r\n            axisScaleType?: string): IAxisProperties {\r\n\r\n            var categoryThickness = layout.categoryThickness;\r\n            var isScalar: boolean  = layout.isScalar;\r\n            var outerPaddingRatio = layout.outerPaddingRatio;\r\n            var dw = new MekkoDataWrapper(data, isScalar);\r\n            var domain: number[] = [];\r\n\r\n            if (data.series &&\r\n                (data.series.length > 0) &&\r\n                data.series[0].data &&\r\n                (data.series[0].data.length > 0)\r\n            ) {\r\n                var domainDoubles = data.series[0].data.map((item: ColumnChartDataPoint) => {\r\n                    return item.originalPosition + (item.value / 2);\r\n                });\r\n\r\n                domain = domainDoubles.filter(function(item, pos) {\r\n                    return domainDoubles.indexOf(item) === pos;\r\n                });\r\n            }\r\n\r\n            var axisProperties: IAxisProperties = this.createAxis({\r\n                pixelSpan: size,\r\n                dataDomain: domain,\r\n                metaDataColumn: data.categoryMetadata,\r\n                formatStringProp: columnChartProps.general.formatString,\r\n                outerPadding: categoryThickness * outerPaddingRatio,\r\n                isCategoryAxis: true,\r\n                isScalar: isScalar,\r\n                isVertical: isVertical,\r\n                categoryThickness: categoryThickness,\r\n                useTickIntervalForDisplayUnits: true,\r\n                getValueFn: (index, type) => {\r\n                    var domainIndex = domain.indexOf(index);\r\n                    var value = dw.lookupXValue(domainIndex, type);\r\n                    return value;\r\n                },\r\n                scaleType: axisScaleType,\r\n                borderSettings: data.borderSettings\r\n            });\r\n            // intentionally updating the input layout by ref\r\n            layout.categoryThickness = axisProperties.categoryThickness;\r\n            return axisProperties;\r\n        }\r\n\r\n        public setXScale(is100Pct: boolean, forcedTickCount?: number, forcedXDomain?: any[], axisScaleType?: string): IAxisProperties {\r\n            var width = this.width;\r\n            var forcedXMin, forcedXMax;\r\n\r\n            if (forcedXDomain && forcedXDomain.length === 2) {\r\n                forcedXMin = forcedXDomain[0];\r\n                forcedXMax = forcedXDomain[1];\r\n            }\r\n\r\n            var props = this.xProps = this.getCategoryAxis(\r\n                this.data,\r\n                width,\r\n                this.categoryLayout,\r\n                false,\r\n                forcedXMin,\r\n                forcedXMax,\r\n                axisScaleType);\r\n\r\n            return props;\r\n        }\r\n\r\n        public setYScale(is100Pct: boolean, forcedTickCount?: number, forcedYDomain?: any[], axisScaleType?: string): IAxisProperties {\r\n            var height = this.viewportHeight;\r\n            var valueDomain = StackedUtil.calcValueDomain(this.data.series, is100Pct);\r\n            var valueDomainArr = [valueDomain.min, valueDomain.max];\r\n            var combinedDomain = AxisHelper.combineDomain(forcedYDomain, valueDomainArr);\r\n            var shouldClamp = AxisHelper.scaleShouldClamp(combinedDomain, valueDomainArr);\r\n            var metadataColumn = this.data.valuesMetadata[0];\r\n            var formatString = is100Pct ?\r\n                this.graphicsContext.hostService.getLocalizedString('Percentage')\r\n                : valueFormatter.getFormatString(metadataColumn, columnChartProps.general.formatString);\r\n\r\n            var mekkoMekkoCreateAxisOptions: MekkoCreateAxisOptions = {\r\n                pixelSpan: height,\r\n                dataDomain: combinedDomain,\r\n                metaDataColumn: metadataColumn,\r\n                formatString: formatString,\r\n                outerPadding: 0,\r\n                isScalar: true,\r\n                isVertical: true,\r\n                forcedTickCount: forcedTickCount,\r\n                useTickIntervalForDisplayUnits: true,\r\n                isCategoryAxis: false,\r\n                scaleType: axisScaleType,\r\n                axisDisplayUnits: 0,\r\n                axisPrecision: 0,\r\n                is100Pct: is100Pct,\r\n                shouldClamp: shouldClamp,\r\n                formatStringProp: undefined,\r\n            };\r\n\r\n            this.yProps = AxisHelper.createAxis(mekkoMekkoCreateAxisOptions);\r\n            return this.yProps;\r\n        }\r\n\r\n        public drawColumns(useAnimation: boolean): MekkoColumnChartDrawInfo {\r\n            var data = this.data;\r\n            debug.assertValue(data, 'data should not be null or undefined');\r\n            this.columnsCenters = null; // invalidate the columnsCenters so that will be calculated again\r\n\r\n            var axisOptions: MekkoColumnAxisOptions = {\r\n                columnWidth: 0,\r\n                xScale: this.xProps.scale,\r\n                yScale: this.yProps.scale,\r\n                isScalar: this.categoryLayout.isScalar,\r\n                margin: this.margin,\r\n            };\r\n            var stackedColumnLayout = this.layout = MekkoColumnChartStrategy.getLayout(data, axisOptions);\r\n            //var dataLabelSettings = data.labelSettings;\r\n            var labelDataPoints: MekkoLabelDataPoint[] = this.createMekkoLabelDataPoints();\r\n            var result: ColumnChartAnimationResult;\r\n            var shapes: D3.UpdateSelection;\r\n            var series = ColumnUtil.drawSeries(data, this.graphicsContext.mainGraphicsContext, axisOptions);\r\n            if (this.animator && useAnimation) {\r\n                result = this.animator.animate({\r\n                    viewModel: data,\r\n                    series: series,\r\n                    layout: stackedColumnLayout,\r\n                    itemCS: MekkoColumnChartStrategy.classes.item,\r\n                    interactivityService: this.interactivityService,\r\n                    mainGraphicsContext: this.graphicsContext.mainGraphicsContext,\r\n                    viewPort: { height: this.height, width: this.width },\r\n                });\r\n                shapes = result.shapes;\r\n            }\r\n            if (!this.animator || !useAnimation || result.failed) {\r\n                shapes = MekkoColumnChartStrategy.drawDefaultShapes(data,\r\n                    series,\r\n                    stackedColumnLayout,\r\n                    MekkoColumnChartStrategy.classes.item,\r\n                    !this.animator,\r\n                    this.interactivityService && this.interactivityService.hasSelection());\r\n            }\r\n\r\n            ColumnUtil.applyInteractivity(shapes, this.graphicsContext.onDragStart);\r\n\r\n            return {\r\n                shapesSelection: shapes,\r\n                viewport: { height: this.height, width: this.width },\r\n                axisOptions,\r\n                labelDataPoints: labelDataPoints,\r\n            };\r\n        }\r\n\r\n        private static drawDefaultShapes(data: MekkoColumnChartData,\r\n            series: D3.UpdateSelection,\r\n            layout: IMekkoColumnLayout,\r\n            itemCS: ClassAndSelector,\r\n            filterZeros: boolean,\r\n            hasSelection: boolean): D3.UpdateSelection {\r\n            // We filter out invisible (0, null, etc.) values from the dataset\r\n            // based on whether animations are enabled or not, Dashboard and\r\n            // Exploration mode, respectively.\r\n\r\n            var rectName: string = 'rect';\r\n            filterZeros = false;\r\n\r\n            var dataSelector: (d: ColumnChartSeries) => any[];\r\n            if (filterZeros) {\r\n                dataSelector = (d: ColumnChartSeries) => {\r\n                    var filteredData = _.filter(d.data, (datapoint: ColumnChartDataPoint) => !!datapoint.value);\r\n                    return filteredData;\r\n                };\r\n            }\r\n            else {\r\n                dataSelector = (d: ColumnChartSeries) => d.data;\r\n            }\r\n\r\n            var shapeSelection = series.selectAll(itemCS.selector);\r\n            var shapes = shapeSelection.data(dataSelector, (d: ColumnChartDataPoint) => d.key);\r\n\r\n            shapes.enter()\r\n                .append(rectName)\r\n                .attr(\"class\", (d: ColumnChartDataPoint) => itemCS.class.concat(d.highlight ? \" highlight\" : \"\"));\r\n\r\n            shapes\r\n                .style(\"fill\", (d: ColumnChartDataPoint) => d.color)\r\n                .style(\"fill-opacity\", (d: ColumnChartDataPoint) => ColumnUtil.getFillOpacity(d.selected, d.highlight, hasSelection, data.hasHighlights))\r\n                .attr(layout.shapeLayout);\r\n\r\n            shapes\r\n                .exit()\r\n                .remove();\r\n\r\n            var borderSelection = series.selectAll(MekkoColumnChart.BorderClass.selector);\r\n            var borders = borderSelection.data(dataSelector, (d: ColumnChartDataPoint) => d.key);\r\n\r\n            var borderColor = MekkoColumnChart.getBorderColor(data.borderSettings);\r\n\r\n            borders.enter()\r\n                .append(rectName)\r\n                .classed(MekkoColumnChart.BorderClass.class, true);\r\n\r\n            borders\r\n                .style(\"fill\", (d: ColumnChartDataPoint) => borderColor)\r\n                .style(\"fill-opacity\", (d: ColumnChartDataPoint) => {\r\n                    return data.hasHighlights ? ColumnUtil.DimmedOpacity : ColumnUtil.DefaultOpacity;\r\n                })\r\n                .attr(layout.shapeBorder);\r\n\r\n            borders\r\n                .exit()\r\n                .remove();\r\n\r\n            return shapes;\r\n        }\r\n\r\n        public selectColumn(selectedColumnIndex: number, lastSelectedColumnIndex: number): void {\r\n            ColumnUtil.setChosenColumnOpacity(this.graphicsContext.mainGraphicsContext, MekkoColumnChartStrategy.classes.item.selector, selectedColumnIndex, lastSelectedColumnIndex);\r\n            this.moveHandle(selectedColumnIndex);\r\n        }\r\n\r\n        public getClosestColumnIndex(x: number, y: number): number {\r\n            return ColumnUtil.getClosestColumnIndex(x, this.getColumnsCenters());\r\n        }\r\n\r\n        /**\r\n         * Get the chart's columns centers (x value).\r\n         */\r\n        private getColumnsCenters(): number[] {\r\n            if (!this.columnsCenters) { // lazy creation\r\n                var categoryWidth: number = this.categoryLayout.categoryThickness * (1 - CartesianChart.InnerPaddingRatio);\r\n                // use the axis scale and first series data to get category centers\r\n                if (this.data.series.length > 0) {\r\n                    var xScaleOffset = 0;\r\n                    if (!this.categoryLayout.isScalar) {\r\n                        xScaleOffset = categoryWidth / 2;\r\n                    }\r\n                    var firstSeries = this.data.series[0];\r\n                    if (firstSeries &&\r\n                        firstSeries.data) {\r\n                        this.columnsCenters = firstSeries.data.map(d => this.xProps.scale(this.categoryLayout.isScalar ? d.categoryValue : d.categoryIndex) + xScaleOffset);\r\n                    }\r\n                }\r\n            }\r\n            return this.columnsCenters;\r\n        }\r\n\r\n        private moveHandle(selectedColumnIndex: number) {\r\n            var columnCenters = this.getColumnsCenters();\r\n            var x = columnCenters[selectedColumnIndex];\r\n\r\n            if (!this.columnSelectionLineHandle) {\r\n                var handle = this.columnSelectionLineHandle = this.graphicsContext.mainGraphicsContext.append('g');\r\n                handle.append('line')\r\n                    .classed('interactive-hover-line', true)\r\n                    .attr({\r\n                        x1: x,\r\n                        x2: x,\r\n                        y1: 0,\r\n                        y2: this.height,\r\n                    });\r\n\r\n                handle.append('circle')\r\n                    .attr({\r\n                        cx: x,\r\n                        cy: this.height,\r\n                        r: '6px',\r\n                    })\r\n                    .classed('drag-handle', true);\r\n            }\r\n            else {\r\n                var handle = this.columnSelectionLineHandle;\r\n                handle.select('line').attr({ x1: x, x2: x });\r\n                handle.select('circle').attr({ cx: x });\r\n            }\r\n        }\r\n\r\n        public static getLayout(data: MekkoColumnChartData, axisOptions: MekkoColumnAxisOptions): IMekkoColumnLayout {\r\n            var xScale = axisOptions.xScale;\r\n            var yScale = axisOptions.yScale;\r\n            var scaledY0 = yScale(0);\r\n            var scaledX0 = xScale(0);\r\n\r\n            var borderWidth: number = MekkoColumnChart.getBorderWidth(data.borderSettings);\r\n\r\n            var columnWidthScale = (d: ColumnChartDataPoint) => {\r\n                var value: number = AxisHelper.diffScaled(xScale, d.value, 0);\r\n                return value;\r\n            };\r\n\r\n            var columnStart = (d: ColumnChartDataPoint) => {\r\n                var value: number = scaledX0 +\r\n                                    AxisHelper.diffScaled(xScale, d.originalPosition, 0) +\r\n                                    borderWidth * d.categoryIndex;\r\n                return value;\r\n            };\r\n\r\n            var borderStart = (d: ColumnChartDataPoint) => {\r\n                var value: number = scaledX0 +\r\n                            AxisHelper.diffScaled(xScale, d.originalPosition, 0) +\r\n                            AxisHelper.diffScaled(xScale, d.value, 0) +\r\n                            borderWidth * d.categoryIndex;\r\n\r\n                return value;\r\n            };\r\n\r\n            return {\r\n                shapeLayout: {\r\n                    width: columnWidthScale,\r\n                    x: columnStart,\r\n                    y: (d: ColumnChartDataPoint) => scaledY0 + AxisHelper.diffScaled(yScale, d.position, 0),\r\n                    height: (d: ColumnChartDataPoint) => StackedUtil.getSize(yScale, d.valueAbsolute)\r\n                },\r\n                shapeBorder: {\r\n                    width: (d: ColumnChartDataPoint) => borderWidth,\r\n                    x: borderStart,\r\n                    y: (d: ColumnChartDataPoint) => scaledY0 + AxisHelper.diffScaled(yScale, d.position, 0),\r\n                    height: (d: ColumnChartDataPoint) => StackedUtil.getSize(yScale, d.valueAbsolute)\r\n                },\r\n                shapeLayoutWithoutHighlights: {\r\n                    width: columnWidthScale,\r\n                    x: columnStart,\r\n                    y: (d: ColumnChartDataPoint) => scaledY0 + AxisHelper.diffScaled(yScale, d.position, 0),\r\n                    height: (d: ColumnChartDataPoint) => StackedUtil.getSize(yScale, d.originalValueAbsolute)\r\n                },\r\n                zeroShapeLayout: {\r\n                    width: columnWidthScale,\r\n                    x: columnStart,\r\n                    y: (d: ColumnChartDataPoint) => scaledY0 + AxisHelper.diffScaled(yScale, d.position, 0) + StackedUtil.getSize(yScale, d.valueAbsolute),\r\n                    height: (d: ColumnChartDataPoint) => 0\r\n                },\r\n                shapeXAxis: {\r\n                    width: columnWidthScale,\r\n                    x: columnStart,\r\n                    y: (d: ColumnChartDataPoint) => scaledY0 + AxisHelper.diffScaled(yScale, d.position, 0),\r\n                    height: (d: ColumnChartDataPoint) => StackedUtil.getSize(yScale, d.valueAbsolute)\r\n                },\r\n            };\r\n        }\r\n\r\n        private createMekkoLabelDataPoints(): MekkoLabelDataPoint[] {\r\n            var labelDataPoints: MekkoLabelDataPoint[] = [];\r\n            var data = this.data;\r\n            var series = data.series;\r\n            var formattersCache = NewDataLabelUtils.createColumnFormatterCacheManager();\r\n            var shapeLayout = this.layout.shapeLayout;\r\n\r\n            for (var i: number = 0, ilen = series.length; i < ilen; i++) {\r\n                var currentSeries = series[i];\r\n                var labelSettings = currentSeries.labelSettings ? currentSeries.labelSettings : data.labelSettings;\r\n\r\n                if (!labelSettings.show) {\r\n                    continue;\r\n                }\r\n\r\n                if (!currentSeries.data) {\r\n                    continue;\r\n                }\r\n\r\n                var axisFormatter: number = NewDataLabelUtils.getDisplayUnitValueFromAxisFormatter(this.yProps.formatter, labelSettings);\r\n\r\n                for (var j: number = 0; j < currentSeries.data.length; j++) {\r\n                    var dataPoint: ColumnChartDataPoint = currentSeries.data[j];\r\n                    if ((data.hasHighlights && !dataPoint.highlight) || dataPoint.value == null) {\r\n                        continue;\r\n                    }\r\n\r\n                    // Calculate parent rectangle\r\n                    var parentRect: IRect = {\r\n                        left: shapeLayout.x(dataPoint),\r\n                        top: shapeLayout.y(dataPoint),\r\n                        width: shapeLayout.width(dataPoint),\r\n                        height: shapeLayout.height(dataPoint),\r\n                    };\r\n\r\n                    // Calculate label text\r\n                    var formatString = null;\r\n                    var value: number = dataPoint.valueOriginal;\r\n\r\n                    if (!labelSettings.displayUnits) {\r\n                        formatString = NewDataLabelUtils.hundredPercentFormat;\r\n                        value = dataPoint.valueAbsolute;\r\n                    }\r\n\r\n                    var formatter = formattersCache.getOrCreate(formatString, labelSettings, axisFormatter);\r\n                    var text = NewDataLabelUtils.getLabelFormattedText(formatter.format(value));\r\n\r\n                    // Calculate text size\r\n                    var properties: TextProperties = {\r\n                        text: text,\r\n                        fontFamily: NewDataLabelUtils.LabelTextProperties.fontFamily,\r\n                        fontSize: NewDataLabelUtils.LabelTextProperties.fontSize,\r\n                        fontWeight: NewDataLabelUtils.LabelTextProperties.fontWeight,\r\n                    };\r\n                    var textWidth = TextMeasurementService.measureSvgTextWidth(properties);\r\n                    var textHeight = TextMeasurementService.estimateSvgTextHeight(properties);\r\n\r\n                    labelDataPoints.push({\r\n                        isPreferred: true,\r\n                        text: text,\r\n                        textSize: {\r\n                            width: textWidth,\r\n                            height: textHeight,\r\n                        },\r\n                        outsideFill: labelSettings.labelColor ? labelSettings.labelColor : NewDataLabelUtils.defaultLabelColor,\r\n                        insideFill: labelSettings.labelColor ? labelSettings.labelColor : NewDataLabelUtils.defaultInsideLabelColor,\r\n                        isParentRect: true,\r\n                        parentShape: {\r\n                            rect: parentRect,\r\n                            orientation: 1,\r\n                            validPositions: MekkoColumnChartStrategy.validLabelPositions,\r\n                        },\r\n                        identity: dataPoint.identity,\r\n                        parentType: 1,//LabelDataPointParentType.Rectangle,\r\n                    });\r\n                }\r\n            }\r\n\r\n            return labelDataPoints;\r\n        }\r\n    }\r\n\r\n    export interface MekkoChartSettings {\r\n        columnBorder: MekkoBorderSettings;\r\n        labelSettings: MekkoLabelSettings;\r\n    }\r\n\r\n    /**\r\n     * Renders a data series as a cartestian visual.\r\n     */\r\n    export class MekkoChart implements IVisual {\r\n        public static capabilities: VisualCapabilities = {\r\n            dataRoles: [\r\n                {\r\n                    name: 'Category',\r\n                    kind: VisualDataRoleKind.Grouping,\r\n                    displayName: 'Category',\r\n                }, {\r\n                    name: 'Series',\r\n                    kind: VisualDataRoleKind.Grouping,\r\n                    displayName: 'Series',\r\n                }, {\r\n                    name: 'Y',\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: 'Y Axis',\r\n                }, {\r\n                    name: 'Width',\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: 'Axis width',\r\n                }\r\n            ],\r\n            objects: {\r\n                columnBorder: {\r\n                    displayName: 'Column Border',\r\n                    properties: {\r\n                        show: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Show'),\r\n                            type: { bool: true }\r\n                        },\r\n                        color: {\r\n                            displayName: data.createDisplayNameGetter('Visual_LabelsFill'),\r\n                            description: data.createDisplayNameGetter('Visual_LabelsFillDescription'),\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        width: {\r\n                            displayName: 'Width',\r\n                            type: { numeric: true }\r\n                        },\r\n                    },\r\n                },\r\n                labels: {\r\n                    displayName: data.createDisplayNameGetter('Visual_DataPointsLabels'),\r\n                    description: data.createDisplayNameGetter('Visual_DataPointsLabelsDescription'),\r\n                    properties: {\r\n                        show: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Show'),\r\n                            type: { bool: true }\r\n                        },\r\n                        showSeries: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Show'),\r\n                            type: { bool: true }\r\n                        },\r\n                        color: {\r\n                            displayName: data.createDisplayNameGetter('Visual_LabelsFill'),\r\n                            description: data.createDisplayNameGetter('Visual_LabelsFillDescription'),\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        labelDisplayUnits: {\r\n                            displayName: data.createDisplayNameGetter('Visual_DisplayUnits'),\r\n                            description: data.createDisplayNameGetter('Visual_DisplayUnitsDescription'),\r\n                            type: { formatting: { labelDisplayUnits: true } },\r\n                            suppressFormatPainterCopy: true\r\n                        },\r\n                        labelPrecision: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Precision'),\r\n                            description: data.createDisplayNameGetter('Visual_PrecisionDescription'),\r\n                            placeHolderText: data.createDisplayNameGetter('Visual_Precision_Auto'),\r\n                            type: { numeric: true },\r\n                            suppressFormatPainterCopy: true\r\n                        },\r\n                        showAll: {\r\n                            displayName: data.createDisplayNameGetter('Visual_ShowAll'),\r\n                            type: { bool: true }\r\n                        },\r\n                        fontSize: {\r\n                            displayName: data.createDisplayNameGetter('Visual_TextSize'),\r\n                            type: { formatting: { fontSize: true } }\r\n                        },\r\n                    },\r\n                },\r\n                legend: {\r\n                    displayName: data.createDisplayNameGetter('Visual_Legend'),\r\n                    properties: {\r\n                        show: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Show'),\r\n                            type: { bool: true }\r\n                        },\r\n                        position: {\r\n                            displayName: data.createDisplayNameGetter('Visual_LegendPosition'),\r\n                            type: { formatting: { legendPosition: true } }\r\n                        },\r\n                        showTitle: {\r\n                            displayName: data.createDisplayNameGetter('Visual_LegendShowTitle'),\r\n                            type: { bool: true }\r\n                        },\r\n                        titleText: {\r\n                            displayName: 'Title text',\r\n                            type: { text: true }\r\n                        },\r\n                        fontSize: {\r\n                            displayName: 'Text size',\r\n                            type: { formatting: { fontSize: true } }\r\n                        },\r\n                    }\r\n                },\r\n                categoryAxis: {\r\n                    displayName: data.createDisplayNameGetter('Visual_XAxis'),\r\n                    properties: {\r\n                        show: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Show'),\r\n                            type: { bool: true }\r\n                        },\r\n                        position: {\r\n                            displayName: data.createDisplayNameGetter('Visual_YAxis_Position'),\r\n                            type: { formatting: { yAxisPosition: true } }\r\n                        },\r\n                        axisScale: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Axis_Scale'),\r\n                            type: { formatting: { axisScale: true } }\r\n                        },\r\n                        /*start: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Axis_Start'),\r\n                            type: { numeric: true }\r\n                        },\r\n                        end: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Axis_End'),\r\n                            type: { numeric: true }\r\n                        },*/\r\n                        axisType: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Axis_Type'),\r\n                            type: { formatting: { axisType: true } }\r\n                        },\r\n                        showAxisTitle: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Axis_Title'),\r\n                            type: { bool: true }\r\n                        },\r\n                        axisStyle: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Axis_Style'),\r\n                            type: { formatting: { axisStyle: true } }\r\n                        },\r\n                        labelColor: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Axis_LabelColor'),\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        fontSize: {\r\n                            displayName: data.createDisplayNameGetter('Visual_TextSize'),\r\n                            type: { formatting: { fontSize: true } }\r\n                        },\r\n                    }\r\n                },\r\n                valueAxis: {\r\n                    displayName: data.createDisplayNameGetter('Visual_YAxis'),\r\n                    properties: {\r\n                        show: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Show'),\r\n                            type: { bool: true }\r\n                        },\r\n                        position: {\r\n                            displayName: data.createDisplayNameGetter('Visual_YAxis_Position'),\r\n                            type: { formatting: { yAxisPosition: true } }\r\n                        },\r\n                        axisScale: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Axis_Scale'),\r\n                            type: { formatting: { axisScale: true } }\r\n                        },\r\n                        /*start: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Axis_Start'),\r\n                            type: { numeric: true }\r\n                        },\r\n                        end: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Axis_End'),\r\n                            type: { numeric: true }\r\n                        },*/\r\n                        intersection: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Axis_Intersection'),\r\n                            type: { numeric: true }\r\n                        },\r\n                        showAxisTitle: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Axis_Title'),\r\n                            type: { bool: true }\r\n                        },\r\n                        axisStyle: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Axis_Style'),\r\n                            type: { formatting: { axisStyle: true } }\r\n                        },\r\n                        labelColor: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Axis_LabelColor'),\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        fontSize: {\r\n                            displayName: data.createDisplayNameGetter('Visual_TextSize'),\r\n                            type: { formatting: { fontSize: true } }\r\n                        },\r\n\r\n                    }\r\n                },\r\n                dataPoint: {\r\n                    displayName: data.createDisplayNameGetter('Visual_DataPoint'),\r\n                    properties: {\r\n                        defaultColor: {\r\n                            displayName: data.createDisplayNameGetter('Visual_DefaultColor'),\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        showAllDataPoints: {\r\n                            displayName: data.createDisplayNameGetter('Visual_DataPoint_Show_All'),\r\n                            type: { bool: true }\r\n                        },\r\n                        fill: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Fill'),\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        fillRule: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Gradient'),\r\n                            type: { fillRule: {} },\r\n                            rule: {\r\n                                inputRole: 'Gradient',\r\n                                output: {\r\n                                    property: 'fill',\r\n                                    selector: ['Category'],\r\n                                },\r\n                            },\r\n                        }\r\n                    }\r\n                },\r\n\r\n            },\r\n            dataViewMappings: [{\r\n                conditions: [\r\n                    { 'Category': { min: 0, max: 1 }, 'Series': { min: 0, max: 1 }, 'Y': { min: 0, max: 1 }, 'Width': { min: 0, max: 1 } },\r\n                ],\r\n                categorical: {\r\n                    categories: {\r\n                        for: { in: 'Category' },\r\n                        dataReductionAlgorithm: { top: {} }\r\n                    },\r\n                    values: {\r\n                        group: {\r\n                            by: 'Series',\r\n                            select: [{ for: { in: 'Y' } }, { for: { in: 'Width' } }],\r\n                            dataReductionAlgorithm: { top: {} }\r\n                        }\r\n                    },\r\n                    rowCount: { preferred: { min: 1, max: 1 }, supported: { min: 0 } }\r\n                },\r\n            }],\r\n            supportsHighlight: true,\r\n            sorting: {\r\n                default: {},\r\n            },\r\n            drilldown: {\r\n                roles: ['Category']\r\n            },\r\n        };\r\n\r\n        private static properties = {\r\n            general: {\r\n                formatString: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"general\",\r\n                    propertyName: \"formatString\"\r\n                }\r\n            },\r\n            columnBorder: {\r\n                show: <DataViewObjectPropertyIdentifier>{ objectName: 'columnBorder', propertyName: 'show', },\r\n                color: <DataViewObjectPropertyIdentifier>{ objectName: 'columnBorder', propertyName: 'color' },\r\n                width: <DataViewObjectPropertyIdentifier>{ objectName: 'columnBorder', propertyName: 'width' },\r\n            },\r\n        };\r\n\r\n        public static DefaultSettings: MekkoChartSettings = {\r\n            columnBorder: {\r\n                show: true,\r\n                color: '#fff',\r\n                width: 2,\r\n                maxWidth: 5,\r\n            },\r\n            labelSettings: {\r\n                maxPrecision: 4,\r\n                minPrecision: 0,\r\n            }\r\n        };\r\n\r\n        private static getTextProperties(fontSize: number = MekkoChart.FontSize): TextProperties {\r\n            return {\r\n                fontFamily: 'wf_segoe-ui_normal',\r\n                fontSize: jsCommon.PixelConverter.toString(fontSize),\r\n            };\r\n        }\r\n\r\n        public static MinOrdinalRectThickness = 20;\r\n        public static MinScalarRectThickness = 2;\r\n        public static OuterPaddingRatio = 0.4;\r\n        public static InnerPaddingRatio = 0.2;\r\n        public static TickLabelPadding = 2;\r\n\r\n        private static ClassName = 'cartesianChart';\r\n        private static AxisGraphicsContextClassName = 'axisGraphicsContext';\r\n        private static MaxMarginFactor = 0.25;\r\n        private static MinBottomMargin = 50;\r\n        private static LeftPadding = 10;\r\n        private static RightPadding = 10;\r\n        private static BottomPadding = 16;\r\n        private static YAxisLabelPadding = 20;\r\n        private static XAxisLabelPadding = 20;\r\n        private static TickPaddingY = 10;\r\n        private static TickPaddingRotatedX = 5;\r\n        private static FontSize = 11;\r\n\r\n        public static MaxNumberOfLabels = 100;\r\n\r\n        private static MinWidth: number = 100;\r\n        private static MinHeight: number = 100;\r\n\r\n        private axisGraphicsContext: D3.Selection;\r\n        private xAxisGraphicsContext: D3.Selection;\r\n        private y1AxisGraphicsContext: D3.Selection;\r\n        private y2AxisGraphicsContext: D3.Selection;\r\n        private element: JQuery;\r\n        private svg: D3.Selection;\r\n        private clearCatcher: D3.Selection;\r\n        private margin: IMargin;\r\n        private type: MekkoChartType;\r\n        private hostServices: IVisualHostServices;\r\n        private layers: IMekkoColumnChartVisual[];\r\n        private legend: ILegend;\r\n        private legendMargins: IViewport;\r\n        private layerLegendData: LegendData;\r\n        private hasSetData: boolean;\r\n        private visualInitOptions: VisualInitOptions;\r\n\r\n        private borderObjectProperties: DataViewObject;\r\n        private legendObjectProperties: DataViewObject;\r\n        private categoryAxisProperties: DataViewObject;\r\n\r\n        private valueAxisProperties: DataViewObject;\r\n        private cartesianSmallViewPortProperties: CartesianSmallViewPortProperties;\r\n        private interactivityService: IInteractivityService;\r\n        private behavior: IInteractiveBehavior;\r\n        private y2AxisExists: boolean;\r\n        private categoryAxisHasUnitType: boolean;\r\n        private valueAxisHasUnitType: boolean;\r\n        private hasCategoryAxis: boolean;\r\n        private yAxisIsCategorical: boolean;\r\n        private secValueAxisHasUnitType: boolean;\r\n        private axes: CartesianAxisProperties;\r\n        private yAxisOrientation: string;\r\n        private bottomMarginLimit: number;\r\n        private leftRightMarginLimit: number;\r\n        private sharedColorPalette: SharedColorPalette;\r\n\r\n        public animator: IGenericAnimator;\r\n\r\n        // Scrollbar related\r\n        private isScrollable: boolean;\r\n        private scrollY: boolean;\r\n        private scrollX: boolean;\r\n        private isXScrollBarVisible: boolean;\r\n        private isYScrollBarVisible: boolean;\r\n        private svgScrollable: D3.Selection;\r\n        private axisGraphicsContextScrollable: D3.Selection;\r\n        private labelGraphicsContextScrollable: D3.Selection;\r\n        private brushGraphicsContext: D3.Selection;\r\n        private brush: D3.Svg.Brush;\r\n        private static ScrollBarWidth = 10;\r\n        // TODO: Remove onDataChanged & onResizing once all visuals have implemented update.\r\n        private dataViews: DataView[];\r\n        private currentViewport: IViewport;\r\n\r\n        constructor(options: MekkoConstructorOptions) {\r\n            this.isScrollable = false;\r\n            if (options) {\r\n                this.type = options.chartType;\r\n                if (options.isScrollable)\r\n                    this.isScrollable = options.isScrollable;\r\n                this.animator = options.animator;\r\n                if (options.cartesianSmallViewPortProperties) {\r\n                    this.cartesianSmallViewPortProperties = options.cartesianSmallViewPortProperties;\r\n                }\r\n\r\n                if (options.behavior) {\r\n                    this.behavior = options.behavior;\r\n                }\r\n            } else {\r\n                this.behavior = new MekkoChartBehavior([new ColumnChartWebBehavior()]);\r\n            }\r\n        }\r\n\r\n        public init(options: VisualInitOptions) {\r\n            this.visualInitOptions = options;\r\n            this.layers = [];\r\n\r\n            var element = this.element = options.element;\r\n            var viewport = this.currentViewport = options.viewport;\r\n            this.hostServices = options.host;\r\n            this.brush = d3.svg.brush();\r\n            element.addClass(MekkoChart.ClassName);\r\n            this.margin = {\r\n                top: 1,\r\n                right: 1,\r\n                bottom: 1,\r\n                left: 1\r\n            };\r\n            this.yAxisOrientation = yAxisPosition.left;\r\n            this.adjustMargins(viewport);\r\n\r\n            this.sharedColorPalette = new SharedColorPalette(options.style.colorPalette.dataColors);\r\n\r\n            var showLinesOnX = true;\r\n            var showLinesOnY = true;\r\n\r\n            var svg = this.svg = d3.select(element.get(0)).append('svg');\r\n            svg.style('position', 'absolute');\r\n\r\n            var axisGraphicsContext = this.axisGraphicsContext = svg.append('g')\r\n                .classed(MekkoChart.AxisGraphicsContextClassName, true);\r\n\r\n            this.svgScrollable = svg.append('svg')\r\n                .classed('svgScrollable', true)\r\n                .style('overflow', 'hidden');\r\n\r\n            var axisGraphicsContextScrollable = this.axisGraphicsContextScrollable = this.svgScrollable.append('g')\r\n                .classed(MekkoChart.AxisGraphicsContextClassName, true);\r\n\r\n            this.labelGraphicsContextScrollable = this.svgScrollable.append('g')\r\n                .classed(NewDataLabelUtils.labelGraphicsContextClass.class, true);\r\n\r\n            if (this.behavior) {\r\n                this.clearCatcher = appendClearCatcher(this.axisGraphicsContextScrollable);\r\n            }\r\n\r\n            var axisGroup = showLinesOnX ? axisGraphicsContextScrollable : axisGraphicsContext;\r\n\r\n            this.xAxisGraphicsContext = showLinesOnX ? axisGraphicsContext.append('g').attr('class', 'x axis') : axisGraphicsContextScrollable.append('g').attr('class', 'x axis');\r\n            this.y1AxisGraphicsContext = axisGroup.append('g').attr('class', 'y axis');\r\n            this.y2AxisGraphicsContext = axisGroup.append('g').attr('class', 'y axis');\r\n\r\n            this.xAxisGraphicsContext.classed('showLinesOnAxis', showLinesOnX);\r\n            this.y1AxisGraphicsContext.classed('showLinesOnAxis', showLinesOnY);\r\n            this.y2AxisGraphicsContext.classed('showLinesOnAxis', showLinesOnY);\r\n\r\n            this.xAxisGraphicsContext.classed('hideLinesOnAxis', !showLinesOnX);\r\n            this.y1AxisGraphicsContext.classed('hideLinesOnAxis', !showLinesOnY);\r\n            this.y2AxisGraphicsContext.classed('hideLinesOnAxis', !showLinesOnY);\r\n\r\n            if (this.behavior) {\r\n                this.interactivityService = createInteractivityService(this.hostServices);\r\n            }\r\n            this.legend = createLegend(\r\n                element,\r\n                options.interactivity && options.interactivity.isInteractiveLegend,\r\n                this.interactivityService,\r\n                true);\r\n        }\r\n\r\n        private renderAxesLabels(options: MekkoAxisRenderingOptions): void {\r\n            debug.assertValue(options, 'options');\r\n            debug.assertValue(options.viewport, 'options.viewport');\r\n            debug.assertValue(options.axisLabels, 'options.axisLabels');\r\n\r\n            this.axisGraphicsContext.selectAll('.xAxisLabel').remove();\r\n            this.axisGraphicsContext.selectAll('.yAxisLabel').remove();\r\n\r\n            var margin = this.margin;\r\n            var width = options.viewport.width - (margin.left + margin.right);\r\n            var height = options.viewport.height;\r\n            var fontSize = MekkoChart.FontSize;\r\n            var heightOffset = fontSize;\r\n\r\n            var showOnRight = this.yAxisOrientation === yAxisPosition.right;\r\n\r\n            if (!options.hideXAxisTitle) {\r\n                var xAxisLabel = this.axisGraphicsContext.append(\"text\")\r\n                    .style(\"text-anchor\", \"middle\")\r\n                    .text(options.axisLabels.x)\r\n                    .call((text: D3.Selection) => {\r\n                        text.each(function() {\r\n                            var text = d3.select(this);\r\n                            text.attr({\r\n                                \"class\": \"xAxisLabel\",\r\n                                \"transform\": SVGUtil.translate(width / 2, height - heightOffset)\r\n                            });\r\n                        });\r\n                    });\r\n\r\n                xAxisLabel.style(\"fill\", options.xLabelColor ? options.xLabelColor.solid.color : null);\r\n\r\n                xAxisLabel.call(AxisHelper.LabelLayoutStrategy.clip,\r\n                    width,\r\n                    TextMeasurementService.svgEllipsis);\r\n            }\r\n\r\n            if (!options.hideYAxisTitle) {\r\n                var yAxisLabel = this.axisGraphicsContext.append(\"text\")\r\n                    .style(\"text-anchor\", \"middle\")\r\n                    .text(options.axisLabels.y)\r\n                    .call((text: D3.Selection) => {\r\n                        text.each(function() {\r\n                            var text = d3.select(this);\r\n                            text.attr({\r\n                                \"class\": \"yAxisLabel\",\r\n                                \"transform\": \"rotate(-90)\",\r\n                                \"y\": showOnRight ? width + margin.right - fontSize : -margin.left,\r\n                                \"x\": -((height - margin.top - options.legendMargin) / 2),\r\n                                \"dy\": \"1em\"\r\n                            });\r\n                        });\r\n                    });\r\n\r\n                yAxisLabel.style(\"fill\", options.yLabelColor ? options.yLabelColor.solid.color : null);\r\n\r\n                yAxisLabel.call(AxisHelper.LabelLayoutStrategy.clip,\r\n                    height - (margin.bottom + margin.top),\r\n                    TextMeasurementService.svgEllipsis);\r\n            }\r\n\r\n            if (!options.hideY2AxisTitle && options.axisLabels.y2) {\r\n                var y2AxisLabel = this.axisGraphicsContext.append(\"text\")\r\n                    .style(\"text-anchor\", \"middle\")\r\n                    .text(options.axisLabels.y2)\r\n                    .call((text: D3.Selection) => {\r\n                        text.each(function() {\r\n                            var text = d3.select(this);\r\n                            text.attr({\r\n                                \"class\": \"yAxisLabel\",\r\n                                \"transform\": \"rotate(-90)\",\r\n                                \"y\": showOnRight ? -margin.left : width + margin.right - fontSize,\r\n                                \"x\": -((height - margin.top - options.legendMargin) / 2),\r\n                                \"dy\": \"1em\"\r\n                            });\r\n                        });\r\n                    });\r\n\r\n                y2AxisLabel.style(\"fill\", options.y2LabelColor ? options.y2LabelColor.solid.color : null);\r\n\r\n                y2AxisLabel.call(AxisHelper.LabelLayoutStrategy.clip,\r\n                    height - (margin.bottom + margin.top),\r\n                    TextMeasurementService.svgEllipsis);\r\n            }\r\n        }\r\n\r\n        private adjustMargins(viewport: IViewport): void {\r\n            var margin = this.margin;\r\n\r\n            var width = viewport.width - (margin.left + margin.right);\r\n            var height = viewport.height - (margin.top + margin.bottom);\r\n\r\n            // Adjust margins if ticks are not going to be shown on either axis\r\n            var xAxis = this.element.find('.x.axis');\r\n\r\n            if (AxisHelper.getRecommendedNumberOfTicksForXAxis(width) === 0\r\n                && AxisHelper.getRecommendedNumberOfTicksForYAxis(height) === 0) {\r\n                this.margin = {\r\n                    top: 0,\r\n                    right: 0,\r\n                    bottom: 0,\r\n                    left: 0\r\n                };\r\n                xAxis.hide();\r\n            } else {\r\n                xAxis.show();\r\n            }\r\n        }\r\n\r\n        private translateAxes(viewport: IViewport): void {\r\n            this.adjustMargins(viewport);\r\n            var margin = this.margin;\r\n\r\n            var width = viewport.width - (margin.left + margin.right);\r\n            var height = viewport.height - (margin.top + margin.bottom);\r\n\r\n            var showY1OnRight = this.yAxisOrientation === yAxisPosition.right;\r\n\r\n            this.xAxisGraphicsContext\r\n                .attr('transform', SVGUtil.translate(0, height));\r\n\r\n            this.y1AxisGraphicsContext\r\n                .attr('transform', SVGUtil.translate(showY1OnRight ? width : 0, 0));\r\n\r\n            this.y2AxisGraphicsContext\r\n                .attr('transform', SVGUtil.translate(showY1OnRight ? 0 : width, 0));\r\n\r\n            this.svg.attr({\r\n                'width': viewport.width,\r\n                'height': viewport.height\r\n            });\r\n\r\n            this.svg.style('top', this.legend.isVisible() ? this.legend.getMargins().height + 'px' : 0);\r\n\r\n            this.svgScrollable.attr({\r\n                'width': viewport.width,\r\n                'height': viewport.height\r\n            });\r\n\r\n            this.svgScrollable.attr({\r\n                'x': 0\r\n            });\r\n\r\n            this.axisGraphicsContext.attr('transform', SVGUtil.translate(margin.left, margin.top));\r\n            this.axisGraphicsContextScrollable.attr('transform', SVGUtil.translate(margin.left, margin.top));\r\n            this.labelGraphicsContextScrollable.attr('transform', SVGUtil.translate(margin.left, margin.top));\r\n\r\n            if (this.isXScrollBarVisible) {\r\n                this.svgScrollable.attr({\r\n                    'x': this.margin.left\r\n                });\r\n                this.axisGraphicsContextScrollable.attr('transform', SVGUtil.translate(0, margin.top));\r\n                this.labelGraphicsContextScrollable.attr('transform', SVGUtil.translate(0, margin.top));\r\n                this.svgScrollable.attr('width', width);\r\n                this.svg.attr('width', viewport.width)\r\n                    .attr('height', viewport.height + MekkoChart.ScrollBarWidth);\r\n            }\r\n            else if (this.isYScrollBarVisible) {\r\n                this.svgScrollable.attr('height', height + margin.top);\r\n                this.svg.attr('width', viewport.width + MekkoChart.ScrollBarWidth)\r\n                    .attr('height', viewport.height);\r\n            }\r\n        }\r\n\r\n        public static getIsScalar(objects: DataViewObjects, propertyId: DataViewObjectPropertyIdentifier, type: ValueType): boolean {\r\n            var axisTypeValue = DataViewObjects.getValue(objects, propertyId);\r\n\r\n            if (!objects || axisTypeValue === undefined) {\r\n                // If we don't have anything set (Auto), show charts as Scalar if the category type is numeric or time.\r\n                // If we have the property, it will override the type.\r\n                return !AxisHelper.isOrdinal(type);\r\n            }\r\n\r\n            // also checking type here to be in sync with AxisHelper, which ignores scalar if the type is non-numeric.\r\n            return (axisTypeValue === axisType.scalar) && !AxisHelper.isOrdinal(type);\r\n        }\r\n\r\n        private populateObjectProperties(dataViews: DataView[]) {\r\n            if (dataViews && dataViews.length > 0) {\r\n                var dataViewMetadata = dataViews[0].metadata;\r\n\r\n                if (dataViewMetadata) {\r\n                    this.legendObjectProperties = DataViewObjects.getObject(dataViewMetadata.objects, 'legend', {});\r\n                    this.borderObjectProperties = DataViewObjects.getObject(dataViewMetadata.objects, 'columnBorder', {});\r\n                }\r\n                else {\r\n                    this.legendObjectProperties = {};\r\n                    this.borderObjectProperties = {};\r\n                }\r\n\r\n                this.categoryAxisProperties = CartesianHelper.getCategoryAxisProperties(dataViewMetadata);\r\n                this.valueAxisProperties = CartesianHelper.getValueAxisProperties(dataViewMetadata);\r\n\r\n                if (dataViewMetadata &&\r\n                    dataViewMetadata.objects) {\r\n                    var categoryAxis = dataViewMetadata.objects['categoryAxis'];\r\n                    var valueAxis = dataViewMetadata.objects['valueAxis'];\r\n\r\n                    if (categoryAxis) {\r\n                        this.categoryAxisProperties['showBorder'] = categoryAxis['showBorder'];\r\n                        this.categoryAxisProperties['fontSize'] = categoryAxis['fontSize'];\r\n                    }\r\n\r\n                    if (valueAxis) {\r\n                        this.valueAxisProperties['fontSize'] = valueAxis['fontSize'];\r\n                    }\r\n                }\r\n                var axisPosition = this.valueAxisProperties['position'];\r\n                this.yAxisOrientation = axisPosition ? axisPosition.toString() : yAxisPosition.left;\r\n            }\r\n        }\r\n\r\n        public update(options: VisualUpdateOptions) {\r\n            debug.assertValue(options, 'options');\r\n\r\n            var dataViews = this.dataViews = options.dataViews;\r\n            this.currentViewport = options.viewport;\r\n\r\n            if (!dataViews) {\r\n                return;\r\n            }\r\n\r\n            if ((this.currentViewport.width < MekkoChart.MinWidth) ||\r\n                (this.currentViewport.height < MekkoChart.MinHeight)) {\r\n                return;\r\n            }\r\n\r\n            if (this.layers.length === 0) {\r\n                // Lazily instantiate the chart layers on the first data load.\r\n                this.layers = this.createAndInitLayers(dataViews);\r\n\r\n                debug.assert(this.layers.length > 0, 'createAndInitLayers should update the layers.');\r\n            }\r\n            var layers = this.layers;\r\n\r\n            if (dataViews && dataViews.length > 0) {\r\n                var warnings = getInvalidValueWarnings(\r\n                    dataViews,\r\n                    false /*supportsNaN*/,\r\n                    false /*supportsNegativeInfinity*/,\r\n                    false /*supportsPositiveInfinity*/);\r\n\r\n                if (warnings && warnings.length > 0) {\r\n                    this.hostServices.setWarnings(warnings);\r\n                }\r\n                this.populateObjectProperties(dataViews);\r\n            }\r\n\r\n            this.sharedColorPalette.clearPreferredScale();\r\n            for (var i: number = 0, len: number = layers.length; i < len; i++) {\r\n                layers[i].setData(getLayerData(dataViews, i, len));\r\n\r\n                if (len > 1) {\r\n                    this.sharedColorPalette.rotateScale();\r\n\t\t\t\t}\r\n            }\r\n\r\n            // Note: interactive legend shouldn't be rendered explicitly here\r\n            // The interactive legend is being rendered in the render method of ICartesianVisual\r\n            if (!(this.visualInitOptions.interactivity && this.visualInitOptions.interactivity.isInteractiveLegend)) {\r\n                this.renderLegend();\r\n            }\r\n            this.render(!this.hasSetData || options.suppressAnimations);\r\n            this.hasSetData = this.hasSetData || (dataViews && dataViews.length > 0);\r\n        }\r\n\r\n        public static parseLabelSettings(objects: DataViewObjects): VisualDataLabelsSettings {\r\n            var labelSettings: VisualDataLabelsSettings = dataLabelUtils.getDefaultColumnLabelSettings(true);\r\n            var labelsObj: DataLabelObject = <DataLabelObject>objects['labels'];\r\n            var minPrecision = MekkoChart.DefaultSettings.labelSettings.minPrecision,\r\n                maxPrecision = MekkoChart.DefaultSettings.labelSettings.maxPrecision;\r\n\r\n            dataLabelUtils.updateLabelSettingsFromLabelsObject(labelsObj, labelSettings);\r\n\r\n            if (labelSettings.precision < minPrecision) {\r\n                labelSettings.precision = minPrecision;\r\n            }\r\n\r\n            if (labelSettings.precision > maxPrecision) {\r\n                labelSettings.precision = maxPrecision;\r\n            }\r\n\r\n            return labelSettings;\r\n        }\r\n\r\n        public static parseBorderSettings(objects: DataViewObjects): MekkoBorderSettings {\r\n            var show: boolean = DataViewObjects.getValue(objects, MekkoChart.properties.columnBorder.show, MekkoChart.DefaultSettings.columnBorder.show);\r\n            var color = DataViewObjects.getFillColor(objects, MekkoChart.properties.columnBorder.color, MekkoChart.DefaultSettings.columnBorder.color);\r\n            var width: number = DataViewObjects.getValue(objects, MekkoChart.properties.columnBorder.width, MekkoChart.DefaultSettings.columnBorder.width);\r\n            var maxWidth: number = MekkoChart.DefaultSettings.columnBorder.maxWidth;\r\n\r\n            if (width > maxWidth) {\r\n                width = maxWidth;\r\n            } else if (width < 0) {\r\n                width = 0;\r\n            }\r\n\r\n            if (!show) {\r\n                width = 0;\r\n            }\r\n\r\n            return {\r\n                show: show,\r\n                color: color,\r\n                width: width,\r\n            };\r\n        }\r\n\r\n        private enumerateBorder(enumeration: ObjectEnumerationBuilder): void {\r\n            var objects: DataViewObjects = {\r\n                columnBorder: this.borderObjectProperties\r\n            };\r\n\r\n            var show = DataViewObjects.getValue(objects, MekkoChart.properties.columnBorder.show, MekkoChart.DefaultSettings.columnBorder.show);\r\n            var color = DataViewObjects.getFillColor(objects, MekkoChart.properties.columnBorder.color, MekkoChart.DefaultSettings.columnBorder.color);\r\n            var width = DataViewObjects.getValue(objects, MekkoChart.properties.columnBorder.width, MekkoChart.DefaultSettings.columnBorder.width);\r\n\r\n            var maxWidth: number = MekkoChart.DefaultSettings.columnBorder.maxWidth;\r\n\r\n            if (width > maxWidth) {\r\n                width = maxWidth;\r\n            } else if (width < 0) {\r\n                width = 0;\r\n            }\r\n\r\n            var instance: VisualObjectInstance = {\r\n                objectName: 'columnBorder',\r\n                selector: null,\r\n                properties: {\r\n                    show: show,\r\n                    color: color,\r\n                    width: width,\r\n                },\r\n            };\r\n            enumeration\r\n                .pushInstance(instance);\r\n        }\r\n\r\n        public enumerateObjectInstances(options: EnumerateVisualObjectInstancesOptions): VisualObjectInstanceEnumeration {\r\n            var enumeration = new ObjectEnumerationBuilder();\r\n            var layersLength = this.layers ? this.layers.length : 0;\r\n\r\n            if (options.objectName === 'columnBorder') {\r\n                this.enumerateBorder(enumeration);\r\n            }\r\n            else if (options.objectName === 'legend') {\r\n                if (!this.shouldShowLegendCard()) {\r\n                    return;\r\n                }\r\n\r\n                var show = DataViewObject.getValue(this.legendObjectProperties, legendProps.show, this.legend.isVisible());\r\n                var showTitle = DataViewObject.getValue(this.legendObjectProperties, legendProps.showTitle, true);\r\n                var titleText = DataViewObject.getValue(this.legendObjectProperties, legendProps.titleText, this.layerLegendData && this.layerLegendData.title ? this.layerLegendData.title : '');\r\n                var fontSize = DataViewObject.getValue(this.legendObjectProperties, legendProps.fontSize, this.layerLegendData && this.layerLegendData.fontSize ? this.layerLegendData.fontSize : NewDataLabelUtils.DefaultLabelFontSizeInPt);\r\n\r\n                enumeration.pushInstance({\r\n                    selector: null,\r\n                    properties: {\r\n                        show: show,\r\n                        position: LegendPosition[this.legend.getOrientation()],\r\n                        showTitle: showTitle,\r\n                        titleText: titleText,\r\n                        fontSize: fontSize\r\n                    },\r\n                    objectName: options.objectName\r\n                });\r\n            }\r\n            else if (options.objectName === 'categoryAxis' && this.hasCategoryAxis) {\r\n                this.getCategoryAxisValues(enumeration);\r\n            }\r\n            else if (options.objectName === 'valueAxis') {\r\n                this.getValueAxisValues(enumeration);\r\n            }\r\n\r\n            for (var i: number = 0, len: number = layersLength; i < len; i++) {\r\n                var layer = this.layers[i];\r\n                if (layer.enumerateObjectInstances) {\r\n                    layer.enumerateObjectInstances(enumeration, options);\r\n                }\r\n            }\r\n\r\n            return enumeration.complete();\r\n        }\r\n\r\n        private shouldShowLegendCard(): boolean {\r\n            var layers = this.layers;\r\n            var dataViews = this.dataViews;\r\n\r\n            if (layers && dataViews) {\r\n                var layersLength = layers.length;\r\n                var layersWithValuesCtr = 0;\r\n\r\n                for (var i: number = 0; i < layersLength; i++) {\r\n                    if (layers[i].hasLegend()) {\r\n                        return true;\r\n                    }\r\n\r\n                    // if there are at least two layers with values legend card should be shown (even if each of the individual layers don't have legend)\r\n                    var dataView = dataViews[i];\r\n                    if (dataView && dataView.categorical && dataView.categorical.values && dataView.categorical.values.length > 0) {\r\n                        layersWithValuesCtr++;\r\n                        if (layersWithValuesCtr > 1) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        private getCategoryAxisValues(enumeration: ObjectEnumerationBuilder): void {\r\n            var supportedType: string = axisType.both;\r\n            var isScalar: boolean = false;\r\n            var logPossible: boolean = !!this.axes.x.isLogScaleAllowed;\r\n            var scaleOptions: string[] = [axisScale.log, axisScale.linear];//until options can be update in propPane, show all options\r\n\r\n            if (this.layers && this.layers[0].getSupportedCategoryAxisType) {\r\n                supportedType = this.layers[0].getSupportedCategoryAxisType();\r\n                if (supportedType === axisType.scalar) {\r\n                    isScalar = true;\r\n                }\r\n                else {\r\n                    isScalar = CartesianHelper.isScalar(supportedType === axisType.both, this.categoryAxisProperties);\r\n                }\r\n            }\r\n\r\n            if (!isScalar) {\r\n                if (this.categoryAxisProperties) {\r\n                    this.categoryAxisProperties['start'] = null;\r\n                    this.categoryAxisProperties['end'] = null;\r\n                }\r\n            }\r\n\r\n            var instance: VisualObjectInstance = {\r\n                selector: null,\r\n                properties: {},\r\n                objectName: 'categoryAxis',\r\n                validValues: {\r\n                    axisScale: scaleOptions\r\n                }\r\n            };\r\n\r\n            instance.properties['show'] = this.categoryAxisProperties && this.categoryAxisProperties['show'] != null ? this.categoryAxisProperties['show'] : true;\r\n            if (this.yAxisIsCategorical)//in case of e.g. barChart\r\n                instance.properties['position'] = this.valueAxisProperties && this.valueAxisProperties['position'] != null ? this.valueAxisProperties['position'] : yAxisPosition.left;\r\n            if (supportedType === axisType.both) {\r\n                instance.properties['axisType'] = isScalar ? axisType.scalar : axisType.categorical;\r\n            }\r\n            if (isScalar) {\r\n                instance.properties['axisScale'] = (this.categoryAxisProperties && this.categoryAxisProperties['axisScale'] != null && logPossible) ? this.categoryAxisProperties['axisScale'] : axisScale.linear;\r\n                instance.properties['start'] = this.categoryAxisProperties ? this.categoryAxisProperties['start'] : null;\r\n                instance.properties['end'] = this.categoryAxisProperties ? this.categoryAxisProperties['end'] : null;\r\n            }\r\n            instance.properties['showAxisTitle'] = this.categoryAxisProperties && this.categoryAxisProperties['showAxisTitle'] != null ? this.categoryAxisProperties['showAxisTitle'] : false;\r\n            instance.properties['showBorder'] = this.categoryAxisProperties && this.categoryAxisProperties['showBorder'] != null ? this.categoryAxisProperties['showAxisTitle'] : false;\r\n\r\n            instance.properties['fontSize'] = this.categoryAxisProperties && this.categoryAxisProperties['fontSize'] != null ? this.categoryAxisProperties['fontSize'] : NewDataLabelUtils.DefaultLabelFontSizeInPt;\r\n\r\n            enumeration\r\n                .pushInstance(instance)\r\n                .pushInstance({\r\n                    selector: null,\r\n                    properties: {\r\n                        axisStyle: this.categoryAxisProperties && this.categoryAxisProperties['axisStyle'] ? this.categoryAxisProperties['axisStyle'] : axisStyle.showTitleOnly,\r\n                        labelColor: this.categoryAxisProperties ? this.categoryAxisProperties['labelColor'] : null,\r\n                        fontSize: this.categoryAxisProperties && this.categoryAxisProperties['fontSize'] != null ? this.categoryAxisProperties['fontSize'] : NewDataLabelUtils.DefaultLabelFontSizeInPt\r\n                    },\r\n                    objectName: 'categoryAxis',\r\n                    validValues: {\r\n                        axisStyle: this.categoryAxisHasUnitType ? [axisStyle.showTitleOnly, axisStyle.showUnitOnly, axisStyle.showBoth] : [axisStyle.showTitleOnly],\r\n                    }\r\n                });\r\n        }\r\n\r\n        //todo: wrap all these object getters and other related stuff into an interface\r\n        private getValueAxisValues(enumeration: ObjectEnumerationBuilder): void {\r\n            var scaleOptions: string[] = [axisScale.log, axisScale.linear];  //until options can be update in propPane, show all options\r\n            var logPossible: boolean = !!this.axes.y1.isLogScaleAllowed;\r\n            //var secLogPossible = this.axes.y2 != null && this.axes.y2.isLogScaleAllowed;\r\n\r\n            var instance: VisualObjectInstance = {\r\n                selector: null,\r\n                properties: {},\r\n                objectName: 'valueAxis',\r\n                validValues: {\r\n                    axisScale: scaleOptions,\r\n                    secAxisScale: scaleOptions\r\n                }\r\n            };\r\n\r\n            instance.properties['show'] = this.valueAxisProperties && this.valueAxisProperties['show'] != null ? this.valueAxisProperties['show'] : true;\r\n\r\n            if (!this.yAxisIsCategorical) {\r\n                instance.properties['position'] = this.valueAxisProperties && this.valueAxisProperties['position'] != null ? this.valueAxisProperties['position'] : yAxisPosition.left;\r\n            }\r\n            instance.properties['axisScale'] = (this.valueAxisProperties && this.valueAxisProperties['axisScale'] != null && logPossible) ? this.valueAxisProperties['axisScale'] : axisScale.linear;\r\n            instance.properties['start'] = this.valueAxisProperties ? this.valueAxisProperties['start'] : null;\r\n            instance.properties['end'] = this.valueAxisProperties ? this.valueAxisProperties['end'] : null;\r\n            instance.properties['showAxisTitle'] = this.valueAxisProperties && this.valueAxisProperties['showAxisTitle'] != null ? this.valueAxisProperties['showAxisTitle'] : false;\r\n\r\n            instance.properties['fontSize'] = this.valueAxisProperties && this.valueAxisProperties['fontSize'] != null ? this.valueAxisProperties['fontSize'] : NewDataLabelUtils.DefaultLabelFontSizeInPt;\r\n\r\n            enumeration\r\n                .pushInstance(instance)\r\n                .pushInstance({\r\n                    selector: null,\r\n                    properties: {\r\n                        axisStyle: this.valueAxisProperties && this.valueAxisProperties['axisStyle'] != null ? this.valueAxisProperties['axisStyle'] : axisStyle.showTitleOnly,\r\n                        labelColor: this.valueAxisProperties ? this.valueAxisProperties['labelColor'] : null,\r\n                        fontSize: this.valueAxisProperties && this.valueAxisProperties['fontSize'] != null ? this.valueAxisProperties['fontSize'] : NewDataLabelUtils.DefaultLabelFontSizeInPt\r\n                    },\r\n                    objectName: 'valueAxis',\r\n                    validValues: {\r\n                        axisStyle: this.valueAxisHasUnitType ? [axisStyle.showTitleOnly, axisStyle.showUnitOnly, axisStyle.showBoth] : [axisStyle.showTitleOnly]\r\n                    },\r\n                });\r\n\r\n            if (this.layers.length === 2) {\r\n                instance.properties['secShow'] = this.valueAxisProperties && this.valueAxisProperties['secShow'] != null ? this.valueAxisProperties['secShow'] : this.y2AxisExists;\r\n                if (instance.properties['secShow']) {\r\n                    instance.properties['axisLabel'] = '';//this.layers[0].getVisualType();//I will keep or remove this, depending on the decision made\r\n                }\r\n            }\r\n        }\r\n\r\n        public onClearSelection(): void {\r\n            if (this.hasSetData) {\r\n                for (var i: number = 0, len: number = this.layers.length; i < len; i++) {\r\n                    var layer = this.layers[i];\r\n                    layer.onClearSelection();\r\n                    layer.render(true /* suppressAnimations */);\r\n                }\r\n            }\r\n        }\r\n\r\n        private createAndInitLayers(dataViews: DataView[]): IMekkoColumnChartVisual[] {\r\n            var objects: DataViewObjects;\r\n            if (dataViews && dataViews.length > 0) {\r\n                var dataViewMetadata = dataViews[0].metadata;\r\n                if (dataViewMetadata)\r\n                    objects = dataViewMetadata.objects;\r\n            }\r\n\r\n            // Create the layers\r\n            var layers: IMekkoColumnChartVisual[] = createLayers(this.type, objects, this.interactivityService, this.animator, this.isScrollable);\r\n\r\n            // Initialize the layers\r\n            var cartesianOptions = <CartesianVisualInitOptions>Prototype.inherit(this.visualInitOptions);\r\n            cartesianOptions.svg = this.axisGraphicsContextScrollable;\r\n            cartesianOptions.cartesianHost = {\r\n                updateLegend: data => this.legend.drawLegend(data, this.currentViewport),\r\n                getSharedColors: () => this.sharedColorPalette,\r\n                triggerRender: undefined,\r\n            };\r\n\r\n            for (var i: number = 0, len: number = layers.length; i < len; i++) {\r\n                layers[i].init(cartesianOptions);\r\n            }\r\n\r\n            return layers;\r\n        }\r\n\r\n        private renderLegend(): void {\r\n            var layers: IMekkoColumnChartVisual[] = this.layers;\r\n            var legendData: LegendData = { title: \"\", dataPoints: [] };\r\n\r\n            for (var i: number = 0, len: number = layers.length; i < len; i++) {\r\n                this.layerLegendData = layers[i].calculateLegend();\r\n                if (this.layerLegendData) {\r\n                    legendData.title = i === 0 ? this.layerLegendData.title || \"\"\r\n                        : legendData.title;\r\n                    legendData.dataPoints = legendData.dataPoints.concat(this.layerLegendData.dataPoints || []);\r\n                    if (this.layerLegendData.grouped) {\r\n                        legendData.grouped = true;\r\n                    }\r\n                }\r\n            }\r\n\r\n            var legendProperties: DataViewObject = this.legendObjectProperties;\r\n            if (legendProperties) {\r\n                if (!legendProperties['fontSize']) {\r\n                    legendProperties['fontSize'] = NewDataLabelUtils.DefaultLabelFontSizeInPt;\r\n                }\r\n\r\n                LegendData.update(legendData, legendProperties);\r\n                var position = <string>legendProperties[legendProps.position];\r\n\r\n                if (position) {\r\n                    this.legend.changeOrientation(LegendPosition[position]);\r\n                }\r\n            }\r\n            else {\r\n                this.legend.changeOrientation(LegendPosition.Top);\r\n            }\r\n\r\n            if ((legendData.dataPoints.length === 1 && !legendData.grouped) || this.hideLegends()) {\r\n                legendData.dataPoints = [];\r\n            }\r\n\r\n            this.legend.drawLegend(legendData, this.currentViewport);\r\n        }\r\n\r\n        private hideLegends(): boolean {\r\n            if (this.cartesianSmallViewPortProperties) {\r\n                if (this.cartesianSmallViewPortProperties.hideLegendOnSmallViewPort && (this.currentViewport.height < this.cartesianSmallViewPortProperties.MinHeightLegendVisible)) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n\r\n        private addUnitTypeToAxisLabel(axes: CartesianAxisProperties): void {\r\n            var unitType = MekkoChart.getUnitType(axes, (axis: CartesianAxisProperties): IAxisProperties => axis.x);\r\n            if (axes.x.isCategoryAxis) {\r\n                this.categoryAxisHasUnitType = unitType !== null;\r\n            }\r\n            else {\r\n                this.valueAxisHasUnitType = unitType !== null;\r\n            }\r\n\r\n            if (axes.x.axisLabel && unitType) {\r\n                if (axes.x.isCategoryAxis) {\r\n                    axes.x.axisLabel = AxisHelper.createAxisLabel(this.categoryAxisProperties, axes.x.axisLabel, unitType);\r\n                }\r\n                else {\r\n                    axes.x.axisLabel = AxisHelper.createAxisLabel(this.valueAxisProperties, axes.x.axisLabel, unitType);\r\n                }\r\n            }\r\n\r\n            unitType = MekkoChart.getUnitType(axes, (axis: CartesianAxisProperties): IAxisProperties => axis.y1);\r\n\r\n            if (!axes.y1.isCategoryAxis) {\r\n                this.valueAxisHasUnitType = unitType !== null;\r\n            }\r\n            else {\r\n                this.categoryAxisHasUnitType = unitType !== null;\r\n            }\r\n\r\n            if (axes.y1.axisLabel && unitType) {\r\n                if (!axes.y1.isCategoryAxis) {\r\n                    axes.y1.axisLabel = AxisHelper.createAxisLabel(this.valueAxisProperties, axes.y1.axisLabel, unitType);\r\n                }\r\n                else {\r\n                    axes.y1.axisLabel = AxisHelper.createAxisLabel(this.categoryAxisProperties, axes.y1.axisLabel, unitType);\r\n                }\r\n            }\r\n\r\n            if (axes.y2) {\r\n                var unitType = MekkoChart.getUnitType(axes, (axis: CartesianAxisProperties): IAxisProperties => axis.y2);\r\n                this.secValueAxisHasUnitType = unitType !== null;\r\n                if (axes.y2.axisLabel && unitType) {\r\n                    if (this.valueAxisProperties && this.valueAxisProperties['secAxisStyle']) {\r\n                        if (this.valueAxisProperties['secAxisStyle'] === axisStyle.showBoth) {\r\n                            axes.y2.axisLabel = axes.y2.axisLabel + ' (' + unitType + ')';\r\n                        }\r\n                        else if (this.valueAxisProperties['secAxisStyle'] === axisStyle.showUnitOnly) {\r\n                            axes.y2.axisLabel = unitType;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        private shouldRenderSecondaryAxis(axisProperties: IAxisProperties): boolean {\r\n            if (!axisProperties) {\r\n                return false;\r\n            }\r\n            if (!this.valueAxisProperties || this.valueAxisProperties[\"secShow\"] == null || this.valueAxisProperties[\"secShow\"]) {\r\n                return axisProperties.values && axisProperties.values.length > 0;\r\n            }\r\n            return false;\r\n        }\r\n\r\n        private shouldRenderAxis(axisProperties: IAxisProperties, propertyName: string = \"show\"): boolean {\r\n            if (!axisProperties) {\r\n                return false;\r\n            }\r\n            else if (axisProperties.isCategoryAxis && (!this.categoryAxisProperties || this.categoryAxisProperties[propertyName] == null || this.categoryAxisProperties[propertyName])) {\r\n                return axisProperties.values && axisProperties.values.length > 0;\r\n            }\r\n            else if (!axisProperties.isCategoryAxis && (!this.valueAxisProperties || this.valueAxisProperties[propertyName] == null || this.valueAxisProperties[propertyName])) {\r\n                return axisProperties.values && axisProperties.values.length > 0;\r\n            }\r\n            return false;\r\n        }\r\n\r\n        private render(suppressAnimations: boolean): void {\r\n            var legendMargins: IViewport = this.legendMargins = this.legend.getMargins();\r\n            var viewport: IViewport = {\r\n                height: this.currentViewport.height - legendMargins.height,\r\n                width: this.currentViewport.width - legendMargins.width\r\n            };\r\n\r\n            var maxMarginFactor = this.getMaxMarginFactor();\r\n            var leftRightMarginLimit = this.leftRightMarginLimit = viewport.width * maxMarginFactor;\r\n            this.bottomMarginLimit = Math.max(MekkoChart.MinBottomMargin, Math.ceil(viewport.height * maxMarginFactor));\r\n\r\n            var xAxisTextProperties = MekkoChart.getTextProperties(parseFloat(<any>this.categoryAxisProperties['fontSize']) || undefined);\r\n            var y1AxisTextProperties = MekkoChart.getTextProperties(parseFloat(<any>this.valueAxisProperties['fontSize']) || undefined);\r\n\r\n            var margin = this.margin;\r\n            // reset defaults\r\n            margin.top = parseFloat(y1AxisTextProperties.fontSize) / 2;\r\n            margin.bottom = MekkoChart.MinBottomMargin;\r\n            margin.right = 0;\r\n\r\n            var axes: CartesianAxisProperties = this.axes = calculateAxes(\r\n                this.layers,\r\n                viewport,\r\n                margin,\r\n                this.categoryAxisProperties,\r\n                this.valueAxisProperties,\r\n                this.isXScrollBarVisible || this.isYScrollBarVisible,\r\n                null);\r\n\r\n            this.yAxisIsCategorical = axes.y1.isCategoryAxis;\r\n            this.hasCategoryAxis = this.yAxisIsCategorical ? axes.y1 && axes.y1.values.length > 0 : axes.x && axes.x.values.length > 0;\r\n\r\n            var renderXAxis = this.shouldRenderAxis(axes.x);\r\n            var renderY1Axis = this.shouldRenderAxis(axes.y1);\r\n            var renderY2Axis = this.shouldRenderSecondaryAxis(axes.y2);\r\n\r\n            var width: number = viewport.width - (margin.left + margin.right);\r\n            var isScalar: boolean = false;\r\n            var mainAxisScale;\r\n            var preferredViewport: IViewport;\r\n            this.isXScrollBarVisible = false;\r\n            this.isYScrollBarVisible = false;\r\n\r\n            var yAxisOrientation = this.yAxisOrientation;\r\n            var showY1OnRight = yAxisOrientation === yAxisPosition.right;\r\n\r\n            if (this.layers) {\r\n                if (this.layers[0].getVisualCategoryAxisIsScalar) {\r\n                    isScalar = this.layers[0].getVisualCategoryAxisIsScalar();\r\n                }\r\n\r\n                if (!isScalar && this.isScrollable && this.layers[0].getPreferredPlotArea) {\r\n                    var categoryThickness = this.scrollX ? axes.x.categoryThickness : axes.y1.categoryThickness;\r\n                    var categoryCount = this.scrollX ? axes.x.values.length : axes.y1.values.length;\r\n                    preferredViewport = this.layers[0].getPreferredPlotArea(isScalar, categoryCount, categoryThickness);\r\n                    if (this.scrollX && preferredViewport && preferredViewport.width > viewport.width) {\r\n                        this.isXScrollBarVisible = true;\r\n                        viewport.height -= MekkoChart.ScrollBarWidth;\r\n                    }\r\n\r\n                    if (this.scrollY && preferredViewport && preferredViewport.height > viewport.height) {\r\n                        this.isYScrollBarVisible = true;\r\n                        viewport.width -= MekkoChart.ScrollBarWidth;\r\n                        width = viewport.width - (margin.left + margin.right);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Only create the g tag where there is a scrollbar\r\n            if (this.isXScrollBarVisible || this.isYScrollBarVisible) {\r\n                if (!this.brushGraphicsContext) {\r\n                    this.brushGraphicsContext = this.svg.append(\"g\")\r\n                        .classed('x brush', true);\r\n                }\r\n            }\r\n            else {\r\n                // clear any existing brush if no scrollbar is shown\r\n                this.svg.selectAll('.brush').remove();\r\n                this.brushGraphicsContext = undefined;\r\n            }\r\n\r\n            // Recalculate axes now that scrollbar visible variables have been set\r\n            axes = calculateAxes(\r\n                this.layers,\r\n                viewport,\r\n                margin,\r\n                this.categoryAxisProperties,\r\n                this.valueAxisProperties,\r\n                this.isXScrollBarVisible || this.isYScrollBarVisible,\r\n                null);\r\n\r\n            // we need to make two passes because the margin changes affect the chosen tick values, which then affect the margins again.\r\n            // after the second pass the margins are correct.\r\n            var doneWithMargins: boolean = false,\r\n                maxIterations: number = 2,\r\n                numIterations: number = 0;\r\n            var tickLabelMargins = undefined;\r\n            var chartHasAxisLabels = undefined;\r\n            var axisLabels: ChartAxesLabels = undefined;\r\n            while (!doneWithMargins && numIterations < maxIterations) {\r\n                numIterations++;\r\n                tickLabelMargins = getTickLabelMargins(\r\n                    { width: width, height: viewport.height },\r\n                    leftRightMarginLimit,\r\n                    TextMeasurementService.measureSvgTextWidth,\r\n                    TextMeasurementService.estimateSvgTextHeight,\r\n                    axes,\r\n                    this.bottomMarginLimit,\r\n                    xAxisTextProperties,\r\n                    y1AxisTextProperties,\r\n                    null,\r\n                    false,\r\n                    this.isXScrollBarVisible || this.isYScrollBarVisible,\r\n                    showY1OnRight,\r\n                    renderXAxis,\r\n                    renderY1Axis,\r\n                    renderY2Axis);\r\n\r\n                // We look at the y axes as main and second sides, if the y axis orientation is right so the main side represents the right side\r\n                var maxMainYaxisSide = showY1OnRight ? tickLabelMargins.yRight : tickLabelMargins.yLeft,\r\n                    maxSecondYaxisSide = showY1OnRight ? tickLabelMargins.yLeft : tickLabelMargins.yRight,\r\n                    xMax = renderXAxis ? (tickLabelMargins.xMax/1.8) : 0;\r\n\r\n                maxMainYaxisSide += MekkoChart.LeftPadding;\r\n                maxSecondYaxisSide += MekkoChart.RightPadding;\r\n                xMax += MekkoChart.BottomPadding;\r\n\r\n                if (this.hideAxisLabels(legendMargins)) {\r\n                    axes.x.axisLabel = null;\r\n                    axes.y1.axisLabel = null;\r\n                    if (axes.y2) {\r\n                        axes.y2.axisLabel = null;\r\n                    }\r\n                }\r\n\r\n                this.addUnitTypeToAxisLabel(axes);\r\n\r\n                axisLabels = { x: axes.x.axisLabel, y: axes.y1.axisLabel, y2: axes.y2 ? axes.y2.axisLabel : null };\r\n                chartHasAxisLabels = (axisLabels.x != null) || (axisLabels.y != null || axisLabels.y2 != null);\r\n\r\n                if (axisLabels.x != null) {\r\n                    xMax += MekkoChart.XAxisLabelPadding;\r\n                }\r\n                if (axisLabels.y != null) {\r\n                    maxMainYaxisSide += MekkoChart.YAxisLabelPadding;\r\n                }\r\n                if (axisLabels.y2 != null) {\r\n                    maxSecondYaxisSide += MekkoChart.YAxisLabelPadding;\r\n                }\r\n\r\n                margin.left = showY1OnRight ? maxSecondYaxisSide : maxMainYaxisSide;\r\n                margin.right = showY1OnRight ? maxMainYaxisSide : maxSecondYaxisSide;\r\n                margin.bottom = xMax;\r\n                this.margin = margin;\r\n\r\n                width = viewport.width - (margin.left + margin.right);\r\n\r\n                // re-calculate the axes with the new margins\r\n                var previousTickCountY1 = axes.y1.values.length;\r\n                var previousTickCountY2 = axes.y2 && axes.y2.values.length;\r\n                axes = calculateAxes(\r\n                    this.layers,\r\n                    viewport,\r\n                    margin,\r\n                    this.categoryAxisProperties,\r\n                    this.valueAxisProperties,\r\n                    this.isXScrollBarVisible || this.isYScrollBarVisible,\r\n                    axes);\r\n\r\n                // the minor padding adjustments could have affected the chosen tick values, which would then need to calculate margins again\r\n                // e.g. [0,2,4,6,8] vs. [0,5,10] the 10 is wider and needs more margin.\r\n                if (axes.y1.values.length === previousTickCountY1 && (!axes.y2 || axes.y2.values.length === previousTickCountY2))\r\n                    doneWithMargins = true;\r\n            }\r\n\r\n            this.renderChart(mainAxisScale, axes, width, tickLabelMargins, chartHasAxisLabels, axisLabels, viewport, suppressAnimations);\r\n        }\r\n\r\n        private hideAxisLabels(legendMargins: IViewport): boolean {\r\n            if (this.cartesianSmallViewPortProperties) {\r\n                if (this.cartesianSmallViewPortProperties.hideAxesOnSmallViewPort && ((this.currentViewport.height + legendMargins.height) < this.cartesianSmallViewPortProperties.MinHeightAxesVisible) && !this.visualInitOptions.interactivity.isInteractiveLegend) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n\r\n        private static getUnitType(axis: CartesianAxisProperties, axisPropertiesLookup: (axis: CartesianAxisProperties) => IAxisProperties) {\r\n            if (axisPropertiesLookup(axis).formatter &&\r\n                axisPropertiesLookup(axis).formatter.displayUnit &&\r\n                axisPropertiesLookup(axis).formatter.displayUnit.value > 1) {\r\n                    return axisPropertiesLookup(axis).formatter.displayUnit.title;\r\n                }\r\n            return null;\r\n        }\r\n\r\n        private getMaxMarginFactor(): number {\r\n            return this.visualInitOptions.style.maxMarginFactor || MekkoChart.MaxMarginFactor;\r\n        }\r\n\r\n        private static getChartViewport(viewport: IViewport, margin: IMargin): IViewport {\r\n            return {\r\n                width: viewport.width - margin.left - margin.right,\r\n                height: viewport.height - margin.top - margin.bottom,\r\n            };\r\n        }\r\n\r\n        private static wordBreak(\r\n            text: D3.Selection,\r\n            axisProperties: IAxisProperties,\r\n            columnsWidth: number[],\r\n            maxHeight: number,\r\n            borderWidth: number): void {\r\n\r\n            //var allowedLength = axisProperties.xLabelMaxWidth;\r\n            text.each(function(data: any, index: number) {\r\n                var width: number, allowedLength: number;\r\n                var node = d3.select(this);\r\n                if (columnsWidth.length >= index) {\r\n                    width = columnsWidth[index];\r\n                    allowedLength = axisProperties.scale(width);\r\n                } else {\r\n                    allowedLength = axisProperties.xLabelMaxWidth;\r\n                }\r\n                // Reset style of text node\r\n                node\r\n                    .style('text-anchor', 'middle')\r\n                    .attr({\r\n                        'dx': '0em',\r\n                        'dy': '1em',\r\n                        'transform': 'rotate(0)'\r\n                    });\r\n\r\n                TextMeasurementService.wordBreak(this, allowedLength, axisProperties.willLabelsWordBreak ? maxHeight : 0);\r\n            });\r\n        }\r\n\r\n        private renderChart(\r\n            mainAxisScale: any,\r\n            axes: CartesianAxisProperties,\r\n            width: number,\r\n            tickLabelMargins: any,\r\n            chartHasAxisLabels: boolean,\r\n            axisLabels: ChartAxesLabels,\r\n            viewport: IViewport,\r\n            suppressAnimations: boolean,\r\n            scrollScale?: any,\r\n            extent?: number[]) {\r\n\r\n            var bottomMarginLimit: number = this.bottomMarginLimit;\r\n            var leftRightMarginLimit: number = this.leftRightMarginLimit;\r\n            var layers: IMekkoColumnChartVisual[] = this.layers;\r\n            var duration: number = AnimatorCommon.GetAnimationDuration(this.animator, suppressAnimations);\r\n            var chartViewport: IViewport = MekkoChart.getChartViewport(viewport, this.margin);\r\n\r\n            debug.assertValue(layers, 'layers');\r\n\r\n            var xLabelColor: Fill;\r\n            var yLabelColor: Fill;\r\n            var y2LabelColor: Fill;\r\n\r\n            var xFontSize: any;\r\n            var yFontSize: any;\r\n            //hide show x-axis here\r\n            if (this.shouldRenderAxis(axes.x)) {\r\n                if (axes.x.isCategoryAxis) {\r\n                    xLabelColor = this.categoryAxisProperties && this.categoryAxisProperties['labelColor'] ? this.categoryAxisProperties['labelColor'] : null;\r\n                    xFontSize =   this.categoryAxisProperties && this.categoryAxisProperties['fontSize'] != null ? this.categoryAxisProperties['fontSize'] : NewDataLabelUtils.DefaultLabelFontSizeInPt;\r\n                } else {\r\n                    xLabelColor = this.valueAxisProperties && this.valueAxisProperties['labelColor'] ? this.valueAxisProperties['labelColor'] : null;\r\n                    xFontSize = this.valueAxisProperties && this.valueAxisProperties['fontSize'] ? this.valueAxisProperties['fontSize'] : NewDataLabelUtils.DefaultLabelFontSizeInPt;\r\n                }\r\n                axes.x.axis.orient(\"bottom\");\r\n                if (!axes.x.willLabelsFit) {\r\n                    axes.x.axis.tickPadding(MekkoChart.TickPaddingRotatedX);\r\n                }\r\n\r\n                var xAxisGraphicsElement: D3.Selection = this.xAxisGraphicsContext;\r\n                if (duration) {\r\n                    xAxisGraphicsElement\r\n                        .transition()\r\n                        .duration(duration)\r\n                        .call(axes.x.axis);\r\n                }\r\n                else {\r\n                    xAxisGraphicsElement\r\n                        .call(axes.x.axis);\r\n                }\r\n\r\n                xAxisGraphicsElement\r\n                    .call(MekkoChart.darkenZeroLine)\r\n                    .call(MekkoChart.setAxisLabelColor, xLabelColor)\r\n                    .call(MekkoChart.setAxisLabelFontSize, xFontSize);\r\n\r\n                var xAxisTextNodes = xAxisGraphicsElement.selectAll('text');\r\n\r\n                var columnWidth: number[] = [];\r\n                var borderWidth: number = 0;\r\n                if (this.layers && this.layers.length) {\r\n                    columnWidth = this.layers[0].getColumnsWidth();\r\n                    borderWidth = this.layers[0].getBorderWidth();\r\n                }\r\n\r\n                xAxisGraphicsElement\r\n                    .call(MekkoChart.moveBorder, axes.x.scale, borderWidth, xFontSize / 2 - 8);\r\n\r\n                xAxisTextNodes\r\n                    .call(MekkoChart.wordBreak, axes.x, columnWidth, bottomMarginLimit, borderWidth);\r\n            }\r\n            else {\r\n                this.xAxisGraphicsContext.selectAll('*').remove();\r\n            }\r\n\r\n            if (this.shouldRenderAxis(axes.y1)) {\r\n                if (axes.y1.isCategoryAxis) {\r\n                    yLabelColor = this.categoryAxisProperties && this.categoryAxisProperties['labelColor'] ? this.categoryAxisProperties['labelColor'] : null;\r\n                    yFontSize =   this.categoryAxisProperties && this.categoryAxisProperties['fontSize'] != null ? this.categoryAxisProperties['fontSize'] : NewDataLabelUtils.DefaultLabelFontSizeInPt;\r\n                } else {\r\n                    yLabelColor = this.valueAxisProperties && this.valueAxisProperties['labelColor'] ? this.valueAxisProperties['labelColor'] : null;\r\n                    yFontSize =   this.valueAxisProperties && this.valueAxisProperties['fontSize'] != null ? this.valueAxisProperties['fontSize'] : NewDataLabelUtils.DefaultLabelFontSizeInPt;\r\n                }\r\n                var yAxisOrientation = this.yAxisOrientation;\r\n                var showY1OnRight = yAxisOrientation === yAxisPosition.right;\r\n                axes.y1.axis\r\n                    .tickSize(-width)\r\n                    .tickPadding(MekkoChart.TickPaddingY)\r\n                    .orient(yAxisOrientation.toLowerCase());\r\n\r\n                var y1AxisGraphicsElement: D3.Selection = this.y1AxisGraphicsContext;\r\n                if (duration) {\r\n                    y1AxisGraphicsElement\r\n                        .transition()\r\n                        .duration(duration)\r\n                        .call(axes.y1.axis);\r\n                }\r\n                else {\r\n                    y1AxisGraphicsElement\r\n                        .call(axes.y1.axis);\r\n                }\r\n\r\n                y1AxisGraphicsElement\r\n                    .call(MekkoChart.darkenZeroLine)\r\n                    .call(MekkoChart.setAxisLabelColor, yLabelColor)\r\n                    .call(MekkoChart.setAxisLabelFontSize, yFontSize);\r\n\r\n                if (tickLabelMargins.yLeft >= leftRightMarginLimit) {\r\n                    y1AxisGraphicsElement.selectAll('text')\r\n                        .call(AxisHelper.LabelLayoutStrategy.clip,\r\n                        // Can't use padding space to render text, so subtract that from available space for ellipses calculations\r\n                        leftRightMarginLimit - MekkoChart.LeftPadding,\r\n                        TextMeasurementService.svgEllipsis);\r\n                }\r\n\r\n                if (axes.y2 && (!this.valueAxisProperties || this.valueAxisProperties['secShow'] == null || this.valueAxisProperties['secShow'])) {\r\n                    y2LabelColor = this.valueAxisProperties && this.valueAxisProperties['secLabelColor'] ? this.valueAxisProperties['secLabelColor'] : null;\r\n\r\n                    axes.y2.axis\r\n                        .tickPadding(MekkoChart.TickPaddingY)\r\n                        .orient(showY1OnRight ? yAxisPosition.left.toLowerCase() : yAxisPosition.right.toLowerCase());\r\n\r\n                    if (duration) {\r\n                        this.y2AxisGraphicsContext\r\n                            .transition()\r\n                            .duration(duration)\r\n                            .call(axes.y2.axis);\r\n                    }\r\n                    else {\r\n                        this.y2AxisGraphicsContext\r\n                            .call(axes.y2.axis);\r\n                    }\r\n\r\n                    this.y2AxisGraphicsContext\r\n                        .call(MekkoChart.darkenZeroLine)\r\n                        .call(MekkoChart.setAxisLabelColor, y2LabelColor);\r\n\r\n                    if (tickLabelMargins.yRight >= leftRightMarginLimit) {\r\n                        this.y2AxisGraphicsContext.selectAll('text')\r\n                            .call(AxisHelper.LabelLayoutStrategy.clip,\r\n                            // Can't use padding space to render text, so subtract that from available space for ellipses calculations\r\n                            leftRightMarginLimit - MekkoChart.RightPadding,\r\n                            TextMeasurementService.svgEllipsis);\r\n                    }\r\n                }\r\n                else {\r\n                    this.y2AxisGraphicsContext.selectAll('*').remove();\r\n                }\r\n            }\r\n            else {\r\n                this.y1AxisGraphicsContext.selectAll('*').remove();\r\n                this.y2AxisGraphicsContext.selectAll('*').remove();\r\n            }\r\n\r\n            // Axis labels\r\n            if (chartHasAxisLabels) {\r\n                var hideXAxisTitle: boolean = !this.shouldRenderAxis(axes.x, \"showAxisTitle\");\r\n                var hideYAxisTitle: boolean = !this.shouldRenderAxis(axes.y1, \"showAxisTitle\");\r\n                var hideY2AxisTitle: boolean = this.valueAxisProperties && this.valueAxisProperties[\"secShowAxisTitle\"] != null && this.valueAxisProperties[\"secShowAxisTitle\"] === false;\r\n\r\n                var renderAxisOptions: MekkoAxisRenderingOptions = {\r\n                    axisLabels: axisLabels,\r\n                    legendMargin: this.legendMargins.height,\r\n                    viewport: viewport,\r\n                    hideXAxisTitle: hideXAxisTitle,\r\n                    hideYAxisTitle: hideYAxisTitle,\r\n                    hideY2AxisTitle: hideY2AxisTitle,\r\n                    xLabelColor: xLabelColor,\r\n                    yLabelColor: yLabelColor,\r\n                    y2LabelColor: y2LabelColor,\r\n                    margin: undefined,\r\n                };\r\n\r\n                this.renderAxesLabels(renderAxisOptions);\r\n            }\r\n            else {\r\n                this.axisGraphicsContext.selectAll('.xAxisLabel').remove();\r\n                this.axisGraphicsContext.selectAll('.yAxisLabel').remove();\r\n            }\r\n\r\n            this.translateAxes(viewport);\r\n\r\n            var dataPoints: SelectableDataPoint[] = [];\r\n            var layerBehaviorOptions: any[] = [];\r\n            var labelDataPointsGroup: MekkoLabelDataPointsGroup[] = [];\r\n\r\n            //Render chart columns\r\n            if (this.behavior) {\r\n                for (var i: number = 0, len: number = layers.length; i < len; i++) {\r\n                    var result: MekkoVisualRenderResult = layers[i].render(suppressAnimations);\r\n                    if (result) {\r\n                        dataPoints = dataPoints.concat(result.dataPoints);\r\n                        layerBehaviorOptions.push(result.behaviorOptions);\r\n\r\n                        if (result.labelDataPointGroups) {\r\n                            var resultLabelDataPointsGroups = result.labelDataPointGroups;\r\n                            for (var j: number = 0, jlen = resultLabelDataPointsGroups.length; j < jlen; j++) {\r\n                                var resultLabelDataPointsGroup = resultLabelDataPointsGroups[j];\r\n                                labelDataPointsGroup.push({\r\n                                    labelDataPoints: resultLabelDataPointsGroup.labelDataPoints,\r\n                                    maxNumberOfLabels: resultLabelDataPointsGroup.maxNumberOfLabels,\r\n                                });\r\n                            }\r\n                        }\r\n                        else {\r\n                            var resultsLabelDataPoints: MekkoLabelDataPoint[] = result.labelDataPoints;\r\n                            var reducedDataPoints: MekkoLabelDataPoint[] = resultsLabelDataPoints;\r\n                            labelDataPointsGroup.push({\r\n                                labelDataPoints: reducedDataPoints,\r\n                                maxNumberOfLabels: reducedDataPoints.length,\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n\r\n                var labelLayoutOptions: DataLabelLayoutOptions = {\r\n                    maximumOffset: NewDataLabelUtils.maxLabelOffset,\r\n                    startingOffset: NewDataLabelUtils.startingLabelOffset\r\n                };\r\n\r\n                var labelLayout: LabelLayout = new LabelLayout(labelLayoutOptions);\r\n                var dataLabels: Label[] = labelLayout.layout(labelDataPointsGroup, chartViewport);\r\n\r\n                if (layers.length > 1) {\r\n                    NewDataLabelUtils.drawLabelBackground(this.labelGraphicsContextScrollable, dataLabels, \"#FFFFFF\", 0.7);\r\n                }\r\n                if (this.animator && !suppressAnimations) {\r\n                    NewDataLabelUtils.animateDefaultLabels(this.labelGraphicsContextScrollable, dataLabels, this.animator.getDuration());\r\n                }\r\n                else {\r\n                    NewDataLabelUtils.drawDefaultLabels(this.labelGraphicsContextScrollable, dataLabels);\r\n                }\r\n                this.labelGraphicsContextScrollable.selectAll(\"text.label\").style(\"pointer-events\", \"none\");\r\n                if (this.interactivityService) {\r\n                    var behaviorOptions: MekkoBehaviorOptions = {\r\n                        layerOptions: layerBehaviorOptions,\r\n                        clearCatcher: this.clearCatcher,\r\n                    };\r\n                    this.interactivityService.bind(dataPoints, this.behavior, behaviorOptions);\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        /**\r\n         * Within the context of the given selection (g), find the offset of\r\n         * the zero tick using the d3 attached datum of g.tick elements.\r\n         * 'Classed' is undefined for transition selections\r\n         */\r\n        private static darkenZeroLine(g: D3.Selection): void {\r\n            var zeroTick = g.selectAll('g.tick').filter((data) => data === 0).node();\r\n            if (zeroTick) {\r\n                d3.select(zeroTick).select('line').classed('zero-line', true);\r\n            }\r\n        }\r\n\r\n        private static setAxisLabelColor(g: D3.Selection, fill: Fill): void {\r\n            g.selectAll('g.tick text').style('fill', fill ? fill.solid.color : null);\r\n        }\r\n\r\n        private static setAxisLabelFontSize(g: D3.Selection, fontSize: number): void {\r\n            var value = jsCommon.PixelConverter.toString(fontSize);\r\n            g.selectAll('g.tick text').attr('font-size', value);\r\n        }\r\n\r\n        private static moveBorder(g: D3.Selection, scale: D3.Scale.LinearScale, borderWidth: number, yOffset: number = 0): void {\r\n            g.selectAll('g.tick')\r\n                .attr(\"transform\", function(value: number, index: number) {\r\n                     return SVGUtil.translate(scale(value) + (borderWidth * index), yOffset);\r\n            });\r\n        }\r\n    }\r\n\r\n    function getTickLabelMargins(\r\n        viewport: IViewport,\r\n        yMarginLimit: number,\r\n        textWidthMeasurer: ITextAsSVGMeasurer,\r\n        textHeightMeasurer: ITextAsSVGMeasurer,\r\n        axes: CartesianAxisProperties,\r\n        bottomMarginLimit: number,\r\n        xAxisTextProperties: TextProperties,\r\n        y1AxisTextProperties: TextProperties,\r\n        y2AxisTextProperties: TextProperties,\r\n        enableOverflowCheck: boolean,\r\n        scrollbarVisible?: boolean,\r\n        showOnRight?: boolean,\r\n        renderXAxis?: boolean,\r\n        renderY1Axis?: boolean,\r\n        renderY2Axis?: boolean): TickLabelMargins {\r\n\r\n        var XLabelMaxAllowedOverflow = 35;\r\n\r\n        debug.assertValue(axes, 'axes');\r\n        var xAxisProperties: IAxisProperties = axes.x;\r\n        var y1AxisProperties: IAxisProperties = axes.y1;\r\n        var y2AxisProperties: IAxisProperties = axes.y2;\r\n\r\n        debug.assertValue(viewport, 'viewport');\r\n        debug.assertValue(textWidthMeasurer, 'textWidthMeasurer');\r\n        debug.assertValue(textHeightMeasurer, 'textHeightMeasurer');\r\n        debug.assertValue(xAxisProperties, 'xAxis');\r\n        debug.assertValue(y1AxisProperties, 'yAxis');\r\n\r\n        var xLabels = xAxisProperties.values;\r\n        var y1Labels = y1AxisProperties.values;\r\n\r\n        var leftOverflow = 0;\r\n        var rightOverflow = 0;\r\n        var maxWidthY1 = 0;\r\n        var maxWidthY2 = 0;\r\n        var xMax = 0; // bottom margin\r\n        var ordinalLabelOffset = xAxisProperties.categoryThickness ? xAxisProperties.categoryThickness / 2 : 0;\r\n        var scaleIsOrdinal = AxisHelper.isOrdinalScale(xAxisProperties.scale);\r\n\r\n        var xLabelOuterPadding = 0;\r\n        if (xAxisProperties.outerPadding !== undefined) {\r\n            xLabelOuterPadding = xAxisProperties.outerPadding;\r\n        }\r\n        else if (xAxisProperties.xLabelMaxWidth !== undefined) {\r\n            xLabelOuterPadding = Math.max(0, (viewport.width - xAxisProperties.xLabelMaxWidth * xLabels.length) / 2);\r\n        }\r\n\r\n        if (AxisHelper.getRecommendedNumberOfTicksForXAxis(viewport.width) !== 0\r\n            ||AxisHelper. getRecommendedNumberOfTicksForYAxis(viewport.height) !== 0) {\r\n            var rotation;\r\n            if (scrollbarVisible)\r\n                rotation = AxisHelper.LabelLayoutStrategy.DefaultRotationWithScrollbar;\r\n            else\r\n                rotation = AxisHelper.LabelLayoutStrategy.DefaultRotation;\r\n\r\n            if (renderY1Axis) {\r\n                for (var i = 0, len = y1Labels.length; i < len; i++) {\r\n                    y1AxisTextProperties.text = y1Labels[i];\r\n                    maxWidthY1 = Math.max(maxWidthY1, textWidthMeasurer(y1AxisTextProperties));\r\n                }\r\n            }\r\n\r\n            if (y2AxisProperties && renderY2Axis) {\r\n                var y2Labels = y2AxisProperties.values;\r\n                for (var i = 0, len = y2Labels.length; i < len; i++) {\r\n                    y2AxisTextProperties.text = y2Labels[i];\r\n                    maxWidthY2 = Math.max(maxWidthY2, textWidthMeasurer(y2AxisTextProperties));\r\n                }\r\n            }\r\n\r\n            var textHeight = textHeightMeasurer(xAxisTextProperties);\r\n            var maxNumLines = Math.floor(bottomMarginLimit / textHeight);\r\n            var xScale = xAxisProperties.scale;\r\n            var xDomain = xScale.domain();\r\n            if (renderXAxis && xLabels.length > 0) {\r\n                for (var i = 0, len = xLabels.length; i < len; i++) {\r\n                    // find the max height of the x-labels, perhaps rotated or wrapped\r\n                    var height: number;\r\n                    xAxisTextProperties.text = xLabels[i];\r\n                    var width = textWidthMeasurer(xAxisTextProperties);\r\n                    if (xAxisProperties.willLabelsWordBreak) {\r\n                        // Split label and count rows\r\n                        var wordBreaks = jsCommon.WordBreaker.splitByWidth(xAxisTextProperties.text, xAxisTextProperties, textWidthMeasurer, xAxisProperties.xLabelMaxWidth, maxNumLines);\r\n                        height = wordBreaks.length * textHeight;\r\n                        // word wrapping will truncate at xLabelMaxWidth\r\n                        width = xAxisProperties.xLabelMaxWidth;\r\n                    }\r\n                    else if (!xAxisProperties.willLabelsFit && scaleIsOrdinal) {\r\n                        height = width * rotation.sine;\r\n                        width = width * rotation.cosine;\r\n                    }\r\n                    else {\r\n                        height = textHeight;\r\n                    }\r\n\r\n                    // calculate left and right overflow due to wide X labels\r\n                    // (Note: no right overflow when rotated)\r\n                    if (i === 0) {\r\n                        if (scaleIsOrdinal) {\r\n                            if (!xAxisProperties.willLabelsFit /*rotated text*/)\r\n                                leftOverflow = width - ordinalLabelOffset - xLabelOuterPadding;\r\n                            else\r\n                                leftOverflow = (width / 2) - ordinalLabelOffset - xLabelOuterPadding;\r\n                            leftOverflow = Math.max(leftOverflow, 0);\r\n                        }\r\n                        else if (xDomain.length > 1) {\r\n                            // Scalar - do some math\r\n                            var xPos = xScale(xDomain[0]);\r\n                            // xPos already incorporates xLabelOuterPadding, don't subtract it twice\r\n                            leftOverflow = (width / 2) - xPos;\r\n                            leftOverflow = Math.max(leftOverflow, 0);\r\n                        }\r\n                    } else if (i === len - 1) {\r\n                        if (scaleIsOrdinal) {\r\n                            // if we are rotating text (!willLabelsFit) there won't be any right overflow\r\n                            if (xAxisProperties.willLabelsFit || xAxisProperties.willLabelsWordBreak) {\r\n                                // assume this label is placed near the edge\r\n                                rightOverflow = (width / 2) - ordinalLabelOffset - xLabelOuterPadding;\r\n                                rightOverflow = Math.max(rightOverflow, 0);\r\n                            }\r\n                        }\r\n                        else if (xDomain.length > 1) {\r\n                            // Scalar - do some math\r\n                            var xPos = xScale(xDomain[1]);\r\n                            // xPos already incorporates xLabelOuterPadding, don't subtract it twice\r\n                            rightOverflow = (width / 2) - (viewport.width - xPos);\r\n                            rightOverflow = Math.max(rightOverflow, 0);\r\n                        }\r\n                    }\r\n\r\n                    xMax = Math.max(xMax, height);\r\n                }\r\n                // trim any actual overflow to the limit\r\n                leftOverflow = enableOverflowCheck ? Math.min(leftOverflow, XLabelMaxAllowedOverflow) : 0;\r\n                rightOverflow = enableOverflowCheck ? Math.min(rightOverflow, XLabelMaxAllowedOverflow) : 0;\r\n            }\r\n        }\r\n\r\n        var rightMargin = 0,\r\n            leftMargin = 0,\r\n            bottomMargin = Math.min(Math.ceil(xMax), bottomMarginLimit);\r\n\r\n        if (showOnRight) {\r\n            leftMargin = Math.min(Math.max(leftOverflow, maxWidthY2), yMarginLimit);\r\n            rightMargin = Math.min(Math.max(rightOverflow, maxWidthY1), yMarginLimit);\r\n        }\r\n        else {\r\n            leftMargin = Math.min(Math.max(leftOverflow, maxWidthY1), yMarginLimit);\r\n            rightMargin = Math.min(Math.max(rightOverflow, maxWidthY2), yMarginLimit);\r\n        }\r\n\r\n        return {\r\n            xMax: Math.ceil(bottomMargin),\r\n            yLeft: Math.ceil(leftMargin),\r\n            yRight: Math.ceil(rightMargin),\r\n        };\r\n    }\r\n\r\n    function getLayerData(dataViews: DataView[], currentIdx: number, totalLayers: number): DataView[] {\r\n        if (totalLayers > 1) {\r\n            if (dataViews && dataViews.length > currentIdx)\r\n                return [dataViews[currentIdx]];\r\n            return [];\r\n        }\r\n\r\n        return dataViews;\r\n    }\r\n\r\n    /**\r\n     * Returns a boolean, that indicates if y axis title should be displayed.\r\n     * @return True if y axis title should be displayed,\r\n     * otherwise false.\r\n     */\r\n    function shouldShowYAxisLabel(layerNumber: number, valueAxisProperties: DataViewObject, yAxisWillMerge: boolean): boolean {\r\n        return ((layerNumber === 0 && !!valueAxisProperties && !!valueAxisProperties['showAxisTitle']) ||\r\n            (layerNumber === 1 && !yAxisWillMerge && !!valueAxisProperties && !!valueAxisProperties['secShowAxisTitle']));\r\n    }\r\n\r\n    /**\r\n     * Computes the Cartesian Chart axes from the set of layers.\r\n     */\r\n    function calculateAxes(\r\n        layers: IMekkoColumnChartVisual[],\r\n        viewport: IViewport,\r\n        margin: IMargin,\r\n        categoryAxisProperties: DataViewObject,\r\n        valueAxisProperties: DataViewObject,\r\n        scrollbarVisible: boolean,\r\n        existingAxisProperties: CartesianAxisProperties): CartesianAxisProperties {\r\n        debug.assertValue(layers, 'layers');\r\n\r\n        var visualOptions: MekkoCalculateScaleAndDomainOptions = {\r\n            viewport: viewport,\r\n            margin: margin,\r\n            forcedXDomain: [categoryAxisProperties ? categoryAxisProperties['start'] : null, categoryAxisProperties ? categoryAxisProperties['end'] : null],\r\n            forceMerge: valueAxisProperties && valueAxisProperties['secShow'] === false,\r\n            showCategoryAxisLabel: false,\r\n            showValueAxisLabel: false,\r\n            categoryAxisScaleType: categoryAxisProperties && categoryAxisProperties['axisScale'] != null ? <string>categoryAxisProperties['axisScale'] : axisScale.linear,\r\n            valueAxisScaleType: valueAxisProperties && valueAxisProperties['axisScale'] != null ? <string>valueAxisProperties['axisScale'] : axisScale.linear,\r\n            trimOrdinalDataOnOverflow: false\r\n        };\r\n\r\n        var yAxisWillMerge = false;\r\n\r\n        if (valueAxisProperties) {\r\n            visualOptions.forcedYDomain = AxisHelper.applyCustomizedDomain([valueAxisProperties['start'], valueAxisProperties['end']], visualOptions.forcedYDomain);\r\n        }\r\n\r\n        var result: CartesianAxisProperties;\r\n        for (var layerNumber: number = 0, len: number = layers.length; layerNumber < len; layerNumber++) {\r\n            var currentlayer = layers[layerNumber];\r\n            visualOptions.showCategoryAxisLabel = (!!categoryAxisProperties && !!categoryAxisProperties['showAxisTitle']);//here\r\n            //visualOptions.showBorder = (!!categoryAxisProperties && !!categoryAxisProperties['showBorder']);//here\r\n            visualOptions.showValueAxisLabel = shouldShowYAxisLabel(layerNumber, valueAxisProperties, yAxisWillMerge);\r\n\r\n            var axes = currentlayer.calculateAxesProperties(visualOptions);\r\n\r\n            if (layerNumber === 0) {\r\n                result = {\r\n                    x: axes[0],\r\n                    y1: axes[1]\r\n                };\r\n            }\r\n\r\n            result.x.willLabelsFit = false;\r\n            result.x.willLabelsWordBreak = false;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    export function createLayers(\r\n        type: MekkoChartType,\r\n        objects: DataViewObjects,\r\n        interactivityService: IInteractivityService,\r\n        animator?: any,\r\n        isScrollable: boolean = true): IMekkoColumnChartVisual[] {\r\n\r\n        var layers: IMekkoColumnChartVisual[] = [];\r\n\r\n        var cartesianOptions: CartesianVisualConstructorOptions = {\r\n            isScrollable: isScrollable,\r\n            animator: animator,\r\n            interactivityService: interactivityService\r\n        };\r\n\r\n        layers.push(createMekkoChartLayer(ColumnChartType.hundredPercentStackedColumn, cartesianOptions));\r\n\r\n        return layers;\r\n    }\r\n\r\n    function createMekkoChartLayer(type: ColumnChartType, defaultOptions: CartesianVisualConstructorOptions): MekkoColumnChart {\r\n        var options: ColumnChartConstructorOptions = {\r\n            animator: <IColumnChartAnimator>defaultOptions.animator,\r\n            interactivityService: defaultOptions.interactivityService,\r\n            isScrollable: defaultOptions.isScrollable,\r\n            chartType: type\r\n        };\r\n        return new MekkoColumnChart(options);\r\n    }\r\n\r\n    import EnumExtensions = jsCommon.EnumExtensions;\r\n    import ArrayExtensions = jsCommon.ArrayExtensions;\r\n\r\n    var flagBar: number = 1 << 1;\r\n    //var flagColumn: number = 1 << 2;\r\n    var flagStacked: number = 1 << 4;\r\n\r\n    var RoleNames = {\r\n        category: 'Category',\r\n        series: 'Series',\r\n        y: 'Y',\r\n        width: 'Width'\r\n    };\r\n\r\n    /**\r\n     * Renders a stacked and clustered column chart.\r\n     */\r\n    export interface IMekkoColumnChartVisual /*extends ICartesianVisual*/ {\r\n        getColumnsWidth(): number[];\r\n        getBorderWidth(): number;\r\n\r\n\t\tinit(options: CartesianVisualInitOptions): void;\r\n        setData(dataViews: DataView[], resized?: boolean): void;\r\n        calculateAxesProperties(options: CalculateScaleAndDomainOptions): IAxisProperties[];\r\n        overrideXScale(xProperties: IAxisProperties): void;\r\n        render(suppressAnimations: boolean): MekkoVisualRenderResult;\r\n        calculateLegend(): LegendData;\r\n        hasLegend(): boolean;\r\n        onClearSelection(): void;\r\n        enumerateObjectInstances?(enumeration: ObjectEnumerationBuilder, options: EnumerateVisualObjectInstancesOptions): void;\r\n        getVisualCategoryAxisIsScalar?(): boolean;\r\n        getSupportedCategoryAxisType?(): string;\r\n        getPreferredPlotArea?(isScalar: boolean, categoryCount: number, categoryThickness: number): IViewport;\r\n        setFilteredData?(startIndex: number, endIndex: number): CartesianData;\r\n    }\r\n\r\n    export interface IMekkoColumnChartStrategy /*extends IColumnChartStrategy*/ {\r\n\t\tdrawColumns(useAnimation: boolean): MekkoColumnChartDrawInfo;\r\n\r\n\t\tsetData(data: ColumnChartData): void;\r\n        setupVisualProps(columnChartProps: ColumnChartContext): void;\r\n        setXScale(is100Pct: boolean, forcedTickCount?: number, forcedXDomain?: any[], axisScaleType?: string, axisDisplayUnits?: number, axisPrecision?: number): IAxisProperties;\r\n        setYScale(is100Pct: boolean, forcedTickCount?: number, forcedYDomain?: any[], axisScaleType?: string, axisDisplayUnits?: number, axisPrecision?: number): IAxisProperties;\r\n\r\n        selectColumn(selectedColumnIndex: number, lastSelectedColumnIndex: number): void;\r\n        getClosestColumnIndex(x: number, y: number): number;\r\n    }\r\n\r\n    export class MekkoColumnChart implements IMekkoColumnChartVisual {\r\n        private static ColumnChartClassName = 'columnChart';\r\n\r\n        public static SeriesClasses: ClassAndSelector = createClassAndSelector(\"series\");\r\n        public static BorderClass: ClassAndSelector = createClassAndSelector(\"mekkoborder\");\r\n\r\n        private svg: D3.Selection;\r\n        private unclippedGraphicsContext: D3.Selection;\r\n        private mainGraphicsContext: D3.Selection;\r\n        private labelGraphicsContext: D3.Selection;\r\n        private xAxisProperties: IAxisProperties;\r\n        private yAxisProperties: IAxisProperties;\r\n        private currentViewport: IViewport;\r\n        private data: MekkoColumnChartData;\r\n        private style: IVisualStyle;\r\n        private colors: IDataColorPalette;\r\n        private chartType: ColumnChartType;\r\n        private columnChart: IMekkoColumnChartStrategy;\r\n        private hostService: IVisualHostServices;\r\n        private cartesianVisualHost: ICartesianVisualHost;\r\n        private interactivity: InteractivityOptions;\r\n        private margin: IMargin;\r\n        private options: CartesianVisualInitOptions;\r\n        private lastInteractiveSelectedColumnIndex: number;\r\n        private supportsOverflow: boolean;\r\n        private interactivityService: IInteractivityService;\r\n        private dataViewCat: DataViewCategorical;\r\n        private categoryAxisType: string;\r\n        private animator: IColumnChartAnimator;\r\n        private isScrollable: boolean;\r\n        private element: JQuery;\r\n\r\n        constructor(options: ColumnChartConstructorOptions) {\r\n            debug.assertValue(options, 'options');\r\n\r\n            var chartType: ColumnChartType = options.chartType;\r\n            debug.assertValue(chartType, 'chartType');\r\n            this.chartType = chartType;\r\n            this.categoryAxisType = null;\r\n            this.animator = options.animator;\r\n            this.isScrollable = options.isScrollable;\r\n            this.interactivityService = options.interactivityService;\r\n        }\r\n\r\n        public init(options: CartesianVisualInitOptions) {\r\n            this.svg = options.svg;\r\n            this.unclippedGraphicsContext = this.svg.append('g').classed('columnChartUnclippedGraphicsContext', true);\r\n            this.mainGraphicsContext = this.unclippedGraphicsContext.append('svg').classed('columnChartMainGraphicsContext', true);\r\n            this.labelGraphicsContext = this.svg.append('g').classed(NewDataLabelUtils.labelGraphicsContextClass.class, true);\r\n\r\n            this.style = options.style;\r\n            this.currentViewport = options.viewport;\r\n            this.hostService = options.host;\r\n            this.interactivity = options.interactivity;\r\n            this.colors = this.style.colorPalette.dataColors;\r\n            this.cartesianVisualHost = options.cartesianHost;\r\n            this.options = options;\r\n            this.supportsOverflow = !EnumExtensions.hasFlag(this.chartType, flagStacked);\r\n            var element = this.element = options.element;\r\n            element.addClass(MekkoColumnChart.ColumnChartClassName);\r\n\r\n            this.columnChart = new MekkoColumnChartStrategy();\r\n        }\r\n\r\n        private getCategoryLayout(numCategoryValues: number, options: MekkoCalculateScaleAndDomainOptions): CategoryLayout {\r\n            var availableWidth: number = this.currentViewport.width - (this.margin.left + this.margin.right);\r\n            var metaDataColumn = this.data ? this.data.categoryMetadata : undefined;\r\n            var categoryDataType: ValueType = AxisHelper.getCategoryValueType(metaDataColumn);\r\n            var isScalar = this.data ? this.data.scalarCategoryAxis : false;\r\n            var domain = AxisHelper.createDomain(this.data.series, categoryDataType, isScalar, options.forcedXDomain);\r\n\r\n            return CartesianChart.getLayout(\r\n                this.data,\r\n                {\r\n                    availableWidth: availableWidth,\r\n                    categoryCount: numCategoryValues,\r\n                    domain: domain,\r\n                    isScalar: isScalar,\r\n                    isScrollable: this.isScrollable,\r\n                    trimOrdinalDataOnOverflow: false\r\n                });\r\n        }\r\n\r\n        public static getBorderWidth(border: MekkoBorderSettings) {\r\n            if (!border ||\r\n                !border.show ||\r\n                !border.width) {\r\n                return 0;\r\n            }\r\n\r\n            var width: number = border.width;\r\n\r\n            if (width < 0) {\r\n                return 0;\r\n            }\r\n            if (width > border.maxWidth) {\r\n                return border.maxWidth;\r\n            }\r\n\r\n            return width;\r\n        }\r\n\r\n        public static getBorderColor(border: MekkoBorderSettings) {\r\n            if (!border) {\r\n                return MekkoChart.DefaultSettings.columnBorder.color;\r\n            }\r\n            return border.color;\r\n        }\r\n\r\n        public static converter(dataView: DataViewCategorical,\r\n                                colors: IDataColorPalette,\r\n                                is100PercentStacked: boolean = false,\r\n                                isScalar: boolean = false,\r\n                                supportsOverflow: boolean = false,\r\n                                dataViewMetadata: DataViewMetadata = null,\r\n                                chartType?: ColumnChartType): MekkoColumnChartData {\r\n            debug.assertValue(dataView, 'dataView');\r\n            debug.assertValue(colors, 'colors');\r\n\r\n            var xAxisCardProperties = CartesianHelper.getCategoryAxisProperties(dataViewMetadata);\r\n            var valueAxisProperties = CartesianHelper.getValueAxisProperties(dataViewMetadata);\r\n            isScalar = CartesianHelper.isScalar(isScalar, xAxisCardProperties);\r\n            dataView = ColumnUtil.applyUserMinMax(isScalar, dataView, xAxisCardProperties);\r\n\r\n            var converterStrategy = new ColumnChartConverterHelper(dataView);\r\n\r\n            var categoryInfo = converterHelper.getPivotedCategories(dataView, columnChartProps.general.formatString);\r\n            var categories = categoryInfo.categories,\r\n                categoryFormatter: IValueFormatter = categoryInfo.categoryFormatter,\r\n                categoryIdentities: DataViewScopeIdentity[] = categoryInfo.categoryIdentities,\r\n                categoryMetadata: DataViewMetadataColumn = dataView.categories && dataView.categories.length > 0 ? dataView.categories[0].source : undefined;\r\n            //labelFormatString: string = dataView.values && dataView.values[0] ? valueFormatter.getFormatString(dataView.values[0].source, columnChartProps.general.formatString) : undefined;\r\n\r\n            var borderSettings: MekkoBorderSettings = MekkoChart.DefaultSettings.columnBorder;\r\n            var labelSettings: VisualDataLabelsSettings = dataLabelUtils.getDefaultColumnLabelSettings(true);\r\n\r\n            var defaultDataPointColor = undefined;\r\n            var showAllDataPoints = undefined;\r\n            if (dataViewMetadata && dataViewMetadata.objects) {\r\n                var objects = dataViewMetadata.objects;\r\n\r\n                defaultDataPointColor = DataViewObjects.getFillColor(objects, columnChartProps.dataPoint.defaultColor);\r\n                showAllDataPoints = DataViewObjects.getValue<boolean>(objects, columnChartProps.dataPoint.showAllDataPoints);\r\n\r\n                labelSettings = MekkoChart.parseLabelSettings(objects);\r\n                borderSettings = MekkoChart.parseBorderSettings(objects);\r\n            }\r\n\r\n            // Allocate colors\r\n            var legendAndSeriesInfo = converterStrategy.getLegend(colors, defaultDataPointColor);\r\n            var legend: MekkoLegendDataPoint[] = legendAndSeriesInfo.legend.dataPoints;\r\n            var seriesSources: DataViewMetadataColumn[] = legendAndSeriesInfo.seriesSources;\r\n\r\n            // Determine data points\r\n            var result: MekkoDataPoints = MekkoColumnChart.createDataPoints(\r\n                dataView,\r\n                categories,\r\n                categoryIdentities,\r\n                legend,\r\n                legendAndSeriesInfo.seriesObjects,\r\n                converterStrategy,\r\n                labelSettings,\r\n                is100PercentStacked,\r\n                isScalar,\r\n                supportsOverflow,\r\n                converterHelper.categoryIsAlsoSeriesRole(dataView, RoleNames.series, RoleNames.category),\r\n                categoryInfo.categoryObjects,\r\n                defaultDataPointColor,\r\n                chartType,\r\n                categoryMetadata);\r\n            var columnSeries: ColumnChartSeries[] = result.series;\r\n\r\n            var valuesMetadata: DataViewMetadataColumn[] = [];\r\n            for (var j = 0, jlen = legend.length; j < jlen; j++) {\r\n                valuesMetadata.push(seriesSources[j]);\r\n            }\r\n\r\n            var labels = converterHelper.createAxesLabels(xAxisCardProperties, valueAxisProperties, categoryMetadata, valuesMetadata);\r\n\r\n            return {\r\n                categories: categories,\r\n                categoriesWidth: result.categoriesWidth,\r\n                categoryFormatter: categoryFormatter,\r\n                series: columnSeries,\r\n                valuesMetadata: valuesMetadata,\r\n                legendData: legendAndSeriesInfo.legend,\r\n                hasHighlights: result.hasHighlights,\r\n                categoryMetadata: categoryMetadata,\r\n                scalarCategoryAxis: isScalar,\r\n                borderSettings: borderSettings,\r\n                labelSettings: labelSettings,\r\n                axesLabels: { x: labels.xAxisLabel, y: labels.yAxisLabel },\r\n                hasDynamicSeries: result.hasDynamicSeries,\r\n                defaultDataPointColor: defaultDataPointColor,\r\n                showAllDataPoints: showAllDataPoints,\r\n                isMultiMeasure: false,\r\n            };\r\n        }\r\n\r\n        private static getStackedMultiplier(\r\n            rawValues: number[][],\r\n            rowIdx: number,\r\n            seriesCount: number,\r\n            categoryCount: number): ValueMultiplers {\r\n\r\n            var pos: number = 0,\r\n                neg: number = 0;\r\n\r\n            for (var i = 0; i < seriesCount; i++) {\r\n                var value: number = rawValues[i][rowIdx];\r\n                value = AxisHelper.normalizeNonFiniteNumber(value);\r\n\r\n                if (value > 0) {\r\n                    pos += value;\r\n                } else if (value < 0) {\r\n                    neg -= value;\r\n                }\r\n            }\r\n\r\n            var absTotal: number = pos + neg;\r\n            return {\r\n                pos: pos ? (pos / absTotal) / pos : 1,\r\n                neg: neg ? (neg / absTotal) / neg : 1,\r\n            };\r\n        }\r\n\r\n        private static createDataPoints(\r\n            dataViewCat: DataViewCategorical,\r\n            categories: any[],\r\n            categoryIdentities: DataViewScopeIdentity[],\r\n            legend: MekkoLegendDataPoint[],\r\n            seriesObjectsList: DataViewObjects[][],\r\n            converterStrategy: ColumnChartConverterHelper,\r\n\r\n            defaultLabelSettings: VisualDataLabelsSettings,\r\n            is100PercentStacked: boolean = false,\r\n            isScalar: boolean = false,\r\n            supportsOverflow: boolean = false,\r\n            isCategoryAlsoSeries?: boolean,\r\n            categoryObjectsList?: DataViewObjects[],\r\n            defaultDataPointColor?: string,\r\n            chartType?: ColumnChartType,\r\n            categoryMetadata?: DataViewMetadataColumn): MekkoDataPoints {\r\n\r\n            var grouped = dataViewCat && dataViewCat.values ? dataViewCat.values.grouped() : undefined;\r\n\r\n            var categoryCount = categories.length;\r\n            var seriesCount = legend.length;\r\n            var columnSeries: ColumnChartSeries[] = [];\r\n\r\n            if (seriesCount < 1 || categoryCount < 1 || categories[0] === null) {\r\n                return { series: columnSeries,\r\n                         hasHighlights: false,\r\n                         hasDynamicSeries: false,\r\n                         categoriesWidth: [],\r\n                        };\r\n\t\t\t}\r\n\r\n            var dvCategories = dataViewCat.categories;\r\n            categoryMetadata = (dvCategories && dvCategories.length > 0)\r\n                ? dvCategories[0].source\r\n                : null;\r\n            var categoryType = AxisHelper.getCategoryValueType(categoryMetadata);\r\n            var isDateTime = AxisHelper.isDateTime(categoryType);\r\n            var baseValuesPos = [], baseValuesNeg = [];\r\n\r\n            var rawValues: number[][] = [];\r\n            var rawHighlightValues: number[][] = [];\r\n\r\n            var hasDynamicSeries = !!(dataViewCat.values && dataViewCat.values.source);\r\n            var widthColumns: number[] = [];\r\n            var widthIndex = -1;\r\n\r\n\t\t\tvar seriesIndex: number = 0;\r\n            var highlightsOverflow = false; // Overflow means the highlight larger than value or the signs being different\r\n            var hasHighlights = converterStrategy.hasHighlightValues(0);\r\n            for (seriesIndex = 0; seriesIndex < dataViewCat.values.length; seriesIndex++) {\r\n                if (dataViewCat.values[seriesIndex].source.roles &&\r\n                    dataViewCat.values[seriesIndex].source.roles[RoleNames.width] &&\r\n                    !dataViewCat.values[seriesIndex].source.roles[RoleNames.y]) {\r\n\r\n                    widthIndex = seriesIndex;\r\n                    var widthValues: number[] = dataViewCat.values[seriesIndex].values;\r\n                    for (var i: number = 0, valuesLen = widthValues.length; i < valuesLen; i++) {\r\n                        widthColumns[i] = d3.sum([0, widthColumns[i], widthValues[i]]);\r\n                    }\r\n                    continue;\r\n                }\r\n                var seriesValues = [];\r\n                var seriesHighlightValues = [];\r\n                for (var categoryIndex: number = 0; categoryIndex < categoryCount; categoryIndex++) {\r\n                    var value = converterStrategy.getValueBySeriesAndCategory(seriesIndex, categoryIndex);\r\n                    seriesValues[categoryIndex] = value;\r\n                    if (hasHighlights) {\r\n                        var highlightValue = converterStrategy.getHighlightBySeriesAndCategory(seriesIndex, categoryIndex);\r\n                        seriesHighlightValues[categoryIndex] = highlightValue;\r\n                        // There are two cases where we don't use overflow logic; if all are false, use overflow logic appropriate for the chart.\r\n                        if (!((value >= 0 && highlightValue >= 0 && value >= highlightValue) || // Both positive; value greater than highlight\r\n                            (value <= 0 && highlightValue <= 0 && value <= highlightValue))) { // Both negative; value less than highlight\r\n                            highlightsOverflow = true;\r\n                        }\r\n                    }\r\n                }\r\n                rawValues.push(seriesValues);\r\n                if (hasHighlights) {\r\n                    rawHighlightValues.push(seriesHighlightValues);\r\n                }\r\n            }\r\n\r\n\t\t\t//console.log(dataViewCat);\r\n\r\n            if (highlightsOverflow && !supportsOverflow) {\r\n                highlightsOverflow = false;\r\n                hasHighlights = false;\r\n                rawValues = rawHighlightValues;\r\n            }\r\n\r\n            if (widthColumns.length < 1) {\r\n                for (seriesIndex = 0; seriesIndex < dataViewCat.values.length; seriesIndex++) {\r\n                    if (dataViewCat.values[seriesIndex].source.roles &&\r\n                        dataViewCat.values[seriesIndex].source.roles[RoleNames.width]) {\r\n\r\n                        widthIndex = seriesIndex;\r\n                        var widthValues: number[] = dataViewCat.values[seriesIndex].values;\r\n                        for (var i: number = 0, valuesLen: number = widthValues.length; i < valuesLen; i++) {\r\n                            widthColumns[i] = d3.sum([0, widthColumns[i], widthValues[i]]);\r\n                        }\r\n                        continue;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (widthColumns.length < 1) {\r\n                for (seriesIndex = 0; seriesIndex < categoryCount; seriesIndex++) {\r\n                    widthColumns.push(1);\r\n                }\r\n            }\r\n\r\n            var totalSum: number = d3.sum(widthColumns);\r\n            var linearScale = d3.scale.linear()\r\n                .domain([0, totalSum])\r\n                .range([0, 1]);\r\n\r\n            var columnStartX: number[] = [0];\r\n            var columnWidth: number[] = [];\r\n            for (seriesIndex = 0; seriesIndex < (categoryCount - 1); seriesIndex++) {\r\n                var stepWidth: number = columnStartX[columnStartX.length - 1] + (widthColumns[seriesIndex] || 0);\r\n                columnStartX.push(stepWidth);\r\n            }\r\n\r\n            for (seriesIndex = 0; seriesIndex < categoryCount; seriesIndex++) {\r\n                columnStartX[seriesIndex] = linearScale(columnStartX[seriesIndex]);\r\n                columnWidth[seriesIndex] = linearScale(widthColumns[seriesIndex]);\r\n            }\r\n\r\n            var dataPointObjects: DataViewObjects[] = categoryObjectsList,\r\n                formatStringProp = columnChartProps.general.formatString;\r\n            for (seriesIndex = 0; seriesIndex < seriesCount; seriesIndex++) {\r\n                var seriesDataPoints: ColumnChartDataPoint[] = [],\r\n                    legendItem = legend[seriesIndex],\r\n                    seriesLabelSettings: VisualDataLabelsSettings;\r\n\r\n                if (!hasDynamicSeries) {\r\n                    var labelsSeriesGroup = grouped && grouped.length > 0 && grouped[0].values ? grouped[0].values[seriesIndex] : null;\r\n                    var labelObjects = (labelsSeriesGroup && labelsSeriesGroup.source && labelsSeriesGroup.source.objects) ? <DataLabelObject>labelsSeriesGroup.source.objects['labels'] : null;\r\n                    if (labelObjects) {\r\n                        seriesLabelSettings = Prototype.inherit(defaultLabelSettings);\r\n                        dataLabelUtils.updateLabelSettingsFromLabelsObject(labelObjects, seriesLabelSettings);\r\n                    }\r\n                }\r\n\r\n                var series: ColumnChartSeries = {\r\n                    displayName: legendItem.label,\r\n                    key: 'series' + seriesIndex,\r\n                    index: seriesIndex,\r\n                    data: seriesDataPoints,\r\n                    identity: legendItem.identity,\r\n                    color: legendItem.color,\r\n                    labelSettings: seriesLabelSettings,\r\n                };\r\n\r\n                if (seriesCount > 1) {\r\n                    dataPointObjects = seriesObjectsList[seriesIndex];\r\n                }\r\n                var metadata = dataViewCat.values[seriesIndex].source;\r\n\r\n                for (var categoryIndex = 0; categoryIndex < categoryCount; categoryIndex++) {\r\n                    if (seriesIndex === 0) {\r\n                        baseValuesPos.push(0);\r\n                        baseValuesNeg.push(0);\r\n                    }\r\n\r\n                    var value = AxisHelper.normalizeNonFiniteNumber(rawValues[seriesIndex][categoryIndex]);\r\n                    if (value == null) {\r\n                        // Optimization: Ignore null dataPoints from the fabricated category/series combination in the self cross-join.\r\n                        // However, we must retain the first series because it is used to compute things like axis scales, and value lookups.\r\n                        if (seriesIndex > 0) {\r\n                            continue;\r\n                        }\r\n                    }\r\n\r\n                    var originalValue: number = value;\r\n                    var categoryValue = categories[categoryIndex];\r\n                    if (isDateTime && categoryValue) {\r\n                        categoryValue = categoryValue.getTime();\r\n                    }\r\n                    if (isScalar && (categoryValue == null || isNaN(categoryValue))) {\r\n                        continue;\r\n                    }\r\n\r\n                    var multipliers: ValueMultiplers;\r\n                    if (is100PercentStacked) {\r\n                        //multipliers = StackedUtil.getStackedMultiplier(dataViewCat, categoryIndex, seriesCount, categoryCount, converterStrategy);\r\n                        multipliers = MekkoColumnChart.getStackedMultiplier(rawValues, categoryIndex, seriesCount, categoryCount);\r\n                    }\r\n                    var unadjustedValue = value,\r\n                        isNegative = value < 0;\r\n\r\n                    if (multipliers) {\r\n                        if (isNegative) {\r\n                            value *= multipliers.neg;\r\n                        } else {\r\n                            value *= multipliers.pos;\r\n                        }\r\n                    }\r\n\r\n                    var valueAbsolute = Math.abs(value);\r\n                    var position: number;\r\n                    if (isNegative) {\r\n                        position = baseValuesNeg[categoryIndex];\r\n\r\n                        if (!isNaN(valueAbsolute)) {\r\n                            baseValuesNeg[categoryIndex] -= valueAbsolute;\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (!isNaN(valueAbsolute)) {\r\n                            baseValuesPos[categoryIndex] += valueAbsolute;\r\n                        }\r\n\r\n                        position = baseValuesPos[categoryIndex];\r\n                    }\r\n\r\n                    var columnGroup: DataViewValueColumnGroup = grouped && grouped.length > seriesIndex && grouped[seriesIndex].values ? grouped[seriesIndex] : null;\r\n                    var category: DataViewCategoryColumn = dataViewCat.categories && dataViewCat.categories.length > 0 ? dataViewCat.categories[0] : null;\r\n                    var identity = SelectionIdBuilder.builder()\r\n                        .withCategory(category, categoryIndex)\r\n                        .withSeries(dataViewCat.values, columnGroup)\r\n                        .withMeasure(converterStrategy.getMeasureNameByIndex(seriesIndex))\r\n                        .createSelectionId();\r\n\r\n                    var rawCategoryValue = categories[categoryIndex];\r\n                    var color = MekkoColumnChart.getDataPointColor(legendItem, categoryIndex, dataPointObjects);\r\n\r\n                    var seriesData: TooltipSeriesDataItem[] = [];\r\n\r\n                    if (columnGroup) {\r\n\r\n                        var seriesValueColumn: DataViewValueColumn = {\r\n                            values: [],\r\n                            source: dataViewCat.values.source,\r\n                        };\r\n                        seriesData.push({\r\n                            value: columnGroup.name,\r\n                            metadata: seriesValueColumn,\r\n                        });\r\n\r\n                        for (var columnIndex: number = 0; columnIndex < columnGroup.values.length; columnIndex++) {\r\n                            var columnValues: DataViewValueColumn = columnGroup.values[columnIndex];\r\n                            seriesData.push({\r\n                                value: columnValues.values[categoryIndex],\r\n                                metadata: columnValues,\r\n                            });\r\n                        }\r\n                    }\r\n\r\n                    var tooltipInfo: TooltipDataItem[] = TooltipBuilder.createTooltipInfo(formatStringProp, null/*dataViewCat*/, rawCategoryValue, originalValue, [category], seriesData, null/*seriesIndex*/, categoryIndex);\r\n\r\n                    var dataPointLabelSettings = (series && series.labelSettings) ? series.labelSettings : defaultLabelSettings;\r\n                    var labelColor = dataPointLabelSettings.labelColor;\r\n                    var lastValue = undefined;\r\n                    //Stacked column/bar label color is white by default (except last series)\r\n                    if ((EnumExtensions.hasFlag(chartType, flagStacked))) {\r\n                        lastValue = this.getStackedLabelColor(isNegative, seriesIndex, seriesCount, categoryIndex, rawValues);\r\n                        labelColor = (lastValue || (seriesIndex === seriesCount - 1 && !isNegative)) ? labelColor : dataLabelUtils.defaultInsideLabelColor;\r\n                    }\r\n\r\n                    value = columnWidth[categoryIndex];\r\n                    var originalPosition: number = columnStartX[categoryIndex];\r\n\r\n                    var dataPoint: ColumnChartDataPoint = {\r\n                        categoryValue: categoryValue,\r\n                        value: value,\r\n                        position: position,\r\n                        valueAbsolute: valueAbsolute,\r\n                        valueOriginal: unadjustedValue,\r\n                        seriesIndex: seriesIndex,\r\n                        labelSettings: dataPointLabelSettings,\r\n                        categoryIndex: categoryIndex,\r\n                        color: color,\r\n                        selected: false,\r\n                        originalValue: value,\r\n                        originalPosition: originalPosition,//position,\r\n                        originalValueAbsolute: valueAbsolute,\r\n                        identity: identity,\r\n                        key: identity.getKey(),\r\n                        tooltipInfo: tooltipInfo,\r\n                        labelFill: labelColor,\r\n                        labelFormatString: metadata.format,\r\n                        lastSeries: lastValue,\r\n                        chartType: chartType,\r\n                    };\r\n\r\n                    seriesDataPoints.push(dataPoint);\r\n\r\n                    if (hasHighlights) {\r\n                        var valueHighlight = rawHighlightValues[seriesIndex][categoryIndex];\r\n                        var unadjustedValueHighlight = valueHighlight;\r\n\r\n                        var highlightedTooltip: boolean = true;\r\n                        if (valueHighlight === null) {\r\n                            valueHighlight = 0;\r\n                            highlightedTooltip = false;\r\n                        }\r\n\r\n                        if (is100PercentStacked) {\r\n                            valueHighlight *= multipliers.pos;\r\n                        }\r\n                        var absoluteValueHighlight = Math.abs(valueHighlight);\r\n                        var highlightPosition = position;\r\n\r\n                        if (valueHighlight > 0) {\r\n                            highlightPosition -= valueAbsolute - absoluteValueHighlight;\r\n                        }\r\n                        else if (valueHighlight === 0 && value > 0) {\r\n                            highlightPosition -= valueAbsolute;\r\n                        }\r\n\r\n                        var highlightIdentity = SelectionId.createWithHighlight(identity);\r\n                        var rawCategoryValue = categories[categoryIndex];\r\n                        //var highlightedValue: number = highlightedTooltip ? valueHighlight : undefined;\r\n                        //var tooltipInfo: TooltipDataItem[] = TooltipBuilder.createTooltipInfo(formatStringProp, dataViewCat, rawCategoryValue, originalValue, null, null, seriesIndex, categoryIndex, highlightedValue);\r\n\r\n                        if (highlightedTooltip) {\r\n                            // Override non highlighted data point\r\n                            dataPoint.tooltipInfo = tooltipInfo;\r\n                        }\r\n\r\n                        var highlightDataPoint: ColumnChartDataPoint = {\r\n                            categoryValue: categoryValue,\r\n                            value: value,\r\n                            position: highlightPosition,\r\n                            valueAbsolute: absoluteValueHighlight,\r\n                            valueOriginal: unadjustedValueHighlight,\r\n                            seriesIndex: seriesIndex,\r\n                            labelSettings: dataPointLabelSettings,\r\n                            categoryIndex: categoryIndex,\r\n                            color: color,\r\n                            selected: false,\r\n                            highlight: true,\r\n                            originalValue: value,\r\n                            originalPosition: originalPosition,\r\n                            originalValueAbsolute: valueAbsolute,\r\n                            drawThinner: highlightsOverflow,\r\n                            identity: highlightIdentity,\r\n                            key: highlightIdentity.getKey(),\r\n                            tooltipInfo: tooltipInfo,\r\n                            labelFormatString: metadata.format,\r\n                            labelFill: labelColor,\r\n                            lastSeries: lastValue,\r\n                            chartType: chartType,\r\n                        };\r\n\r\n                        seriesDataPoints.push(highlightDataPoint);\r\n                    }\r\n                }\r\n\r\n                columnSeries.push(series);\r\n            }\r\n\r\n            return {\r\n                series: columnSeries,\r\n                categoriesWidth: columnWidth,\r\n                hasHighlights: hasHighlights,\r\n                hasDynamicSeries: hasDynamicSeries,\r\n            };\r\n        }\r\n\r\n        private static getDataPointColor(\r\n            legendItem: MekkoLegendDataPoint,\r\n            categoryIndex: number,\r\n            dataPointObjects?: DataViewObjects[]): string {\r\n            debug.assertValue(legendItem, 'legendItem');\r\n            debug.assertValue(categoryIndex, 'categoryIndex');\r\n            debug.assertAnyValue(dataPointObjects, 'dataPointObjects');\r\n\r\n            if (dataPointObjects) {\r\n                var colorOverride = DataViewObjects.getFillColor(dataPointObjects[categoryIndex], columnChartProps.dataPoint.fill);\r\n                if (colorOverride) {\r\n                    return colorOverride;\r\n                }\r\n            }\r\n\r\n            return legendItem.color;\r\n        }\r\n\r\n        private static getStackedLabelColor(isNegative: boolean, seriesIndex: number, seriesCount: number, categoryIndex: number, rawValues: number[][]): boolean {\r\n            var lastValue = !(isNegative && seriesIndex === seriesCount - 1 && seriesCount !== 1);\r\n            //run for the next series and check if current series is last\r\n            for (var i: number = seriesIndex + 1; i < seriesCount; i++) {\r\n                var nextValues: number = AxisHelper.normalizeNonFiniteNumber(rawValues[i][categoryIndex]);\r\n                if ((nextValues !== null) && (((!isNegative || (isNegative && seriesIndex === 0)) && nextValues > 0) || (isNegative && seriesIndex !== 0))) {\r\n                    lastValue = false;\r\n                    break;\r\n                }\r\n            }\r\n            return lastValue;\r\n        }\r\n\r\n        public static sliceSeries(series: ColumnChartSeries[], endIndex: number, startIndex: number = 0): ColumnChartSeries[] {\r\n            var newSeries: ColumnChartSeries[] = [];\r\n            if (series && series.length > 0) {\r\n                for (var i = 0, len = series.length; i < len; i++) {\r\n                    var iNewSeries = newSeries[i] = Prototype.inherit(series[i]);\r\n                    iNewSeries.data = series[i].data.filter(d => d.categoryIndex >= startIndex && d.categoryIndex < endIndex);\r\n                }\r\n            }\r\n            return newSeries;\r\n        }\r\n        public static getInteractiveColumnChartDomElement(element: JQuery): HTMLElement {\r\n            return element.children(\"svg\").get(0);\r\n        }\r\n\r\n        public getColumnsWidth(): number[] {\r\n            var data: MekkoColumnChartData = this.data;\r\n            if (!data ||\r\n                !data.series ||\r\n                !data.series[0] ||\r\n                !data.series[0].data) {\r\n                return [];\r\n            }\r\n\r\n            return data.categoriesWidth;\r\n        }\r\n\r\n        public getBorderWidth(): number {\r\n            return MekkoColumnChart.getBorderWidth(this.data.borderSettings);\r\n        }\r\n\r\n        public setData(dataViews: DataView[]): void {\r\n            debug.assertValue(dataViews, \"dataViews\");\r\n            var is100PctStacked: boolean = true;\r\n            this.data = {\r\n                categories: [],\r\n                categoriesWidth: [],\r\n                categoryFormatter: null,\r\n                series: [],\r\n                valuesMetadata: [],\r\n                legendData: null,\r\n                hasHighlights: false,\r\n                categoryMetadata: null,\r\n                scalarCategoryAxis: false,\r\n                borderSettings: null,\r\n                labelSettings: dataLabelUtils.getDefaultColumnLabelSettings(is100PctStacked),\r\n                axesLabels: { x: null, y: null },\r\n                hasDynamicSeries: false,\r\n                defaultDataPointColor: null,\r\n                isMultiMeasure: false,\r\n            };\r\n\r\n            if (dataViews.length > 0) {\r\n                var dataView = dataViews[0];\r\n\r\n                if (dataView && dataView.categorical) {\r\n                    var dataViewCat = this.dataViewCat = dataView.categorical;\r\n                    /*\r\n                    var dvCategories = dataViewCat.categories;\r\n                    var categoryMetadata = (dvCategories && dvCategories.length > 0)\r\n                        ? dvCategories[0].source\r\n                        : null;\r\n                    var categoryType = AxisHelper.getCategoryValueType(categoryMetadata);\r\n                    */\r\n                    this.data = MekkoColumnChart.converter(\r\n                        dataViewCat,\r\n                        this.cartesianVisualHost.getSharedColors(),\r\n                        true,//s100PctStacked,\r\n                        false,//CartesianChart.getIsScalar(dataView.metadata ? dataView.metadata.objects : null, columnChartProps.categoryAxis.axisType, categoryType),\r\n                        this.supportsOverflow,\r\n                        dataView.metadata,\r\n                        this.chartType);\r\n\r\n                    var series: ColumnChartSeries[] = this.data.series;\r\n                    for (var i: number = 0, ilen: number = series.length; i < ilen; i++) {\r\n                        var currentSeries: ColumnChartSeries = series[i];\r\n                        if (this.interactivityService) {\r\n                            this.interactivityService.applySelectionStateToData(currentSeries.data);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        public calculateLegend(): LegendData {\r\n            // if we're in interactive mode, return the interactive legend\r\n            if (this.interactivity && this.interactivity.isInteractiveLegend) {\r\n                return this.createInteractiveMekkoLegendDataPoints(0);\r\n            }\r\n            var legendData = this.data ? this.data.legendData : null;\r\n            var MekkoLegendDataPoints = legendData ? legendData.dataPoints : [];\r\n\r\n            if (ArrayExtensions.isUndefinedOrEmpty(MekkoLegendDataPoints))\r\n                return null;\r\n\r\n            return legendData;\r\n        }\r\n\r\n        public hasLegend(): boolean {\r\n            return this.data && (this.data.hasDynamicSeries || (this.data.series && this.data.series.length > 1));\r\n        }\r\n\r\n        public enumerateObjectInstances(enumeration: ObjectEnumerationBuilder, options: EnumerateVisualObjectInstancesOptions): void {\r\n            switch (options.objectName) {\r\n                case 'dataPoint':\r\n                    if (!GradientUtils.hasGradientRole(this.dataViewCat))\r\n                        this.enumerateDataPoints(enumeration);\r\n                    break;\r\n                case 'labels':\r\n                    this.enumerateDataLabels(enumeration);\r\n                    break;\r\n            }\r\n        }\r\n\r\n        private enumerateDataLabels(enumeration: ObjectEnumerationBuilder): void {\r\n            var data = this.data,\r\n                labelSettings = this.data.labelSettings,\r\n                seriesCount = data.series.length;\r\n\r\n            //Draw default settings\r\n            dataLabelUtils.enumerateDataLabels(this.getLabelSettingsOptions(enumeration, labelSettings, false));\r\n\r\n            if (seriesCount === 0) {\r\n                return;\r\n            }\r\n\r\n            //Draw series settings\r\n            if (!data.hasDynamicSeries && (seriesCount > 1 || !data.categoryMetadata)) {\r\n                for (var i = 0; i < seriesCount; i++) {\r\n                    var series: ColumnChartSeries = data.series[i],\r\n                        labelSettings: VisualDataLabelsSettings = (series.labelSettings) ? series.labelSettings : this.data.labelSettings;\r\n\r\n                    //enumeration.pushContainer({ displayName: series.displayName });\r\n                    dataLabelUtils.enumerateDataLabels(this.getLabelSettingsOptions(enumeration, labelSettings, true, series));\r\n                    //enumeration.popContainer();\r\n                }\r\n            }\r\n        }\r\n\r\n        private getLabelSettingsOptions(enumeration: ObjectEnumerationBuilder, labelSettings: VisualDataLabelsSettings, isSeries: boolean, series?: ColumnChartSeries): VisualDataLabelsSettingsOptions {\r\n            var is100PctStacked: boolean = true;\r\n            return {\r\n                enumeration: enumeration,\r\n                dataLabelsSettings: labelSettings,\r\n                show: !isSeries,\r\n                displayUnits: is100PctStacked,\r\n                precision: true,\r\n                selector: series && series.identity ? series.identity.getSelector() : null\r\n            };\r\n        }\r\n\r\n        private enumerateDataPoints(enumeration: ObjectEnumerationBuilder): void {\r\n            var data: MekkoColumnChartData = this.data;\r\n            if (!data || !data.series) {\r\n                return;\r\n            }\r\n\r\n            var seriesCount = data.series.length;\r\n\r\n            if (seriesCount === 0) {\r\n                return;\r\n            }\r\n\r\n            if (data.hasDynamicSeries || seriesCount > 1 || !data.categoryMetadata) {\r\n                for (var i: number = 0; i < seriesCount; i++) {\r\n                    var series: ColumnChartSeries = data.series[i];\r\n                    enumeration.pushInstance({\r\n                        objectName: 'dataPoint',\r\n                        displayName: series.displayName,\r\n                        selector: ColorHelper.normalizeSelector(series.identity.getSelector()),\r\n                        properties: {\r\n                            fill: { solid: { color: series.color } }\r\n                        },\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                // For single-category, single-measure column charts, the user can color the individual bars.\r\n                var singleSeriesData: ColumnChartDataPoint[] = data.series[0].data;\r\n                var categoryFormatter: IValueFormatter = data.categoryFormatter;\r\n\r\n                // Add default color and show all slices\r\n                enumeration.pushInstance({\r\n                    objectName: 'dataPoint',\r\n                    selector: null,\r\n                    properties: {\r\n                        defaultColor: { solid: { color: data.defaultDataPointColor || this.colors.getColorByIndex(0).value } }\r\n                    }\r\n                }).pushInstance({\r\n                    objectName: 'dataPoint',\r\n                    selector: null,\r\n                    properties: {\r\n                        showAllDataPoints: !!data.showAllDataPoints\r\n                    }\r\n                });\r\n\r\n                for (var i: number = 0; i < singleSeriesData.length; i++) {\r\n                    var singleSeriesDataPoints = singleSeriesData[i],\r\n                        categoryValue: any = data.categories[i];\r\n                    enumeration.pushInstance({\r\n                        objectName: 'dataPoint',\r\n                        displayName: categoryFormatter ? categoryFormatter.format(categoryValue) : categoryValue,\r\n                        selector: ColorHelper.normalizeSelector(singleSeriesDataPoints.identity.getSelector(), /*isSingleSeries*/true),\r\n                        properties: {\r\n                            fill: { solid: { color: singleSeriesDataPoints.color } }\r\n                        },\r\n                    });\r\n                }\r\n            }\r\n        }\r\n\r\n        public calculateAxesProperties(options: MekkoCalculateScaleAndDomainOptions): IAxisProperties[] {\r\n            var data: MekkoColumnChartData = this.data;\r\n            this.currentViewport = options.viewport;\r\n            var margin: IMargin = this.margin = options.margin;\r\n\r\n            var origCatgSize = (data && data.categories) ? data.categories.length : 0;\r\n            var chartLayout: CategoryLayout = data ? this.getCategoryLayout(origCatgSize, options) : {\r\n                categoryCount: 0,\r\n                categoryThickness: CartesianChart.MinOrdinalRectThickness,\r\n                outerPaddingRatio: CartesianChart.OuterPaddingRatio,\r\n                isScalar: false\r\n            };\r\n            this.categoryAxisType = chartLayout.isScalar ? axisType.scalar : null;\r\n            this.columnChart.setData(data);\r\n\r\n            var preferredPlotArea = this.getPreferredPlotArea(chartLayout.isScalar, chartLayout.categoryCount, chartLayout.categoryThickness);\r\n\r\n            /* preferredPlotArea would be same as currentViewport width when there is no scrollbar.\r\n             In that case we want to calculate the available plot area for the shapes by subtracting the margin from available viewport */\r\n            if (preferredPlotArea.width === this.currentViewport.width) {\r\n                preferredPlotArea.width -= (margin.left + margin.right);\r\n            }\r\n            preferredPlotArea.height -= (margin.top + margin.bottom);\r\n\r\n            var is100Pct: boolean = true;\r\n\r\n            // When the category axis is scrollable the height of the category axis and value axis will be different\r\n            // The height of the value axis would be same as viewportHeight\r\n            var chartContext: MekkoColumnChartContext = {\r\n                height: preferredPlotArea.height,\r\n                width: preferredPlotArea.width,\r\n                duration: 0,\r\n                hostService: this.hostService,\r\n                unclippedGraphicsContext: this.unclippedGraphicsContext,\r\n                mainGraphicsContext: this.mainGraphicsContext,\r\n                labelGraphicsContext: this.labelGraphicsContext,\r\n                margin: this.margin,\r\n                layout: chartLayout,\r\n                animator: this.animator,\r\n                interactivityService: this.interactivityService,\r\n                viewportHeight: this.currentViewport.height - (margin.top + margin.bottom),\r\n                viewportWidth: this.currentViewport.width - (margin.left + margin.right),\r\n                is100Pct: is100Pct,\r\n                isComboChart: true,\r\n            };\r\n            this.ApplyInteractivity(chartContext);\r\n            this.columnChart.setupVisualProps(chartContext);\r\n\r\n            var isBarChart = EnumExtensions.hasFlag(this.chartType, flagBar);\r\n\r\n            if (isBarChart) {\r\n                var temp = options.forcedXDomain;\r\n                options.forcedXDomain = options.forcedYDomain;\r\n                options.forcedYDomain = temp;\r\n            }\r\n\r\n            this.xAxisProperties = this.columnChart.setXScale(is100Pct, options.forcedTickCount, options.forcedXDomain, isBarChart ? options.valueAxisScaleType : options.categoryAxisScaleType);\r\n            this.yAxisProperties = this.columnChart.setYScale(is100Pct, options.forcedTickCount, options.forcedYDomain, isBarChart ? options.categoryAxisScaleType : options.valueAxisScaleType);\r\n\r\n            if (options.showCategoryAxisLabel && this.xAxisProperties.isCategoryAxis || options.showValueAxisLabel && !this.xAxisProperties.isCategoryAxis) {\r\n                this.xAxisProperties.axisLabel = data.axesLabels.x;\r\n            }\r\n            else {\r\n                this.xAxisProperties.axisLabel = null;\r\n            }\r\n            if (options.showValueAxisLabel && !this.yAxisProperties.isCategoryAxis || options.showCategoryAxisLabel && this.yAxisProperties.isCategoryAxis) {\r\n                this.yAxisProperties.axisLabel = data.axesLabels.y;\r\n            }\r\n            else {\r\n                this.yAxisProperties.axisLabel = null;\r\n            }\r\n\r\n            return [this.xAxisProperties, this.yAxisProperties];\r\n        }\r\n\r\n        public getPreferredPlotArea(isScalar: boolean, categoryCount: number, categoryThickness: number): IViewport {\r\n            var viewport: IViewport = {\r\n                height: this.currentViewport.height,\r\n                width: this.currentViewport.width\r\n            };\r\n\r\n            if (this.isScrollable && !isScalar) {\r\n                var preferredWidth = CartesianChart.getPreferredCategorySpan(categoryCount, categoryThickness);\r\n                if (EnumExtensions.hasFlag(this.chartType, flagBar)) {\r\n                    viewport.height = Math.max(preferredWidth, viewport.height);\r\n                }\r\n                else\r\n                    viewport.width = Math.max(preferredWidth, viewport.width);\r\n            }\r\n            return viewport;\r\n        }\r\n\r\n        private ApplyInteractivity(chartContext: MekkoColumnChartContext): void {\r\n            var interactivity = this.interactivity;\r\n            if (interactivity) {\r\n                if (interactivity.dragDataPoint) {\r\n                    chartContext.onDragStart = (datum: ColumnChartDataPoint) => {\r\n                        if (!datum.identity)\r\n                            return;\r\n\r\n                        this.hostService.onDragStart({\r\n                            event: <any>d3.event,\r\n                            data: {\r\n                                data: datum.identity.getSelector()\r\n                            }\r\n                        });\r\n                    };\r\n                }\r\n\r\n                if (interactivity.isInteractiveLegend) {\r\n                    var dragMove = () => {\r\n                        var mousePoint = d3.mouse(this.mainGraphicsContext[0][0]); // get the x and y for the column area itself\r\n                        var x: number = mousePoint[0];\r\n                        var y: number = mousePoint[1];\r\n                        var index: number = this.columnChart.getClosestColumnIndex(x, y);\r\n                        this.selectColumn(index);\r\n                    };\r\n\r\n                    var ColumnChartSvg: EventTarget = ColumnChart.getInteractiveColumnChartDomElement(this.element);\r\n\r\n                    //set click interaction on the visual\r\n                    this.svg.on('click', dragMove);\r\n                    //set click interaction on the background\r\n                    d3.select(ColumnChartSvg).on('click', dragMove);\r\n                    var drag = d3.behavior.drag()\r\n                        .origin(Object)\r\n                        .on(\"drag\", dragMove);\r\n                    //set drag interaction on the visual\r\n                    this.svg.call(drag);\r\n                    //set drag interaction on the background\r\n                    d3.select(ColumnChartSvg).call(drag);\r\n                }\r\n            }\r\n        }\r\n\r\n        private selectColumn(indexOfColumnSelected: number, force: boolean = false): void {\r\n            if (!force && this.lastInteractiveSelectedColumnIndex === indexOfColumnSelected) return; // same column, nothing to do here\r\n\r\n            var legendData: LegendData = this.createInteractiveMekkoLegendDataPoints(indexOfColumnSelected);\r\n            var MekkoLegendDataPoints: MekkoLegendDataPoint[] = legendData.dataPoints;\r\n            this.cartesianVisualHost.updateLegend(legendData);\r\n            if (MekkoLegendDataPoints.length > 0) {\r\n                this.columnChart.selectColumn(indexOfColumnSelected, this.lastInteractiveSelectedColumnIndex);\r\n            }\r\n            this.lastInteractiveSelectedColumnIndex = indexOfColumnSelected;\r\n        }\r\n\r\n        private createInteractiveMekkoLegendDataPoints(columnIndex: number): LegendData {\r\n            var data: MekkoColumnChartData = this.data;\r\n            if (!data || ArrayExtensions.isUndefinedOrEmpty(data.series)) {\r\n                return { dataPoints: [] };\r\n            }\r\n\r\n            var formatStringProp = columnChartProps.general.formatString;\r\n            var MekkoLegendDataPoints: MekkoLegendDataPoint[] = [];\r\n            var category = data.categories && data.categories[columnIndex];\r\n            var allSeries: ColumnChartSeries[] = data.series;\r\n            var dataPoints = data.legendData && data.legendData.dataPoints;\r\n            var converterStrategy = new ColumnChartConverterHelper(this.dataViewCat);\r\n\r\n            for (var i: number = 0, len = allSeries.length; i < len; i++) {\r\n                var measure = converterStrategy.getValueBySeriesAndCategory(i, columnIndex);\r\n                var valueMetadata = data.valuesMetadata[i];\r\n                var formattedLabel = converterHelper.getFormattedLegendLabel(valueMetadata, this.dataViewCat.values, formatStringProp);\r\n                var dataPointColor: string;\r\n                if (allSeries.length === 1) {\r\n                    var series = allSeries[0];\r\n                    dataPointColor = series.data.length > columnIndex && series.data[columnIndex].color;\r\n                } else {\r\n                    dataPointColor = dataPoints.length > i && dataPoints[i].color;\r\n                }\r\n\r\n                MekkoLegendDataPoints.push({\r\n                    color: dataPointColor,\r\n                    icon: LegendIcon.Box,\r\n                    label: formattedLabel,\r\n                    category: data.categoryFormatter ? data.categoryFormatter.format(category) : category,\r\n                    measure: valueFormatter.format(measure, valueFormatter.getFormatString(valueMetadata, formatStringProp)),\r\n                    identity: SelectionId.createNull(),\r\n                    selected: false,\r\n                });\r\n            }\r\n\r\n            return { dataPoints: MekkoLegendDataPoints };\r\n        }\r\n\r\n        public overrideXScale(xProperties: IAxisProperties): void {\r\n            this.xAxisProperties = xProperties;\r\n        }\r\n\r\n        public render(suppressAnimations: boolean): MekkoVisualRenderResult {\r\n            var MekkoColumnChartDrawInfo = this.columnChart.drawColumns(!suppressAnimations /* useAnimations */);\r\n            var data: MekkoColumnChartData = this.data;\r\n\r\n            var margin = this.margin;\r\n            var viewport = this.currentViewport;\r\n            var height = viewport.height - (margin.top + margin.bottom);\r\n            var width = viewport.width - (margin.left + margin.right);\r\n\r\n            this.mainGraphicsContext\r\n                .attr('height', height)\r\n                .attr('width', width);\r\n\r\n            TooltipManager.addTooltip(MekkoColumnChartDrawInfo.shapesSelection, (tooltipEvent: TooltipEvent) => tooltipEvent.data.tooltipInfo);\r\n            var allDataPoints: ColumnChartDataPoint[] = [];\r\n            var behaviorOptions: ColumnBehaviorOptions = undefined;\r\n            if (this.interactivityService) {\r\n                for (var i: number = 0, ilen = data.series.length; i < ilen; i++) {\r\n                    allDataPoints = allDataPoints.concat(data.series[i].data);\r\n                }\r\n                behaviorOptions = {\r\n                    datapoints: allDataPoints,\r\n                    bars: MekkoColumnChartDrawInfo.shapesSelection,\r\n                    hasHighlights: data.hasHighlights,\r\n                    eventGroup: this.mainGraphicsContext,\r\n                    mainGraphicsContext: this.mainGraphicsContext,\r\n                    viewport: MekkoColumnChartDrawInfo.viewport,\r\n                    axisOptions: MekkoColumnChartDrawInfo.axisOptions,\r\n                    showLabel: data.labelSettings.show\r\n                };\r\n            }\r\n\r\n            if (this.interactivity && this.interactivity.isInteractiveLegend) {\r\n                if (this.data.series.length > 0) {\r\n                    this.selectColumn(0, true); // start with the first column\r\n                }\r\n            }\r\n            SVGUtil.flushAllD3TransitionsIfNeeded(this.options);\r\n            return {\r\n                dataPoints: allDataPoints,\r\n                behaviorOptions: behaviorOptions,\r\n                labelDataPoints: MekkoColumnChartDrawInfo.labelDataPoints,\r\n                labelsAreNumeric: true\r\n            };\r\n        }\r\n\r\n        public onClearSelection(): void {\r\n            if (this.interactivityService) {\r\n                this.interactivityService.clearSelection();\r\n            }\r\n        }\r\n\r\n        public getVisualCategoryAxisIsScalar(): boolean {\r\n            return this.data ? this.data.scalarCategoryAxis : false;\r\n        }\r\n\r\n        public getSupportedCategoryAxisType(): string {\r\n            var metaDataColumn = this.data ? this.data.categoryMetadata : undefined;\r\n            var valueType = AxisHelper.getCategoryValueType(metaDataColumn);\r\n            var isOrdinal = AxisHelper.isOrdinal(valueType);\r\n            return isOrdinal ? axisType.categorical : axisType.both;\r\n        }\r\n\r\n        public setFilteredData(startIndex: number, endIndex: number): CartesianData {\r\n            var data = Prototype.inherit(this.data);\r\n            data.series = ColumnChart.sliceSeries(data.series, endIndex, startIndex);\r\n            data.categories = data.categories.slice(startIndex, endIndex);\r\n            this.columnChart.setData(data);\r\n            return data;\r\n        }\r\n    }\r\n\r\n    class ColumnChartConverterHelper implements IColumnChartConverterStrategy {\r\n        private dataView: DataViewCategorical;\r\n\r\n        constructor(dataView: DataViewCategorical) {\r\n            this.dataView = dataView;\r\n        }\r\n\r\n\t\t  private static hasRole(column: DataViewMetadataColumn, name: string): boolean {\r\n            var roles = column.roles;\r\n            return roles && roles[name];\r\n        }\r\n\r\n        public getLegend(colors: IDataColorPalette, defaultColor?: string): LegendSeriesInfo {\r\n            var legend: MekkoLegendDataPoint[] = [];\r\n            var seriesSources: DataViewMetadataColumn[] = [];\r\n            var seriesObjects: DataViewObjects[][] = [];\r\n            var grouped: boolean = false;\r\n\r\n            var colorHelper = new ColorHelper(colors, columnChartProps.dataPoint.fill, defaultColor);\r\n            var legendTitle = undefined;\r\n            if (this.dataView && this.dataView.values) {\r\n                var allValues = this.dataView.values;\r\n                var valueGroups = allValues.grouped();\r\n\r\n                var hasDynamicSeries = !!(allValues && allValues.source);\r\n\r\n                var formatStringProp = columnChartProps.general.formatString;\r\n                for (var valueGroupsIndex = 0, valueGroupsLen = valueGroups.length; valueGroupsIndex < valueGroupsLen; valueGroupsIndex++) {\r\n                    var valueGroup = valueGroups[valueGroupsIndex],\r\n                        valueGroupObjects = valueGroup.objects,\r\n                        values = valueGroup.values;\r\n\r\n                    for (var valueIndex = 0, valuesLen = values.length; valueIndex < valuesLen; valueIndex++) {\r\n                        var series: DataViewValueColumn = values[valueIndex];\r\n                        var source: DataViewMetadataColumn = series.source;\r\n                        // Gradient measures do not create series.\r\n                        if (ColumnChartConverterHelper.hasRole(source, 'Width') && !ColumnChartConverterHelper.hasRole(source, 'Y')) {\r\n                            continue;\r\n                        }\r\n\r\n                        seriesSources.push(source);\r\n                        seriesObjects.push(series.objects);\r\n\r\n                        var selectionId = series.identity ?\r\n                            SelectionId.createWithIdAndMeasure(series.identity, source.queryName) :\r\n                            SelectionId.createWithMeasure(this.getMeasureNameByIndex(valueIndex));\r\n\r\n                        var label = converterHelper.getFormattedLegendLabel(source, allValues, formatStringProp);\r\n\r\n                        var color = hasDynamicSeries\r\n                            ? colorHelper.getColorForSeriesValue(valueGroupObjects || source.objects, allValues.identityFields, source.groupName)\r\n                            : colorHelper.getColorForMeasure(valueGroupObjects || source.objects, source.queryName);\r\n\r\n                        legend.push({\r\n                            icon: LegendIcon.Box,\r\n                            color: color,\r\n                            label: label,\r\n                            identity: selectionId,\r\n                            selected: false,\r\n                        });\r\n\r\n                        if (series.identity && source.groupName !== undefined) {\r\n                            grouped = true;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                var dvValues: DataViewValueColumns = this.dataView.values;\r\n                legendTitle = dvValues && dvValues.source ? dvValues.source.displayName : \"\";\r\n            }\r\n\r\n            var legendData = {\r\n                title: legendTitle,\r\n                dataPoints: legend,\r\n                grouped: grouped,\r\n            };\r\n\r\n            return {\r\n                legend: legendData,\r\n                seriesSources: seriesSources,\r\n                seriesObjects: seriesObjects,\r\n            };\r\n        }\r\n\r\n        public getValueBySeriesAndCategory(series: number, category: number): number {\r\n            return this.dataView.values[series].values[category];\r\n        }\r\n\r\n        public getMeasureNameByIndex(index: number): string {\r\n            return this.dataView.values[index].source.queryName;\r\n        }\r\n\r\n        public hasHighlightValues(series: number): boolean {\r\n            var column = this.dataView && this.dataView.values ? this.dataView.values[series] : undefined;\r\n            return column && !!column.highlights;\r\n        }\r\n\r\n        public getHighlightBySeriesAndCategory(series: number, category: number): number {\r\n            return this.dataView.values[series].highlights[category];\r\n        }\r\n    }\r\n\r\n    export interface MekkoBehaviorOptions {\r\n        layerOptions: any[];\r\n        clearCatcher: D3.Selection;\r\n    }\r\n\r\n    export class MekkoChartBehavior implements IInteractiveBehavior {\r\n        private behaviors: IInteractiveBehavior[];\r\n\r\n        constructor(behaviors: IInteractiveBehavior[]) {\r\n            this.behaviors = behaviors;\r\n        }\r\n\r\n        public bindEvents(options: MekkoBehaviorOptions, selectionHandler: ISelectionHandler): void {\r\n            var behaviors = this.behaviors;\r\n            for (var i: number = 0, ilen: number = behaviors.length; i < ilen; i++) {\r\n                behaviors[i].bindEvents(options.layerOptions[i], selectionHandler);\r\n            }\r\n\r\n            options.clearCatcher.on('click', () => {\r\n                selectionHandler.handleClearSelection();\r\n            });\r\n        }\r\n\r\n        public renderSelection(hasSelection: boolean) {\r\n            for (var i: number = 0; i < this.behaviors.length; i++) {\r\n                this.behaviors[i].renderSelection(hasSelection);\r\n            }\r\n        }\r\n    }\r\n}\r\n","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *\r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *\r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.visuals.samples {\r\n    import SelectionManager = utility.SelectionManager;\r\n    import ClassAndSelector = jsCommon.CssConstants.ClassAndSelector;\r\n    import ValueFormatter = powerbi.visuals.valueFormatter;\r\n\r\n    export interface SankeyDiagramConstructorOptions {\r\n        svg?: D3.Selection;\r\n        margin?: IMargin;\r\n        curvatureOfLinks?: number;\r\n    }\r\n\r\n    export interface SankeyDiagramLabel {\r\n        name: string;\r\n        formattedName: string;\r\n        width: number;\r\n        height: number;\r\n        colour: string;\r\n    }\r\n\r\n    export interface SankeyDiagramTooltipData {\r\n        tooltipData: TooltipDataItem[];\r\n    }\r\n\r\n    export interface SankeyDiagramScale {\r\n        x: number;\r\n        y: number;\r\n    }\r\n\r\n    export interface SankeyDiagramSettings {\r\n        scale?: SankeyDiagramScale;\r\n        fontSize: number;\r\n        isVisibleLabels?: boolean;\r\n        colourOfLabels: string;\r\n    }\r\n\r\n    export interface SankeyDiagramNode extends SankeyDiagramTooltipData {\r\n        label: SankeyDiagramLabel;\r\n        inputWeight: number;\r\n        outputWeight: number;\r\n        links: SankeyDiagramLink[];\r\n        x?: number;\r\n        y?: number;\r\n        width?: number;\r\n        height?: number;\r\n        colour: string;\r\n        selectionIds: SelectionId[];\r\n    }\r\n\r\n    export interface SankeyDiagramLink extends SankeyDiagramTooltipData {\r\n        source: SankeyDiagramNode;\r\n        destination: SankeyDiagramNode;\r\n        weigth: number;\r\n        height?: number;\r\n        dySource?: number;\r\n        dyDestination?: number;\r\n        colour: string;\r\n        selectionId: SelectionId;\r\n    }\r\n\r\n    export interface SankeyDiagramDataView {\r\n        nodes: SankeyDiagramNode[];\r\n        links: SankeyDiagramLink[];\r\n        settings: SankeyDiagramSettings;\r\n    }\r\n\r\n    export interface SankeyDiagramRoleNames {\r\n        rows: string;\r\n        columns: string;\r\n        values: string;\r\n    }\r\n\r\n    interface SankeyDiagramDataPoint {\r\n        source: any;\r\n        destination: any;\r\n        weigth: number;\r\n    }\r\n\r\n    interface SankeyDiagramProperty {\r\n        [propertyName: string]: DataViewObjectPropertyIdentifier;\r\n    }\r\n\r\n    interface SankeyDiagramProperties {\r\n        [objectName: string]: SankeyDiagramProperty;\r\n    }\r\n\r\n    export class SankeyDiagram implements IVisual {\r\n        private static ClassName: string = \"sankeyDiagram\";\r\n\r\n        private static Nodes: ClassAndSelector = {\r\n            \"class\": \"nodes\",\r\n            selector: \".nodes\"\r\n        };\r\n\r\n        private static Node: ClassAndSelector = {\r\n            \"class\": \"node\",\r\n            selector: \".node\"\r\n        };\r\n\r\n        private static NodeRect: ClassAndSelector = {\r\n            \"class\": \"nodeRect\",\r\n            selector: \".nodeRect\"\r\n        };\r\n\r\n        private static NodeLabel: ClassAndSelector = {\r\n            \"class\": \"nodeLabel\",\r\n            selector: \".nodeLabel\"\r\n        };\r\n\r\n        private static Links: ClassAndSelector = {\r\n            \"class\": \"links\",\r\n            selector: \".links\"\r\n        };\r\n\r\n        private static Link: ClassAndSelector = {\r\n            \"class\": \"link\",\r\n            selector: \".link\"\r\n        };\r\n\r\n        private static DefaultColourOfNode: string = \"rgb(62, 187, 162)\";\r\n        private static DefaultColourOfLink: string = \"black\";\r\n\r\n        private static DefaultSettings: SankeyDiagramSettings = {\r\n            isVisibleLabels: true,\r\n            scale: { x: 1, y: 1 },\r\n            colourOfLabels: \"black\",\r\n            fontSize: 12\r\n        };\r\n\r\n        private static MinWidthOfLabel: number = 35;\r\n\r\n        private static NodePadding: number = 5;\r\n        private static LabelPadding: number = 4;\r\n\r\n        public static RoleNames: SankeyDiagramRoleNames = {\r\n            rows: \"Source\",\r\n            columns: \"Destination\",\r\n            values: \"Weight\"\r\n        };\r\n\r\n        public static capabilities: VisualCapabilities = {\r\n            dataRoles: [{\r\n                name: SankeyDiagram.RoleNames.rows,\r\n                kind: VisualDataRoleKind.Grouping,\r\n                displayName: SankeyDiagram.RoleNames.rows\r\n            }, {\r\n                name: SankeyDiagram.RoleNames.columns,\r\n                kind: VisualDataRoleKind.Grouping,\r\n                displayName: SankeyDiagram.RoleNames.columns\r\n            }, {\r\n                name: SankeyDiagram.RoleNames.values,\r\n                kind: VisualDataRoleKind.Measure,\r\n                displayName: SankeyDiagram.RoleNames.values\r\n            }],\r\n            dataViewMappings: [{\r\n                conditions: [\r\n                    { \"Source\": { min: 0, max: 1 }, \"Destination\": { min: 0, max: 1 }, \"Weight\": { min: 0, max: 0 } },\r\n                    { \"Source\": { min: 0, max: 1 }, \"Destination\": { min: 0, max: 1 }, \"Weight\": { min: 1, max: 1 } }\r\n                ],\r\n                categorical: {\r\n                    categories: { \r\n                        for: { in: SankeyDiagram.RoleNames.rows },\r\n                        dataReductionAlgorithm: { top: {} }\r\n                    },\r\n                    values: {\r\n                        select: [\r\n                            { bind: { to: SankeyDiagram.RoleNames.columns } },\r\n                            { bind: { to: SankeyDiagram.RoleNames.values } }\r\n                        ]\r\n                    }\r\n                }\r\n            }],\r\n            objects: {\r\n                general: {\r\n                    displayName: data.createDisplayNameGetter(\"Visual_General\"),\r\n                    properties: {\r\n                        formatString: { type: { formatting: { formatString: true } } }\r\n                    }\r\n                },\r\n                labels: {\r\n                    displayName: data.createDisplayNameGetter('Visual_DataPointsLabels'),\r\n                    properties: {\r\n                        show: {\r\n                            displayName: data.createDisplayNameGetter(\"Visual_Show\"),\r\n                            type: { bool: true }\r\n                        },\r\n                        fill: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Fill'),\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        fontSize: {\r\n                            displayName: data.createDisplayNameGetter('Visual_TextSize'),\r\n                            type: { formatting: { fontSize: true } }\r\n                        }\r\n                    }\r\n                },\r\n                links: {\r\n                    displayName: \"Links\",\r\n                    properties: {\r\n                        fill: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Fill'),\r\n                            type: { fill: { solid: { color: true } } }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        private static Properties: SankeyDiagramProperties = SankeyDiagram.getProperties(SankeyDiagram.capabilities);\r\n        public static getProperties(capabilities: VisualCapabilities): any {\r\n            var result = {};\r\n            for(var objectKey in capabilities.objects) {\r\n                result[objectKey] = {};\r\n                for(var propKey in capabilities.objects[objectKey].properties) {\r\n                    result[objectKey][propKey] = <DataViewObjectPropertyIdentifier> { \r\n                        objectName: objectKey,\r\n                        propertyName: propKey\r\n                    };\r\n                }\r\n            }\r\n\r\n            return result;\r\n        }\r\n\r\n        private margin: IMargin = {\r\n            top: 10,\r\n            right: 10,\r\n            bottom: 10,\r\n            left: 10\r\n        };\r\n\r\n        private nodeWidth: number = 21.5;\r\n        private curvatureOfLinks: number = 0.5;\r\n\r\n        private root: D3.Selection;\r\n        private svg: D3.Selection;\r\n        private main: D3.Selection;\r\n        private nodes: D3.Selection;\r\n        private links: D3.Selection;\r\n\r\n        private colours: IDataColorPalette;\r\n\r\n        private viewport: IViewport;\r\n\r\n        private get textProperties(): TextProperties{\r\n            return {\r\n                fontFamily: this.root.style(\"font-family\"),\r\n                fontSize: jsCommon.PixelConverter.fromPoint(this.dataView ? this.dataView.settings.fontSize : SankeyDiagram.DefaultSettings.fontSize)\r\n            };\r\n        }\r\n\r\n        private dataView: SankeyDiagramDataView;\r\n\r\n        private selectionManager: SelectionManager;\r\n\r\n        constructor(constructorOptions?: SankeyDiagramConstructorOptions) {\r\n            if (constructorOptions) {\r\n                this.svg = constructorOptions.svg;\r\n                this.margin = constructorOptions.margin || this.margin;\r\n                this.curvatureOfLinks = constructorOptions.curvatureOfLinks || this.curvatureOfLinks;\r\n            }\r\n        }\r\n\r\n        public init(visualsInitOptions: VisualInitOptions): void {\r\n            if (this.svg) {\r\n                this.root = this.svg;\r\n            } else {\r\n                this.root = d3.select(visualsInitOptions.element.get(0))\r\n                    .append(\"svg\");\r\n            }\r\n\r\n            this.selectionManager = new SelectionManager({ hostServices: visualsInitOptions.host });\r\n\r\n            var style: IVisualStyle = visualsInitOptions.style;\r\n\r\n            this.colours = style && style.colorPalette\r\n                ? style.colorPalette.dataColors\r\n                : new DataColorPalette();\r\n\r\n            this.root.classed(SankeyDiagram.ClassName, true);\r\n\r\n            this.main = this.root.append(\"g\");\r\n\r\n            this.links = this.main\r\n                .append(\"g\")\r\n                .classed(SankeyDiagram.Links[\"class\"], true);\r\n\r\n            this.nodes = this.main\r\n                .append(\"g\")\r\n                .classed(SankeyDiagram.Nodes[\"class\"], true);\r\n        }\r\n\r\n        public update(visualUpdateOptions: VisualUpdateOptions): void {\r\n            if (!visualUpdateOptions ||\r\n                !visualUpdateOptions.dataViews) {\r\n                return;\r\n            }\r\n\r\n            var dataView: DataView = visualUpdateOptions.dataViews[0],\r\n                sankeyDiagramDataView: SankeyDiagramDataView;\r\n\r\n            this.updateViewport(visualUpdateOptions.viewport);\r\n\r\n            sankeyDiagramDataView = this.converter(dataView);\r\n\r\n            this.findNodePosition(sankeyDiagramDataView);\r\n\r\n            this.dataView = sankeyDiagramDataView;\r\n\r\n            this.render(sankeyDiagramDataView);\r\n        }\r\n\r\n        private updateViewport(viewport: IViewport): void {\r\n            var height: number,\r\n                width: number;\r\n\r\n            height = this.getPositiveNumber(viewport.height);\r\n            width = this.getPositiveNumber(viewport.width);\r\n\r\n            this.viewport = {\r\n                height: this.getPositiveNumber(height - this.margin.top - this.margin.bottom),\r\n                width: this.getPositiveNumber(width - this.margin.left - this.margin.right)\r\n            };\r\n\r\n            this.updateElements(height, width);\r\n        }\r\n\r\n        private getPositiveNumber(value: number): number {\r\n            return value < 0 || isNaN(value) || value === Infinity || value === -Infinity\r\n                ? 0\r\n                : value;\r\n        }\r\n\r\n        private updateElements(height: number, width: number): void {\r\n            this.root.attr({\r\n                \"height\": height,\r\n                \"width\": width\r\n            });\r\n\r\n            this.main.attr(\"transform\", SVGUtil.translate(this.margin.left, this.margin.top));\r\n        }\r\n\r\n        public converter(dataView: DataView): SankeyDiagramDataView {\r\n            if (!dataView ||\r\n                !dataView.categorical ||\r\n                !dataView.categorical.categories ||\r\n                !dataView.categorical.categories[0] ||\r\n                !dataView.categorical.categories[1] ||\r\n                !dataView.categorical.categories[0].values ||\r\n                !dataView.categorical.categories[1].values) {\r\n                return {\r\n                    nodes: [],\r\n                    links: [],\r\n                    settings: {\r\n                        scale: { x: 1, y: 1 },\r\n                        colourOfLabels: SankeyDiagram.DefaultSettings.colourOfLabels,\r\n                        fontSize: SankeyDiagram.DefaultSettings.fontSize\r\n                    }\r\n                };\r\n            }\r\n\r\n            var nodes: SankeyDiagramNode[] = [],\r\n                links: SankeyDiagramLink[] = [],\r\n                dataPoints: SankeyDiagramDataPoint[] = [],\r\n                categories: any[] = dataView.categorical.categories[0].values,\r\n                secondCategories: any[] = dataView.categorical.categories[1].values,\r\n                valuesColumn: DataViewValueColumn = dataView.categorical.values && dataView.categorical.values[0],\r\n                weightValues: number[] = valuesColumn && valuesColumn.values && valuesColumn.values.map(x=> x || 0) || [],\r\n                allCategories: any[],\r\n                valueFormatterForCategories: IValueFormatter,\r\n                formatOfWeigth: string = \"g\",\r\n                valuesFormatterForWeigth: IValueFormatter,\r\n                objects: DataViewObjects,\r\n                linksObjects: DataViewObjects[] = dataView.categorical.categories[0].objects || [],\r\n                labelColour: string,\r\n                settings: SankeyDiagramSettings,\r\n                shiftOfColour: number,\r\n                identities: DataViewScopeIdentity[] = [];\r\n\r\n            if (dataView.categorical.categories[0].identity) {\r\n                identities = identities.concat(dataView.categorical.categories[0].identity);\r\n            }\r\n\r\n            if (dataView.categorical.categories[1].identity) {\r\n                identities = identities.concat(dataView.categorical.categories[1].identity);\r\n            }\r\n\r\n            objects = this.getObjectsFromDataView(dataView);\r\n\r\n            labelColour = this.getColour(\r\n                SankeyDiagram.Properties[\"labels\"][\"fill\"],\r\n                SankeyDiagram.DefaultSettings.colourOfLabels,\r\n                objects);\r\n\r\n            if (valuesColumn && valuesColumn.source) {\r\n                formatOfWeigth = ValueFormatter.getFormatString(\r\n                    valuesColumn.source,\r\n                    SankeyDiagram.Properties[\"general\"][\"formatString\"]);\r\n            }\r\n\r\n            dataPoints = categories.map((item: any, index: number) => {\r\n                return {\r\n                    source: item,\r\n                    destination: secondCategories[index],\r\n                    weigth: valuesColumn ? Math.max(weightValues[index] || 0, 0) : 1\r\n                };\r\n            });\r\n\r\n            allCategories = categories.concat(secondCategories);\r\n\r\n            valueFormatterForCategories = ValueFormatter.create({\r\n                format: ValueFormatter.getFormatString(\r\n                    dataView.categorical.categories[0].source,\r\n                    SankeyDiagram.Properties[\"general\"][\"formatString\"]),\r\n                value: allCategories[0],\r\n                value2: allCategories[allCategories.length - 1]\r\n            });\r\n\r\n            valuesFormatterForWeigth = ValueFormatter.create({\r\n                format: formatOfWeigth,\r\n                value: Math.max(d3.max(weightValues) || 1, 1),\r\n            });\r\n\r\n            allCategories.forEach((item: any, index: number) => {\r\n                if (!nodes.some((node: SankeyDiagramNode) => {\r\n                    if (item === node.label.name) {\r\n                        node.selectionIds.push(SelectionId.createWithId(identities[index]));\r\n\r\n                        return true;\r\n                    }\r\n\r\n                    return false;\r\n                })) {\r\n                    var formattedValue: string = valueFormatterForCategories.format(item),\r\n                        label: SankeyDiagramLabel,\r\n                        selectionId: SelectionId,\r\n                        textProperties: TextProperties = {\r\n                            text: formattedValue,\r\n                            fontFamily: this.textProperties.fontFamily,\r\n                            fontSize: this.textProperties.fontSize\r\n                        };\r\n\r\n                    label = {\r\n                        name: item,\r\n                        formattedName: valueFormatterForCategories.format(item),\r\n                        width: TextMeasurementService.measureSvgTextWidth(textProperties),\r\n                        height: TextMeasurementService.estimateSvgTextHeight(textProperties),\r\n                        colour: labelColour\r\n                    };\r\n\r\n                    selectionId = SelectionId.createWithId(identities[index]);\r\n\r\n                    nodes.push({\r\n                        label: label,\r\n                        links: [],\r\n                        inputWeight: 0,\r\n                        outputWeight: 0,\r\n                        width: this.nodeWidth,\r\n                        height: 0,\r\n                        colour: SankeyDiagram.DefaultColourOfNode,\r\n                        tooltipData: [],\r\n                        selectionIds: [selectionId]\r\n                    });\r\n                }\r\n            });\r\n\r\n            shiftOfColour = this.colours.getAllColors().length / nodes.length;\r\n\r\n            nodes.forEach((node: SankeyDiagramNode, index: number) => {\r\n                node.colour = this.colours.getColorByIndex(Math.floor(index * shiftOfColour)).value;\r\n            });\r\n\r\n            dataPoints.forEach((dataPoint: SankeyDiagramDataPoint, index: number) => {\r\n                var sourceNode: SankeyDiagramNode,\r\n                    destinationNode: SankeyDiagramNode,\r\n                    link: SankeyDiagramLink,\r\n                    linkColour: string;\r\n\r\n                if (dataPoint.source === dataPoint.destination) {\r\n                    return;\r\n                }\r\n\r\n                nodes.forEach((node: SankeyDiagramNode) => {\r\n                    if (node.label.name === dataPoint.source) {\r\n                        sourceNode = node;\r\n                    }\r\n\r\n                    if (node.label.name === dataPoint.destination) {\r\n                        destinationNode = node;\r\n                    }\r\n                });\r\n\r\n                linkColour = this.getColour(\r\n                    SankeyDiagram.Properties[\"links\"][\"fill\"],\r\n                    SankeyDiagram.DefaultColourOfLink,\r\n                    linksObjects[index]);\r\n\r\n                link = {\r\n                    source: sourceNode,\r\n                    destination: destinationNode,\r\n                    weigth: dataPoint.weigth,\r\n                    height: dataPoint.weigth,\r\n                    colour: linkColour,\r\n                    tooltipData: this.getTooltipDataForLink(\r\n                        valuesFormatterForWeigth,\r\n                        sourceNode.label.formattedName,\r\n                        destinationNode.label.formattedName,\r\n                        dataPoint.weigth),\r\n                    selectionId: SelectionId.createWithId(identities[index])\r\n                };\r\n\r\n                links.push(link);\r\n\r\n                sourceNode.links.push(link);\r\n                destinationNode.links.push(link);\r\n\r\n                this.updateValueOfNode(sourceNode);\r\n                this.updateValueOfNode(destinationNode);\r\n\r\n                sourceNode.tooltipData = this.getTooltipForNode(\r\n                    valuesFormatterForWeigth,\r\n                    sourceNode.label.formattedName,\r\n                    sourceNode.inputWeight ? sourceNode.inputWeight : sourceNode.outputWeight);\r\n\r\n                destinationNode.tooltipData = this.getTooltipForNode(\r\n                    valuesFormatterForWeigth,\r\n                    destinationNode.label.formattedName,\r\n                    destinationNode.inputWeight ? destinationNode.inputWeight : destinationNode.outputWeight);\r\n            });\r\n\r\n            settings = this.parseSettings(objects);\r\n\r\n            settings.colourOfLabels = labelColour;\r\n\r\n            return {\r\n                nodes: nodes,\r\n                links: links,\r\n                settings: settings\r\n            };\r\n        }\r\n\r\n        private getObjectsFromDataView(dataView: DataView): DataViewObjects {\r\n            if (!dataView ||\r\n                    !dataView.metadata ||\r\n                    !dataView.metadata.columns ||\r\n                    !dataView.metadata.objects) {\r\n                return null;\r\n            }\r\n\r\n            return dataView.metadata.objects;\r\n        }\r\n\r\n        private getColour(properties: DataViewObjectPropertyIdentifier, defaultColor: string, objects: DataViewObjects): string {\r\n            var colorHelper: ColorHelper;\r\n\r\n            colorHelper = new ColorHelper(this.colours, properties, defaultColor);\r\n\r\n            return colorHelper.getColorForMeasure(objects, \"\");\r\n        }\r\n\r\n        private getTooltipDataForLink(\r\n            valueFormatter: IValueFormatter,\r\n            sourceNodeName: string,\r\n            destinationNodeName: string,\r\n            linkWeight: number): TooltipDataItem[] {\r\n\r\n            var formattedLinkWeight: string;\r\n\r\n            if (valueFormatter && valueFormatter.format) {\r\n                formattedLinkWeight = valueFormatter.format(linkWeight);\r\n            } else {\r\n                formattedLinkWeight = linkWeight.toString();\r\n            }\r\n\r\n            return [{\r\n                displayName: SankeyDiagram.RoleNames.rows,\r\n                value: sourceNodeName\r\n            }, {\r\n                displayName: SankeyDiagram.RoleNames.columns,\r\n                value: destinationNodeName\r\n            }, {\r\n                displayName: SankeyDiagram.RoleNames.values,\r\n                value: formattedLinkWeight\r\n            }];\r\n        }\r\n\r\n        private updateValueOfNode(node: SankeyDiagramNode): void {\r\n            node.inputWeight = node.links.reduce((previousValue: number, currentValue: SankeyDiagramLink) => {\r\n                return previousValue + (currentValue.destination === node ? currentValue.weigth : 0);\r\n            }, 0);\r\n\r\n            node.outputWeight = node.links.reduce((previousValue: number, currentValue: SankeyDiagramLink) => {\r\n                return previousValue + (currentValue.source === node ? currentValue.weigth : 0);\r\n            }, 0);\r\n        }\r\n\r\n        private getTooltipForNode(\r\n            valueFormatter: IValueFormatter,\r\n            nodeName: string,\r\n            nodeWeight: number): TooltipDataItem[] {\r\n\r\n            var formattedNodeWeigth: string;\r\n\r\n            if (valueFormatter && valueFormatter.format) {\r\n                formattedNodeWeigth = valueFormatter.format(nodeWeight);\r\n            } else {\r\n                formattedNodeWeigth = nodeWeight.toString();\r\n            }\r\n\r\n            return [{\r\n                displayName: \"Name\",\r\n                value: nodeName\r\n            }, {\r\n                displayName: SankeyDiagram.RoleNames.values,\r\n                value: formattedNodeWeigth\r\n            }];\r\n        }\r\n\r\n        private parseSettings(objects: DataViewObjects): SankeyDiagramSettings {\r\n            var isVisibleLabels: boolean = false;\r\n\r\n            isVisibleLabels = DataViewObjects.getValue(\r\n                objects,\r\n                SankeyDiagram.Properties[\"labels\"][\"show\"],\r\n                SankeyDiagram.DefaultSettings.isVisibleLabels);\r\n\r\n            return {\r\n                isVisibleLabels: isVisibleLabels,\r\n                scale: {\r\n                    x: SankeyDiagram.DefaultSettings.scale.x,\r\n                    y: SankeyDiagram.DefaultSettings.scale.y\r\n                },\r\n                colourOfLabels: SankeyDiagram.DefaultSettings.colourOfLabels,\r\n                fontSize: DataViewObjects.getValue<number>(objects, \r\n                    SankeyDiagram.Properties[\"labels\"][\"fontSize\"],\r\n                    SankeyDiagram.DefaultSettings.fontSize)\r\n            };\r\n        }\r\n\r\n        private findNodePosition(sankeyDiagramDataView: SankeyDiagramDataView): void {\r\n            this.findNodePositionByX(sankeyDiagramDataView);\r\n            this.findNodePositionByY(sankeyDiagramDataView);\r\n        }\r\n\r\n        private findNodePositionByX(sankeyDiagramDataView: SankeyDiagramDataView): void {\r\n            var nodes: SankeyDiagramNode[] = sankeyDiagramDataView.nodes,\r\n                nextNodes: SankeyDiagramNode[] = [],\r\n                previousNodes: SankeyDiagramNode[] = [],\r\n                x: number = 0,\r\n                isRecursiveDependencies: boolean = false;\r\n\r\n            while (nodes.length > 0) {\r\n                nextNodes = [];\r\n\r\n                nodes.forEach((node: SankeyDiagramNode) => {\r\n                    node.x = x;\r\n\r\n                    node.links.forEach((link: SankeyDiagramLink) => {\r\n                        if (node === link.source && node !== link.destination) {\r\n                            if (nextNodes.every((item: SankeyDiagramNode) => {\r\n                                return item !== link.destination;\r\n                            })) {\r\n                                nextNodes.push(link.destination);\r\n                            }\r\n                        }\r\n                    });\r\n                });\r\n\r\n                isRecursiveDependencies = nextNodes.length === previousNodes.length && \r\n                    previousNodes.every((previousNode: SankeyDiagramNode) => {\r\n                        return nextNodes.some((nextNode: SankeyDiagramNode) => {\r\n                            return nextNode === previousNode;\r\n                        });\r\n                    });\r\n\r\n                if (isRecursiveDependencies) {\r\n                    previousNodes.forEach((element: SankeyDiagramNode) => {\r\n                        element.x = x;\r\n\r\n                        x++;\r\n                    });\r\n\r\n                    nodes = [];\r\n                } else {\r\n                    nodes = nextNodes;\r\n\r\n                    previousNodes = nodes;\r\n\r\n                    x++;\r\n                }\r\n            }\r\n\r\n            sankeyDiagramDataView.settings.scale.x = this.getScaleByAxisX(x - 1);\r\n\r\n            this.scaleByAxisX(sankeyDiagramDataView.nodes, sankeyDiagramDataView.settings.scale.x);\r\n        }\r\n\r\n        private scaleByAxisX(nodes: SankeyDiagramNode[], scale: number): void {\r\n            nodes.forEach((node: SankeyDiagramNode) => {\r\n                node.x *= scale;\r\n            });\r\n        }\r\n\r\n        private getScaleByAxisX(numberOfColumns: number = 1): number {\r\n            return this.getPositiveNumber((this.viewport.width - this.nodeWidth) / numberOfColumns);\r\n        }\r\n\r\n        private findNodePositionByY(sankeyDiagramDataView: SankeyDiagramDataView): void {\r\n            var nodes: SankeyDiagramNode[] = sankeyDiagramDataView.nodes,\r\n                links: SankeyDiagramLink[] = sankeyDiagramDataView.links,\r\n                currentX: number = 0,\r\n                index: number = 0,\r\n                maxIndex: number = 0,\r\n                sumValueOfNodes: number = 0,\r\n                maxValueOfNodes: number = 0;\r\n \r\n            nodes = nodes.sort((firstNode: SankeyDiagramNode, secondNode: SankeyDiagramNode) => {\r\n                return firstNode.x - secondNode.x;\r\n            });\r\n\r\n            nodes.forEach((node: SankeyDiagramNode) => {\r\n                if (currentX !== node.x) {\r\n                    index = 0;\r\n                    currentX = node.x;\r\n                    sumValueOfNodes = 0;\r\n                }\r\n\r\n                sumValueOfNodes += Math.max(node.inputWeight, node.outputWeight);\r\n\r\n                if (sumValueOfNodes > maxValueOfNodes) {\r\n                    maxValueOfNodes = sumValueOfNodes;\r\n                }\r\n\r\n                if (index > maxIndex) {\r\n                    maxIndex = index;\r\n                }\r\n\r\n                index++;\r\n            });\r\n\r\n            sankeyDiagramDataView.settings.scale.y = this.getScaleByAxisY(maxIndex + 1, maxValueOfNodes);\r\n\r\n            this.scaleByAxisY(nodes, links, sankeyDiagramDataView.settings.scale.y);\r\n        }\r\n\r\n        private getScaleByAxisY(numberOfRows: number, sumValueOfNodes: number): number {\r\n            return this.getPositiveNumber((this.viewport.height - numberOfRows * SankeyDiagram.NodePadding) / sumValueOfNodes);\r\n        }\r\n\r\n        private scaleByAxisY(\r\n            nodes: SankeyDiagramNode[],\r\n            links: SankeyDiagramLink[],\r\n            scale: number): void {\r\n\r\n            var shiftByAxisY: number = 0,\r\n                currentX: number = 0,\r\n                index: number = 0;\r\n\r\n            nodes.forEach((node: SankeyDiagramNode) => {\r\n                if (currentX !== node.x) {\r\n                    currentX = node.x;\r\n                    shiftByAxisY = 0;\r\n                    index = 0;\r\n                }\r\n\r\n                node.height = Math.max(node.inputWeight, node.outputWeight) * scale;\r\n\r\n                node.y = shiftByAxisY + SankeyDiagram.NodePadding * index;\r\n\r\n                shiftByAxisY += node.height;\r\n\r\n                index++;\r\n            });\r\n\r\n            nodes.forEach((node: SankeyDiagramNode) => {\r\n                node.links = node.links.sort((firstLink: SankeyDiagramLink, secondLink: SankeyDiagramLink) => {\r\n                    var firstY: number,\r\n                        secondY: number;\r\n\r\n                    firstY = firstLink.source === node\r\n                        ? firstLink.destination.y\r\n                        : firstLink.source.y;\r\n\r\n                    secondY = secondLink.source === node\r\n                        ? secondLink.destination.y\r\n                        : secondLink.source.y;\r\n\r\n                    return firstY - secondY;\r\n                });\r\n\r\n                var shiftByAxisYOfLeftLink: number = 0,\r\n                    shiftByAxisYOfRightLink: number = 0;\r\n\r\n                node.links.forEach((link: SankeyDiagramLink) => {\r\n                    var shiftByAxisY: number = 0;\r\n\r\n                    link.height = link.weigth * scale;\r\n\r\n                    if (link.source.x < node.x || link.destination.x < node.x) {\r\n                        shiftByAxisY = shiftByAxisYOfLeftLink;\r\n\r\n                        shiftByAxisYOfLeftLink += link.height;\r\n                    } else if (link.source.x > node.x || link.destination.x > node.x) {\r\n                        shiftByAxisY = shiftByAxisYOfRightLink;\r\n\r\n                        shiftByAxisYOfRightLink += link.height;\r\n                    }\r\n\r\n                    if (link.source === node) {\r\n                        link.dySource = shiftByAxisY;\r\n                    } else if (link.destination === node) {\r\n                        link.dyDestination = shiftByAxisY;\r\n                    }\r\n                });\r\n            });\r\n        }\r\n\r\n        private render(sankeyDiagramDataView: SankeyDiagramDataView): void {\r\n            var nodesSelection: D3.UpdateSelection,\r\n                linksSelection: D3.UpdateSelection;\r\n\r\n            linksSelection = this.renderLinks(sankeyDiagramDataView);\r\n            nodesSelection = this.renderNodes(sankeyDiagramDataView);\r\n\r\n            this.bindSelectionHandler(sankeyDiagramDataView, nodesSelection, linksSelection);\r\n        }\r\n\r\n        private renderNodes(sankeyDiagramDataView: SankeyDiagramDataView): D3.UpdateSelection {\r\n            var nodesEnterSelection: D3.Selection,\r\n                nodesSelection: D3.UpdateSelection,\r\n                nodeElements: D3.Selection;\r\n\r\n            nodeElements = this.main\r\n                .select(SankeyDiagram.Nodes.selector)\r\n                .selectAll(SankeyDiagram.Node.selector);\r\n\r\n            nodesSelection = nodeElements.data(sankeyDiagramDataView.nodes.filter(x => x.height > 0));\r\n\r\n            nodesEnterSelection = nodesSelection\r\n                .enter()\r\n                .append(\"g\");\r\n\r\n            nodesSelection\r\n                .attr(\"transform\", (node: SankeyDiagramNode) => {\r\n                    return SVGUtil.translate(node.x, node.y);\r\n                })\r\n                .classed(SankeyDiagram.Node[\"class\"], true);\r\n\r\n            nodesEnterSelection\r\n                .append(\"rect\")\r\n                .classed(SankeyDiagram.NodeRect[\"class\"], true);\r\n\r\n            nodesEnterSelection\r\n                .append(\"text\")\r\n                .classed(SankeyDiagram.NodeLabel[\"class\"], true);\r\n\r\n            nodesSelection\r\n                .select(SankeyDiagram.NodeRect.selector)\r\n                .style({\r\n                    \"fill\": (node: SankeyDiagramNode) => node.colour,\r\n                    \"stroke\": (node: SankeyDiagramNode) => d3.rgb(node.colour).darker(1.5)\r\n                })\r\n                .attr({\r\n                    x: 0,\r\n                    y: 0,\r\n                    height: (node: SankeyDiagramNode) => node.height,\r\n                    width: (node: SankeyDiagramNode) => node.width\r\n                });\r\n\r\n            nodesSelection\r\n                .select(SankeyDiagram.NodeLabel.selector)\r\n                .attr({\r\n                    x: (node: SankeyDiagramNode) => this.getLabelPositionByAxisX(node),\r\n                    y: (node: SankeyDiagramNode) => node.height / 2,\r\n                    dy: \"0.35em\"\r\n                })\r\n                .style(\"fill\", (node: SankeyDiagramNode) => node.label.colour)\r\n                .style(\"font-size\", this.textProperties.fontSize)\r\n                .style(\"display\", (node: SankeyDiagramNode) => {\r\n                    var isNotVisibleLabel: boolean = false, \r\n                        labelPositionByAxisX: number = this.getCurrentPositionOfLabelByAxisX(node);\r\n\r\n                    isNotVisibleLabel = \r\n                        labelPositionByAxisX >= this.viewport.width ||\r\n                        labelPositionByAxisX <= 0 ||\r\n                        (node.height + SankeyDiagram.NodePadding) < node.label.height;\r\n\r\n                    if (isNotVisibleLabel || !sankeyDiagramDataView.settings.isVisibleLabels\r\n                        || sankeyDiagramDataView.settings.scale.x / 2 <  SankeyDiagram.MinWidthOfLabel) {\r\n                        return \"none\";\r\n                    }\r\n\r\n                    return null;\r\n                })\r\n                .style(\"text-anchor\", (node: SankeyDiagramNode) => {\r\n                    if (this.isLabelLargerWidth(node)) {\r\n                        return \"end\";\r\n                    }\r\n\r\n                    return null;\r\n                })\r\n                .text((node: SankeyDiagramNode) => {\r\n                    var maxWidth: number = sankeyDiagramDataView.settings.scale.x / 2 - node.width - SankeyDiagram.NodePadding;\r\n\r\n                    if (this.getCurrentPositionOfLabelByAxisX(node) > maxWidth) {\r\n                        return TextMeasurementService.getTailoredTextOrDefault({\r\n                            text: node.label.formattedName,\r\n                            fontFamily: this.textProperties.fontFamily,\r\n                            fontSize: this.textProperties.fontSize\r\n                        }, maxWidth);\r\n                    }\r\n\r\n                    return node.label.formattedName;\r\n                });\r\n\r\n            nodesSelection\r\n                .exit()\r\n                .remove();\r\n\r\n            this.renderTooltip(nodesSelection);\r\n\r\n            return nodesSelection;\r\n        }\r\n\r\n        private getLabelPositionByAxisX(node: SankeyDiagramNode): number {\r\n            if (this.isLabelLargerWidth(node)) {\r\n                return -(SankeyDiagram.LabelPadding);\r\n            }\r\n\r\n            return node.width + SankeyDiagram.LabelPadding;\r\n        }\r\n\r\n        private isLabelLargerWidth(node: SankeyDiagramNode): boolean {\r\n            var shiftByAxisX: number = node.x + node.width + SankeyDiagram.LabelPadding;\r\n\r\n            return shiftByAxisX + node.label.width > this.viewport.width;\r\n        }\r\n\r\n        private getCurrentPositionOfLabelByAxisX(node: SankeyDiagramNode): number {\r\n            var labelPositionByAxisX: number = this.getLabelPositionByAxisX(node);\r\n\r\n            labelPositionByAxisX = labelPositionByAxisX > 0\r\n                ? labelPositionByAxisX + node.x + node.label.width + node.width\r\n                : node.x + labelPositionByAxisX - node.label.width - node.width;\r\n\r\n            return labelPositionByAxisX;\r\n        }\r\n\r\n        private renderLinks(sankeyDiagramDataView: SankeyDiagramDataView): D3.UpdateSelection {\r\n            var linksSelection: D3.UpdateSelection,\r\n                linksElements: D3.Selection;\r\n\r\n            linksElements = this.main\r\n                .select(SankeyDiagram.Links.selector)\r\n                .selectAll(SankeyDiagram.Link.selector);\r\n\r\n            linksSelection = linksElements.data(sankeyDiagramDataView.links.filter(x => x.height > 0));\r\n\r\n            linksSelection\r\n                .enter()\r\n                .append(\"path\")\r\n                .classed(SankeyDiagram.Link[\"class\"], true);\r\n\r\n            linksSelection\r\n                .attr(\"d\", (link: SankeyDiagramLink) => {\r\n                    return this.getSvgPath(link);\r\n                })\r\n                .style({\r\n                    \"stroke-width\": (link: SankeyDiagramLink) => link.height,\r\n                    \"stroke\": (link: SankeyDiagramLink) => link.colour\r\n                });\r\n\r\n            linksSelection\r\n                .exit()\r\n                .remove();\r\n\r\n            this.renderTooltip(linksSelection);\r\n\r\n            return linksSelection;\r\n        }\r\n\r\n        private getSvgPath(link: SankeyDiagramLink): string {\r\n            var x0: number,\r\n                x1: number,\r\n                xi: D3.Transition.BaseInterpolate,\r\n                x2: number,\r\n                x3: number,\r\n                y0: number,\r\n                y1: number;\r\n\r\n            if (link.destination.x < link.source.x) {\r\n                x0 = link.source.x;\r\n                x1 = link.destination.x + link.destination.width;\r\n            } else {\r\n                x0 = link.source.x + link.source.width;\r\n                x1 = link.destination.x;\r\n            }\r\n\r\n            xi = d3.interpolateNumber(x0, x1);\r\n            x2 = xi(this.curvatureOfLinks);\r\n            x3 = xi(1 - this.curvatureOfLinks);\r\n            y0 = link.source.y + link.dySource + link.height / 2;\r\n            y1 = link.destination.y + link.dyDestination + link.height / 2;\r\n\r\n            return `M ${x0} ${y0} C ${x2} ${y0}, ${x3} ${y1}, ${x1} ${y1}`;\r\n        }\r\n\r\n        private renderTooltip(selection: D3.UpdateSelection): void {\r\n            TooltipManager.addTooltip(selection, (tooltipEvent: TooltipEvent) => {\r\n                return (<SankeyDiagramTooltipData> tooltipEvent.data).tooltipData;\r\n            });\r\n        }\r\n\r\n        private bindSelectionHandler(\r\n            sankeyDiagramDataView: SankeyDiagramDataView,\r\n            nodesSelection: D3.UpdateSelection,\r\n            linksSelection: D3.UpdateSelection): void {\r\n\r\n            nodesSelection.on(\"click\", (node: SankeyDiagramNode) => {\r\n                var selectionIds = _.isEqual(\r\n                        node.selectionIds.map(x=>x.getKey()),\r\n                        this.selectionManager.getSelectionIds().map(x=>x.getKey()))\r\n                    ? []\r\n                    : node.selectionIds;\r\n\r\n                this.selectMany(selectionIds, true).then(() => this.setSelection(nodesSelection, linksSelection));\r\n\r\n                d3.event.stopPropagation();\r\n            });\r\n\r\n            linksSelection.on(\"click\", (link: SankeyDiagramLink) => {\r\n                this.selectionManager.select(link.selectionId, d3.event.ctrlKey).then(() =>\r\n                    this.setSelection(nodesSelection, linksSelection));\r\n\r\n                d3.event.stopPropagation();\r\n            });\r\n\r\n            this.root.on(\"click\", () => {\r\n                this.selectionManager.clear().then(() => this.setSelection(nodesSelection, linksSelection));\r\n            });\r\n\r\n            this.setSelection(nodesSelection, linksSelection);\r\n        }\r\n\r\n        private selectMany(selectionIds: SelectionId[], clear: boolean = false): JQueryPromise<{}> {\r\n            if(clear) {\r\n                return this.selectionManager.clear().then(() => this.selectMany(selectionIds, false));\r\n            }\r\n\r\n            var selectionDeffered = selectionIds.map(id => this.selectionManager.select(id, true));\r\n            return (<JQueryPromise<{}>>$.when.apply(null, selectionDeffered));\r\n        }\r\n\r\n        private setSelection(nodes: D3.UpdateSelection, links: D3.UpdateSelection): void {\r\n\r\n            var selectionIds: SelectionId[] = this.selectionManager.getSelectionIds();\r\n\r\n            nodes.classed(\"selected\", selectionIds.length > 0);\r\n            links.classed(\"selected\", false);\r\n\r\n            if (selectionIds.length === 0) {\r\n                return;\r\n            }\r\n\r\n            var selectedNodesSelection = nodes.filter((node: SankeyDiagramNode) => selectionIds\r\n                .some((selectedId: SelectionId) => node.selectionIds\r\n                .some( x => x.getKey() === selectedId.getKey())));\r\n\r\n            var selectedLinksSelection = links.filter((link: SankeyDiagramLink) =>\r\n                 selectionIds.some((selectionId: SelectionId) => selectionId.getKey() === link.selectionId.getKey()));\r\n\r\n            selectedNodesSelection.classed(\"selected\", false);\r\n            selectedLinksSelection.classed(\"selected\", true);\r\n        }\r\n\r\n        public enumerateObjectInstances(options: EnumerateVisualObjectInstancesOptions): VisualObjectInstanceEnumeration {\r\n            var enumeration = new ObjectEnumerationBuilder();\r\n\r\n            if (!this.dataView) {\r\n                return [];\r\n            }\r\n\r\n            switch (options.objectName) {\r\n                case \"labels\": {\r\n                    this.enumerateLabels(enumeration);\r\n                    break;\r\n                }\r\n                case \"links\": {\r\n                    this.enumerateLinks(enumeration);\r\n                    break;\r\n                }\r\n            }\r\n\r\n            return enumeration.complete();\r\n        }\r\n\r\n        private enumerateLabels(enumeration: ObjectEnumerationBuilder): void {\r\n            var settings: SankeyDiagramSettings = this.dataView.settings,\r\n                labels: VisualObjectInstance;\r\n\r\n            if (!settings) {\r\n                return;\r\n            }\r\n\r\n            labels = {\r\n                objectName: \"labels\",\r\n                displayName: \"labels\",\r\n                selector: null,\r\n                properties: {\r\n                    show: settings.isVisibleLabels,\r\n                    fill: settings.colourOfLabels,\r\n                    fontSize: settings.fontSize\r\n                }\r\n            };\r\n\r\n            enumeration.pushInstance(labels);\r\n        }\r\n\r\n        private enumerateLinks(enumeration: ObjectEnumerationBuilder): void {\r\n            var links: SankeyDiagramLink[] = this.dataView.links;\r\n\r\n            if (!links || !(links.length > 0)) {\r\n                return;\r\n            }\r\n\r\n            links.forEach((link: SankeyDiagramLink) => {\r\n                enumeration.pushInstance({\r\n                    objectName: \"links\",\r\n                    displayName: `${link.source.label.formattedName} - ${link.destination.label.formattedName}`,\r\n                    selector: ColorHelper.normalizeSelector(link.selectionId.getSelector(), false),\r\n                    properties: {\r\n                        fill: { solid: { color: link.colour } }\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    }\r\n}","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.visuals.samples {\r\n    import PixelConverter = jsCommon.PixelConverter;\r\n\r\n    export let bulletChartProps = {\r\n        values: {\r\n            targetValue: <DataViewObjectPropertyIdentifier>{ objectName: 'values', propertyName: 'targetValue' },\r\n            minimumPercent: <DataViewObjectPropertyIdentifier>{ objectName: 'values', propertyName: 'minimumPercent' },\r\n            needsImprovementPercent: <DataViewObjectPropertyIdentifier>{ objectName: 'values', propertyName: 'needsImprovementPercent' },\r\n            satisfactoryPercent: <DataViewObjectPropertyIdentifier>{ objectName: 'values', propertyName: 'satisfactoryPercent' },\r\n            goodPercent: <DataViewObjectPropertyIdentifier>{ objectName: 'values', propertyName: 'goodPercent' },\r\n            veryGoodPercent: <DataViewObjectPropertyIdentifier>{ objectName: 'values', propertyName: 'veryGoodPercent' },\r\n            maximumPercent: <DataViewObjectPropertyIdentifier>{ objectName: 'values', propertyName: 'maximumPercent' },\r\n            targetValue2: <DataViewObjectPropertyIdentifier>{ objectName: 'values', propertyName: 'targetValue2' },\r\n        },\r\n        orientation: {\r\n            orientation: <DataViewObjectPropertyIdentifier>{ objectName: 'orientation', propertyName: 'orientation' },\r\n        },\r\n        colors: {\r\n            badColor: <DataViewObjectPropertyIdentifier>{ objectName: 'colors', propertyName: 'badColor' },\r\n            needsImprovementColor: <DataViewObjectPropertyIdentifier>{ objectName: 'colors', propertyName: 'needsImprovementColor' },\r\n            satisfactoryColor: <DataViewObjectPropertyIdentifier>{ objectName: 'colors', propertyName: 'satisfactoryColor' },\r\n            goodColor: <DataViewObjectPropertyIdentifier>{ objectName: 'colors', propertyName: 'goodColor' },\r\n            veryGoodColor: <DataViewObjectPropertyIdentifier>{ objectName: 'colors', propertyName: 'veryGoodColor' },\r\n            bulletColor: <DataViewObjectPropertyIdentifier>{ objectName: 'colors', propertyName: 'bulletColor' },\r\n        },\r\n        axis: {\r\n            axis: <DataViewObjectPropertyIdentifier>{ objectName: 'axis', propertyName: 'axis' },\r\n            axisColor: <DataViewObjectPropertyIdentifier>{ objectName: 'axis', propertyName: 'axisColor' },\r\n            measureUnits: <DataViewObjectPropertyIdentifier>{ objectName: 'axis', propertyName: 'measureUnits' },\r\n            unitsColor: <DataViewObjectPropertyIdentifier>{ objectName: 'axis', propertyName: 'unitsColor' },\r\n        },\r\n        formatString: <DataViewObjectPropertyIdentifier>{ objectName: 'general', propertyName: 'formatString' },\r\n        labels: {\r\n            fontSize: <DataViewObjectPropertyIdentifier>{ objectName: 'labels', propertyName: 'fontSize' },\r\n            show: <DataViewObjectPropertyIdentifier>{ objectName: 'labels', propertyName: 'show' },\r\n            labelColor: <DataViewObjectPropertyIdentifier>{ objectName: 'labels', propertyName: 'labelColor' }\r\n        }\r\n    };\r\n\r\n    export interface BarData {\r\n        scale: any;\r\n        barIndex: number;\r\n        categoryLabel: string;\r\n        axis: any;\r\n        x: number;\r\n        y: number;\r\n        key: string;\r\n    }\r\n\r\n    export interface BarRect extends SelectableDataPoint {\r\n        barIndex: number;\r\n        start: number;\r\n        end: number;\r\n        fill: string;\r\n        tooltipInfo?: TooltipDataItem[];\r\n        key: string;\r\n    }\r\n\r\n    export interface TargetValue {\r\n        barIndex: number;\r\n        value: number;\r\n        value2: number;\r\n        fill: string;\r\n        key: string;\r\n    }\r\n\r\n    export interface ScaledValues {\r\n        firstScale: number;\r\n        secondScale: number;\r\n        thirdScale: number;\r\n        fourthScale: number;\r\n        fifthScale: number;\r\n    }\r\n\r\n    export interface BarValueRect extends BarRect {\r\n    }\r\n\r\n    export interface BulletChartSettings {\r\n        values: {\r\n            targetValue: number;\r\n            minimumPercent: number;\r\n            needsImprovementPercent: number;\r\n            satisfactoryPercent: number;\r\n            goodPercent: number;\r\n            veryGoodPercent: number;\r\n            maximumPercent: number;\r\n            targetValue2: number;\r\n        };\r\n        orientation: {\r\n            orientation: string;\r\n            reverse: boolean;\r\n            vertical: boolean;\r\n        };\r\n        colors: {\r\n            badColor: string;\r\n            needsImprovementColor: string;\r\n            satisfactoryColor: string;\r\n            goodColor: string;\r\n            veryGoodColor: string;\r\n            bulletColor: string;\r\n        };\r\n\r\n        axis: {\r\n            axis: boolean;\r\n            axisColor: string;\r\n            measureUnits: string;\r\n            unitsColor: string;\r\n        };\r\n        labelSettings: VisualDataLabelsSettings;\r\n    }\r\n\r\n    //Model\r\n    export interface BulletChartModel {\r\n        bars: BarData[];\r\n        bulletChartSettings: BulletChartSettings;\r\n        bulletValueFormatString: string;\r\n        barRects: BarRect[];\r\n        valueRects: BarValueRect[];\r\n        targetValues: TargetValue[];\r\n    }\r\n\r\n    export let bulletChartRoleNames = {\r\n        value: 'Value',\r\n        targetValue: 'TargetValue',\r\n        minValue: 'Minimum',\r\n        needsImprovementValue: 'NeedsImprovement',\r\n        satisfactoryValue: 'Satisfactory',\r\n        goodValue: 'Good',\r\n        veryGoodValue: 'VeryGood',\r\n        maxValue: 'Maximum',\r\n        targetValue2: 'TargetValue2',\r\n    };\r\n\r\n    module Orientation {\r\n        export const HORIZONTALLEFT: string = 'Horizontal Left';\r\n        export const HORIZONTALRIGHT: string = 'Horizontal Right';\r\n        export const VERTICALTOP: string = 'Vertical Top';\r\n        export const VERTICALBOTTOM: string = 'Vertical Bottom';\r\n\r\n        export var type: IEnumType = createEnumType([\r\n            { value: HORIZONTALLEFT, displayName: HORIZONTALLEFT },\r\n            { value: HORIZONTALRIGHT, displayName: HORIZONTALRIGHT },\r\n            { value: VERTICALTOP, displayName: VERTICALTOP },\r\n            { value: VERTICALBOTTOM, displayName: VERTICALBOTTOM }\r\n        ]);\r\n    }\r\n\r\n    export class BulletChart implements IVisual {\r\n        private static ScrollBarSize = 13;\r\n        private static SpaceRequiredForBar = 60;\r\n        private static SpaceRequiredForBarVertically = 100;\r\n        private static StartMarginHorizontal = 30;\r\n        private static StartMarginVertical = 50;\r\n        private static BulletSize = 25;\r\n        private static DefaultSubtitleFontSizeInPt = 9;\r\n        private static BarMargin = 10;\r\n        private static MaxLabelWidth = 80;\r\n        private static MaxLabelHeight = 60;\r\n        private static SubtitleMargin = 10;\r\n        private static AxisFontSizeInPt = 8;\r\n\r\n        private static BiggestLabelWidth = 0;\r\n        private static BiggestLabelHeight = 0;\r\n        private static MarkerMarginHorizontal = BulletChart.BulletSize / 3;\r\n        private static MarkerMarginVertical = BulletChart.BulletSize / 4;\r\n\r\n        private static FontFamily: string = \"Segoe UI\";\r\n        private baselineDelta: number = 0;\r\n\r\n        public static capabilities: VisualCapabilities = {\r\n            dataRoles: [\r\n                {\r\n                    name: 'Category',\r\n                    kind: VisualDataRoleKind.Grouping,\r\n                    displayName: 'Category',\r\n                }, {\r\n                    name: 'Value',\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: 'Value',\r\n                }, {\r\n                    name: 'TargetValue',\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: 'Target Value',\r\n                }, {\r\n                    name: 'Minimum',\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: 'Minimum',\r\n                }, {\r\n                    name: 'NeedsImprovement',\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: 'Needs Improvement',\r\n                }, {\r\n                    name: 'Satisfactory',\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: 'Satisfactory',\r\n                }, {\r\n                    name: 'Good',\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: 'Good',\r\n                }, {\r\n                    name: 'VeryGood',\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: 'Very Good',\r\n                }, {\r\n                    name: 'Maximum',\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: 'Maximum',\r\n                }, {\r\n                    name: 'TargetValue2',\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: 'Target Value 2'\r\n                }\r\n            ],\r\n            objects: {\r\n                general: {\r\n                    displayName: data.createDisplayNameGetter('Visual_General'),\r\n                    properties: {\r\n                        formatString: {\r\n                            type: { formatting: { formatString: true } },\r\n                        },\r\n                    },\r\n                },\r\n                values: {\r\n                    displayName: 'Data values',\r\n                    properties: {\r\n                        targetValue: {\r\n                            displayName: 'Target Value',\r\n                            type: { numeric: true }\r\n                        },\r\n                        targetValue2: {\r\n                            displayName: 'Target Value 2',\r\n                            type: { numeric: true },\r\n                        },\r\n                        minimumPercent: {\r\n                            displayName: 'Minimum %',\r\n                            type: { numeric: true }\r\n                        },\r\n                        needsImprovementPercent: {\r\n                            displayName: 'Needs Improvement %',\r\n                            type: { numeric: true },\r\n                        },\r\n                        satisfactoryPercent: {\r\n                            displayName: 'Satisfactory %',\r\n                            type: { numeric: true }\r\n                        },\r\n                        goodPercent: {\r\n                            displayName: 'Good %',\r\n                            type: { numeric: true }\r\n                        },\r\n                        veryGoodPercent: {\r\n                            displayName: 'Very Good %',\r\n                            type: { numeric: true },\r\n                        },\r\n                        maximumPercent: {\r\n                            displayName: 'Maximum %',\r\n                            type: { numeric: true }\r\n                        },\r\n                    }\r\n                },\r\n                labels: {\r\n                    displayName: 'Category labels',\r\n                    properties: {\r\n                        show: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Show'),\r\n                            type: { bool: true },\r\n                        },\r\n                        labelColor: {\r\n                            displayName: data.createDisplayNameGetter('Visual_LabelsFill'),\r\n                            description: data.createDisplayNameGetter('Visual_LabelsFillDescription'),\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        fontSize: {\r\n                            displayName: data.createDisplayNameGetter('Visual_TextSize'),\r\n                            type: { formatting: { fontSize: true } },\r\n                        },\r\n                    },\r\n                },\r\n                orientation: {\r\n                    displayName: 'Orientation',\r\n                    properties: {\r\n                        orientation: {\r\n                            displayName: 'Orientation',\r\n                            type: { enumeration: Orientation.type }\r\n                        }\r\n                    }\r\n                },\r\n                colors: {\r\n                    displayName: 'Colors',\r\n                    properties: {\r\n                        badColor: {\r\n                            type: { fill: { solid: { color: true } } },\r\n                            displayName: 'Bad Color'\r\n                        },\r\n                        needsImprovementColor: {\r\n                            type: { fill: { solid: { color: true } } },\r\n                            displayName: 'Needs Improvement Color',\r\n                        },\r\n                        satisfactoryColor: {\r\n                            type: { fill: { solid: { color: true } } },\r\n                            displayName: 'Satisfactory Color'\r\n                        },\r\n                        goodColor: {\r\n                            type: { fill: { solid: { color: true } } },\r\n                            displayName: 'Good Color'\r\n                        },\r\n                        veryGoodColor: {\r\n                            type: { fill: { solid: { color: true } } },\r\n                            displayName: 'Very Good Color',\r\n                        },\r\n                        bulletColor: {\r\n                            type: { fill: { solid: { color: true } } },\r\n                            displayName: 'Bullet Color'\r\n                        }\r\n                    },\r\n                },\r\n                axis: {\r\n                    displayName: 'Axis',\r\n                    properties: {\r\n                        axis: {\r\n                            displayName: 'Axis',\r\n                            type: { bool: true }\r\n                        },\r\n                        axisColor: {\r\n                            type: { fill: { solid: { color: true } } },\r\n                            displayName: 'Axis Color'\r\n                        },\r\n                        measureUnits: {\r\n                            type: { text: true },\r\n                            displayName: 'Measure Units '\r\n                        },\r\n                        unitsColor: {\r\n                            type: { fill: { solid: { color: true } } },\r\n                            displayName: 'Units Color'\r\n                        },\r\n                    }\r\n                }\r\n            },\r\n            dataViewMappings: [{\r\n                conditions: [\r\n                    {\r\n                        'Category': { max: 1 }, 'Value': { max: 1 }, 'TargetValue': { max: 1 }, 'Minimum': { max: 1 }, 'NeedsImprovement': { max: 1 },\r\n                        'Satisfactory': { max: 1 }, 'Good': { max: 1 }, 'VeryGood': { max: 1 }, 'Maximum': { max: 1 }, 'TargetValue2': { max: 1 },\r\n                    },\r\n                ],\r\n                categorical: {\r\n                    categories: {\r\n                        for: { in: 'Category' },\r\n                        dataReductionAlgorithm: { top: {} }\r\n                    },\r\n                    values: {\r\n                        select: [\r\n                            { bind: { to: 'Value' } },\r\n                            { bind: { to: 'TargetValue' } },\r\n                            { bind: { to: 'TargetValue2' } },\r\n                            { bind: { to: 'Minimum' } },\r\n                            { bind: { to: 'NeedsImprovement' } },\r\n                            { bind: { to: 'Satisfactory' } },\r\n                            { bind: { to: 'Good' } },\r\n                            { bind: { to: 'VeryGood' } },\r\n                            { bind: { to: 'Maximum' } },\r\n                        ]\r\n                    },\r\n                },\r\n            }],\r\n            supportsHighlight: true,\r\n            sorting: {\r\n                default: {},\r\n            },\r\n            drilldown: {\r\n                roles: ['Category']\r\n            }\r\n        };\r\n\r\n        //Variables\r\n        private clearCatcher: D3.Selection;\r\n        private bulletBody: D3.Selection;\r\n        private scrollContainer: D3.Selection;\r\n        private labelGraphicsContext: D3.Selection;\r\n        private bulletGraphicsContext: D3.Selection;\r\n        private model: BulletChartModel;\r\n        private behavior: BulletWebBehavior;\r\n        private interactivityService: IInteractivityService;\r\n        private hostService: IVisualHostServices;\r\n\r\n        private get reverse(): boolean {\r\n            return this.model.bulletChartSettings.orientation.reverse;\r\n        }\r\n\r\n        private get vertical(): boolean {\r\n            return this.model.bulletChartSettings.orientation.vertical;\r\n        }\r\n\r\n        public static DefaultStyleProperties(): BulletChartSettings {\r\n            return {\r\n                values: {\r\n                    targetValue: 0,\r\n                    targetValue2: 0,\r\n                    minimumPercent: 0,\r\n                    needsImprovementPercent: 25,\r\n                    satisfactoryPercent: 50,\r\n                    goodPercent: 100,\r\n                    veryGoodPercent: 125,\r\n                    maximumPercent: 200,\r\n                },\r\n                orientation: {\r\n                    orientation: Orientation.HORIZONTALLEFT,\r\n                    reverse: false,\r\n                    vertical: false\r\n                },\r\n                colors: {\r\n                    badColor: 'Darkred',\r\n                    needsImprovementColor: 'Red',\r\n                    satisfactoryColor: 'Yellow',\r\n                    goodColor: 'Green',\r\n                    veryGoodColor: 'Darkgreen',\r\n                    bulletColor: 'Black'\r\n                },\r\n                axis: {\r\n                    axis: true,\r\n                    axisColor: 'Grey',\r\n                    measureUnits: '',\r\n                    unitsColor: 'Grey',\r\n                },\r\n                labelSettings: {\r\n                    fontSize: 11,\r\n                    show: true,\r\n                    labelColor: 'Black',\r\n                },\r\n            };\r\n        }\r\n\r\n        private viewport: IViewport;\r\n\r\n        private get viewportIn(): IViewport {\r\n            return <IViewport>{\r\n                width: this.viewport.width,\r\n                height: this.viewport.height\r\n            };\r\n        }\r\n\r\n        private get viewportScroll(): IViewport {\r\n            let viewportIn = this.viewportIn;\r\n            return <IViewport>{\r\n                width: viewportIn.width - BulletChart.ScrollBarSize,\r\n                height: viewportIn.height - BulletChart.ScrollBarSize\r\n            };\r\n        }\r\n\r\n        private static getTextProperties(text: string, fontSize: number): TextProperties {\r\n            return <TextProperties>{\r\n                fontFamily: BulletChart.FontFamily,\r\n                fontSize: PixelConverter.fromPoint(fontSize),\r\n                text: text,\r\n            };\r\n        }\r\n        \r\n        // Convert a DataView into a view model\r\n        public static converter(dataView: DataView, options: VisualUpdateOptions): BulletChartModel {\r\n            let defaultSettings = BulletChart.DefaultStyleProperties();\r\n            let bulletModel: BulletChartModel = <BulletChartModel>{\r\n                bulletValueFormatString: null,\r\n                bulletChartSettings: defaultSettings,\r\n                bars: [],\r\n                barRects: [],\r\n                valueRects: [],\r\n                targetValues: [],\r\n            };\r\n\r\n            if (!dataView || !dataView.categorical || !dataView.categorical.values || dataView.categorical.values.length === 0\r\n                || !dataView.metadata || !dataView.metadata.columns || dataView.metadata.columns.length === 0) {\r\n                return bulletModel;\r\n            }\r\n\r\n            let objects = dataView.metadata.objects;\r\n            let settings = bulletModel.bulletChartSettings;\r\n\r\n            if (objects) {\r\n                settings.values.targetValue = DataViewObjects.getValue<number>(objects, bulletChartProps.values.targetValue, defaultSettings.values.targetValue);\r\n                settings.values.targetValue2 = DataViewObjects.getValue<number>(objects, bulletChartProps.values.targetValue2, defaultSettings.values.targetValue2);\r\n                settings.values.minimumPercent = DataViewObjects.getValue<number>(objects, bulletChartProps.values.minimumPercent, defaultSettings.values.minimumPercent);\r\n                settings.values.needsImprovementPercent = DataViewObjects.getValue<number>(objects, bulletChartProps.values.needsImprovementPercent, defaultSettings.values.needsImprovementPercent);\r\n                settings.values.satisfactoryPercent = DataViewObjects.getValue<number>(objects, bulletChartProps.values.satisfactoryPercent, defaultSettings.values.satisfactoryPercent);\r\n                settings.values.goodPercent = DataViewObjects.getValue<number>(objects, bulletChartProps.values.goodPercent, defaultSettings.values.goodPercent);\r\n                settings.values.veryGoodPercent = DataViewObjects.getValue<number>(objects, bulletChartProps.values.veryGoodPercent, defaultSettings.values.veryGoodPercent);\r\n                settings.values.maximumPercent = DataViewObjects.getValue<number>(objects, bulletChartProps.values.maximumPercent, defaultSettings.values.maximumPercent);\r\n\r\n                settings.orientation.orientation = DataViewObjects.getValue<string>(objects, bulletChartProps.orientation.orientation, defaultSettings.orientation.orientation);\r\n\r\n                settings.colors.badColor = DataViewObjects.getFillColor(objects, bulletChartProps.colors.badColor, defaultSettings.colors.badColor);\r\n                settings.colors.needsImprovementColor = DataViewObjects.getFillColor(objects, bulletChartProps.colors.needsImprovementColor, defaultSettings.colors.needsImprovementColor);\r\n                settings.colors.satisfactoryColor = DataViewObjects.getFillColor(objects, bulletChartProps.colors.satisfactoryColor, defaultSettings.colors.satisfactoryColor);\r\n                settings.colors.goodColor = DataViewObjects.getFillColor(objects, bulletChartProps.colors.goodColor, defaultSettings.colors.goodColor);\r\n                settings.colors.veryGoodColor = DataViewObjects.getFillColor(objects, bulletChartProps.colors.veryGoodColor, defaultSettings.colors.veryGoodColor);\r\n                settings.colors.bulletColor = DataViewObjects.getFillColor(objects, bulletChartProps.colors.bulletColor, defaultSettings.colors.bulletColor);\r\n\r\n                settings.axis.axis = DataViewObjects.getValue<boolean>(objects, bulletChartProps.axis.axis, defaultSettings.axis.axis);\r\n                settings.axis.axisColor = DataViewObjects.getFillColor(objects, bulletChartProps.axis.axisColor, defaultSettings.axis.axisColor);\r\n                settings.axis.measureUnits = TextMeasurementService.getTailoredTextOrDefault(BulletChart.getTextProperties(\r\n                    DataViewObjects.getValue<string>(objects, bulletChartProps.axis.measureUnits, defaultSettings.axis.measureUnits), BulletChart.DefaultSubtitleFontSizeInPt), BulletChart.MaxLabelWidth);\r\n                settings.axis.unitsColor = DataViewObjects.getFillColor(objects, bulletChartProps.axis.unitsColor, defaultSettings.axis.unitsColor);\r\n\r\n                settings.labelSettings.fontSize = DataViewObjects.getValue<number>(objects, bulletChartProps.labels.fontSize, defaultSettings.labelSettings.fontSize);\r\n                settings.labelSettings.show = DataViewObjects.getValue<boolean>(objects, bulletChartProps.labels.show, defaultSettings.labelSettings.show);\r\n                settings.labelSettings.labelColor = DataViewObjects.getFillColor(objects, bulletChartProps.labels.labelColor, defaultSettings.labelSettings.labelColor);\r\n            }\r\n            if (settings.orientation.orientation === Orientation.HORIZONTALRIGHT || settings.orientation.orientation === Orientation.VERTICALBOTTOM)\r\n                settings.orientation.reverse = true;\r\n\r\n            if (settings.orientation.orientation === Orientation.VERTICALTOP || settings.orientation.orientation === Orientation.VERTICALBOTTOM)\r\n                settings.orientation.vertical = true;\r\n\r\n            let categories: DataViewCategoryColumn,\r\n                categoryValues: any[],\r\n                categoryValuesLen: number = 1,\r\n                categoryFormatString: string;\r\n\r\n            if (dataView.categorical.categories) {\r\n                categories = dataView.categorical.categories[0];\r\n                categoryValues = categories.values;\r\n                categoryValuesLen = categoryValues.length;\r\n                categoryFormatString = valueFormatter.getFormatString(categories.source, bulletChartProps.formatString);\r\n            }\r\n\r\n            bulletModel.bulletValueFormatString = valueFormatter.getFormatString(dataView.categorical.values[0].source, bulletChartProps.formatString);\r\n\r\n            for (let idx = 0; idx < categoryValuesLen; idx++) {\r\n                let toolTipItems = [];\r\n                let category: string, value: number, targetValue: number, targetValue2: number, minimum: number, satisfactory: number,\r\n                    good: number, maximum: number, needsImprovement: number, veryGood: number;\r\n                let highlight: boolean = false,\r\n                    categoryIdentity: DataViewScopeIdentity;\r\n\r\n                if (categoryValues) {\r\n                    let categoryValue = categoryValues[idx];\r\n\r\n                    category = valueFormatter.format(categoryValue, categoryFormatString);\r\n                    categoryIdentity = categories.identity ? categories.identity[idx] : null;\r\n\r\n                    let textProperties = BulletChart.getTextProperties(category, settings.labelSettings.fontSize);\r\n                    category = TextMeasurementService.getTailoredTextOrDefault(textProperties, BulletChart.MaxLabelWidth - BulletChart.StartMarginHorizontal);\r\n\r\n                    let labelWidth = TextMeasurementService.measureSvgTextWidth(textProperties);\r\n                    let labelHeight = TextMeasurementService.estimateSvgTextHeight(textProperties);\r\n\r\n                    BulletChart.BiggestLabelWidth = Math.max(BulletChart.BiggestLabelWidth, labelWidth);\r\n                    BulletChart.BiggestLabelHeight = Math.max(BulletChart.BiggestLabelHeight, labelHeight);\r\n                }\r\n\r\n                let values = dataView.categorical.values;\r\n                targetValue = settings.values.targetValue;\r\n                targetValue2 = settings.values.targetValue2;\r\n\r\n                for (let i = 0; i < values.length; i++) {\r\n                    let col = values[i].source;\r\n                    let currentVal = values[i].values[idx] || 0;\r\n\r\n                    if (col && col.roles) {\r\n                        if (col.roles[bulletChartRoleNames.value]) {\r\n                            if (values[i].highlights)\r\n                                highlight = values[i].highlights[idx] !== null;\r\n                            toolTipItems.push({ value: currentVal, metadata: values[i] });\r\n                            value = currentVal;\r\n                        } else if (col.roles[bulletChartRoleNames.targetValue]) {\r\n                            toolTipItems.push({ value: currentVal, metadata: values[i] });\r\n                            targetValue = currentVal;\r\n                        } else if (col.roles[bulletChartRoleNames.targetValue2]) {\r\n                            toolTipItems.push({ value: currentVal, metadata: values[i] });\r\n                            targetValue2 = currentVal;\r\n                        } else if (col.roles[bulletChartRoleNames.minValue])\r\n                            minimum = currentVal;\r\n                        else if (col.roles[bulletChartRoleNames.needsImprovementValue])\r\n                            needsImprovement = currentVal;\r\n                        else if (col.roles[bulletChartRoleNames.satisfactoryValue])\r\n                            satisfactory = currentVal;\r\n                        else if (col.roles[bulletChartRoleNames.goodValue])\r\n                            good = currentVal;\r\n                        else if (col.roles[bulletChartRoleNames.veryGoodValue])\r\n                            veryGood = currentVal;\r\n                        else if (col.roles[bulletChartRoleNames.maxValue])\r\n                            maximum = currentVal;\r\n                    }\r\n                }\r\n\r\n                if (!minimum)\r\n                    minimum = settings.values.minimumPercent * targetValue / 100;\r\n                if (!needsImprovement)\r\n                    needsImprovement = settings.values.needsImprovementPercent * targetValue / 100;\r\n                if (!satisfactory)\r\n                    satisfactory = settings.values.satisfactoryPercent * targetValue / 100;\r\n                if (!good)\r\n                    good = settings.values.goodPercent * targetValue / 100;\r\n                if (!veryGood)\r\n                    veryGood = settings.values.veryGoodPercent * targetValue / 100;\r\n                if (!maximum)\r\n                    maximum = settings.values.maximumPercent * targetValue / 100;\r\n\r\n                let viewportLength = (settings.orientation.vertical ? (options.viewport.height - BulletChart.MaxLabelHeight) : (options.viewport.width - BulletChart.MaxLabelWidth)) -\r\n                    BulletChart.StartMarginHorizontal - BulletChart.ScrollBarSize;\r\n                let sortedRanges = [minimum, needsImprovement, satisfactory, good, veryGood, maximum].sort(d3.descending);\r\n                let scale = (d3.scale.linear()\r\n                    .clamp(true)\r\n                    .domain([minimum, Math.max(sortedRanges[0], targetValue, value)])\r\n                    .range(settings.orientation.vertical ? [viewportLength, 0] : [0, viewportLength]));\r\n\r\n                // Scalles without\r\n                let firstScale = scale(minimum);\r\n                let secondScale = scale(needsImprovement);\r\n                let thirdScale = scale(satisfactory);\r\n                let fourthScale = scale(good);\r\n                let fifthScale = scale(veryGood);\r\n                let lastScale = scale(maximum);\r\n                let valueScale = scale(value);\r\n\r\n                let firstColor = settings.colors.badColor, secondColor = settings.colors.needsImprovementColor,\r\n                    thirdColor = settings.colors.satisfactoryColor, fourthColor = settings.colors.goodColor, lastColor = settings.colors.veryGoodColor;\r\n\r\n                BulletChart.addItemToBarArray(bulletModel.barRects, idx, firstScale, secondScale, firstColor, toolTipItems, categoryIdentity);\r\n                BulletChart.addItemToBarArray(bulletModel.barRects, idx, secondScale, thirdScale, secondColor, toolTipItems, categoryIdentity);\r\n                BulletChart.addItemToBarArray(bulletModel.barRects, idx, thirdScale, fourthScale, thirdColor, toolTipItems, categoryIdentity);\r\n                BulletChart.addItemToBarArray(bulletModel.barRects, idx, fourthScale, fifthScale, fourthColor, toolTipItems, categoryIdentity);\r\n                BulletChart.addItemToBarArray(bulletModel.barRects, idx, fifthScale, lastScale, lastColor, toolTipItems, categoryIdentity);\r\n                BulletChart.addItemToBarArray(bulletModel.valueRects, idx, firstScale, valueScale, settings.colors.bulletColor, toolTipItems, categoryIdentity);\r\n\r\n                // markerValue\r\n                bulletModel.targetValues.push({\r\n                    barIndex: idx,\r\n                    value: scale(targetValue),\r\n                    fill: settings.colors.bulletColor,\r\n                    key: SelectionId.createWithIdAndMeasure(categoryIdentity, scale(targetValue).toString()).getKey(),\r\n                    value2: scale(targetValue2),\r\n                });\r\n\r\n                let xAxis = null;\r\n                if (settings.axis.axis) {\r\n                    xAxis = d3.svg.axis();\r\n                    xAxis.orient(settings.orientation.vertical ? \"left\" : \"bottom\");\r\n                    let minTickSize = Math.round(Math.max(3, viewportLength / 100));\r\n                    let axisValues = [value, targetValue, good, satisfactory, maximum, minimum, needsImprovement, veryGood]\r\n                        .filter(x => !isNaN(x));\r\n                    xAxis.tickFormat(valueFormatter.create({\r\n                        format: bulletModel.bulletValueFormatString,\r\n                        value: axisValues.length ? Math.max.apply(null, axisValues) : 0\r\n                    }).format);\r\n                    xAxis.ticks(minTickSize);\r\n                    xAxis.scale(scale);\r\n                }\r\n\r\n                let bar: BarData = {\r\n                    scale: scale,\r\n                    barIndex: idx,\r\n                    categoryLabel: category,\r\n                    x: (settings.orientation.vertical) ? BulletChart.StartMarginVertical + BulletChart.SpaceRequiredForBarVertically * idx : BulletChart.StartMarginHorizontal,\r\n                    y: (settings.orientation.vertical) ? BulletChart.StartMarginVertical : BulletChart.StartMarginHorizontal + BulletChart.SpaceRequiredForBar * idx,\r\n                    axis: xAxis,\r\n                    key: SelectionId.createWithIdAndMeasure(categoryIdentity, idx.toString()).getKey(),\r\n                };\r\n\r\n                bulletModel.bars.push(bar);\r\n            }\r\n\r\n            return bulletModel;\r\n        }\r\n\r\n        private static addItemToBarArray(collection: BarRect[], barIndex: number, start: number, end: number, fill: string, tooltipInfo?: any[], categoryIdentity?: any): void {\r\n            collection.push({\r\n                barIndex: barIndex,\r\n                start: start,\r\n                end: end,\r\n                fill: fill,\r\n                tooltipInfo: TooltipBuilder.createTooltipInfo(bulletChartProps.formatString, null, null, null, null, tooltipInfo),\r\n                selected: false,\r\n                identity: SelectionId.createWithId(categoryIdentity),\r\n                key: SelectionId.createWithIdAndMeasure(categoryIdentity, start + \" \" + end).getKey(),\r\n            });\r\n        }\r\n \r\n        /* One time setup*/\r\n        public init(options: VisualInitOptions): void {\r\n            let body = d3.select(options.element.get(0));\r\n            this.hostService = options.host;\r\n\r\n            this.bulletBody = body\r\n                .append('div')\r\n                .classed('bulletChart', true);\r\n\r\n            this.scrollContainer = this.bulletBody.append('svg')\r\n                .classed('bullet-scroll-region', true);\r\n            this.clearCatcher = appendClearCatcher(this.scrollContainer);\r\n\r\n            this.labelGraphicsContext = this.scrollContainer.append('g');\r\n            this.bulletGraphicsContext = this.scrollContainer.append('g');\r\n\r\n            this.behavior = new BulletWebBehavior();\r\n\r\n            this.interactivityService = createInteractivityService(options.host);\r\n        }\r\n\r\n        /* Called for data, size, formatting changes*/\r\n        public update(options: VisualUpdateOptions) {\r\n            if (!options.dataViews || !options.dataViews[0]) return;\r\n            BulletChart.BiggestLabelHeight = BulletChart.BiggestLabelWidth = 0;\r\n            let dataView = options.dataViews[0];\r\n            this.viewport = options.viewport;\r\n            this.model = BulletChart.converter(dataView, options);\r\n\r\n            //TODO: Calculating the baseline delta of the text. needs to be removed once the TExtMeasurementService.estimateSVGTextBaselineDelta is available.\r\n            this.baselineDelta = TextMeasurementHelper.estimateSvgTextBaselineDelta(BulletChart.getTextProperties(\"1\", this.model.bulletChartSettings.labelSettings.fontSize));\r\n\r\n            this.ClearViewport();\r\n            if (!this.model) {\r\n                return;\r\n            }\r\n\r\n            if (this.interactivityService) {\r\n                this.interactivityService.applySelectionStateToData(this.model.barRects);\r\n            }\r\n\r\n            this.bulletBody.style({\r\n                'height': this.viewportIn.height + 'px',\r\n                'width': this.viewportIn.width + 'px',\r\n            });\r\n            if (this.vertical) {\r\n                this.scrollContainer.attr({\r\n                    width: (this.model.bars.length * BulletChart.SpaceRequiredForBarVertically) + 'px',\r\n                    height: this.viewportScroll.height + 'px'\r\n                });\r\n            }\r\n            else {\r\n                this.scrollContainer.attr({\r\n                    height: (this.model.bars.length * BulletChart.SpaceRequiredForBar) + 'px',\r\n                    width: this.viewportScroll.width + 'px'\r\n                });\r\n            }\r\n\r\n            if (this.vertical)\r\n                this.setUpBulletsVertically(this.bulletBody, this.model, this.reverse);\r\n            else\r\n                this.setUpBulletsHorizontally(this.bulletBody, this.model, this.reverse);\r\n        }\r\n\r\n        private ClearViewport() {\r\n            this.labelGraphicsContext.selectAll(\"text\").remove();\r\n            this.bulletGraphicsContext.selectAll(\"rect\").remove();\r\n            this.bulletGraphicsContext.selectAll('axis').remove();\r\n            this.bulletGraphicsContext.selectAll('path').remove();\r\n            this.bulletGraphicsContext.selectAll('line').remove();\r\n            this.bulletGraphicsContext.selectAll('tick').remove();\r\n            this.bulletGraphicsContext.selectAll('g').remove();\r\n        }\r\n\r\n        private calculateLabelWidth(barData: BarData, bar?: BarRect, reversed?: boolean) {\r\n            if (reversed)\r\n                return BulletChart.StartMarginHorizontal + ((bar) ? bar.start : 0);\r\n\r\n            let textSize = TextMeasurementService.measureSvgTextWidth(BulletChart.getTextProperties(barData.categoryLabel, this.model.bulletChartSettings.labelSettings.fontSize));\r\n            if (textSize > BulletChart.BiggestLabelWidth)\r\n                return barData.x + BulletChart.MaxLabelWidth + ((bar) ? bar.start : 0);\r\n            return barData.x + BulletChart.BiggestLabelWidth + BulletChart.BarMargin + ((bar) ? bar.start : 0);\r\n        }\r\n\r\n        private calculateLabelHeight(barData: BarData, bar?: BarRect, reversed?: boolean) {\r\n            if (reversed)\r\n                return BulletChart.StartMarginVertical + ((bar) ? bar.end : 0);\r\n\r\n            let textSize = TextMeasurementService.measureSvgTextHeight(BulletChart.getTextProperties(barData.categoryLabel, this.model.bulletChartSettings.labelSettings.fontSize));\r\n            if (textSize > BulletChart.BiggestLabelHeight)\r\n                return barData.y + BulletChart.MaxLabelHeight + ((bar) ? bar.end : 0);\r\n            return barData.y + textSize + BulletChart.BarMargin + ((bar) ? bar.end : 0);\r\n        }\r\n\r\n        private setUpBulletsHorizontally(bulletBody: D3.Selection, model: BulletChartModel, reveresed: boolean) {\r\n            let bars = model.bars;\r\n            let rects = model.barRects;\r\n            let valueRects = model.valueRects;\r\n            let targetValues = model.targetValues;\r\n            let barSelection = this.labelGraphicsContext.selectAll('text').data(bars, (d: BarData) => d.key);\r\n            let rectSelection = this.bulletGraphicsContext.selectAll('rect.range').data(rects, (d: BarRect) => d.key);\r\n\r\n            // Draw bullets\r\n            let bullets = rectSelection.enter().append('rect').attr({\r\n                'x': ((d: BarRect) => { return this.calculateLabelWidth(bars[d.barIndex], d, reveresed); }),\r\n                'y': ((d: BarRect) => bars[d.barIndex].y - BulletChart.BulletSize / 2),\r\n                'width': ((d: BarRect) => d.end - d.start),\r\n                'height': BulletChart.BulletSize,\r\n            }).classed('range', true).style({\r\n                'fill': ((d: BarRect) => d.fill)\r\n            });\r\n\r\n            rectSelection.exit();\r\n\r\n            // Draw value rects\r\n            let valueSelection = this.bulletGraphicsContext.selectAll('rect').data(valueRects, (d: BarValueRect) => d.key);\r\n            valueSelection.enter().append('rect').attr({\r\n                'x': ((d: BarValueRect) => { return this.calculateLabelWidth(bars[d.barIndex], d, reveresed); }),\r\n                'y': ((d: BarValueRect) => bars[d.barIndex].y - BulletChart.BulletSize / 8),\r\n                'width': ((d: BarValueRect) => d.end - d.start),\r\n                'height': BulletChart.BulletSize * 1 / 4,\r\n            }).classed('value', true).style({\r\n                'fill': ((d: BarValueRect) => d.fill),\r\n            });\r\n\r\n            valueSelection.exit();\r\n            // Draw markers\r\n            let markerSelection = this.bulletGraphicsContext.selectAll('values').data(targetValues, (d: TargetValue) => d.key);\r\n            markerSelection.enter().append('line').attr({\r\n                'x1': ((d: TargetValue) => { return this.calculateLabelWidth(bars[d.barIndex], null, reveresed) + d.value; }),\r\n                'x2': ((d: TargetValue) => { return this.calculateLabelWidth(bars[d.barIndex], null, reveresed) + d.value; }),\r\n                'y1': ((d: TargetValue) => bars[d.barIndex].y - BulletChart.MarkerMarginHorizontal),\r\n                'y2': ((d: TargetValue) => bars[d.barIndex].y + BulletChart.MarkerMarginHorizontal),\r\n            }).style({\r\n                'stroke': ((d: TargetValue) => d.fill),\r\n                'stroke-width': 2,\r\n            });\r\n\r\n            markerSelection.enter().append('line').attr({\r\n                'x1': ((d: TargetValue) => { return this.calculateLabelWidth(bars[d.barIndex], null, reveresed) + d.value2; }),\r\n                'x2': ((d: TargetValue) => { return this.calculateLabelWidth(bars[d.barIndex], null, reveresed) + d.value2; }),\r\n                'y1': ((d: TargetValue) => bars[d.barIndex].y - BulletChart.MarkerMarginHorizontal),\r\n                'y2': ((d: TargetValue) => bars[d.barIndex].y + BulletChart.MarkerMarginHorizontal),\r\n            }).style({\r\n                'stroke': ((d: TargetValue) => d.fill),\r\n                'stroke-width': 2,\r\n                'transform': 'rotate(45deg)',\r\n                'transform-origin': '50% 50% 0',\r\n            });\r\n\r\n            markerSelection.enter().append('line').attr({\r\n                'x1': ((d: TargetValue) => { return this.calculateLabelWidth(bars[d.barIndex], null, reveresed) + d.value2; }),\r\n                'x2': ((d: TargetValue) => { return this.calculateLabelWidth(bars[d.barIndex], null, reveresed) + d.value2; }),\r\n                'y1': ((d: TargetValue) => bars[d.barIndex].y - BulletChart.MarkerMarginHorizontal),\r\n                'y2': ((d: TargetValue) => bars[d.barIndex].y + BulletChart.MarkerMarginHorizontal),\r\n            }).style({\r\n                'stroke': ((d: TargetValue) => d.fill),\r\n                'stroke-width': 2,\r\n                'transform': 'rotate(315deg)',\r\n                'transform-origin': '50% 50% 0',\r\n            });\r\n\r\n            markerSelection.exit();\r\n\r\n            // Draw axes\r\n            if (model.bulletChartSettings.axis.axis) {\r\n                // Using var instead of let since you can't pass let parameters to functions inside loops.\r\n                // needs to be changed to let when typescript 1.8 comes out.\r\n                for (var idx = 0; idx < bars.length; idx++) {\r\n                    var bar = bars[idx];\r\n                    this.bulletGraphicsContext.append(\"g\").attr({\r\n                        'transform': () => {\r\n                            let xLocation = this.calculateLabelWidth(bar, null, reveresed);\r\n                            let yLocation = bar.y + BulletChart.BulletSize / 2;\r\n\r\n                            return 'translate(' + xLocation + ',' + yLocation + ')';\r\n                        },\r\n                    }).classed(\"axis\", true).call(bar.axis.scale(bar.scale)).style({\r\n                        'fill': model.bulletChartSettings.axis.axisColor,\r\n                        'font-size': PixelConverter.fromPoint(BulletChart.AxisFontSizeInPt)\r\n                    }).selectAll('line').style({\r\n                        'stroke': model.bulletChartSettings.axis.axisColor,\r\n                    });\r\n                }\r\n            }\r\n\r\n            // Draw Labels\r\n            if (model.bulletChartSettings.labelSettings.show) {\r\n                barSelection.enter().append('text').classed(\"title\", true).attr({\r\n                    'x': ((d: BarData) => {\r\n                        if (reveresed)\r\n                            return this.bulletGraphicsContext.node<SVGElement>().getBoundingClientRect().width + BulletChart.StartMarginHorizontal;\r\n                        return d.x;\r\n                    }),\r\n                    'y': ((d: BarData) => d.y + this.baselineDelta),\r\n                    'fill': model.bulletChartSettings.labelSettings.labelColor,\r\n                    'font-size': PixelConverter.fromPoint(model.bulletChartSettings.labelSettings.fontSize),\r\n                }).text((d: BarData) => d.categoryLabel);\r\n            }\r\n\r\n            // Draw measure label\r\n            if (model.bulletChartSettings.axis.measureUnits) {\r\n                barSelection.enter().append('text').attr({\r\n                    'x': ((d: BarData) => {\r\n                        if (reveresed)\r\n                            return this.bulletGraphicsContext.node<SVGElement>().getBoundingClientRect().width - BulletChart.StartMarginHorizontal + BulletChart.SubtitleMargin;\r\n                        return d.x - BulletChart.SubtitleMargin;\r\n                    }),\r\n                    'y': ((d: BarData) => d.y + BulletChart.BulletSize),\r\n                    'fill': model.bulletChartSettings.axis.unitsColor,\r\n                    'font-size': PixelConverter.fromPoint(BulletChart.DefaultSubtitleFontSizeInPt)\r\n                }).text(model.bulletChartSettings.axis.measureUnits);\r\n            }\r\n\r\n            if (this.interactivityService) {\r\n                let behaviorOptions: BulletBehaviorOptions = {\r\n                    rects: bullets,\r\n                    valueRects: valueSelection,\r\n                    clearCatcher: this.clearCatcher,\r\n                    interactivityService: this.interactivityService,\r\n                    bulletChartSettings: this.model.bulletChartSettings,\r\n                    hasHighlights: false,\r\n                };\r\n\r\n                let targetCollection = this.model.barRects.concat(this.model.valueRects);\r\n                this.interactivityService.bind(targetCollection, this.behavior, behaviorOptions);\r\n            }\r\n\r\n            barSelection.exit();\r\n            TooltipManager.addTooltip(valueSelection, (tooltipEvent: TooltipEvent) => tooltipEvent.data.tooltipInfo, true);\r\n            TooltipManager.addTooltip(rectSelection, (tooltipEvent: TooltipEvent) => tooltipEvent.data.tooltipInfo, true);\r\n        }\r\n\r\n        private setUpBulletsVertically(bulletBody: D3.Selection, model: BulletChartModel, reveresed: boolean) {\r\n            let bars = model.bars;\r\n            let rects = model.barRects;\r\n            let valueRects = model.valueRects;\r\n            let targetValues = model.targetValues;\r\n            let barSelection = this.labelGraphicsContext.selectAll('text').data(bars, (d: BarData) => d.key);\r\n            let rectSelection = this.bulletGraphicsContext.selectAll('rect.range').data(rects, (d: BarRect) => d.key);\r\n\r\n            // Draw bullets\r\n            let bullets = rectSelection.enter().append('rect').attr({\r\n                'x': ((d: BarRect) => bars[d.barIndex].x),\r\n                'y': ((d: BarRect) => { return this.calculateLabelHeight(bars[d.barIndex], d, reveresed); }),\r\n                'height': ((d: BarRect) => d.start - d.end),\r\n                'width': BulletChart.BulletSize,\r\n            }).classed('range', true).style({\r\n                'fill': ((d: BarRect) => d.fill)\r\n            });\r\n\r\n            rectSelection.exit();\r\n\r\n            // Draw value rects\r\n            let valueSelection = this.bulletGraphicsContext.selectAll('rect').data(valueRects, (d: BarValueRect) => d.key);\r\n            valueSelection.enter().append('rect').attr({\r\n                'x': ((d: BarValueRect) => bars[d.barIndex].x + BulletChart.BulletSize / 3),\r\n                'y': ((d: BarValueRect) => { return this.calculateLabelHeight(bars[d.barIndex], d, reveresed); }),\r\n                'height': ((d: BarValueRect) => d.start - d.end),\r\n                'width': BulletChart.BulletSize * 1 / 4,\r\n            }).classed('value', true).style({\r\n                'fill': ((d: BarValueRect) => d.fill),\r\n            });\r\n\r\n            valueSelection.exit();\r\n\r\n            // Draw markers\r\n            let markerSelection = this.bulletGraphicsContext.selectAll('values').data(targetValues, (d: TargetValue) => d.key);\r\n            markerSelection.enter().append('line').attr({\r\n                'x2': ((d: TargetValue) => bars[d.barIndex].x + (BulletChart.MarkerMarginVertical * 3)),\r\n                'x1': ((d: TargetValue) => bars[d.barIndex].x + BulletChart.MarkerMarginVertical),\r\n                'y2': ((d: TargetValue) => { return this.calculateLabelHeight(bars[d.barIndex], null, reveresed) + d.value; }),\r\n                'y1': ((d: TargetValue) => { return this.calculateLabelHeight(bars[d.barIndex], null, reveresed) + d.value; }),\r\n            }).style({\r\n                'stroke': ((d: TargetValue) => d.fill),\r\n                'stroke-width': 2,\r\n            });\r\n\r\n            markerSelection.enter().append('line').attr({\r\n                'y1': ((d: TargetValue) => { return this.calculateLabelHeight(bars[d.barIndex], null, reveresed) + d.value2; }),\r\n                'y2': ((d: TargetValue) => { return this.calculateLabelHeight(bars[d.barIndex], null, reveresed) + d.value2; }),\r\n                'x1': ((d: TargetValue) => bars[d.barIndex].x + BulletChart.MarkerMarginVertical),\r\n                'x2': ((d: TargetValue) => bars[d.barIndex].x + (BulletChart.MarkerMarginVertical * 3)),\r\n            }).style({\r\n                'stroke': ((d: TargetValue) => d.fill),\r\n                'stroke-width': 2,\r\n                'transform': 'rotate(45deg)',\r\n                'transform-origin': '50% 50% 0',\r\n            });\r\n\r\n            markerSelection.enter().append('line').attr({\r\n                'y1': ((d: TargetValue) => { return this.calculateLabelHeight(bars[d.barIndex], null, reveresed) + d.value2; }),\r\n                'y2': ((d: TargetValue) => { return this.calculateLabelHeight(bars[d.barIndex], null, reveresed) + d.value2; }),\r\n                'x1': ((d: TargetValue) => bars[d.barIndex].x + BulletChart.MarkerMarginVertical),\r\n                'x2': ((d: TargetValue) => bars[d.barIndex].x + (BulletChart.MarkerMarginVertical * 3)),\r\n            }).style({\r\n                'stroke': ((d: TargetValue) => d.fill),\r\n                'stroke-width': 2,\r\n                'transform': 'rotate(315deg)',\r\n                'transform-origin': '50% 50% 0',\r\n            });\r\n\r\n            markerSelection.exit();\r\n\r\n            // // Draw axes\r\n            if (model.bulletChartSettings.axis.axis) {\r\n\r\n                // Using var instead of let since you can't pass let parameters to functions inside loops.\r\n                // needs to be changed to let when typescript 1.8 comes out.\r\n                for (var idx = 0; idx < bars.length; idx++) {\r\n                    var bar = bars[idx];\r\n                    this.bulletGraphicsContext.append(\"g\").attr({\r\n                        'transform': () => {\r\n                            let xLocation = bar.x;\r\n                            let yLocation = this.calculateLabelHeight(bar, null, reveresed);\r\n                            // let yLocation = bar.y + BulletChart.BulletSize / 2;\r\n                            return 'translate(' + xLocation + ',' + yLocation + ')';\r\n                        },\r\n                    }).classed(\"axis\", true).call(bar.axis.scale(bar.scale)).style({\r\n                        'fill': model.bulletChartSettings.axis.axisColor,\r\n                        'font-size': PixelConverter.fromPoint(BulletChart.AxisFontSizeInPt),\r\n                    }).selectAll('line').style({\r\n                        'stroke': model.bulletChartSettings.axis.axisColor,\r\n                    });\r\n                }\r\n            }\r\n\r\n            // Draw Labels\r\n            if (model.bulletChartSettings.labelSettings.show) {\r\n                barSelection.enter().append('text').classed(\"title\", true).attr({\r\n                    'x': ((d: BarData) => d.x),\r\n                    'y': ((d: BarData) => {\r\n                        if (reveresed)\r\n                            return this.bulletGraphicsContext.node<SVGElement>().getBoundingClientRect().height + BulletChart.StartMarginVertical + BulletChart.BulletSize;\r\n                        return d.y + TextMeasurementService.estimateSvgTextHeight(BulletChart.getTextProperties(d.categoryLabel,\r\n                            model.bulletChartSettings.labelSettings.fontSize)) / 2;\r\n                    }),\r\n                    'fill': model.bulletChartSettings.labelSettings.labelColor,\r\n                    'font-size': PixelConverter.fromPoint(model.bulletChartSettings.labelSettings.fontSize),\r\n                }).text((d: BarData) => d.categoryLabel);\r\n            }\r\n\r\n            // Draw measure label\r\n            if (model.bulletChartSettings.axis.measureUnits) {\r\n                barSelection.enter().append('text').attr({\r\n                    'x': ((d: BarData) => d.x + BulletChart.BulletSize),\r\n                    'y': ((d: BarData) => {\r\n                        if (reveresed)\r\n                            return this.bulletGraphicsContext.node<SVGElement>().getBoundingClientRect().height + BulletChart.StartMarginVertical + BulletChart.SubtitleMargin;\r\n                        return d.y + BulletChart.StartMarginVertical + BulletChart.SubtitleMargin;\r\n                    }),\r\n                    'fill': model.bulletChartSettings.axis.unitsColor,\r\n                    'font-size': PixelConverter.fromPoint(BulletChart.DefaultSubtitleFontSizeInPt)\r\n                }).text(model.bulletChartSettings.axis.measureUnits);\r\n            }\r\n\r\n            if (this.interactivityService) {\r\n                let behaviorOptions: BulletBehaviorOptions = {\r\n                    rects: bullets,\r\n                    valueRects: valueSelection,\r\n                    clearCatcher: this.clearCatcher,\r\n                    interactivityService: this.interactivityService,\r\n                    bulletChartSettings: this.model.bulletChartSettings,\r\n                    hasHighlights: false,\r\n                };\r\n\r\n                let targetCollection = this.model.barRects.concat(this.model.valueRects);\r\n                this.interactivityService.bind(targetCollection, this.behavior, behaviorOptions);\r\n            }\r\n\r\n            barSelection.exit();\r\n            TooltipManager.addTooltip(valueSelection, (tooltipEvent: TooltipEvent) => tooltipEvent.data.tooltipInfo, true);\r\n            TooltipManager.addTooltip(rectSelection, (tooltipEvent: TooltipEvent) => tooltipEvent.data.tooltipInfo, true);\r\n        }\r\n\r\n        /*About to remove your visual, do clean up here */\r\n        public destroy() { }\r\n\r\n        public enumerateObjectInstances(options: EnumerateVisualObjectInstancesOptions): VisualObjectInstance[] {\r\n            let data = this.model;\r\n            if (!data) {\r\n                return;\r\n            }\r\n\r\n            let objectName = options.objectName;\r\n            switch (objectName) {\r\n                case 'labels':\r\n                    return this.enumerateLabels(data);\r\n                case 'values':\r\n                    return this.enumerateValues(data);\r\n                case 'orientation':\r\n                    return this.enumerateOrientation(data);\r\n                case 'axis':\r\n                    return this.enumerateAxis(data);\r\n                case 'colors':\r\n                    return this.enumerateColors(data);\r\n            }\r\n        }\r\n\r\n        private enumerateLabels(data: BulletChartModel): VisualObjectInstance[] {\r\n            return [{\r\n                selector: null,\r\n                objectName: 'labels',\r\n                properties: {\r\n                    show: this.model.bulletChartSettings.labelSettings.show,\r\n                    labelColor: this.model.bulletChartSettings.labelSettings.labelColor,\r\n                    fontSize: this.model.bulletChartSettings.labelSettings.fontSize,\r\n                }\r\n            }];\r\n        }\r\n\r\n        private enumerateValues(data: BulletChartModel): VisualObjectInstance[] {\r\n            return [{\r\n                selector: null,\r\n                objectName: 'values',\r\n                properties: {\r\n                    targetValue: this.model.bulletChartSettings.values.targetValue,\r\n                    targetValue2: this.model.bulletChartSettings.values.targetValue2,\r\n                    minimumPercent: this.model.bulletChartSettings.values.minimumPercent,\r\n                    needsImprovementPercent: this.model.bulletChartSettings.values.needsImprovementPercent,\r\n                    satisfactoryPercent: this.model.bulletChartSettings.values.satisfactoryPercent,\r\n                    goodPercent: this.model.bulletChartSettings.values.goodPercent,\r\n                    veryGoodPercent: this.model.bulletChartSettings.values.veryGoodPercent,\r\n                    maximumPercent: this.model.bulletChartSettings.values.maximumPercent,\r\n                }\r\n            }];\r\n        }\r\n\r\n        private enumerateOrientation(data: BulletChartModel): VisualObjectInstance[] {\r\n            return [{\r\n                selector: null,\r\n                objectName: 'orientation',\r\n                properties: {\r\n                    orientation: this.model.bulletChartSettings.orientation.orientation\r\n                }\r\n            }];\r\n        }\r\n\r\n        private enumerateAxis(data: BulletChartModel): VisualObjectInstance[] {\r\n            return [{\r\n                selector: null,\r\n                objectName: 'axis',\r\n                properties: {\r\n                    axis: this.model.bulletChartSettings.axis.axis,\r\n                    axisColor: this.model.bulletChartSettings.axis.axisColor,\r\n                    measureUnits: this.model.bulletChartSettings.axis.measureUnits,\r\n                    unitsColor: this.model.bulletChartSettings.axis.unitsColor,\r\n                }\r\n            }];\r\n        }\r\n\r\n        private enumerateColors(data: BulletChartModel): VisualObjectInstance[] {\r\n            return [{\r\n                selector: null,\r\n                objectName: 'colors',\r\n                properties: {\r\n                    badColor: this.model.bulletChartSettings.colors.badColor,\r\n                    needsImprovementColor: this.model.bulletChartSettings.colors.needsImprovementColor,\r\n                    satisfactoryColor: this.model.bulletChartSettings.colors.satisfactoryColor,\r\n                    goodColor: this.model.bulletChartSettings.colors.goodColor,\r\n                    veryGoodColor: this.model.bulletChartSettings.colors.veryGoodColor,\r\n                    bulletColor: this.model.bulletChartSettings.colors.bulletColor,\r\n                }\r\n            }];\r\n        }\r\n    }\r\n\r\n    //TODO: This module should be removed once TextMeasruementService exports the \"estimateSvgTextBaselineDelta\" function.\r\n    export module TextMeasurementHelper {\r\n\r\n        interface CanvasContext {\r\n            font: string;\r\n            measureText(text: string): { width: number };\r\n        }\r\n\r\n        interface CanvasElement extends HTMLElement {\r\n            getContext(name: string);\r\n        }\r\n\r\n        let spanElement: JQuery;\r\n        let svgTextElement: D3.Selection;\r\n        let canvasCtx: CanvasContext;\r\n\r\n        export function estimateSvgTextBaselineDelta(textProperties: TextProperties): number {\r\n            let rect = estimateSvgTextRect(textProperties);\r\n            return rect.y + rect.height;\r\n        }\r\n\r\n        function ensureDOM(): void {\r\n            if (spanElement)\r\n                return;\r\n\r\n            spanElement = $('<span/>');\r\n            $('body').append(spanElement);\r\n            //The style hides the svg element from the canvas, preventing canvas from scrolling down to show svg black square.\r\n            svgTextElement = d3.select($('body').get(0))\r\n                .append('svg')\r\n                .style({\r\n                    'height': '0px',\r\n                    'width': '0px',\r\n                    'position': 'absolute'\r\n                })\r\n                .append('text');\r\n            canvasCtx = (<CanvasElement>$('<canvas/>').get(0)).getContext(\"2d\");\r\n        }\r\n\r\n        function measureSvgTextRect(textProperties: TextProperties): SVGRect {\r\n            debug.assertValue(textProperties, 'textProperties');\r\n\r\n            ensureDOM();\r\n\r\n            svgTextElement.style(null);\r\n            svgTextElement\r\n                .text(textProperties.text)\r\n                .attr({\r\n                    'visibility': 'hidden',\r\n                    'font-family': textProperties.fontFamily,\r\n                    'font-size': textProperties.fontSize,\r\n                    'font-weight': textProperties.fontWeight,\r\n                    'font-style': textProperties.fontStyle,\r\n                    'white-space': textProperties.whiteSpace || 'nowrap'\r\n                });\r\n\r\n            // We're expecting the browser to give a synchronous measurement here\r\n            // We're using SVGTextElement because it works across all browsers \r\n            return svgTextElement.node<SVGTextElement>().getBBox();\r\n        }\r\n\r\n        function estimateSvgTextRect(textProperties: TextProperties): SVGRect {\r\n            debug.assertValue(textProperties, 'textProperties');\r\n\r\n            let estimatedTextProperties: TextProperties = {\r\n                fontFamily: textProperties.fontFamily,\r\n                fontSize: textProperties.fontSize,\r\n                text: \"M\",\r\n            };\r\n\r\n            let rect = measureSvgTextRect(estimatedTextProperties);\r\n\r\n            return rect;\r\n        }\r\n    }\r\n\r\n    export interface BulletBehaviorOptions {\r\n        rects: D3.Selection;\r\n        valueRects: D3.Selection;\r\n        clearCatcher: D3.Selection;\r\n        interactivityService: IInteractivityService;\r\n        bulletChartSettings: BulletChartSettings;\r\n        hasHighlights: boolean;\r\n    }\r\n\r\n    export class BulletWebBehavior implements IInteractiveBehavior {\r\n        private options: BulletBehaviorOptions;\r\n\r\n        public bindEvents(options: BulletBehaviorOptions, selectionHandler: ISelectionHandler) {\r\n            this.options = options;\r\n            let clearCatcher = options.clearCatcher;\r\n\r\n            options.valueRects.on('click', (d: BarValueRect, i: number) => {\r\n                d3.event.stopPropagation();\r\n                selectionHandler.handleSelection(d, d3.event.ctrlKey);\r\n            });\r\n\r\n            options.rects.on('click', (d: BarRect, i: number) => {\r\n                d3.event.stopPropagation();\r\n                selectionHandler.handleSelection(d, d3.event.ctrlKey);\r\n            });\r\n\r\n            clearCatcher.on('click', () => {\r\n                selectionHandler.handleClearSelection();\r\n            });\r\n        }\r\n\r\n        public renderSelection(hasSelection: boolean) {\r\n            let options = this.options;\r\n\r\n            options.valueRects.style(\"opacity\", (d: BarValueRect) => {\r\n                return hasSelection ? (d.selected ? '1' : '0.4') : '1';\r\n            });\r\n\r\n            options.rects.style(\"opacity\", (d: BarRect) => {\r\n                return hasSelection ? (d.selected ? '1' : '0.4') : '1';\r\n            });\r\n        }\r\n    }\r\n}","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *\r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *\r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\n// Word cloud layout by Jason Davies, https://www.jasondavies.com/wordcloud/ https://github.com/jasondavies/d3-cloud\r\n// Algorithm due to Jonathan Feinberg, http://static.mrfeinberg.com/bv_ch03.pdf\r\n\r\nmodule powerbi.visuals.samples {\r\n    import ValueFormatter = powerbi.visuals.valueFormatter;\r\n    import getAnimationDuration = AnimatorCommon.GetAnimationDuration;\r\n    import ClassAndSelector = jsCommon.CssConstants.ClassAndSelector;\r\n\r\n    type D3Element =\r\n        D3.UpdateSelection\r\n        | D3.Selection\r\n        | D3.Selectors\r\n        | D3.Transition.Transition;\r\n\r\n    export enum WordCloudScaleType {\r\n        logn,\r\n        sqrt,\r\n        value\r\n    };\r\n\r\n    export interface WordCloudText {\r\n        text: string;\r\n        count: number;\r\n        index: number;\r\n        selectionId: SelectionId;\r\n        color: string;\r\n    }\r\n\r\n    export interface WordCloudDataPoint extends IPoint {\r\n        text: string;\r\n        xOff: number;\r\n        yOff: number;\r\n        rotate?: number;\r\n        size: number;\r\n        padding: number;\r\n        width: number;\r\n        height: number;\r\n        sprite?: number[];\r\n        x0: number;\r\n        y0: number;\r\n        x1: number;\r\n        y1: number;\r\n        color: string;\r\n        selectionId: SelectionId;\r\n        wordIndex: number;\r\n    }\r\n\r\n    export interface WordCloudData {\r\n        settings: WordCloudSettings;\r\n        texts: WordCloudText[];\r\n    }\r\n\r\n    export interface WordCloudDataView {\r\n        data: WordCloudDataPoint[];\r\n        leftBorder: IPoint;\r\n        rightBorder: IPoint;\r\n    }\r\n\r\n    export interface WordCloudConstructorOptions {\r\n        svg?: D3.Selection;\r\n        animator?: IGenericAnimator;\r\n        margin?: IMargin;\r\n    }\r\n\r\n    export interface WordCloudSettings {\r\n        minFontSize: number;\r\n        maxFontSize: number;\r\n        minAngle?: number;\r\n        maxAngle?: number;\r\n        maxNumberOfOrientations?: number;\r\n        valueFormatter?: IValueFormatter;\r\n        isRotateText: boolean;\r\n        isBrokenText: boolean;\r\n        isRemoveStopWords: boolean;\r\n        stopWords: string;\r\n        isDefaultStopWords: boolean;\r\n        stopWordsArray: string[];\r\n        maxNumberOfWords: number;\r\n    }\r\n\r\n    class VisualLayout {\r\n        private marginValue: IMargin;\r\n        private viewportValue: IViewport;\r\n        private viewportInValue: IViewport;\r\n\r\n        public defaultMargin: IMargin;\r\n        public defaultViewport: IViewport;\r\n\r\n        constructor(defaultViewport?: IViewport, defaultMargin?: IMargin) {\r\n            this.defaultViewport = defaultViewport || { width: 0, height: 0 };\r\n            this.defaultMargin = defaultMargin || { top: 0, bottom: 0, right: 0, left: 0 };\r\n        }\r\n\r\n        public get margin(): IMargin {\r\n            return this.marginValue || (this.margin = this.defaultMargin);\r\n        }\r\n\r\n        public set margin(value: IMargin) {\r\n            this.marginValue = VisualLayout.restrictToMinMax(value);\r\n            this.update();\r\n        }\r\n\r\n        public get viewport(): IViewport {\r\n            return this.viewportValue || (this.viewportValue = this.defaultViewport);\r\n        }\r\n\r\n        public set viewport(value: IViewport) {\r\n            this.viewportValue = VisualLayout.restrictToMinMax(value);\r\n            this.update();\r\n        }\r\n\r\n        public get viewportIn(): IViewport {\r\n            return this.viewportInValue || this.viewport;\r\n        }\r\n\r\n        public get viewportInIsZero(): boolean {\r\n            return this.viewportIn.width === 0 || this.viewportIn.height === 0;\r\n        }\r\n\r\n        private update(): void {\r\n            this.viewportInValue = VisualLayout.restrictToMinMax({\r\n                width: this.viewport.width - (this.margin.left + this.margin.right),\r\n                height: this.viewport.height - (this.margin.top + this.margin.bottom)\r\n            });\r\n        }\r\n\r\n        private static restrictToMinMax<T>(value: T): T {\r\n            let result = $.extend({}, value);\r\n            d3.keys(value).forEach(x => result[x] = Math.max(0, value[x]));\r\n            return result;\r\n        }\r\n    }\r\n\r\n    export class WordCloud implements IVisual {\r\n        private static ClassName: string = \"wordCloud\";\r\n\r\n        private static Properties: any = {\r\n            general: {\r\n                formatString: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"general\",\r\n                    propertyName: \"formatString\"\r\n                },\r\n                maxNumberOfWords: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"general\",\r\n                    propertyName: \"maxNumberOfWords\"\r\n                },\r\n                minFontSize: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"general\",\r\n                    propertyName: \"minFontSize\"\r\n                },\r\n                maxFontSize: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"general\",\r\n                    propertyName: \"maxFontSize\"\r\n                },\r\n                isBrokenText: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"general\",\r\n                    propertyName: \"isBrokenText\"\r\n                },\r\n            },\r\n            dataPoint: {\r\n                fill: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"dataPoint\",\r\n                    propertyName: \"fill\"\r\n                }\r\n            },\r\n            stopWords: {\r\n                show: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"stopWords\",\r\n                    propertyName: \"show\"\r\n                },\r\n                isDefaultStopWords: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"stopWords\",\r\n                    propertyName: \"isDefaultStopWords\"\r\n                },\r\n                words: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"stopWords\",\r\n                    propertyName: \"words\"\r\n                },\r\n            },\r\n            rotateText: {\r\n                show: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"rotateText\",\r\n                    propertyName: \"show\"\r\n                },\r\n                minAngle: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"rotateText\",\r\n                    propertyName: \"minAngle\"\r\n                },\r\n                maxAngle: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"rotateText\",\r\n                    propertyName: \"maxAngle\"\r\n                },\r\n                maxNumberOfOrientations: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"rotateText\",\r\n                    propertyName: \"maxNumberOfOrientations\"\r\n                }\r\n            }\r\n        };\r\n\r\n        private static Words: ClassAndSelector = {\r\n            \"class\": \"words\",\r\n            selector: \".words\"\r\n        };\r\n\r\n        private static Word: ClassAndSelector = {\r\n            \"class\": \"word\",\r\n            selector: \".word\"\r\n        };\r\n\r\n        private static Size: string = \"px\";\r\n        private static StopWordsDelemiter: string = \" \";\r\n\r\n        private static Radians: number = Math.PI / 180;\r\n\r\n        private static MinAngle: number = -180;\r\n        private static MaxAngle: number = 180;\r\n\r\n        private static MaxNumberOfWords: number = 2500;\r\n\r\n        private static MinOpacity: number = 0.2;\r\n        private static MaxOpacity: number = 1;\r\n\r\n        public static capabilities: VisualCapabilities = {\r\n            dataRoles: [{\r\n                name: \"Category\",\r\n                kind: VisualDataRoleKind.Grouping,\r\n                displayName: \"Category\"\r\n            }, {\r\n                    name: \"Values\",\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: \"Values\"\r\n                }],\r\n            dataViewMappings: [{\r\n                conditions: [{\r\n                    \"Category\": {\r\n                        min: 1,\r\n                        max: 1\r\n                    },\r\n                    \"Values\": {\r\n                        min: 0,\r\n                        max: 1\r\n                    }\r\n                }],\r\n                categorical: {\r\n                    categories: {\r\n                        for: { in: \"Category\" },\r\n                        dataReductionAlgorithm: { top: { count: WordCloud.MaxNumberOfWords } }\r\n                    },\r\n                    values: {\r\n                        for: { in: \"Values\" }\r\n                    }\r\n                }\r\n            }],\r\n            sorting: {\r\n                implicit: {\r\n                    clauses: [{\r\n                        role: \"Values\",\r\n                        direction: 2 /*SortDirection.Descending*/ //Constant SortDirection.Descending currently is not supported on the msit\r\n                    }]\r\n                }\r\n            },\r\n            objects: {\r\n                general: {\r\n                    displayName: \"General\",\r\n                    properties: {\r\n                        formatString: {\r\n                            type: {\r\n                                formatting: {\r\n                                    formatString: true\r\n                                }\r\n                            }\r\n                        },\r\n                        maxNumberOfWords: {\r\n                            displayName: \"Max number of words\",\r\n                            type: { numeric: true }\r\n                        },\r\n                        minFontSize: {\r\n                            displayName: \"Min Font\",\r\n                            type: { numeric: true }\r\n                        },\r\n                        maxFontSize: {\r\n                            displayName: \"Max Font\",\r\n                            type: { numeric: true }\r\n                        },\r\n                        isBrokenText: {\r\n                            displayName: \"Word-breaking\",\r\n                            type: { bool: true }\r\n                        },\r\n                        isRemoveStopWords: {\r\n                            displayName: \"Stop Words\",\r\n                            type: { bool: true }\r\n                        }\r\n                    }\r\n                },\r\n                dataPoint: {\r\n                    displayName: \"Data colors\",\r\n                    properties: {\r\n                        fill: {\r\n                            displayName: \"Fill\",\r\n                            type: { fill: { solid: { color: true } } }\r\n                        }\r\n                    }\r\n                },\r\n                stopWords: {\r\n                    displayName: \"Stop Words\",\r\n                    properties: {\r\n                        show: {\r\n                            displayName: \"Show\",\r\n                            type: { bool: true }\r\n                        },\r\n                        isDefaultStopWords: {\r\n                            displayName: \"Default Stop Words\",\r\n                            type: { bool: true }\r\n                        },\r\n                        words: {\r\n                            displayName: \"Words\",\r\n                            type: { text: true }\r\n                        }\r\n                    }\r\n                },\r\n                rotateText: {\r\n                    displayName: \"Rotate Text\",\r\n                    properties: {\r\n                        show: {\r\n                            displayName: \"Show\",\r\n                            type: { bool: true }\r\n                        },\r\n                        minAngle: {\r\n                            displayName: \"Min Angle\",\r\n                            type: { numeric: true }\r\n                        },\r\n                        maxAngle: {\r\n                            displayName: \"Max Angle\",\r\n                            type: { numeric: true }\r\n                        },\r\n                        maxNumberOfOrientations: {\r\n                            displayName: \"Max number of orientations\",\r\n                            type: { numeric: true }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        private static Punctuation: string[] = [\r\n            \"!\", \".\", \":\", \"'\", \";\", \",\", \"!\",\r\n            \"@\", \"#\", \"$\", \"%\", \"^\", \"&\", \"*\",\r\n            \"(\", \")\", \"[\", \"]\", \"\\\"\", \"\\\\\", \"/\",\r\n            \"-\", \"_\", \"+\", \"=\"\r\n        ];\r\n\r\n        private static StopWords: string[] = [\r\n            \"a\", \"able\", \"about\", \"across\", \"after\", \"all\", \"almost\", \"also\", \"am\", \"among\", \"an\",\r\n            \"and\", \"any\", \"are\", \"as\", \"at\", \"be\", \"because\", \"been\", \"but\", \"by\", \"can\", \"cannot\",\r\n            \"could\", \"did\", \"do\", \"does\", \"either\", \"else\", \"ever\", \"every\", \"for\", \"from\", \"get\",\r\n            \"got\", \"had\", \"has\", \"have\", \"he\", \"her\", \"hers\", \"him\", \"his\", \"how\", \"however\", \"i\",\r\n            \"if\", \"in\", \"into\", \"is\", \"it\", \"its\", \"just\", \"least\", \"let\", \"like\", \"likely\", \"may\",\r\n            \"me\", \"might\", \"most\", \"must\", \"my\", \"neither\", \"no\", \"nor\", \"not\", \"of\", \"off\", \"often\",\r\n            \"on\", \"only\", \"or\", \"other\", \"our\", \"own\", \"rather\", \"said\", \"say\", \"says\", \"she\", \"should\",\r\n            \"since\", \"so\", \"some\", \"than\", \"that\", \"the\", \"their\", \"them\", \"then\", \"there\", \"these\",\r\n            \"they\", \"this\", \"tis\", \"to\", \"too\", \"twas\", \"us\", \"wants\", \"was\", \"we\", \"were\", \"what\",\r\n            \"when\", \"where\", \"which\", \"while\", \"who\", \"whom\", \"why\", \"will\", \"with\", \"would\", \"yet\",\r\n            \"you\", \"your\"\r\n        ];\r\n\r\n        private static DefaultSettings: WordCloudSettings = {\r\n            minFontSize: 20,\r\n            maxFontSize: 100,\r\n            minAngle: -60,\r\n            maxAngle: 90,\r\n            maxNumberOfOrientations: 2,\r\n            isRotateText: false,\r\n            isBrokenText: true,\r\n            isRemoveStopWords: false,\r\n            stopWordsArray: [],\r\n            stopWords: undefined,\r\n            isDefaultStopWords: false,\r\n            maxNumberOfWords: 200\r\n        };\r\n\r\n        private static RenderDelay: number = 50;\r\n\r\n        private static DefaultMargin: IMargin = {\r\n            top: 10,\r\n            right: 10,\r\n            bottom: 10,\r\n            left: 10\r\n        };\r\n\r\n        private settings: WordCloudSettings;\r\n        private wordCloudTexts: WordCloudText[];\r\n        private wordCloudDataView: WordCloudDataView;\r\n        private data: WordCloudData;\r\n        private dataBeforeRender: WordCloudDataPoint[];\r\n\r\n        private durationAnimations: number = 500;\r\n\r\n        private specialViewport: IViewport;\r\n\r\n        private fakeViewport: IViewport = {\r\n            width: 1500,\r\n            height: 1000\r\n        };\r\n\r\n        private canvasViewport: IViewport = {\r\n            width: 128,\r\n            height: 2048\r\n        };\r\n\r\n        public static colors: IDataColorPalette;\r\n        private root: D3.Selection;\r\n        private svg: D3.Selection;\r\n        private main: D3.Selection;\r\n        private wordsContainerSelection: D3.Selection;\r\n        private wordsSelection: D3.UpdateSelection;\r\n\r\n        private canvas: HTMLCanvasElement;\r\n\r\n        private fontFamily: string;\r\n\r\n        private animator: IGenericAnimator;\r\n\r\n        private layout: VisualLayout;\r\n\r\n        private hostService: IVisualHostServices;\r\n        private selectionManager: utility.SelectionManager;\r\n\r\n        private visualUpdateOptions: VisualUpdateOptions;\r\n\r\n        constructor(options?: WordCloudConstructorOptions) {\r\n            if (options) {\r\n                this.svg = options.svg || this.svg;\r\n                this.layout = new VisualLayout(null, options.margin || WordCloud.DefaultMargin);\r\n\r\n                if (options.animator)\r\n                    this.animator = options.animator;\r\n            }\r\n        }\r\n\r\n        public init(options: VisualInitOptions): void {\r\n            if (this.svg)\r\n                this.root = this.svg;\r\n            else\r\n                this.root = d3.select(options.element.get(0)).append(\"svg\");\r\n\r\n            WordCloud.colors = options.style.colorPalette.dataColors;\r\n            this.hostService = options.host;\r\n            this.selectionManager = new utility.SelectionManager({ hostServices: this.hostService });\r\n\r\n            if (!this.layout)\r\n                this.layout = new VisualLayout(null, WordCloud.DefaultMargin);\r\n\r\n            this.root.classed(WordCloud.ClassName, true);\r\n\r\n            this.root.on(\"click\", () => {\r\n                this.selectionManager.clear();\r\n                this.setSelection(this.wordsSelection);\r\n            });\r\n\r\n            this.fontFamily = this.root.style(\"font-family\");\r\n\r\n            this.main = this.root.append(\"g\");\r\n\r\n            this.wordsContainerSelection = this.main\r\n                .append(\"g\")\r\n                .classed(WordCloud.Words[\"class\"], true);\r\n\r\n            this.canvas = document.createElement(\"canvas\");\r\n        }\r\n\r\n        public converter(dataView: DataView): WordCloudData {\r\n            if (!dataView ||\r\n                !dataView.categorical ||\r\n                !dataView.categorical.categories ||\r\n                !dataView.categorical.categories[0] ||\r\n                !dataView.categorical.categories[0].values ||\r\n                !dataView.categorical.categories[0].values.length ||\r\n                !(dataView.categorical.categories[0].values.length > 0))\r\n                return null;\r\n\r\n            let categories: string[] = dataView.categorical.categories[0].values,\r\n                settings: WordCloudSettings = WordCloud.parseSettings(dataView, categories[0]),\r\n                frequencies: number[],\r\n                texts: WordCloudText[];\r\n            if (!settings)\r\n                return null;\r\n\r\n            if (!_.isEmpty(dataView.categorical.values) &&\r\n                !_.isEmpty(dataView.categorical.values[0]) &&\r\n                !_.isEmpty(dataView.categorical.values[0].values))\r\n                frequencies = dataView.categorical.values[0].values;\r\n\r\n            texts = categories.map((item: string, index: number) => {\r\n                let color, categoryObject = dataView.categorical.categories[0];\r\n                if (categoryObject.objects && categoryObject.objects[index])\r\n                    color = this.getColor(WordCloud.Properties.dataPoint.fill, explore.util.getRandomColor(), categoryObject.objects[index]);\r\n                else {\r\n                    if (this.wordCloudTexts && this.wordCloudTexts[index])\r\n                        color = this.wordCloudTexts[index].color;\r\n                    else\r\n                        color = explore.util.getRandomColor();\r\n                }\r\n\r\n                return <WordCloudText>{\r\n                    text: item,\r\n                    count: (frequencies && frequencies[index] && !isNaN(frequencies[index])) ? frequencies[index] : 1,\r\n                    index: index,\r\n                    selectionId: SelectionId.createWithId(dataView.categorical.categories[0].identity[index]),\r\n                    color: color,\r\n                };\r\n            });\r\n\r\n            return <WordCloudData>{\r\n                settings: settings,\r\n                texts: texts\r\n            };\r\n        }\r\n\r\n        private getColor(properties: any, defaultColor: string, objects: DataViewObjects): string {\r\n            let colorHelper: ColorHelper;\r\n\r\n            colorHelper = new ColorHelper(WordCloud.colors, properties, defaultColor);\r\n\r\n            return explore.util.hexToRgb(colorHelper.getColorForMeasure(objects, \"\"));\r\n        }\r\n\r\n        private static parseSettings(dataView: DataView, value: any): WordCloudSettings {\r\n            if (!dataView ||\r\n                !dataView.metadata ||\r\n                !dataView.metadata.columns ||\r\n                !dataView.metadata.columns[0])\r\n                return null;\r\n\r\n            let objects: DataViewObjects = dataView.metadata.objects,\r\n                valueFormatter: IValueFormatter,\r\n                minFontSize: number,\r\n                maxFontSize: number,\r\n                minAngle: number,\r\n                maxAngle: number,\r\n                maxNumberOfOrientations: number,\r\n                isRotateText: boolean = false,\r\n                isBrokenText: boolean = true,\r\n                isRemoveStopWords: boolean = true,\r\n                stopWords: string,\r\n                stopWordsArray: string[],\r\n                isDefaultStopWords: boolean = false,\r\n                maxNumberOfWords: number;\r\n\r\n            maxNumberOfWords = WordCloud.getNumberFromObjects(\r\n                objects,\r\n                WordCloud.Properties.general.maxNumberOfWords,\r\n                WordCloud.DefaultSettings.maxNumberOfWords);\r\n\r\n            minFontSize = WordCloud.getNumberFromObjects(\r\n                objects,\r\n                WordCloud.Properties.general.minFontSize,\r\n                WordCloud.DefaultSettings.minFontSize);\r\n\r\n            maxFontSize = WordCloud.getNumberFromObjects(\r\n                objects,\r\n                WordCloud.Properties.general.maxFontSize,\r\n                WordCloud.DefaultSettings.maxFontSize);\r\n\r\n            minAngle = WordCloud.getNumberFromObjects(\r\n                objects,\r\n                WordCloud.Properties.rotateText.minAngle,\r\n                WordCloud.DefaultSettings.minAngle);\r\n\r\n            maxAngle = WordCloud.getNumberFromObjects(\r\n                objects,\r\n                WordCloud.Properties.rotateText.maxAngle,\r\n                WordCloud.DefaultSettings.maxAngle);\r\n\r\n            isRotateText = DataViewObjects.getValue<boolean>(\r\n                objects,\r\n                WordCloud.Properties.rotateText.show,\r\n                WordCloud.DefaultSettings.isRotateText);\r\n\r\n            maxNumberOfOrientations = WordCloud.getNumberFromObjects(\r\n                objects,\r\n                WordCloud.Properties.rotateText.maxNumberOfOrientations,\r\n                WordCloud.DefaultSettings.maxNumberOfOrientations);\r\n\r\n            valueFormatter = ValueFormatter.create({\r\n                format: ValueFormatter.getFormatString(\r\n                    dataView.categorical.categories[0].source,\r\n                    WordCloud.Properties.general.formatString),\r\n                value: value\r\n            });\r\n\r\n            isBrokenText = DataViewObjects.getValue<boolean>(\r\n                objects,\r\n                WordCloud.Properties.general.isBrokenText,\r\n                WordCloud.DefaultSettings.isBrokenText);\r\n\r\n            isRemoveStopWords = DataViewObjects.getValue<boolean>(\r\n                objects,\r\n                WordCloud.Properties.stopWords.show,\r\n                WordCloud.DefaultSettings.isRemoveStopWords);\r\n\r\n            stopWords = DataViewObjects.getValue(\r\n                objects,\r\n                WordCloud.Properties.stopWords.words,\r\n                WordCloud.DefaultSettings.stopWords);\r\n\r\n            if (typeof stopWords === \"string\")\r\n                stopWordsArray = stopWords.split(WordCloud.StopWordsDelemiter);\r\n            else\r\n                stopWordsArray = WordCloud.DefaultSettings.stopWordsArray;\r\n\r\n            isDefaultStopWords = DataViewObjects.getValue<boolean>(\r\n                objects,\r\n                WordCloud.Properties.stopWords.isDefaultStopWords,\r\n                WordCloud.DefaultSettings.isDefaultStopWords);\r\n\r\n            return {\r\n                minFontSize: minFontSize,\r\n                maxFontSize: maxFontSize,\r\n                minAngle: minAngle,\r\n                maxAngle: maxAngle,\r\n                maxNumberOfOrientations: maxNumberOfOrientations,\r\n                valueFormatter: valueFormatter,\r\n                isRotateText: isRotateText,\r\n                isBrokenText: isBrokenText,\r\n                isRemoveStopWords: isRemoveStopWords,\r\n                stopWords: stopWords,\r\n                stopWordsArray: stopWordsArray,\r\n                isDefaultStopWords: isDefaultStopWords,\r\n                maxNumberOfWords: maxNumberOfWords\r\n            };\r\n        }\r\n\r\n        private static getNumberFromObjects(objects: DataViewObjects, properties: any, defaultValue: number): number {\r\n            return objects ? DataViewObjects.getValue<number>(objects, properties, defaultValue) : defaultValue;\r\n        }\r\n\r\n        private parseNumber(\r\n            value: number | string,\r\n            defaultValue: number = 0,\r\n            minValue: number = -Number.MAX_VALUE,\r\n            maxValue: number = Number.MAX_VALUE): number {\r\n            let parsedValue: number = Number(value);\r\n\r\n            if (isNaN(parsedValue) || (typeof value === \"string\" && value.length === 0))\r\n                return defaultValue;\r\n\r\n            if (parsedValue < minValue)\r\n                return minValue;\r\n\r\n            if (parsedValue > maxValue)\r\n                return maxValue;\r\n\r\n            return parsedValue;\r\n        }\r\n\r\n        private computePositions(words: WordCloudDataPoint[], onPositionsComputed: (WordCloudDataView) => void): void {\r\n            let context: CanvasRenderingContext2D = this.getCanvasContext(),\r\n                surface: number[] = [],\r\n                borders: IPoint[] = null,\r\n                maxNumberOfWords: number;\r\n\r\n            if (!words || !(words.length > 0))\r\n                return null;\r\n\r\n            maxNumberOfWords = Math.abs(this.parseNumber(\r\n                this.settings.maxNumberOfWords,\r\n                WordCloud.DefaultSettings.maxNumberOfWords,\r\n                words.length * -1,\r\n                words.length));\r\n\r\n            if (words.length > maxNumberOfWords)\r\n                words = words.slice(0, maxNumberOfWords);\r\n\r\n            for (let i: number; i < (this.specialViewport.width >> 5) * this.specialViewport.height; i++) {\r\n                surface[i] = 0;\r\n            }\r\n\r\n            setTimeout(() => this.computeCycle(words, context, surface, borders, onPositionsComputed, [], 0), 0);\r\n        }\r\n\r\n        private computeCycle(\r\n            words: WordCloudDataPoint[],\r\n            context: CanvasRenderingContext2D,\r\n            surface: number[],\r\n            borders: IPoint[],\r\n            onPositionsComputed: (WordCloudDataView) => void,\r\n            wordsForDraw: WordCloudDataPoint[] = [],\r\n            index: number = 0): void {\r\n            let word: WordCloudDataPoint = words[index],\r\n                ratio: number = 1;\r\n\r\n            if (words.length <= 10)\r\n                ratio = 5;\r\n            else if (words.length <= 25)\r\n                ratio = 3;\r\n            else if (words.length <= 75)\r\n                ratio = 1.5;\r\n            else if (words.length <= 100)\r\n                ratio = 1.25;\r\n\r\n            word.x = (this.specialViewport.width / ratio * (Math.random() + 0.5)) >> 1;\r\n            word.y = (this.specialViewport.height / ratio * (Math.random() + 0.5)) >> 1;\r\n\r\n            this.generateSprites(context, word, words, index);\r\n\r\n            if (word.sprite && this.findPosition(surface, word, borders)) {\r\n                wordsForDraw.push(word);\r\n\r\n                borders = this.updateBorders(word, borders);\r\n                word.x -= this.specialViewport.width >> 1;\r\n                word.y -= this.specialViewport.height >> 1;\r\n            }\r\n\r\n            if (++index < words.length && this.root)\r\n                this.computeCycle(words, context, surface, borders, onPositionsComputed, wordsForDraw, index);\r\n            else {\r\n                onPositionsComputed({\r\n                    data: wordsForDraw,\r\n                    leftBorder: borders && borders[0],\r\n                    rightBorder: borders && borders[1]\r\n                });\r\n            }\r\n        }\r\n\r\n        private updateBorders(word: WordCloudDataPoint, borders: IPoint[]): IPoint[] {\r\n            if (borders && borders.length === 2) {\r\n                let leftBorder: IPoint = borders[0],\r\n                    rightBorder: IPoint = borders[1];\r\n\r\n                if (word.x + word.x0 < leftBorder.x)\r\n                    leftBorder.x = word.x + word.x0;\r\n\r\n                if (word.y + word.y0 < leftBorder.y)\r\n                    leftBorder.y = word.y + word.y0;\r\n\r\n                if (word.x + word.x1 > rightBorder.x)\r\n                    rightBorder.x = word.x + word.x1;\r\n\r\n                if (word.y + word.y1 > rightBorder.y)\r\n                    rightBorder.y = word.y + word.y1;\r\n            } else {\r\n                borders = [\r\n                    {\r\n                        x: word.x + word.x0,\r\n                        y: word.y + word.y0\r\n                    }, {\r\n                        x: word.x + word.x1,\r\n                        y: word.y + word.y1\r\n                    }\r\n                ];\r\n            }\r\n\r\n            return borders;\r\n        }\r\n\r\n        private generateSprites(\r\n            context: CanvasRenderingContext2D,\r\n            currentWord: WordCloudDataPoint,\r\n            words: WordCloudDataPoint[],\r\n            index: number): void {\r\n            if (currentWord.sprite)\r\n                return;\r\n\r\n            context.clearRect(0, 0, this.canvasViewport.width << 5, this.canvasViewport.height);\r\n\r\n            let x: number = 0,\r\n                y: number = 0,\r\n                maxHeight: number = 0,\r\n                quantityOfWords: number = words.length,\r\n                pixels: Uint8ClampedArray,\r\n                sprite: number[] = [];\r\n\r\n            for (let i: number = index; i < quantityOfWords; i++) {\r\n                let currentWordData: WordCloudDataPoint = words[i],\r\n                    widthOfWord: number = 0,\r\n                    heightOfWord: number = 0;\r\n\r\n                context.save();\r\n                context.font = \"normal normal \" + (currentWordData.size + 1) + WordCloud.Size + \" \" + this.fontFamily;\r\n\r\n                widthOfWord = context.measureText(currentWordData.text + \"m\").width;\r\n                heightOfWord = currentWordData.size << 1;\r\n\r\n                if (currentWordData.rotate) {\r\n                    let sr: number = Math.sin(currentWordData.rotate * WordCloud.Radians),\r\n                        cr: number = Math.cos(currentWordData.rotate * WordCloud.Radians),\r\n                        widthCr: number = widthOfWord * cr,\r\n                        widthSr: number = widthOfWord * sr,\r\n                        heightCr: number = heightOfWord * cr,\r\n                        heightSr: number = heightOfWord * sr;\r\n\r\n                    widthOfWord = (Math.max(Math.abs(widthCr + heightSr), Math.abs(widthCr - heightSr)) + 31) >> 5 << 5;\r\n                    heightOfWord = Math.floor(Math.max(Math.abs(widthSr + heightCr), Math.abs(widthSr - heightCr)));\r\n                } else\r\n                    widthOfWord = (widthOfWord + 31) >> 5 << 5;\r\n\r\n                if (heightOfWord > maxHeight)\r\n                    maxHeight = heightOfWord;\r\n\r\n                if (x + widthOfWord >= (this.canvasViewport.width << 5)) {\r\n                    x = 0;\r\n                    y += maxHeight;\r\n                    maxHeight = 0;\r\n                }\r\n\r\n                context.translate((x + (widthOfWord >> 1)), (y + (heightOfWord >> 1)));\r\n\r\n                if (currentWordData.rotate)\r\n                    context.rotate(currentWordData.rotate * WordCloud.Radians);\r\n\r\n                context.fillText(currentWordData.text, 0, 0);\r\n\r\n                if (currentWordData.padding) {\r\n                    context.lineWidth = 2 * currentWordData.padding;\r\n                    context.strokeText(currentWordData.text, 0, 0);\r\n                }\r\n\r\n                context.restore();\r\n\r\n                currentWordData.width = widthOfWord;\r\n                currentWordData.height = heightOfWord;\r\n                currentWordData.xOff = x;\r\n                currentWordData.yOff = y;\r\n                currentWordData.x1 = widthOfWord >> 1;\r\n                currentWordData.y1 = heightOfWord >> 1;\r\n                currentWordData.x0 = -currentWordData.x1;\r\n                currentWordData.y0 = -currentWordData.y1;\r\n\r\n                x += widthOfWord;\r\n            }\r\n\r\n            pixels = context.getImageData(0, 0, this.canvasViewport.width << 5, this.canvasViewport.height).data;\r\n\r\n            sprite = [];\r\n\r\n            for (let i = quantityOfWords - 1; i >= 0; i--) {\r\n                let currentWordData: WordCloudDataPoint = words[i],\r\n                    width: number = currentWordData.width,\r\n                    width32: number = width >> 5,\r\n                    height: number = currentWordData.y1 - currentWordData.y0,\r\n                    x: number = 0,\r\n                    y: number = 0,\r\n                    seen: number = 0,\r\n                    seenRow: number = 0;\r\n\r\n                if (currentWordData.xOff + width >= (this.canvasViewport.width << 5) ||\r\n                    currentWordData.yOff + height >= this.canvasViewport.height) {\r\n                    currentWordData.sprite = null;\r\n\r\n                    continue;\r\n                }\r\n\r\n                for (let j = 0; j < height * width32; j++) {\r\n                    sprite[j] = 0;\r\n                }\r\n\r\n                if (currentWordData.xOff !== null)\r\n                    x = currentWordData.xOff;\r\n                else\r\n                    return;\r\n\r\n                y = currentWordData.yOff;\r\n\r\n                seen = 0;\r\n                seenRow = -1;\r\n\r\n                for (let j = 0; j < height; j++) {\r\n                    for (let k = 0; k < width; k++) {\r\n                        let l: number = width32 * j + (k >> 5),\r\n                            index: number = ((y + j) * (this.canvasViewport.width << 5) + (x + k)) << 2,\r\n                            m: number = pixels[index]\r\n                                ? 1 << (31 - (k % 32))\r\n                                : 0;\r\n\r\n                        sprite[l] |= m;\r\n                        seen |= m;\r\n                    }\r\n\r\n                    if (seen)\r\n                        seenRow = j;\r\n                    else {\r\n                        currentWordData.y0++;\r\n                        height--;\r\n                        j--;\r\n                        y++;\r\n                    }\r\n                }\r\n\r\n                currentWordData.y1 = currentWordData.y0 + seenRow;\r\n                currentWordData.sprite = sprite.slice(0, (currentWordData.y1 - currentWordData.y0) * width32);\r\n            }\r\n        }\r\n\r\n        private findPosition(surface: number[], word: WordCloudDataPoint, borders: IPoint[]): boolean {\r\n            let startPoint: IPoint = { x: word.x, y: word.y },\r\n                delta = Math.sqrt(this.specialViewport.width * this.specialViewport.width + this.specialViewport.height * this.specialViewport.height),\r\n                point: IPoint,\r\n                dt: number = Math.random() < 0.5 ? 1 : -1,\r\n                shift: number = -dt,\r\n                dx: number,\r\n                dy: number;\r\n\r\n            while (true) {\r\n                shift += dt;\r\n\r\n                point = this.archimedeanSpiral(shift);\r\n\r\n                dx = Math.floor(point.x);\r\n                dy = Math.floor(point.y);\r\n\r\n                if (Math.min(Math.abs(dx), Math.abs(dy)) >= delta)\r\n                    break;\r\n\r\n                word.x = startPoint.x + dx;\r\n                word.y = startPoint.y + dy;\r\n\r\n                if (word.x + word.x0 < 0 ||\r\n                    word.y + word.y0 < 0 ||\r\n                    word.x + word.x1 > this.specialViewport.width ||\r\n                    word.y + word.y1 > this.specialViewport.height)\r\n                    continue;\r\n\r\n                if (!borders || !this.checkIntersect(word, surface)) {\r\n                    if (!borders || this.checkIntersectOfRectangles(word, borders[0], borders[1])) {\r\n                        let sprite: number[] = word.sprite,\r\n                            width: number = word.width >> 5,\r\n                            shiftWidth: number = this.specialViewport.width >> 5,\r\n                            lx: number = word.x - (width << 4),\r\n                            sx: number = lx & 127,\r\n                            msx: number = 32 - sx,\r\n                            height: number = word.y1 - word.y0,\r\n                            x: number = (word.y + word.y0) * shiftWidth + (lx >> 5);\r\n\r\n                        for (let i: number = 0; i < height; i++) {\r\n                            let lastSprite: number = 0;\r\n\r\n                            for (let j: number = 0; j <= width; j++) {\r\n                                let leftMask: number = lastSprite << msx,\r\n                                    rightMask: number;\r\n\r\n                                if (j < width)\r\n                                    lastSprite = sprite[i * width + j];\r\n\r\n                                rightMask = j < width\r\n                                    ? lastSprite >>> sx\r\n                                    : 0;\r\n\r\n                                surface[x + j] |= leftMask | rightMask;\r\n                            }\r\n\r\n                            x += shiftWidth;\r\n                        }\r\n\r\n                        word.sprite = null;\r\n\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        private archimedeanSpiral(value: number): IPoint {\r\n            let ratio: number = this.specialViewport.width / this.specialViewport.height;\r\n\r\n            value = value * 0.1;\r\n\r\n            return {\r\n                x: ratio * value * Math.cos(value),\r\n                y: value * Math.sin(value)\r\n            };\r\n        }\r\n\r\n        private checkIntersect(word: WordCloudDataPoint, surface: number[]): boolean {\r\n            let shiftWidth: number = this.specialViewport.width >> 5,\r\n                sprite: number[] = word.sprite,\r\n                widthOfWord = word.width >> 5,\r\n                lx: number = word.x - (widthOfWord << 4),\r\n                sx: number = lx & 127,\r\n                msx: number = 32 - sx,\r\n                heightOfWord = word.y1 - word.y0,\r\n                x: number = (word.y + word.y0) * shiftWidth + (lx >> 5);\r\n\r\n            for (let i = 0; i < heightOfWord; i++) {\r\n                let lastSprite: number = 0;\r\n\r\n                for (let j = 0; j <= widthOfWord; j++) {\r\n                    let mask: number = 0,\r\n                        leftMask: number,\r\n                        intersectMask: number = 0;\r\n\r\n                    leftMask = lastSprite << msx;\r\n\r\n                    if (j < widthOfWord)\r\n                        lastSprite = sprite[i * widthOfWord + j];\r\n\r\n                    mask = j < widthOfWord\r\n                        ? lastSprite >>> sx\r\n                        : 0;\r\n\r\n                    intersectMask = (leftMask | mask) & surface[x + j];\r\n\r\n                    if (intersectMask)\r\n                        return true;\r\n                }\r\n\r\n                x += shiftWidth;\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        private checkIntersectOfRectangles(word: WordCloudDataPoint, leftBorder: IPoint, rightBorder: IPoint): boolean {\r\n            return (word.x + word.x1) > leftBorder.x &&\r\n                (word.x + word.x0) < rightBorder.x &&\r\n                (word.y + word.y1) > leftBorder.y &&\r\n                (word.y + word.y0) < rightBorder.y;\r\n        }\r\n\r\n        private getCanvasContext(): CanvasRenderingContext2D {\r\n            if (!this.canvasViewport)\r\n                return null;\r\n\r\n            this.canvas.width = 1;\r\n            this.canvas.height = 1;\r\n\r\n            let context: CanvasRenderingContext2D = this.canvas.getContext(\"2d\");\r\n\r\n            this.canvas.width = this.canvasViewport.width << 5;\r\n            this.canvas.height = this.canvasViewport.height;\r\n\r\n            context = this.canvas.getContext(\"2d\");\r\n            context.fillStyle = context.strokeStyle = \"red\";\r\n            context.textAlign = \"center\";\r\n\r\n            return context;\r\n        }\r\n\r\n        private getReducedText(texts: WordCloudText[]): WordCloudText[] {\r\n            let brokenStrings: WordCloudText[] = [];\r\n            brokenStrings = this.getBrokenWords(texts);\r\n\r\n            return brokenStrings.reduce((previousValue: WordCloudText[], currentValue: WordCloudText) => {\r\n                if (!previousValue.some((value: WordCloudText) => {\r\n                    if (value.index !== currentValue.index && value.text === currentValue.text) {\r\n                        value.count += currentValue.count;\r\n\r\n                        return true;\r\n                    }\r\n\r\n                    return false;\r\n                })) {\r\n                    previousValue.push(currentValue);\r\n                }\r\n\r\n                return previousValue;\r\n            }, []);\r\n        }\r\n\r\n        private getBrokenWords(words: WordCloudText[]): WordCloudText[] {\r\n            let brokenStrings: WordCloudText[] = [],\r\n                whiteSpaceRegExp: RegExp = /\\s/,\r\n                punctuatuinRegExp: RegExp;\r\n\r\n            if (!this.settings.isBrokenText)\r\n                return words;\r\n\r\n            punctuatuinRegExp = new RegExp(`[${WordCloud.Punctuation.join(\"\\\\\")}]`, \"gim\");\r\n\r\n            words.forEach((item: WordCloudText) => {\r\n                if (typeof item.text === \"string\") {\r\n                    let words: string[];\r\n\r\n                    words = item.text.replace(punctuatuinRegExp, \" \").split(whiteSpaceRegExp);\r\n\r\n                    if (this.settings.isRemoveStopWords) {\r\n                        let stopWords: string[] = this.settings.stopWordsArray;\r\n\r\n                        if (this.settings.isDefaultStopWords)\r\n                            stopWords = stopWords.concat(WordCloud.StopWords);\r\n\r\n                        words = words.filter((value: string) => {\r\n                            return value.length > 0 && !stopWords.some((removeWord: string) => {\r\n                                return value.toLocaleLowerCase() === removeWord.toLocaleLowerCase();\r\n                            });\r\n                        });\r\n                    }\r\n\r\n                    words.forEach((element: string) => {\r\n                        if (element.length > 0 && !whiteSpaceRegExp.test(element)) {\r\n                            brokenStrings.push({\r\n                                text: element,\r\n                                count: item.count,\r\n                                index: item.index,\r\n                                selectionId: item.selectionId,\r\n                                color: item.color\r\n                            });\r\n                        }\r\n                    });\r\n                } else\r\n                    brokenStrings.push(item);\r\n            });\r\n\r\n            return brokenStrings;\r\n        }\r\n\r\n        private getWords(values: WordCloudText[]): WordCloudDataPoint[] {\r\n            let sortedValues: WordCloudText[],\r\n                minValue: number = 0,\r\n                maxValue: number = 0,\r\n                valueFormatter: IValueFormatter = this.settings.valueFormatter;\r\n\r\n            if (!values || !(values.length >= 1))\r\n                return [];\r\n\r\n            sortedValues = values.sort((a: WordCloudText, b: WordCloudText) => {\r\n                return b.count - a.count;\r\n            });\r\n\r\n            minValue = sortedValues[sortedValues.length - 1].count;\r\n            maxValue = sortedValues[0].count;\r\n            let returnValues = values.map((value: WordCloudText) => {\r\n                return <WordCloudDataPoint>{\r\n                    text: valueFormatter.format(value.text),\r\n                    size: this.getFontSize(value.count, minValue, maxValue),\r\n                    x: 0,\r\n                    y: 0,\r\n                    rotate: this.getAngle(),\r\n                    padding: 1,\r\n                    width: 0,\r\n                    height: 0,\r\n                    xOff: 0,\r\n                    yOff: 0,\r\n                    x0: 0,\r\n                    y0: 0,\r\n                    x1: 0,\r\n                    y1: 0,\r\n                    color: value.color,\r\n                    selectionId: value.selectionId,\r\n                    wordIndex: value.index\r\n                };\r\n            });\r\n            this.dataBeforeRender = returnValues;\r\n            return returnValues;\r\n        }\r\n\r\n        private getFontSize(\r\n            value: number,\r\n            minValue: number,\r\n            maxValue: number,\r\n            scaleType: WordCloudScaleType = WordCloudScaleType.value) {\r\n            let weight: number,\r\n                fontSize: number,\r\n                maxFontSize: number,\r\n                minFontSize: number;\r\n\r\n            minFontSize = Math.abs(this.parseNumber(this.settings.minFontSize, WordCloud.DefaultSettings.minFontSize));\r\n            maxFontSize = Math.abs(this.parseNumber(this.settings.maxFontSize, WordCloud.DefaultSettings.maxFontSize));\r\n\r\n            if (minFontSize > maxFontSize) {\r\n                let buffer: number = minFontSize;\r\n\r\n                minFontSize = maxFontSize;\r\n                maxFontSize = buffer;\r\n            }\r\n\r\n            switch (scaleType) {\r\n                case WordCloudScaleType.logn: {\r\n                    weight = Math.log(value);\r\n                }\r\n                case WordCloudScaleType.sqrt: {\r\n                    weight = Math.sqrt(value);\r\n                }\r\n                case WordCloudScaleType.value: {\r\n                    weight = value;\r\n                }\r\n            }\r\n\r\n            fontSize = weight > minValue\r\n                ? (maxFontSize * (weight - minValue)) / (maxValue - minValue)\r\n                : 0;\r\n\r\n            fontSize = (fontSize * 100) / maxFontSize;\r\n\r\n            fontSize = (fontSize * (maxFontSize - minFontSize)) / 100 + minFontSize;\r\n\r\n            return fontSize;\r\n        }\r\n\r\n        private getAngle(): number {\r\n            if (!this.settings ||\r\n                !this.settings.isRotateText)\r\n                return 0;\r\n\r\n            let minAngle: number,\r\n                maxAngle: number,\r\n                maxNumberOfOrientations: number,\r\n                angle: number;\r\n\r\n            maxNumberOfOrientations = Math.abs(this.parseNumber(this.settings.maxNumberOfOrientations, 0));\r\n\r\n            minAngle = this.parseNumber(\r\n                this.settings.minAngle,\r\n                0,\r\n                WordCloud.MinAngle,\r\n                WordCloud.MaxAngle);\r\n\r\n            maxAngle = this.parseNumber(\r\n                this.settings.maxAngle,\r\n                0,\r\n                WordCloud.MinAngle,\r\n                WordCloud.MaxAngle);\r\n\r\n            if (minAngle > maxAngle) {\r\n                let buffer: number = minAngle;\r\n\r\n                minAngle = maxAngle;\r\n                maxAngle = buffer;\r\n            }\r\n\r\n            angle = Math.abs(((maxAngle - minAngle) / maxNumberOfOrientations) * Math.floor(Math.random() * maxNumberOfOrientations));\r\n\r\n            return maxNumberOfOrientations !== 0 ? minAngle + angle : 0;\r\n        }\r\n\r\n        public update(visualUpdateOptions: VisualUpdateOptions): void {\r\n            if (!visualUpdateOptions ||\r\n                !visualUpdateOptions.viewport ||\r\n                !visualUpdateOptions.dataViews ||\r\n                !visualUpdateOptions.dataViews[0] ||\r\n                !visualUpdateOptions.viewport ||\r\n                !(visualUpdateOptions.viewport.height >= 0) ||\r\n                !(visualUpdateOptions.viewport.width >= 0))\r\n                return;\r\n\r\n            this.visualUpdateOptions = visualUpdateOptions;\r\n\r\n            this.layout.viewport = this.visualUpdateOptions.viewport;\r\n            let dataView: DataView = visualUpdateOptions.dataViews[0];\r\n\r\n            if (this.layout.viewportInIsZero)\r\n                return;\r\n\r\n            this.durationAnimations = getAnimationDuration(\r\n                this.animator,\r\n                visualUpdateOptions.suppressAnimations);\r\n            this.UpdateSize();\r\n\r\n            this.data = this.converter(dataView);\r\n            if (!this.data)\r\n                return;\r\n\r\n            this.settings = this.data.settings;\r\n            this.wordCloudTexts = this.data.texts;\r\n\r\n            this.computePositions(\r\n                this.getWords(this.getReducedText(this.data.texts)),\r\n                (wordCloudDataView: WordCloudDataView) => this.render(wordCloudDataView));\r\n\r\n            if (visualUpdateOptions !== this.visualUpdateOptions)\r\n                this.update(this.visualUpdateOptions);\r\n        }\r\n\r\n        private UpdateSize(): void {\r\n            let fakeWidth: number,\r\n                fakeHeight: number,\r\n                ratio: number;\r\n\r\n            ratio = Math.sqrt((this.fakeViewport.width * this.fakeViewport.height)\r\n                / (this.layout.viewportIn.width * this.layout.viewportIn.height));\r\n\r\n            if (isNaN(ratio))\r\n                fakeHeight = fakeWidth = 1;\r\n            else {\r\n                fakeHeight = this.layout.viewportIn.height * ratio;\r\n                fakeWidth = this.layout.viewportIn.width * ratio;\r\n            }\r\n\r\n            this.specialViewport = {\r\n                height: fakeHeight,\r\n                width: fakeWidth\r\n            };\r\n\r\n            this.root.attr({\r\n                \"height\": this.layout.viewport.height,\r\n                \"width\": this.layout.viewport.width\r\n            });\r\n        }\r\n\r\n        private render(wordCloudDataView: WordCloudDataView): void {\r\n            if (!wordCloudDataView ||\r\n                !wordCloudDataView.data)\r\n                return;\r\n\r\n            this.wordCloudDataView = wordCloudDataView;\r\n\r\n            let animatedWordSelection: D3.Selection,\r\n                wordElements: D3.Selection = this.main\r\n                    .select(WordCloud.Words.selector)\r\n                    .selectAll(WordCloud.Word.selector);\r\n\r\n            this.wordsSelection = wordElements.data(wordCloudDataView.data);\r\n\r\n            (<D3.UpdateSelection>this.animation(this.wordsSelection, this.durationAnimations))\r\n                .attr(\"transform\", (item: WordCloudDataPoint) => `${SVGUtil.translate(item.x, item.y)}rotate(${item.rotate})`)\r\n                .style({\r\n                    \"font-size\": ((item: WordCloudDataPoint): string => `${item.size}${WordCloud.Size}`),\r\n                    \"fill\": ((item: WordCloudDataPoint): string => item.color),\r\n                });\r\n\r\n            animatedWordSelection = this.wordsSelection\r\n                .enter()\r\n                .append(\"svg:text\")\r\n                .attr(\"transform\", (item: WordCloudDataPoint) => `${SVGUtil.translate(item.x, item.y)}rotate(${item.rotate})`)\r\n                .style(\"font-size\", \"1px\");\r\n\r\n            this.wordsSelection.on(\"click\", (item: WordCloudDataPoint) => {\r\n                this.selectionManager\r\n                    .select(item.selectionId, d3.event.ctrlKey)\r\n                    .then(() => this.setSelection(this.wordsSelection));\r\n                d3.event.stopPropagation();\r\n            });\r\n\r\n            (<D3.UpdateSelection>this.animation(animatedWordSelection, this.durationAnimations))\r\n                .style({\r\n                    \"font-size\": ((item: WordCloudDataPoint): string => `${item.size}${WordCloud.Size}`),\r\n                    \"fill\": ((item: WordCloudDataPoint): string => item.color),\r\n                });\r\n\r\n            this.wordsSelection\r\n                .text((item: WordCloudDataPoint) => item.text)\r\n                .classed(WordCloud.Word[\"class\"], true);\r\n\r\n            this.wordsSelection.exit().remove();\r\n            this.setSelection(this.wordsSelection);\r\n\r\n            setTimeout(() => {\r\n                if (this.root)\r\n                    this.scaleMainView(wordCloudDataView, wordElements[0].length && this.durationAnimations);\r\n\r\n            }, this.durationAnimations + WordCloud.RenderDelay);\r\n        }\r\n\r\n        private setSelection(selection: D3.Selection): void {\r\n            let selectionIds: SelectionId[] = this.selectionManager.getSelectionIds();\r\n\r\n            if (selectionIds.some(x => !selection.data().some((d: WordCloudDataPoint) => d.selectionId.getKey() === x.getKey()))) {\r\n                this.selectionManager.clear();\r\n                selectionIds = [];\r\n            }\r\n\r\n            if (!selectionIds.length) {\r\n                this.setOpacity(selection, WordCloud.MaxOpacity, true);\r\n                return;\r\n            }\r\n\r\n            let selectedColumns: D3.UpdateSelection = selection.filter((x: WordCloudDataPoint) =>\r\n                selectionIds.some((y: SelectionId) => y.getKey() === x.selectionId.getKey()));\r\n\r\n            this.setOpacity(selection, WordCloud.MinOpacity);\r\n            this.setOpacity(selectedColumns, WordCloud.MaxOpacity);\r\n        }\r\n\r\n        private setOpacity(element: D3.Selection, opacityValue: number, disableAnimation: boolean = false): void {\r\n            let elementAnimation = disableAnimation ? element : this.animation(element);\r\n            elementAnimation.style(\"fill-opacity\", opacityValue);\r\n        }\r\n\r\n        private scaleMainView(wordCloudDataView: WordCloudDataView, durationAnimation: number = 0): void {\r\n            if (!wordCloudDataView ||\r\n                !wordCloudDataView.leftBorder ||\r\n                !wordCloudDataView.rightBorder)\r\n                return;\r\n\r\n            let scale: number = 1,\r\n                mainSVGRect: SVGRect = this.main.node()[\"getBBox\"](),\r\n                leftBorder: IPoint = wordCloudDataView.leftBorder,\r\n                rightBorder: IPoint = wordCloudDataView.rightBorder,\r\n                width2: number,\r\n                height2: number,\r\n                scaleByX: number,\r\n                scaleByY: number;\r\n\r\n            scaleByX = this.layout.viewportIn.width / Math.abs(leftBorder.x - rightBorder.x);\r\n            scaleByY = this.layout.viewportIn.height / Math.abs(leftBorder.y - rightBorder.y);\r\n\r\n            scale = Math.min(scaleByX, scaleByY);\r\n\r\n            width2 = this.layout.margin.left + (mainSVGRect.x * scale * -1)\r\n                + (this.layout.viewportIn.width - (mainSVGRect.width * scale)) / 2;\r\n            height2 = this.layout.margin.top + (mainSVGRect.y * scale * -1)\r\n                + (this.layout.viewportIn.height - (mainSVGRect.height * scale)) / 2;\r\n\r\n            (<D3.Selection>this.animation(this.main, durationAnimation))\r\n                .attr(\"transform\", `${SVGUtil.translate(width2, height2)}scale(${scale})`);\r\n        }\r\n\r\n        public enumerateObjectInstances(options: EnumerateVisualObjectInstancesOptions): VisualObjectInstance[] {\r\n            let instances: VisualObjectInstance[] = [];\r\n\r\n            if (!this.settings)\r\n                return instances;\r\n\r\n            switch (options.objectName) {\r\n                case \"general\": {\r\n                    let general: VisualObjectInstance = {\r\n                        objectName: \"general\",\r\n                        displayName: \"general\",\r\n                        selector: null,\r\n                        properties: {\r\n                            maxNumberOfWords: this.settings.maxNumberOfWords,\r\n                            minFontSize: this.settings.minFontSize,\r\n                            maxFontSize: this.settings.maxFontSize,\r\n                            isBrokenText: this.settings.isBrokenText\r\n                        }\r\n                    };\r\n\r\n                    instances.push(general);\r\n                    break;\r\n                }\r\n                case \"dataPoint\": {\r\n                    if (!this.wordCloudDataView ||\r\n                        !this.wordCloudDataView.data)\r\n                        return;\r\n\r\n                    let dataPoints: WordCloudDataPoint[] = this.dataBeforeRender;\r\n                    let wordCategoriesIndex: number[] = [];\r\n                    dataPoints.forEach((item: WordCloudDataPoint) => {\r\n                        if (wordCategoriesIndex.indexOf(item.wordIndex) === -1) {\r\n                            wordCategoriesIndex.push(item.wordIndex);\r\n                            instances.push({\r\n                                objectName: \"dataPoint\",\r\n                                displayName: this.data.texts[item.wordIndex].text,\r\n                                selector: ColorHelper.normalizeSelector(item.selectionId.getSelector(), false),\r\n                                properties: {\r\n                                    fill: { solid: { color: item.color } }\r\n                                }\r\n                            });\r\n                        }\r\n                    });\r\n\r\n                    break;\r\n                }\r\n                case \"rotateText\": {\r\n                    let rotateText: VisualObjectInstance = {\r\n                        objectName: \"rotateText\",\r\n                        displayName: \"Rotate Text\",\r\n                        selector: null,\r\n                        properties: {\r\n                            show: this.settings.isRotateText,\r\n                            minAngle: this.settings.minAngle,\r\n                            maxAngle: this.settings.maxAngle,\r\n                            maxNumberOfOrientations: this.settings.maxNumberOfOrientations\r\n                        }\r\n                    };\r\n\r\n                    instances.push(rotateText);\r\n                    break;\r\n                }\r\n                case \"stopWords\": {\r\n                    let stopWords: VisualObjectInstance = {\r\n                        objectName: \"stopWords\",\r\n                        displayName: \"Stop Words\",\r\n                        selector: null,\r\n                        properties: {\r\n                            show: this.settings.isRemoveStopWords,\r\n                            isDefaultStopWords: this.settings.isDefaultStopWords,\r\n                            words: this.settings.stopWords ||\r\n                            this.settings.stopWordsArray.join(WordCloud.StopWordsDelemiter)\r\n                        }\r\n                    };\r\n\r\n                    instances.push(stopWords);\r\n                    break;\r\n                }\r\n            }\r\n\r\n            return instances;\r\n        }\r\n\r\n        private animation(\r\n            element: D3.Selection,\r\n            duration: number = 0,\r\n            callback?: (data: any, index: number) => void): D3.Transition.Transition | D3.Selection {\r\n            return element\r\n                .transition()\r\n                .duration(duration)\r\n                .each(\"end\", callback);\r\n        }\r\n\r\n        public destroy(): void {\r\n            this.root = null;\r\n            this.canvas = null;\r\n        }\r\n    }\r\n\r\n    module explore.util {\r\n        export function hexToRgb(hex): string {\r\n            // Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\r\n            let shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\r\n            hex = hex.replace(shorthandRegex, function (m, r, g, b) {\r\n                return r + r + g + g + b + b;\r\n            });\r\n\r\n            let result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n            return result ? `rgb(${parseInt(result[1], 16)},${parseInt(result[2], 16)},${parseInt(result[3], 16)})` : null;\r\n        }\r\n\r\n        export function getRandomColor(): string {\r\n            let red: number = Math.floor(Math.random() * 255),\r\n                green: number = Math.floor(Math.random() * 255),\r\n                blue: number = Math.floor(Math.random() * 255);\r\n\r\n            return `rgb(${red},${green},${blue})`;\r\n        }\r\n    }\r\n}","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.visuals.samples {\r\n\r\n    import ClassAndSelector = jsCommon.CssConstants.ClassAndSelector;\r\n    import createClassAndSelector = jsCommon.CssConstants.createClassAndSelector;\r\n    import PixelConverter = jsCommon.PixelConverter;\r\n\r\n    export interface ITableView {\r\n        data(data: any[], dataIdFunction: (d) => {}, dataAppended: boolean): ITableView;\r\n        rowHeight(rowHeight: number): ITableView;\r\n        columnWidth(columnWidth: number): ITableView;\r\n        orientation(orientation: string): ITableView;\r\n        rows(rows: number): ITableView;\r\n        columns(columns: number): ITableView;\r\n        viewport(viewport: IViewport): ITableView;\r\n        render(): void;\r\n        empty(): void;\r\n    }\r\n\r\n    export module TableViewFactory {\r\n        export function createTableView(options): ITableView {\r\n            return new TableView(options);\r\n        }\r\n    }\r\n\r\n    export interface TableViewViewOptions {\r\n        enter: (selection: D3.Selection) => void;\r\n        exit: (selection: D3.Selection) => void;\r\n        update: (selection: D3.Selection) => void;\r\n        loadMoreData: () => void;\r\n        baseContainer: D3.Selection;\r\n        rowHeight: number;\r\n        columnWidth: number;\r\n        orientation: string;\r\n        rows: number;\r\n        columns: number;\r\n        viewport: IViewport;\r\n        scrollEnabled: boolean;\r\n    }\r\n\r\n    /**\r\n     * A UI Virtualized List, that uses the D3 Enter, Update & Exit pattern to update rows.\r\n     * It can create lists containing either HTML or SVG elements.\r\n     */\r\n    class TableView implements ITableView {\r\n        private getDatumIndex: (d: any) => {};\r\n        private _data: any[];\r\n        private _totalRows: number;\r\n        private _totalColumns: number;\r\n\r\n        private options: TableViewViewOptions;\r\n        private visibleGroupContainer: D3.Selection;\r\n        private scrollContainer: D3.Selection;\r\n\r\n        private static defaultRowHeight = 0;\r\n        private static defaultColumns = 1;\r\n\r\n        public constructor(options: TableViewViewOptions) {\r\n            // make a copy of options so that it is not modified later by caller\r\n            this.options = $.extend(true, {}, options);\r\n\r\n            this.options.baseContainer\r\n                .style('overflow-y', 'auto')\r\n                .attr('drag-resize-disabled', true);\r\n\r\n            this.scrollContainer = options.baseContainer\r\n                .append('div')\r\n                .attr('class', 'scrollRegion');\r\n            this.visibleGroupContainer = this.scrollContainer\r\n                .append('div')\r\n                .attr('class', 'visibleGroup');\r\n\r\n            TableView.SetDefaultOptions(options);\r\n        }\r\n\r\n        private static SetDefaultOptions(options: TableViewViewOptions) {\r\n            options.rowHeight = options.rowHeight || TableView.defaultRowHeight;\r\n        }\r\n\r\n        public rowHeight(rowHeight: number): TableView {\r\n            this.options.rowHeight = Math.ceil(rowHeight);\r\n            return this;\r\n        }\r\n        public columnWidth(columnWidth: number): TableView {\r\n            this.options.columnWidth = Math.ceil(columnWidth);\r\n            return this;\r\n        }\r\n\r\n        public orientation(orientation: string): TableView {\r\n            this.options.orientation = orientation;\r\n            return this;\r\n        }\r\n\r\n        public rows(rows: number): TableView {\r\n            this.options.rows = Math.ceil(rows);\r\n            return this;\r\n        }\r\n\r\n        public columns(columns: number): TableView {\r\n            this.options.columns = Math.ceil(columns);\r\n            return this;\r\n        }\r\n\r\n        public data(data: any[], getDatumIndex: (d) => {}, dataReset: boolean = false): ITableView {\r\n            this._data = data;\r\n            this.getDatumIndex = getDatumIndex;\r\n            this.setTotalRows();\r\n            if (dataReset) {\r\n                $(this.options.baseContainer.node()).scrollTop(0);\r\n            }\r\n            return this;\r\n        }\r\n\r\n        public viewport(viewport: IViewport): ITableView {\r\n            this.options.viewport = viewport;\r\n            return this;\r\n        }\r\n\r\n        public empty(): void {\r\n            this._data = [];\r\n            this.render();\r\n        }\r\n\r\n        private setTotalRows(): void {\r\n            var count = this._data.length;\r\n            var rows = Math.min(this.options.rows, count);\r\n            var columns = Math.min(this.options.columns, count);\r\n\r\n            if ((columns > 0) && (rows > 0)) {\r\n                this._totalColumns = columns;\r\n                this._totalRows = rows;\r\n            } else if (rows > 0) {\r\n                this._totalRows = rows;\r\n                this._totalColumns = Math.ceil(count / rows);\r\n            } else if (columns > 0) {\r\n                this._totalColumns = columns;\r\n                this._totalRows = Math.ceil(count / columns);\r\n            } else {\r\n                this._totalColumns = TableView.defaultColumns;\r\n                this._totalRows = Math.ceil(count / TableView.defaultColumns);\r\n            }\r\n        }\r\n\r\n        public render(): void {\r\n            var options = this.options;\r\n            var visibleGroupContainer = this.visibleGroupContainer;\r\n            var rowHeight = options.rowHeight || TableView.defaultRowHeight;\r\n            var groupedData: any[] = [];\r\n            var totalRows = options.rows; \r\n            var totalColumns = options.columns;\r\n            var totalItems: number = this._data.length;\r\n            var totalRows = options.rows > totalItems ? totalItems : options.rows; \r\n            var totalColumns = options.columns > totalItems ? totalItems : options.columns; \r\n\r\n            if (totalColumns === 0 && totalRows === 0) {\r\n                if (options.orientation === Orientation.HORIZONTAL)\r\n                {\r\n                    totalColumns = totalItems;\r\n                    totalRows = 1;\r\n                }\r\n                else\r\n                {\r\n                    totalColumns = 1;\r\n                    totalRows = totalItems;\r\n                }\r\n            }\r\n            else if (totalColumns === 0 && totalRows > 0)\r\n                totalColumns = Math.ceil(totalItems / totalRows);\r\n            else if (totalColumns > 0 && totalRows === 0)\r\n                totalRows = Math.ceil(totalItems / totalColumns);\r\n\r\n            if (this.options.orientation === Orientation.VERTICAL)\r\n            {\r\n                var n = totalRows;\r\n                totalRows = totalColumns;\r\n                totalColumns = n;\r\n            }\r\n\r\n            else if (this.options.orientation === Orientation.HORIZONTAL)\r\n            {\r\n                if (totalRows === 0) totalRows = this._totalRows;\r\n                if (totalColumns === 0) totalColumns = this._totalColumns;\r\n            }\r\n\r\n            var m: number = 0;\r\n            var k: number = 0;\r\n            for (var i: number = 0; i < totalRows; i++) {\r\n                if (this.options.orientation === Orientation.VERTICAL && options.rows === 0 && totalItems % options.columns > 0 && options.columns <= totalItems)\r\n                {\r\n                    if (totalItems % options.columns > i)\r\n                    {\r\n                        m = i * Math.ceil(totalItems / options.columns);\r\n                        k = m + Math.ceil(totalItems / options.columns);\r\n                        groupedData.push(this._data.slice(m, k)); \r\n                    }\r\n                    else\r\n                    {\r\n                        groupedData.push(this._data.slice(k, k + Math.floor(totalItems / options.columns)));\r\n                        k = k + Math.floor(totalItems / options.columns);\r\n                    }\r\n                }\r\n                else if (this.options.orientation === Orientation.HORIZONTAL && options.columns === 0 && totalItems % options.rows > 0 && options.rows <= totalItems)\r\n                {\r\n                    if (totalItems % options.rows > i)\r\n                    {\r\n                        m = i * Math.ceil(totalItems / options.rows);\r\n                        k = m + Math.ceil(totalItems / options.rows);\r\n                        groupedData.push(this._data.slice(m, k));\r\n                    }\r\n                    else\r\n                    {\r\n                        groupedData.push(this._data.slice(k, k + Math.floor(totalItems / options.rows)));\r\n                        k = k + Math.floor(totalItems / options.rows);\r\n                    }\r\n                }\r\n                else\r\n                {\r\n                    var k: number = i * totalColumns;\r\n                    groupedData.push(this._data.slice(k, k + totalColumns));\r\n                }\r\n            }\r\n\r\n            visibleGroupContainer.selectAll(\".row\").remove();\r\n            var cellSelection = visibleGroupContainer.selectAll(\".row\")\r\n                .data(groupedData)\r\n                .enter()\r\n                .append(\"div\")\r\n                .classed('row', true)\r\n                .selectAll(\".cell\")\r\n                .data(d => d);\r\n\r\n            cellSelection\r\n                .enter()\r\n                .append('div')\r\n                .classed('cell', true)\r\n                .call(d => options.enter(d));\r\n            cellSelection.order();\r\n\r\n            var cellUpdateSelection = visibleGroupContainer.selectAll('.cell:not(.transitioning)');\r\n\r\n            cellUpdateSelection.call(d => options.update(d));\r\n            cellUpdateSelection.style({ 'height': (rowHeight > 0) ? rowHeight + 'px' : 'auto' });\r\n\r\n            if (this.options.orientation === Orientation.VERTICAL)\r\n            {\r\n                var realColumnNumber = 0;\r\n                for (var i: number = 0; i < groupedData.length; i++)\r\n                {\r\n                    if (groupedData[i].length !== 0)\r\n                        realColumnNumber = i+1;\r\n                }\r\n\r\n                cellUpdateSelection.style({ 'width': '100%' });\r\n                var rowUpdateSelection = visibleGroupContainer.selectAll('div.row');\r\n                rowUpdateSelection.style({ 'width': (options.columnWidth > 0) ? options.columnWidth + 'px' : (100 / realColumnNumber) + '%' });\r\n            }\r\n            else\r\n                cellUpdateSelection.style({\r\n                    'width': (options.columnWidth > 0) ? options.columnWidth + 'px' : (100 / totalColumns) + '%'\r\n                });\r\n\r\n            cellSelection\r\n                .exit()\r\n                .call(d => options.exit(d))\r\n                .remove();\r\n        }\r\n    }\r\n\r\n    // TODO: Generate these from above, defining twice just introduces potential for error\r\n    export var chicletSlicerProps = {\r\n        general: {\r\n            orientation: <DataViewObjectPropertyIdentifier>{ objectName: 'general', propertyName: 'orientation' },\r\n            columns: <DataViewObjectPropertyIdentifier>{ objectName: 'general', propertyName: 'columns' },\r\n            rows: <DataViewObjectPropertyIdentifier>{ objectName: 'general', propertyName: 'rows' },\r\n            showDisabled: <DataViewObjectPropertyIdentifier>{ objectName: 'general', propertyName: 'showDisabled' },\r\n            multiselect: <DataViewObjectPropertyIdentifier>{ objectName: 'general', propertyName: 'multiselect' },\r\n            selection: <DataViewObjectPropertyIdentifier>{ objectName: 'general', propertyName: 'selection' },\r\n        },\r\n        header: {\r\n            show: <DataViewObjectPropertyIdentifier>{ objectName: 'header', propertyName: 'show' },\r\n            title: <DataViewObjectPropertyIdentifier>{ objectName: 'header', propertyName: 'title' },\r\n            fontColor: <DataViewObjectPropertyIdentifier>{ objectName: 'header', propertyName: 'fontColor' },\r\n            background: <DataViewObjectPropertyIdentifier>{ objectName: 'header', propertyName: 'background' },\r\n            outline: <DataViewObjectPropertyIdentifier>{ objectName: 'header', propertyName: 'outline' },\r\n            textSize: <DataViewObjectPropertyIdentifier>{ objectName: 'header', propertyName: 'textSize' },\r\n            outlineColor: <DataViewObjectPropertyIdentifier>{ objectName: 'header', propertyName: 'outlineColor' },\r\n            outlineWeight: <DataViewObjectPropertyIdentifier>{ objectName: 'header', propertyName: 'outlineWeight' }\r\n        },\r\n        rows: {\r\n            fontColor: <DataViewObjectPropertyIdentifier>{ objectName: 'rows', propertyName: 'fontColor' },\r\n            textSize: <DataViewObjectPropertyIdentifier>{ objectName: 'rows', propertyName: 'textSize' },\r\n            height: <DataViewObjectPropertyIdentifier>{ objectName: 'rows', propertyName: 'height' },\r\n            width: <DataViewObjectPropertyIdentifier>{ objectName: 'rows', propertyName: 'width' },\r\n            background: <DataViewObjectPropertyIdentifier>{ objectName: 'rows', propertyName: 'background' },\r\n            transparency: <DataViewObjectPropertyIdentifier>{ objectName: 'rows', propertyName: 'transparency' },\r\n            selectedColor: <DataViewObjectPropertyIdentifier>{ objectName: 'rows', propertyName: 'selectedColor' },\r\n            unselectedColor: <DataViewObjectPropertyIdentifier>{ objectName: 'rows', propertyName: 'unselectedColor' },\r\n            disabledColor: <DataViewObjectPropertyIdentifier>{ objectName: 'rows', propertyName: 'disabledColor' },\r\n            outline: <DataViewObjectPropertyIdentifier>{ objectName: 'rows', propertyName: 'outline' },\r\n            outlineColor: <DataViewObjectPropertyIdentifier>{ objectName: 'rows', propertyName: 'outlineColor' },\r\n            outlineWeight: <DataViewObjectPropertyIdentifier>{ objectName: 'rows', propertyName: 'outlineWeight' },\r\n            borderStyle: <DataViewObjectPropertyIdentifier>{ objectName: 'rows', propertyName: 'borderStyle' },\r\n        },\r\n        images: {\r\n            imageSplit: <DataViewObjectPropertyIdentifier>{ objectName: 'images', propertyName: 'imageSplit' },\r\n            stretchImage: <DataViewObjectPropertyIdentifier>{ objectName: 'images', propertyName: 'stretchImage' },\r\n            bottomImage: <DataViewObjectPropertyIdentifier>{ objectName: 'images', propertyName: 'bottomImage' },\r\n        },\r\n        selectedPropertyIdentifier: <DataViewObjectPropertyIdentifier>{ objectName: 'general', propertyName: 'selected' },\r\n        filterPropertyIdentifier: <DataViewObjectPropertyIdentifier>{ objectName: 'general', propertyName: 'filter' },\r\n        formatString: <DataViewObjectPropertyIdentifier>{ objectName: 'general', propertyName: 'formatString' },\r\n        hasSavedSelection: true,\r\n    };\r\n\r\n    module ChicletBorderStyle {\r\n        export var ROUNDED: string = 'Rounded';\r\n        export var CUT: string = 'Cut';\r\n        export var SQUARE: string = 'Square';\r\n\r\n        export var type: IEnumType = createEnumType([\r\n            { value: ROUNDED, displayName: ChicletBorderStyle.ROUNDED },\r\n            { value: CUT, displayName: ChicletBorderStyle.CUT },\r\n            { value: SQUARE, displayName: ChicletBorderStyle.SQUARE },\r\n        ]);\r\n    }\r\n\r\n    module ChicletSlicerShowDisabled {\r\n        export var INPLACE: string = 'Inplace';\r\n        export var BOTTOM: string = 'Bottom';\r\n        export var HIDE: string = 'Hide';\r\n\r\n        export var type: IEnumType = createEnumType([\r\n            { value: INPLACE, displayName: ChicletSlicerShowDisabled.INPLACE },\r\n            { value: BOTTOM, displayName: ChicletSlicerShowDisabled.BOTTOM },\r\n            { value: HIDE, displayName: ChicletSlicerShowDisabled.HIDE },\r\n        ]);\r\n    }\r\n\r\n    module Orientation {\r\n        export var HORIZONTAL: string = 'Horizontal';\r\n        export var VERTICAL: string = 'Vertical';\r\n\r\n        export var type: IEnumType = createEnumType([\r\n            { value: HORIZONTAL, displayName: HORIZONTAL },\r\n            { value: VERTICAL, displayName: VERTICAL }\r\n        ]);\r\n    }\r\n\r\n    export interface ChicletSlicerConstructorOptions {\r\n        behavior?: ChicletSlicerWebBehavior;\r\n    }\r\n\r\n    export interface ChicletSlicerData {\r\n        categorySourceName: string;\r\n        formatString: string;\r\n        slicerDataPoints: ChicletSlicerDataPoint[];\r\n        slicerSettings: ChicletSlicerSettings;\r\n        hasSelectionOverride?: boolean;\r\n    }\r\n\r\n    export interface ChicletSlicerDataPoint extends SelectableDataPoint {\r\n        category?: string;\r\n        value?: number;\r\n        mouseOver?: boolean;\r\n        mouseOut?: boolean;\r\n        isSelectAllDataPoint?: boolean;\r\n        imageURL?: string;\r\n        selectable?: boolean;\r\n    }\r\n\r\n    export interface ChicletSlicerSettings {\r\n        general: {\r\n            orientation: string;\r\n            columns: number;\r\n            rows: number;\r\n            multiselect: boolean;\r\n            showDisabled: string;\r\n            selection: string;\r\n            getSavedSelection?: () => string[];\r\n            setSavedSelection?: (selectionIds: string[]) => void;\r\n        };\r\n        margin: IMargin;\r\n        header: {\r\n            borderBottomWidth: number;\r\n            show: boolean;\r\n            outline: string;\r\n            fontColor: string;\r\n            background?: string;\r\n            textSize: number;\r\n            outlineColor: string;\r\n            outlineWeight: number;\r\n            title: string;\r\n        };\r\n        headerText: {\r\n            marginLeft: number;\r\n            marginTop: number;\r\n        };\r\n        slicerText: {\r\n            textSize: number;\r\n            height: number;\r\n            width: number;\r\n            fontColor: string;\r\n            hoverColor: string;\r\n            selectedColor: string;\r\n            unselectedColor: string;\r\n            disabledColor: string;\r\n            marginLeft: number;\r\n            outline: string;\r\n            background?: string;\r\n            transparency: number;\r\n            outlineColor: string;\r\n            outlineWeight: number;\r\n            borderStyle: string;\r\n        };\r\n        slicerItemContainer: {\r\n            marginTop: number;\r\n            marginLeft: number;\r\n        };\r\n        images: {\r\n            imageSplit: number;\r\n            stretchImage: boolean;\r\n            bottomImage: boolean;\r\n        };\r\n    }\r\n\r\n    export class ChicletSlicer implements IVisual {\r\n        public static capabilities: VisualCapabilities = {\r\n            dataRoles: [\r\n                {\r\n                    name: 'Category',\r\n                    kind: VisualDataRoleKind.Grouping,\r\n                    displayName: powerbi.data.createDisplayNameGetter('Role_DisplayName_Field'),\r\n                },\r\n                {\r\n                    name: 'Values',\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: data.createDisplayNameGetter('Role_DisplayName_Values'),\r\n                },\r\n                {\r\n                    name: 'Image',\r\n                    kind: VisualDataRoleKind.Grouping,\r\n                    displayName: 'Image',\r\n                },\r\n            ],\r\n            objects: {\r\n                general: {\r\n                    displayName: data.createDisplayNameGetter('Visual_General'),\r\n                    properties: {\r\n                        selection: {\r\n                            displayName: \"Selection\",\r\n                            type: { text: true }\r\n                        },\r\n                        orientation: {\r\n                            displayName: 'Orientation',\r\n                            type: { enumeration: Orientation.type }\r\n                        },\r\n                        columns: {\r\n                            displayName: 'Columns',\r\n                            type: { numeric: true }\r\n                        },\r\n                        rows: {\r\n                            displayName: 'Rows',\r\n                            type: { numeric: true }\r\n                        },\r\n                        showDisabled: {\r\n                            displayName: 'Show Disabled',\r\n                            type: { enumeration: ChicletSlicerShowDisabled.type }\r\n                        },\r\n                        multiselect: {\r\n                            displayName: 'Multiple selection',\r\n                            type: { bool: true }\r\n                        },\r\n                        selected: {\r\n                            type: { bool: true }\r\n                        },\r\n                        filter: {\r\n                            type: { filter: {} },\r\n                            rule: {\r\n                                output: {\r\n                                    property: 'selected',\r\n                                    selector: ['Category'],\r\n                                }\r\n                            }\r\n                        },\r\n                        formatString: {\r\n                            type: { formatting: { formatString: true } },\r\n                        },\r\n                    },\r\n                },\r\n                header: {\r\n                    displayName: data.createDisplayNameGetter('Visual_Header'),\r\n                    properties: {\r\n                        show: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Show'),\r\n                            type: { bool: true }\r\n                        },\r\n                        title: {\r\n                            displayName: 'Title',\r\n                            type: { text: true }\r\n                        },\r\n                        fontColor: {\r\n                            displayName: data.createDisplayNameGetter('Visual_FontColor'),\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        background: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Background'),\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        outline: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Outline'),\r\n                            type: { formatting: { outline: true } }\r\n                        },\r\n                        textSize: {\r\n                            displayName: data.createDisplayNameGetter('Visual_TextSize'),\r\n                            type: { numeric: true }\r\n                        },\r\n                        outlineColor: {\r\n                            displayName: 'Outline Color',\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        outlineWeight: {\r\n                            displayName: 'Outline Weight',\r\n                            type: { numeric: true }\r\n                        }\r\n                    }\r\n                },\r\n                rows: {\r\n                    displayName: 'Chiclets',\r\n                    properties: {\r\n                        fontColor: {\r\n                            displayName: 'Text color',\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        textSize: {\r\n                            displayName: data.createDisplayNameGetter('Visual_TextSize'),\r\n                            type: { numeric: true }\r\n                        },\r\n                        height: {\r\n                            displayName: 'Height',\r\n                            type: { numeric: true }\r\n                        },\r\n                        width: {\r\n                            displayName: 'Width',\r\n                            type: { numeric: true }\r\n                        },\r\n                        selectedColor: {\r\n                            displayName: 'Selected Color',\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        unselectedColor: {\r\n                            displayName: 'Unselected Color',\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        disabledColor: {\r\n                            displayName: 'Disabled Color',\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        background: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Background'),\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        transparency: {\r\n                            displayName: \"Transparency\",\r\n                            description: \"Set transparency for background color\",\r\n                            type: { numeric: true }\r\n                        },\r\n                        outline: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Outline'),\r\n                            type: { formatting: { outline: true } }\r\n                        },\r\n                        outlineColor: {\r\n                            displayName: 'Outline Color',\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        outlineWeight: {\r\n                            displayName: 'Outline Weight',\r\n                            type: { numeric: true }\r\n                        },\r\n                        borderStyle: {\r\n                            displayName: 'Outline Style',\r\n                            type: { enumeration: ChicletBorderStyle.type }\r\n                        },\r\n                    }\r\n                },\r\n                images: {\r\n                    displayName: 'Images',\r\n                    properties: {\r\n                        imageSplit: {\r\n                            displayName: 'Image Split',\r\n                            type: { numeric: true }\r\n                        },\r\n                        stretchImage: {\r\n                            displayName: 'Stretch image',\r\n                            type: { bool: true }\r\n                        },\r\n                        bottomImage: {\r\n                            displayName: 'Bottom image',\r\n                            type: { bool: true }\r\n                        },\r\n                    }\r\n                },\r\n            },\r\n            dataViewMappings: [{\r\n                conditions: [\r\n                    { 'Category': { max: 1 }, 'Image': { min: 0, max: 1 }, 'Values': { min: 0, max: 1 } }],\r\n                categorical: {\r\n                    categories: {\r\n                        for: { in: 'Category' },\r\n                        dataReductionAlgorithm: { top: {} }\r\n                    },\r\n                    values: {\r\n                        group: {\r\n                            by: 'Image',\r\n                            select: [{ bind: { to: 'Values' } },\r\n                            ],\r\n                            dataReductionAlgorithm: { top: {} }\r\n                        }\r\n                    },\r\n                    includeEmptyGroups: true\r\n                }\r\n            }],\r\n            supportsHighlight: true,\r\n            sorting: {\r\n                default: {},\r\n            },\r\n            suppressDefaultTitle: true,\r\n        };\r\n        private element: JQuery;\r\n        private currentViewport: IViewport;\r\n        private dataView: DataView;\r\n        private slicerHeader: D3.Selection;\r\n        private slicerBody: D3.Selection;\r\n        private tableView: ITableView;\r\n        private slicerData: ChicletSlicerData;\r\n        private settings: ChicletSlicerSettings;\r\n        private interactivityService: IInteractivityService;\r\n        private behavior: ChicletSlicerWebBehavior;\r\n        private hostServices: IVisualHostServices;\r\n        private waitingForData: boolean;\r\n        private isSelectionLoaded: boolean;\r\n        private isSelectionSaved: boolean;\r\n\r\n        public static DefaultFontFamily: string = 'Segoe UI, Tahoma, Verdana, Geneva, sans-serif';\r\n        public static DefaultFontSizeInPt: number = 11;       \r\n        private static cellTotalInnerPaddings = 8;\r\n        private static cellTotalInnerBorders = 2;\r\n        private static chicletTotalInnerRightLeftPaddings = 14;\r\n\r\n        private static ItemContainer: ClassAndSelector = createClassAndSelector('slicerItemContainer');\r\n        private static HeaderText: ClassAndSelector = createClassAndSelector('headerText');\r\n        private static Container: ClassAndSelector = createClassAndSelector('chicletSlicer');\r\n        private static LabelText: ClassAndSelector = createClassAndSelector('slicerText');\r\n        private static Header: ClassAndSelector = createClassAndSelector('slicerHeader');\r\n        private static Input: ClassAndSelector = createClassAndSelector('slicerCheckbox');\r\n        private static Clear: ClassAndSelector = createClassAndSelector('clear');\r\n        private static Body: ClassAndSelector = createClassAndSelector('slicerBody');\r\n      \r\n        public static DefaultStyleProperties(): ChicletSlicerSettings {\r\n            return {\r\n                general: {\r\n                    orientation: Orientation.VERTICAL,\r\n                    columns: 3,\r\n                    rows: 0,\r\n                    multiselect: true,\r\n                    showDisabled: ChicletSlicerShowDisabled.INPLACE,\r\n                    selection: null,\r\n                },\r\n                margin: {\r\n                    top: 50,\r\n                    bottom: 50,\r\n                    right: 50,\r\n                    left: 50\r\n                },\r\n                header: {\r\n                    borderBottomWidth: 1,\r\n                    show: true,\r\n                    outline: 'BottomOnly',\r\n                    fontColor: '#a6a6a6',\r\n                    background: null,\r\n                    textSize: 10,\r\n                    outlineColor: '#a6a6a6',\r\n                    outlineWeight: 1,\r\n                    title: '',\r\n                },\r\n                headerText: {\r\n                    marginLeft: 8,\r\n                    marginTop: 0\r\n                },\r\n                slicerText: {\r\n                    textSize: 10,\r\n                    height: 0,\r\n                    width: 0,\r\n                    fontColor: '#666666',\r\n                    hoverColor: '#212121',\r\n                    selectedColor: '#BDD7EE',\r\n                    unselectedColor: '#ffffff',\r\n                    disabledColor: 'grey',\r\n                    marginLeft: 8,\r\n                    outline: 'Frame',\r\n                    background: null,\r\n                    transparency: 0,\r\n                    outlineColor: '#000000',\r\n                    outlineWeight: 1,\r\n                    borderStyle: 'Cut',\r\n\r\n                },\r\n                slicerItemContainer: {\r\n                    // The margin is assigned in the less file. This is needed for the height calculations.\r\n                    marginTop: 5,\r\n                    marginLeft: 0,\r\n                },\r\n                images: {\r\n                    imageSplit: 50,\r\n                    stretchImage: false,\r\n                    bottomImage: false\r\n                }\r\n            };\r\n        }\r\n\r\n        constructor(options?: ChicletSlicerConstructorOptions) {\r\n            if (options) {\r\n                if (options.behavior) {\r\n                    this.behavior = options.behavior;\r\n                }\r\n            }\r\n            if (!this.behavior) {\r\n                this.behavior = new ChicletSlicerWebBehavior();\r\n            }\r\n        }\r\n\r\n        public static converter(dataView: DataView, localizedSelectAllText: string, interactivityService: IInteractivityService): ChicletSlicerData {\r\n            if (!dataView ||\r\n                !dataView.categorical ||\r\n                !dataView.categorical.categories ||\r\n                !dataView.categorical.categories[0] ||\r\n                !dataView.categorical.categories[0].values ||\r\n                !(dataView.categorical.categories[0].values.length > 0)) {\r\n                return;\r\n            }\r\n            var converter = new ChicletSlicerChartConversion.ChicletSlicerConverter(dataView, interactivityService);\r\n            converter.convert();\r\n            var slicerData: ChicletSlicerData;\r\n            var defaultSettings: ChicletSlicerSettings = this.DefaultStyleProperties();\r\n            var objects: DataViewObjects = dataView.metadata.objects;\r\n            if (objects) {\r\n                defaultSettings.general.orientation = DataViewObjects.getValue<string>(objects, chicletSlicerProps.general.orientation, defaultSettings.general.orientation);\r\n                defaultSettings.general.columns = DataViewObjects.getValue<number>(objects, chicletSlicerProps.general.columns, defaultSettings.general.columns);\r\n                defaultSettings.general.rows = DataViewObjects.getValue<number>(objects, chicletSlicerProps.general.rows, defaultSettings.general.rows);\r\n                defaultSettings.general.multiselect = DataViewObjects.getValue<boolean>(objects, chicletSlicerProps.general.multiselect, defaultSettings.general.multiselect);\r\n                defaultSettings.general.showDisabled = DataViewObjects.getValue<string>(objects, chicletSlicerProps.general.showDisabled, defaultSettings.general.showDisabled);\r\n                defaultSettings.general.selection = DataViewObjects.getValue(dataView.metadata.objects, chicletSlicerProps.general.selection, defaultSettings.general.selection);\r\n\r\n                defaultSettings.header.show = DataViewObjects.getValue<boolean>(objects, chicletSlicerProps.header.show, defaultSettings.header.show);\r\n                defaultSettings.header.title = DataViewObjects.getValue<string>(objects, chicletSlicerProps.header.title, defaultSettings.header.title);\r\n                defaultSettings.header.fontColor = DataViewObjects.getFillColor(objects, chicletSlicerProps.header.fontColor, defaultSettings.header.fontColor);\r\n                defaultSettings.header.background = DataViewObjects.getFillColor(objects, chicletSlicerProps.header.background, defaultSettings.header.background);\r\n                defaultSettings.header.textSize = DataViewObjects.getValue<number>(objects, chicletSlicerProps.header.textSize, defaultSettings.header.textSize);\r\n                defaultSettings.header.outline = DataViewObjects.getValue<string>(objects, chicletSlicerProps.header.outline, defaultSettings.header.outline);\r\n                defaultSettings.header.outlineColor = DataViewObjects.getFillColor(objects, chicletSlicerProps.header.outlineColor, defaultSettings.header.outlineColor);\r\n                defaultSettings.header.outlineWeight = DataViewObjects.getValue<number>(objects, chicletSlicerProps.header.outlineWeight, defaultSettings.header.outlineWeight);\r\n\r\n                defaultSettings.slicerText.textSize = DataViewObjects.getValue<number>(objects, chicletSlicerProps.rows.textSize, defaultSettings.slicerText.textSize);\r\n                defaultSettings.slicerText.height = DataViewObjects.getValue<number>(objects, chicletSlicerProps.rows.height, defaultSettings.slicerText.height);\r\n                defaultSettings.slicerText.width = DataViewObjects.getValue<number>(objects, chicletSlicerProps.rows.width, defaultSettings.slicerText.width);\r\n                defaultSettings.slicerText.selectedColor = DataViewObjects.getFillColor(objects, chicletSlicerProps.rows.selectedColor, defaultSettings.slicerText.selectedColor);\r\n                defaultSettings.slicerText.unselectedColor = DataViewObjects.getFillColor(objects, chicletSlicerProps.rows.unselectedColor, defaultSettings.slicerText.unselectedColor);\r\n                defaultSettings.slicerText.disabledColor = DataViewObjects.getFillColor(objects, chicletSlicerProps.rows.disabledColor, defaultSettings.slicerText.disabledColor);\r\n                defaultSettings.slicerText.background = DataViewObjects.getFillColor(objects, chicletSlicerProps.rows.background, defaultSettings.slicerText.background);\r\n                defaultSettings.slicerText.transparency = DataViewObjects.getValue<number>(objects, chicletSlicerProps.rows.transparency, defaultSettings.slicerText.transparency);\r\n                defaultSettings.slicerText.fontColor = DataViewObjects.getFillColor(objects, chicletSlicerProps.rows.fontColor, defaultSettings.slicerText.fontColor);\r\n                defaultSettings.slicerText.outline = DataViewObjects.getValue<string>(objects, chicletSlicerProps.rows.outline, defaultSettings.slicerText.outline);\r\n                defaultSettings.slicerText.outlineColor = DataViewObjects.getFillColor(objects, chicletSlicerProps.rows.outlineColor, defaultSettings.slicerText.outlineColor);\r\n                defaultSettings.slicerText.outlineWeight = DataViewObjects.getValue<number>(objects, chicletSlicerProps.rows.outlineWeight, defaultSettings.slicerText.outlineWeight);\r\n                defaultSettings.slicerText.borderStyle = DataViewObjects.getValue<string>(objects, chicletSlicerProps.rows.borderStyle, defaultSettings.slicerText.borderStyle);\r\n\r\n                defaultSettings.images.imageSplit = DataViewObjects.getValue<number>(objects, chicletSlicerProps.images.imageSplit, defaultSettings.images.imageSplit);\r\n                defaultSettings.images.stretchImage = DataViewObjects.getValue<boolean>(objects, chicletSlicerProps.images.stretchImage, defaultSettings.images.stretchImage);\r\n                defaultSettings.images.bottomImage = DataViewObjects.getValue<boolean>(objects, chicletSlicerProps.images.bottomImage, defaultSettings.images.bottomImage);\r\n            }\r\n\r\n            var categories: DataViewCategoricalColumn = dataView.categorical.categories[0];\r\n            slicerData = {\r\n                categorySourceName: categories.source.displayName,\r\n                formatString: valueFormatter.getFormatString(categories.source, chicletSlicerProps.formatString),\r\n                slicerSettings: defaultSettings,\r\n                slicerDataPoints: converter.dataPoints,\r\n            };\r\n\r\n            // Override hasSelection if a objects contained more scopeIds than selections we found in the data\r\n            slicerData.hasSelectionOverride = converter.hasSelectionOverride;\r\n\r\n            return slicerData;\r\n        }\r\n\r\n        public init(options: VisualInitOptions): void {\r\n            this.element = options.element;\r\n            this.currentViewport = options.viewport;\r\n            if (this.behavior) {\r\n                this.interactivityService = createInteractivityService(options.host);\r\n            }\r\n            this.hostServices = options.host;\r\n            this.settings = ChicletSlicer.DefaultStyleProperties();\r\n\r\n            this.initContainer();\r\n        }\r\n\r\n        public update(options: VisualUpdateOptions) {\r\n            if (!options ||\r\n                !options.dataViews ||\r\n                !options.dataViews[0] ||\r\n                !options.viewport) {\r\n                return;\r\n            }\r\n\r\n            var existingDataView = this.dataView;\r\n            this.dataView = options.dataViews[0];\r\n\r\n            var resetScrollbarPosition: boolean = true;\r\n            if (existingDataView) {\r\n                resetScrollbarPosition = !DataViewAnalysis.hasSameCategoryIdentity(existingDataView, this.dataView);\r\n            }\r\n\r\n            if (options.viewport.height === this.currentViewport.height\r\n                && options.viewport.width === this.currentViewport.width) {\r\n                this.waitingForData = false;\r\n            }\r\n            else {\r\n                this.currentViewport = options.viewport;\r\n            }\r\n\r\n            this.updateInternal(resetScrollbarPosition);\r\n        }\r\n\r\n        public onResizing(finalViewport: IViewport): void {\r\n            this.currentViewport = finalViewport;\r\n            this.updateInternal(false /* resetScrollbarPosition */);\r\n        }\r\n\r\n        public enumerateObjectInstances(options: EnumerateVisualObjectInstancesOptions): VisualObjectInstance[] {\r\n            var data: ChicletSlicerData = this.slicerData;\r\n            if (!data) {\r\n                return;\r\n            }\r\n\r\n            var objectName = options.objectName;\r\n            switch (objectName) {\r\n                case 'rows':\r\n                    return this.enumerateRows(data);\r\n                case 'header':\r\n                    return this.enumerateHeader(data);\r\n                case 'general':\r\n                    return this.enumerateGeneral(data);\r\n                case 'images':\r\n                    return this.enumerateImages(data);\r\n            }\r\n        }\r\n\r\n        private enumerateHeader(data: ChicletSlicerData): VisualObjectInstance[] {\r\n            var slicerSettings: ChicletSlicerSettings = this.settings;\r\n            return [{\r\n                selector: null,\r\n                objectName: 'header',\r\n                properties: {\r\n                    show: slicerSettings.header.show,\r\n                    title: slicerSettings.header.title,\r\n                    fontColor: slicerSettings.header.fontColor,\r\n                    background: slicerSettings.header.background,\r\n                    textSize: slicerSettings.header.textSize,\r\n                    outline: slicerSettings.header.outline,\r\n                    outlineColor: slicerSettings.header.outlineColor,\r\n                    outlineWeight: slicerSettings.header.outlineWeight\r\n                }\r\n            }];\r\n        }\r\n\r\n        private enumerateRows(data: ChicletSlicerData): VisualObjectInstance[] {\r\n            var slicerSettings: ChicletSlicerSettings = this.settings;\r\n            return [{\r\n                selector: null,\r\n                objectName: 'rows',\r\n                properties: {\r\n                    textSize: slicerSettings.slicerText.textSize,\r\n                    height: slicerSettings.slicerText.height,\r\n                    width: slicerSettings.slicerText.width,\r\n                    background: slicerSettings.slicerText.background,\r\n                    transparency: slicerSettings.slicerText.transparency,\r\n                    selectedColor: slicerSettings.slicerText.selectedColor,\r\n                    unselectedColor: slicerSettings.slicerText.unselectedColor,\r\n                    disabledColor: slicerSettings.slicerText.disabledColor,\r\n                    outline: slicerSettings.slicerText.outline,\r\n                    outlineColor: slicerSettings.slicerText.outlineColor,\r\n                    outlineWeight: slicerSettings.slicerText.outlineWeight,\r\n                    fontColor: slicerSettings.slicerText.fontColor,\r\n                    borderStyle: slicerSettings.slicerText.borderStyle,\r\n                }\r\n            }];\r\n        }\r\n\r\n        private enumerateGeneral(data: ChicletSlicerData): VisualObjectInstance[] {\r\n            var slicerSettings: ChicletSlicerSettings = this.settings;\r\n\r\n            return [{\r\n                selector: null,\r\n                objectName: 'general',\r\n                properties: {\r\n                    orientation: slicerSettings.general.orientation,\r\n                    columns: slicerSettings.general.columns,\r\n                    rows: slicerSettings.general.rows,\r\n                    showDisabled: slicerSettings.general.showDisabled,\r\n                    multiselect: slicerSettings.general.multiselect,\r\n                }\r\n            }];\r\n        }\r\n\r\n        private enumerateImages(data: ChicletSlicerData): VisualObjectInstance[] {\r\n            var slicerSettings: ChicletSlicerSettings = this.settings;\r\n            return [{\r\n                selector: null,\r\n                objectName: 'images',\r\n                properties: {\r\n                    imageSplit: slicerSettings.images.imageSplit,\r\n                    stretchImage: slicerSettings.images.stretchImage,\r\n                    bottomImage: slicerSettings.images.bottomImage,\r\n                }\r\n            }];\r\n        }\r\n        private updateInternal(resetScrollbarPosition: boolean) {\r\n            this.updateSlicerBodyDimensions();\r\n\r\n            var localizedSelectAllText: string = 'Select All';\r\n            var data = ChicletSlicer.converter(this.dataView, localizedSelectAllText, this.interactivityService);\r\n            if (!data) {\r\n                this.tableView.empty();\r\n                return;\r\n            }\r\n\r\n            if (this.interactivityService) {\r\n                this.interactivityService.applySelectionStateToData(data.slicerDataPoints);\r\n            }\r\n\r\n            data.slicerSettings.header.outlineWeight = data.slicerSettings.header.outlineWeight < 0 ? 0 : data.slicerSettings.header.outlineWeight;\r\n            data.slicerSettings.slicerText.outlineWeight = data.slicerSettings.slicerText.outlineWeight < 0 ? 0 : data.slicerSettings.slicerText.outlineWeight;\r\n\r\n            data.slicerSettings.general.getSavedSelection = () => {\r\n                    try \r\n                    {\r\n                        return JSON.parse(this.slicerData.slicerSettings.general.selection) || [];\r\n                    }\r\n                    catch(ex)\r\n                    {\r\n                        return [];\r\n                    }\r\n                };\r\n            data.slicerSettings.general.setSavedSelection = (selectionIds: string[]) => {\r\n                this.isSelectionSaved = true;\r\n                this.hostServices.persistProperties(<VisualObjectInstancesToPersist>{\r\n                        merge: [{\r\n                        objectName: \"general\",\r\n                        selector: null,\r\n                        properties: { selection: selectionIds && JSON.stringify(selectionIds) || \"\" }\r\n                    }]});\r\n                };\r\n\r\n            if(this.slicerData) {\r\n                if(this.isSelectionSaved) {\r\n                     this.isSelectionLoaded = true;\r\n                } else {\r\n                   this.isSelectionLoaded = this.slicerData.slicerSettings.general.selection === data.slicerSettings.general.selection;\r\n                }\r\n            } else {\r\n                this.isSelectionLoaded = false;\r\n            }\r\n\r\n            this.slicerData = data;\r\n            this.settings = this.slicerData.slicerSettings;\r\n            if (this.settings.general.showDisabled === ChicletSlicerShowDisabled.BOTTOM) {\r\n                data.slicerDataPoints.sort(function (a, b) {\r\n                    if (a.selectable === b.selectable) {\r\n                        return 0;\r\n                    } else if (a.selectable && !b.selectable) {\r\n                        return -1;\r\n                    } else {\r\n                        return 1;\r\n                    }\r\n                });\r\n            } else if (this.settings.general.showDisabled === ChicletSlicerShowDisabled.HIDE) {\r\n                data.slicerDataPoints = data.slicerDataPoints.filter(x => x.selectable);\r\n            }\r\n\r\n            var height: number = this.settings.slicerText.height;\r\n            if (height === 0) {\r\n                var extraSpaceForCell = ChicletSlicer.cellTotalInnerPaddings + ChicletSlicer.cellTotalInnerBorders;\r\n                var textProperties = ChicletSlicer.getChicletTextProperties(this.settings.slicerText.textSize);\r\n                height = TextMeasurementService.estimateSvgTextHeight(textProperties) + TextMeasurementService.estimateSvgTextBaselineDelta(textProperties) + extraSpaceForCell;\r\n                var hasImage = _.any(data.slicerDataPoints, x=> x.imageURL !== '' && typeof x.imageURL !== \"undefined\");\r\n                if (hasImage)\r\n                    height += 100;\r\n            }\r\n\r\n            this.tableView\r\n                .rowHeight(height)\r\n                .columnWidth(this.settings.slicerText.width)\r\n                .orientation(this.settings.general.orientation)\r\n                .rows(this.settings.general.rows)\r\n                .columns(this.settings.general.columns)\r\n                .data(data.slicerDataPoints,\r\n                (d: ChicletSlicerDataPoint) => $.inArray(d, data.slicerDataPoints),\r\n                resetScrollbarPosition)\r\n                .viewport(this.getSlicerBodyViewport(this.currentViewport))\r\n                .render();\r\n\r\n            // if(!selectedItems.length  &&  String(savedSelection).length && this.slicerData && this.slicerData.hasSelectionOverride){\r\n            //     var arrSelection = String(savedSelection).split('&');\r\n            //     var arrSelected = jQuery.map(data.slicerDataPoints, function (d, index) { \r\n            //         if (arrSelection.indexOf(d.category) > -1) return d; \r\n            //     });\r\n            //     data.slicerDataPoints.forEach(function (d, index) { \r\n            //         if (arrSelection.indexOf(d.category) > -1){\r\n            //             d.selected = true;\r\n            //             // console.error('>>>>@@@', d, index);\r\n            //         }\r\n            //     });\r\n            //     if(!arrSelection.length){\r\n            //         this.slicerData.hasSelectionOverride = false\r\n            //     }\r\n            //     // console.error('>>> 2', 'RESTORE',   savedSelection,     arrSelected,     data.slicerDataPoints )\r\n            // }\r\n        }\r\n\r\n        private initContainer() {\r\n            var settings: ChicletSlicerSettings = this.settings;\r\n            var slicerBodyViewport: IViewport = this.getSlicerBodyViewport(this.currentViewport);\r\n            var slicerContainer: D3.Selection = d3.select(this.element.get(0))\r\n                .append('div')\r\n                .classed(ChicletSlicer.Container.class, true);\r\n\r\n            this.slicerHeader = slicerContainer\r\n                .append('div')\r\n                .classed(ChicletSlicer.Header.class, true);\r\n\r\n            this.slicerHeader\r\n                .append('span')\r\n                .classed(ChicletSlicer.Clear.class, true)\r\n                .attr('title', 'Clear');\r\n\r\n            this.slicerHeader\r\n                .append('div')\r\n                .classed(ChicletSlicer.HeaderText.class, true)\r\n                .style({\r\n                    'margin-left': PixelConverter.toString(settings.headerText.marginLeft),\r\n                    'margin-top': PixelConverter.toString(settings.headerText.marginTop),\r\n                    'border-style': this.getBorderStyle(settings.header.outline),\r\n                    'border-color': settings.header.outlineColor,\r\n                    'border-width': this.getBorderWidth(settings.header.outline, settings.header.outlineWeight),\r\n                    'font-size': PixelConverter.fromPoint(settings.header.textSize),\r\n                });\r\n\r\n            this.slicerBody = slicerContainer\r\n                .append('div').classed(ChicletSlicer.Body.class, true)\r\n                .classed('slicerBody-horizontal', settings.general.orientation === Orientation.HORIZONTAL)\r\n                .classed('slicerBody-vertical', settings.general.orientation === Orientation.VERTICAL)\r\n                .style({\r\n                    'height': PixelConverter.toString(slicerBodyViewport.height),\r\n                    'width': '100%',\r\n                });\r\n\r\n            var rowEnter = (rowSelection: D3.Selection) => {\r\n                var settings: ChicletSlicerSettings = this.settings;\r\n                var listItemElement = rowSelection.append('li')\r\n                    .classed(ChicletSlicer.ItemContainer.class, true)\r\n                    .style({\r\n                        'margin-left': PixelConverter.toString(settings.slicerItemContainer.marginLeft),\r\n                    });\r\n\r\n                listItemElement.append('div')\r\n                    .classed('slicer-img-wrapper', true);\r\n\r\n                listItemElement.append('div')\r\n                    .classed('slicer-text-wrapper', true)\r\n                    .append('span')\r\n                    .classed(ChicletSlicer.LabelText.class, true)\r\n                    .style({\r\n                        'font-size': PixelConverter.fromPoint(settings.slicerText.textSize),\r\n                    });\r\n            };\r\n\r\n            var rowUpdate = (rowSelection: D3.Selection) => {\r\n                var settings: ChicletSlicerSettings = this.settings;\r\n                var data = this.slicerData;\r\n                if (data && settings) {\r\n                    this.slicerHeader.classed('hidden', !settings.header.show);\r\n                    this.slicerHeader.select(ChicletSlicer.HeaderText.selector)\r\n                        .text(settings.header.title.trim() !== \"\" ? settings.header.title.trim() : this.slicerData.categorySourceName)\r\n                        .style({\r\n                            'border-style': this.getBorderStyle(settings.header.outline),\r\n                            'border-color': settings.header.outlineColor,\r\n                            'border-width': this.getBorderWidth(settings.header.outline, settings.header.outlineWeight),\r\n                            'color': settings.header.fontColor,\r\n                            'background-color': settings.header.background,\r\n                            'font-size': PixelConverter.fromPoint(settings.header.textSize),\r\n                        });\r\n\r\n                    this.slicerBody\r\n                        .classed('slicerBody-horizontal', settings.general.orientation === Orientation.HORIZONTAL)\r\n                        .classed('slicerBody-vertical', settings.general.orientation === Orientation.VERTICAL);\r\n\r\n                    var slicerText = rowSelection.selectAll(ChicletSlicer.LabelText.selector);\r\n                    var textProperties = ChicletSlicer.getChicletTextProperties(settings.slicerText.textSize);\r\n\r\n                    var formatString = data.formatString;\r\n                    slicerText.text((d: ChicletSlicerDataPoint) => {\r\n                        var text = valueFormatter.format(d.category, formatString);\r\n                        textProperties.text = text;\r\n                        if (this.settings.slicerText.width === 0)\r\n                            return powerbi.TextMeasurementService.getTailoredTextOrDefault(textProperties, (this.currentViewport.width / this.settings.general.columns) - ChicletSlicer.chicletTotalInnerRightLeftPaddings - ChicletSlicer.cellTotalInnerBorders - settings.slicerText.outlineWeight); \r\n                        else\r\n                            return TextMeasurementService.getTailoredTextOrDefault(textProperties, this.settings.slicerText.width - ChicletSlicer.chicletTotalInnerRightLeftPaddings - ChicletSlicer.cellTotalInnerBorders - settings.slicerText.outlineWeight);\r\n                    });\r\n\r\n                    var slicerImg = rowSelection.selectAll('.slicer-img-wrapper');\r\n                    slicerImg\r\n                        .style('height', settings.images.imageSplit + '%')\r\n                        .classed('hidden', (d: ChicletSlicerDataPoint) => {\r\n                            if (!(d.imageURL)) {\r\n                                return true;\r\n                            }\r\n                            if (settings.images.imageSplit < 10) {\r\n                                return true;\r\n                            }\r\n                        })\r\n                        .style('display', (d: ChicletSlicerDataPoint) => (d.imageURL) ? 'flex' : 'none')\r\n                        .classed('stretchImage', settings.images.stretchImage)\r\n                        .classed('bottomImage', settings.images.bottomImage)\r\n                        .style('background-image', (d: ChicletSlicerDataPoint) => {\r\n                            return d.imageURL ? `url(${d.imageURL})` : '';\r\n                        });\r\n\r\n                    rowSelection.selectAll('.slicer-text-wrapper')\r\n                        .style('height', (d: ChicletSlicerDataPoint) => {\r\n                            return d.imageURL ? (100 - settings.images.imageSplit) + '%' : '100%';\r\n                        })\r\n                        .classed('hidden', (d: ChicletSlicerDataPoint) => {\r\n                            if (settings.images.imageSplit > 90) {\r\n                                return true;\r\n                            }\r\n                        });\r\n\r\n                    rowSelection.selectAll('.slicerItemContainer').style({\r\n                        'color': settings.slicerText.fontColor,\r\n                        'border-style': this.getBorderStyle(settings.slicerText.outline),\r\n                        'border-color': settings.slicerText.outlineColor,\r\n                        'border-width': this.getBorderWidth(settings.slicerText.outline, settings.slicerText.outlineWeight),\r\n                        'font-size': PixelConverter.fromPoint(settings.slicerText.textSize),\r\n                        'border-radius': this.getBorderRadius(settings.slicerText.borderStyle),\r\n                    });\r\n\r\n                    if (settings.slicerText.background)\r\n                        this.slicerBody.style('background-color', explore.util.hexToRGBString(settings.slicerText.background, (100 - settings.slicerText.transparency) / 100));\r\n                    else\r\n                        this.slicerBody.style('background-color',null);\r\n\r\n                    if (this.interactivityService && this.slicerBody) {\r\n                        var slicerBody = this.slicerBody.attr('width', this.currentViewport.width);\r\n                        var slicerItemContainers = slicerBody.selectAll(ChicletSlicer.ItemContainer.selector);\r\n                        var slicerItemLabels = slicerBody.selectAll(ChicletSlicer.LabelText.selector);\r\n                        var slicerItemInputs = slicerBody.selectAll(ChicletSlicer.Input.selector);\r\n                        var slicerClear = this.slicerHeader.select(ChicletSlicer.Clear.selector);\r\n\r\n                        var behaviorOptions: ChicletSlicerBehaviorOptions = {\r\n                            dataPoints: data.slicerDataPoints,\r\n                            slicerItemContainers: slicerItemContainers,\r\n                            slicerItemLabels: slicerItemLabels,\r\n                            slicerItemInputs: slicerItemInputs,\r\n                            slicerClear: slicerClear,\r\n                            interactivityService: this.interactivityService,\r\n                            slicerSettings: data.slicerSettings,\r\n                            isSelectionLoaded: this.isSelectionLoaded\r\n                        };\r\n\r\n                        this.interactivityService.bind(data.slicerDataPoints, this.behavior, behaviorOptions, {\r\n                            overrideSelectionFromData: true,\r\n                            hasSelectionOverride: data.hasSelectionOverride,\r\n                        });\r\n                        this.behavior.styleSlicerInputs(rowSelection.select(ChicletSlicer.ItemContainer.selector),\r\n                            this.interactivityService.hasSelection());\r\n                    }\r\n                    else {\r\n                        this.behavior.styleSlicerInputs(rowSelection.select(ChicletSlicer.ItemContainer.selector), false);\r\n                    }\r\n                }\r\n            };\r\n\r\n            var rowExit = (rowSelection: D3.Selection) => {\r\n                rowSelection.remove();\r\n            };\r\n\r\n            var tableViewOptions: TableViewViewOptions = {\r\n                rowHeight: this.getRowHeight(),\r\n                columnWidth: this.settings.slicerText.width,\r\n                orientation: this.settings.general.orientation,\r\n                rows: this.settings.general.rows,\r\n                columns: this.settings.general.columns,\r\n                enter: rowEnter,\r\n                exit: rowExit,\r\n                update: rowUpdate,\r\n                loadMoreData: () => this.onLoadMoreData(),\r\n                scrollEnabled: true,\r\n                viewport: this.getSlicerBodyViewport(this.currentViewport),\r\n                baseContainer: this.slicerBody,\r\n            };\r\n\r\n            this.tableView = TableViewFactory.createTableView(tableViewOptions);\r\n        }\r\n\r\n        private onLoadMoreData(): void {\r\n            if (!this.waitingForData && this.dataView.metadata && this.dataView.metadata.segment) {\r\n                this.hostServices.loadMoreData();\r\n                this.waitingForData = true;\r\n            }\r\n        }\r\n\r\n        private getSlicerBodyViewport(currentViewport: IViewport): IViewport {\r\n            var settings = this.settings;\r\n            var headerHeight = (settings.header.show) ? this.getHeaderHeight() : 0;\r\n            var slicerBodyHeight = currentViewport.height - (headerHeight + settings.header.borderBottomWidth);\r\n            return {\r\n                height: slicerBodyHeight,\r\n                width: currentViewport.width\r\n            };\r\n        }\r\n\r\n        private updateSlicerBodyDimensions(): void {\r\n            var slicerViewport: IViewport = this.getSlicerBodyViewport(this.currentViewport);\r\n            this.slicerBody\r\n                .style({\r\n                    'height': PixelConverter.toString(slicerViewport.height),\r\n                    'width': '100%',\r\n                });\r\n        }\r\n\r\n        public static getChicletTextProperties(textSize?: number): TextProperties {\r\n            return <TextProperties>{\r\n                fontFamily: ChicletSlicer.DefaultFontFamily,\r\n                fontSize: PixelConverter.fromPoint(textSize || ChicletSlicer.DefaultFontSizeInPt),\r\n            };\r\n        }\r\n\r\n        private getHeaderHeight(): number {\r\n            return TextMeasurementService.estimateSvgTextHeight(\r\n                ChicletSlicer.getChicletTextProperties(this.settings.header.textSize));\r\n        }\r\n\r\n        private getRowHeight(): number {\r\n            var textSettings = this.settings.slicerText;\r\n            return textSettings.height !== 0\r\n                ? textSettings.height\r\n                : TextMeasurementService.estimateSvgTextHeight(ChicletSlicer.getChicletTextProperties(textSettings.textSize));\r\n        }\r\n\r\n        private getBorderStyle(outlineElement: string): string {\r\n            return outlineElement === '0px' ? 'none' : 'solid';\r\n        }\r\n\r\n        private getBorderWidth(outlineElement: string, outlineWeight: number): string {\r\n            switch (outlineElement) {\r\n                case 'None':\r\n                    return '0px';\r\n                case 'BottomOnly':\r\n                    return '0px 0px ' + outlineWeight + 'px 0px';\r\n                case 'TopOnly':\r\n                    return outlineWeight + 'px 0px 0px 0px';\r\n                case 'TopBottom':\r\n                    return outlineWeight + 'px 0px ' + outlineWeight + 'px 0px';\r\n                case 'LeftRight':\r\n                    return '0px ' + outlineWeight + 'px 0px ' + outlineWeight + 'px';\r\n                case 'Frame':\r\n                    return outlineWeight + 'px';\r\n                default:\r\n                    return outlineElement.replace(\"1\", outlineWeight.toString());\r\n            }\r\n        }\r\n\r\n        private getBorderRadius(borderType: string): string {\r\n            switch (borderType) {\r\n                case ChicletBorderStyle.ROUNDED:\r\n                    return \"10px\";\r\n                case ChicletBorderStyle.SQUARE:\r\n                    return \"0px\";\r\n                default:\r\n                    return \"5px\";\r\n            }\r\n        }\r\n    }\r\n\r\n    module ChicletSlicerChartConversion {\r\n        export class ChicletSlicerConverter {\r\n            private dataViewCategorical: DataViewCategorical;\r\n            private dataViewMetadata: DataViewMetadata;\r\n            private category: DataViewCategoryColumn;\r\n            private categoryIdentities: DataViewScopeIdentity[];\r\n            private categoryValues: any[];\r\n            private categoryColumnRef: data.SQExpr[];\r\n            private categoryFormatString: string;\r\n            private interactivityService: IInteractivityService;\r\n\r\n            public numberOfCategoriesSelectedInData: number;\r\n            public dataPoints: ChicletSlicerDataPoint[];\r\n            public hasSelectionOverride: boolean;\r\n\r\n            public constructor(dataView: DataView, interactivityService: IInteractivityService) {\r\n\r\n                var dataViewCategorical = dataView.categorical;\r\n                this.dataViewCategorical = dataViewCategorical;\r\n                this.dataViewMetadata = dataView.metadata;\r\n\r\n                if (dataViewCategorical.categories && dataViewCategorical.categories.length > 0) {\r\n                    this.category = dataViewCategorical.categories[0];\r\n                    this.categoryIdentities = this.category.identity;\r\n                    this.categoryValues = this.category.values;\r\n                    this.categoryColumnRef = <data.SQExpr[]> this.category.identityFields;\r\n                    this.categoryFormatString = valueFormatter.getFormatString(this.category.source, chicletSlicerProps.formatString);\r\n                }\r\n\r\n                this.dataPoints = [];\r\n\r\n                this.interactivityService = interactivityService;\r\n                this.hasSelectionOverride = false;\r\n            }\r\n\r\n            public convert(): void {\r\n                this.dataPoints = [];\r\n                this.numberOfCategoriesSelectedInData = 0;\r\n                // If category exists, we render labels using category values. If not, we render labels\r\n                // using measure labels.\r\n                if (this.categoryValues) {\r\n                    var objects = this.dataViewMetadata ? <any>this.dataViewMetadata.objects : undefined;\r\n\r\n                    var isInvertedSelectionMode = undefined;\r\n                    var numberOfScopeIds: number;\r\n                    if (objects && objects.general && objects.general.filter) {\r\n                        if (!this.categoryColumnRef)\r\n                            return;\r\n                        var filter = <powerbi.data.SemanticFilter>objects.general.filter;\r\n                        var scopeIds = powerbi.data.SQExprConverter.asScopeIdsContainer(filter, this.categoryColumnRef);\r\n                        if (scopeIds) {\r\n                            isInvertedSelectionMode = scopeIds.isNot;\r\n                            numberOfScopeIds = scopeIds.scopeIds ? scopeIds.scopeIds.length : 0;\r\n                        }\r\n                        else {\r\n                            isInvertedSelectionMode = false;\r\n                        }\r\n                    }\r\n\r\n                    if (this.interactivityService) {\r\n                        if (isInvertedSelectionMode === undefined) {\r\n                            // The selection state is read from the Interactivity service in case of SelectAll or Clear when query doesn't update the visual\r\n                            isInvertedSelectionMode = this.interactivityService.isSelectionModeInverted();\r\n                        }\r\n                        else {\r\n                            this.interactivityService.setSelectionModeInverted(isInvertedSelectionMode);\r\n                        }\r\n                    }\r\n\r\n                    var hasSelection: boolean = undefined;\r\n\r\n                    for (var idx = 0; idx < this.categoryValues.length; idx++) {\r\n                        var selected = isCategoryColumnSelected(chicletSlicerProps.selectedPropertyIdentifier, this.category, idx);\r\n                        if (selected != null) {\r\n                            hasSelection = selected;\r\n                            break;\r\n                        }\r\n                    }\r\n\r\n                    var dataViewCategorical = this.dataViewCategorical;\r\n                    var formatStringProp = chicletSlicerProps.formatString;\r\n                    var value: number = -Infinity;\r\n                    var imageURL: string = '';\r\n\r\n                    for (var categoryIndex: number = 0, categoryCount = this.categoryValues.length; categoryIndex < categoryCount; categoryIndex++) {\r\n                        var categoryIdentity = this.category.identity ? this.category.identity[categoryIndex] : null;\r\n                        var categoryIsSelected = isCategoryColumnSelected(chicletSlicerProps.selectedPropertyIdentifier, this.category, categoryIndex);\r\n                        var selectable: boolean = true;\r\n\r\n                        if (hasSelection != null) {\r\n                            if (isInvertedSelectionMode) {\r\n                                if (this.category.objects == null)\r\n                                    categoryIsSelected = undefined;\r\n\r\n                                if (categoryIsSelected != null) {\r\n                                    categoryIsSelected = hasSelection;\r\n                                }\r\n                                else if (categoryIsSelected == null)\r\n                                    categoryIsSelected = !hasSelection;\r\n                            }\r\n                            else {\r\n                                if (categoryIsSelected == null) {\r\n                                    categoryIsSelected = !hasSelection;\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        if (categoryIsSelected) {\r\n                            this.numberOfCategoriesSelectedInData++;\r\n                        }\r\n\r\n                        var categoryValue = this.categoryValues[categoryIndex];\r\n                        var categoryLabel = valueFormatter.format(categoryValue, this.categoryFormatString);\r\n\r\n                        if (this.dataViewCategorical.values) {\r\n                        \r\n                            // Series are either measures in the multi-measure case, or the single series otherwise\r\n                            for (var seriesIndex: number = 0; seriesIndex < this.dataViewCategorical.values.length; seriesIndex++) {\r\n                                var seriesData = dataViewCategorical.values[seriesIndex];\r\n                                if (seriesData.values[categoryIndex] != null) {\r\n                                    value = seriesData.values[categoryIndex];\r\n                                    if (seriesData.highlights) {\r\n                                        selectable = !(seriesData.highlights[categoryIndex] === null);\r\n                                    }\r\n                                    if (seriesData.source.groupName && seriesData.source.groupName !== '') {\r\n                                        imageURL = converterHelper.getFormattedLegendLabel(seriesData.source, dataViewCategorical.values, formatStringProp);\r\n                                        if (!/^(ftp|http|https):\\/\\/[^ \"]+$/.test(imageURL)) {\r\n                                            imageURL = undefined;\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                        this.dataPoints.push({\r\n                            identity: SelectionId.createWithId(categoryIdentity),\r\n                            category: categoryLabel,\r\n                            imageURL: imageURL,\r\n                            value: value,\r\n                            selected: categoryIsSelected,\r\n                            selectable: selectable\r\n                        });\r\n                    }\r\n                    if (numberOfScopeIds != null && numberOfScopeIds > this.numberOfCategoriesSelectedInData) {\r\n                        this.hasSelectionOverride = true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    //TODO: This module should be removed once TextMeasruementService exports the \"estimateSvgTextBaselineDelta\" function.\r\n    export module ChicletSlicerTextMeasurementHelper {\r\n        interface CanvasContext {\r\n            font: string;\r\n            measureText(text: string): { width: number };\r\n        }\r\n\r\n        interface CanvasElement extends HTMLElement {\r\n            getContext(name: string);\r\n        }\r\n\r\n        var spanElement: JQuery;\r\n        var svgTextElement: D3.Selection;\r\n        var canvasCtx: CanvasContext;\r\n\r\n        export function estimateSvgTextBaselineDelta(textProperties: TextProperties): number {\r\n            var rect = estimateSvgTextRect(textProperties);\r\n            return rect.y + rect.height;\r\n        }\r\n\r\n        function ensureDOM(): void {\r\n            if (spanElement)\r\n                return;\r\n\r\n            spanElement = $('<span/>');\r\n            $('body').append(spanElement);\r\n            //The style hides the svg element from the canvas, preventing canvas from scrolling down to show svg black square.\r\n            svgTextElement = d3.select($('body').get(0))\r\n                .append('svg')\r\n                .style({\r\n                    'height': '0px',\r\n                    'width': '0px',\r\n                    'position': 'absolute'\r\n                })\r\n                .append('text');\r\n            canvasCtx = (<CanvasElement>$('<canvas/>').get(0)).getContext(\"2d\");\r\n        }\r\n\r\n        function measureSvgTextRect(textProperties: TextProperties): SVGRect {\r\n            debug.assertValue(textProperties, 'textProperties');\r\n\r\n            ensureDOM();\r\n\r\n            svgTextElement.style(null);\r\n            svgTextElement\r\n                .text(textProperties.text)\r\n                .attr({\r\n                    'visibility': 'hidden',\r\n                    'font-family': textProperties.fontFamily,\r\n                    'font-size': textProperties.fontSize,\r\n                    'font-weight': textProperties.fontWeight,\r\n                    'font-style': textProperties.fontStyle,\r\n                    'white-space': textProperties.whiteSpace || 'nowrap'\r\n                });\r\n\r\n            // We're expecting the browser to give a synchronous measurement here\r\n            // We're using SVGTextElement because it works across all browsers \r\n            return svgTextElement.node<SVGTextElement>().getBBox();\r\n        }\r\n\r\n        function estimateSvgTextRect(textProperties: TextProperties): SVGRect {\r\n            debug.assertValue(textProperties, 'textProperties');\r\n\r\n            var estimatedTextProperties: TextProperties = {\r\n                fontFamily: textProperties.fontFamily,\r\n                fontSize: textProperties.fontSize,\r\n                text: \"M\",\r\n            };\r\n\r\n            var rect = measureSvgTextRect(estimatedTextProperties);\r\n\r\n            return rect;\r\n        }\r\n    }\r\n\r\n    export interface ChicletSlicerBehaviorOptions {\r\n        slicerItemContainers: D3.Selection;\r\n        slicerItemLabels: D3.Selection;\r\n        slicerItemInputs: D3.Selection;\r\n        slicerClear: D3.Selection;\r\n        dataPoints: ChicletSlicerDataPoint[];\r\n        interactivityService: IInteractivityService;\r\n        slicerSettings: ChicletSlicerSettings;\r\n        isSelectionLoaded: boolean;\r\n    }\r\n\r\n    export class ChicletSlicerWebBehavior implements IInteractiveBehavior {\r\n        private slicers: D3.Selection;\r\n        private slicerItemLabels: D3.Selection;\r\n        private slicerItemInputs: D3.Selection;\r\n        private dataPoints: ChicletSlicerDataPoint[];\r\n        private interactivityService: IInteractivityService;\r\n        private slicerSettings: ChicletSlicerSettings;\r\n        private options: ChicletSlicerBehaviorOptions;\r\n\r\n        public bindEvents(options: ChicletSlicerBehaviorOptions, selectionHandler: ISelectionHandler): void {\r\n            var filterPropertyId = chicletSlicerProps.filterPropertyIdentifier;\r\n            var slicers = this.slicers = options.slicerItemContainers;\r\n            this.slicerItemLabels = options.slicerItemLabels;\r\n            this.slicerItemInputs = options.slicerItemInputs;\r\n            var slicerClear = options.slicerClear;\r\n            this.dataPoints = options.dataPoints;\r\n            this.interactivityService = options.interactivityService;\r\n            this.slicerSettings = options.slicerSettings;\r\n            this.options = options;\r\n\r\n            if(!this.options.isSelectionLoaded) {\r\n                this.loadSelection(selectionHandler);\r\n            }\r\n\r\n            slicers.on(\"mouseover\", (d: ChicletSlicerDataPoint) => {\r\n                if (d.selectable) {\r\n                    d.mouseOver = true;\r\n                    d.mouseOut = false;\r\n                    this.renderMouseover();\r\n                }\r\n            });\r\n\r\n            slicers.on(\"mouseout\", (d: ChicletSlicerDataPoint) => {\r\n                if (d.selectable) {\r\n                    d.mouseOver = false;\r\n                    d.mouseOut = true;\r\n                    this.renderMouseover();\r\n                }\r\n            });\r\n\r\n            slicers.on(\"click\", (d: ChicletSlicerDataPoint, index) => {\r\n                if (!d.selectable) {\r\n                    return;\r\n                }\r\n                var settings: ChicletSlicerSettings = this.slicerSettings;\r\n                d3.event.preventDefault();\r\n                if (d3.event.altKey && settings.general.multiselect) {\r\n                    var selectedIndexes = jQuery.map(this.dataPoints, function (d, index) { if (d.selected) return index; });\r\n                    var selIndex = selectedIndexes.length > 0 ? (selectedIndexes[selectedIndexes.length - 1]) : 0;\r\n                    if (selIndex > index) {\r\n                        var temp = index;\r\n                        index = selIndex;\r\n                        selIndex = temp;\r\n                    }\r\n                    selectionHandler.handleClearSelection();\r\n                    for (var i = selIndex; i <= index; i++) {\r\n                        selectionHandler.handleSelection(this.dataPoints[i], true /* isMultiSelect */);\r\n                    }\r\n                }\r\n                else if (d3.event.ctrlKey && settings.general.multiselect) {\r\n                    selectionHandler.handleSelection(d, true /* isMultiSelect */);\r\n                }\r\n                else {\r\n                    selectionHandler.handleSelection(d, false /* isMultiSelect */);\r\n                }\r\n                selectionHandler.persistSelectionFilter(filterPropertyId);\r\n                this.saveSelection(selectionHandler);\r\n            });\r\n\r\n            slicerClear.on(\"click\", (d: SelectableDataPoint) => {\r\n                selectionHandler.handleClearSelection();\r\n                selectionHandler.persistSelectionFilter(filterPropertyId);\r\n                this.saveSelection(selectionHandler);\r\n            });\r\n        }\r\n\r\n        public loadSelection(selectionHandler: ISelectionHandler): void {\r\n            selectionHandler.handleClearSelection();\r\n            var savedSelectionIds =  this.slicerSettings.general.getSavedSelection();\r\n            if(savedSelectionIds.length) {\r\n                var selectedDataPoints = this.dataPoints.filter(d => savedSelectionIds.some(x => d.identity.getKey() === x));\r\n                selectedDataPoints.forEach(x => selectionHandler.handleSelection(x, true));\r\n                selectionHandler.persistSelectionFilter(chicletSlicerProps.filterPropertyIdentifier);\r\n            }\r\n        }\r\n\r\n        public saveSelection(selectionHandler: ISelectionHandler): void {\r\n            var selectionIdKeys = (<SelectionId[]>(<any>selectionHandler).selectedIds).map(x=>x.getKey());\r\n            this.slicerSettings.general.setSavedSelection(selectionIdKeys);\r\n        }\r\n\r\n        public renderSelection(hasSelection: boolean): void {\r\n            if (!hasSelection && !this.interactivityService.isSelectionModeInverted()) {\r\n                this.slicers.style('background', this.slicerSettings.slicerText.unselectedColor);\r\n            }\r\n            else {\r\n                this.styleSlicerInputs(this.slicers, hasSelection);\r\n            }\r\n        }\r\n\r\n        private renderMouseover(): void {\r\n            this.slicerItemLabels.style({\r\n                'color': (d: ChicletSlicerDataPoint) => {\r\n                    if (d.mouseOver)\r\n                        return this.slicerSettings.slicerText.hoverColor;\r\n\r\n                    if (d.mouseOut) {\r\n                        if (d.selected)\r\n                            return this.slicerSettings.slicerText.fontColor;\r\n                        else\r\n                            return this.slicerSettings.slicerText.fontColor;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        public styleSlicerInputs(slicers: D3.Selection, hasSelection: boolean) {\r\n            var settings = this.slicerSettings;\r\n            var selectedItems = [];\r\n            slicers.each(function (d: ChicletSlicerDataPoint) {\r\n                // get selected items\r\n                if (d.selectable && d.selected) {\r\n                    selectedItems.push(d);\r\n                }\r\n                \r\n                d3.select(this).style({\r\n                    'background': d.selectable ? (d.selected ? settings.slicerText.selectedColor : settings.slicerText.unselectedColor)\r\n                        : settings.slicerText.disabledColor\r\n                });\r\n                d3.select(this).classed('slicerItem-disabled', !d.selectable);\r\n            });\r\n        }\r\n    }\r\n\r\n    module explore.util {\r\n        export function hexToRGBString(hex: string, transparency?: number): string {\r\n        \r\n            // Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\r\n            var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\r\n            hex = hex.replace(shorthandRegex, function (m, r, g, b) {\r\n                return r + r + g + g + b + b;\r\n            });\r\n\r\n            // Hex format which return the format r-g-b\r\n            var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n\r\n            var rgb = result ? {\r\n                r: parseInt(result[1], 16),\r\n                g: parseInt(result[2], 16),\r\n                b: parseInt(result[3], 16)\r\n            } : null;\r\n\r\n            // Wrong input\r\n            if (rgb === null) {\r\n                return '';\r\n            }\r\n\r\n            if (!transparency && transparency !== 0) {\r\n                return \"rgb(\" + rgb.r + \",\" + rgb.g + \",\" + rgb.b + \")\";\r\n            }\r\n            else {\r\n                return \"rgba(\" + rgb.r + \",\" + rgb.g + \",\" + rgb.b + \",\" + transparency + \")\";\r\n            }\r\n        }\r\n    }\r\n}","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.visuals.samples {\r\n    import ClassAndSelector = jsCommon.CssConstants.ClassAndSelector;\r\n\r\n    export interface ChordChartData {\r\n        dataMatrix: number[][];\r\n        labelDataPoints: ChordArcDescriptor[];\r\n        legendData?: LegendData;\r\n        labelFontSize: number;\r\n        tooltipData: ChordTooltipData[][];\r\n        sliceTooltipData: ChordTooltipData[];\r\n        tickUnit: number;\r\n        differentFromTo: boolean;\r\n        defaultDataPointColor?: string;\r\n        prevAxisVisible: boolean;\r\n        showAllDataPoints?: boolean;\r\n        showLabels: boolean;\r\n        showAxis: boolean;\r\n    }\r\n\r\n    export interface ChordArcDescriptor extends D3.Layout.ArcDescriptor {\r\n        data: ChordArcLabelData;\r\n    }\r\n\r\n    export interface ChordArcLabelData extends LabelEnabledDataPoint, SelectableDataPoint {\r\n        label: string;\r\n        labelColor: string;\r\n        barColor: string;\r\n        isCategory: boolean;\r\n    }\r\n\r\n    export interface ChordTooltipData {\r\n        tooltipInfo: TooltipDataItem[];\r\n    }\r\n\r\n    export class ChordChart implements IVisual {\r\n        public static capabilities: VisualCapabilities = {\r\n            dataRoles: [\r\n                {\r\n                    name: 'Category',\r\n                    kind: VisualDataRoleKind.Grouping,\r\n                    displayName: 'From',\r\n                }, {\r\n                    name: 'Series',\r\n                    kind: VisualDataRoleKind.Grouping,\r\n                    displayName: 'To',\r\n                }, {\r\n                    name: 'Y',\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: data.createDisplayNameGetter('Role_DisplayName_Values'),\r\n                }\r\n            ],\r\n            dataViewMappings: [{\r\n                conditions: [\r\n                    { 'Category': { max: 1 }, 'Series': { max: 0 } },\r\n                    { 'Category': { max: 1 }, 'Series': { min: 1, max: 1 }, 'Y': { max: 1 } },\r\n                    { 'Category': { max: 1 }, 'Series': { max: 0 }, 'Y': { min: 0, max: 1 } },\r\n                ],\r\n                categorical: {\r\n                    categories: {\r\n                        for: { in: 'Category' },\r\n                        dataReductionAlgorithm: { top: {} }\r\n                    },\r\n                    values: {\r\n                        group: {\r\n                            by: 'Series',\r\n                            select: [{ bind: { to: 'Y' } }],\r\n                            dataReductionAlgorithm: { top: {} }\r\n                        },\r\n                    },\r\n                    rowCount: { preferred: { min: 2 }, supported: { min: 1 } }\r\n                },\r\n            }],\r\n            objects: {\r\n                dataPoint: {\r\n                    displayName: data.createDisplayNameGetter('Visual_DataPoint'),\r\n                    properties: {\r\n                        defaultColor: {\r\n                            displayName: data.createDisplayNameGetter('Visual_DefaultColor'),\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        showAllDataPoints: {\r\n                            displayName: data.createDisplayNameGetter('Visual_DataPoint_Show_All'),\r\n                            type: { bool: true }\r\n                        },\r\n                        fill: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Fill'),\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                    },\r\n                },\r\n                axis: {\r\n                    displayName: 'Axis',\r\n                    properties: {\r\n                        show: {\r\n                            type: { bool: true }\r\n                        },\r\n                    },\r\n                },\r\n                labels: {\r\n                    displayName: 'Labels',\r\n                    properties: {\r\n                        show: {\r\n                            type: { bool: true }\r\n                        },\r\n                        color: {\r\n                            displayName: data.createDisplayNameGetter(\"Visual_Reference_Line_Data_Label_Color\"),\r\n                            description: data.createDisplayNameGetter('Visual_Reference_Line_Data_Label_Color_Description'),\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        fontSize: {\r\n                            displayName: data.createDisplayNameGetter('Visual_TextSize'),\r\n                            type: { formatting: { fontSize: true } },\r\n                        },\r\n                    },\r\n                }\r\n            }\r\n        };\r\n\r\n        public static chordChartProps = {\r\n            general: {\r\n                formatString: <DataViewObjectPropertyIdentifier>{ objectName: 'general', propertyName: 'formatString' },\r\n            },\r\n            dataPoint: {\r\n                defaultColor: <DataViewObjectPropertyIdentifier>{ objectName: 'dataPoint', propertyName: 'defaultColor' },\r\n                fill: <DataViewObjectPropertyIdentifier>{ objectName: 'dataPoint', propertyName: 'fill' },\r\n                showAllDataPoints: <DataViewObjectPropertyIdentifier>{ objectName: 'dataPoint', propertyName: 'showAllDataPoints' },\r\n            },\r\n            axis: {\r\n                show: <DataViewObjectPropertyIdentifier>{ objectName: 'axis', propertyName: 'show' },\r\n            },\r\n            labels: {\r\n                show: <DataViewObjectPropertyIdentifier>{ objectName: 'labels', propertyName: 'show' },\r\n                color: <DataViewObjectPropertyIdentifier>{ objectName: 'labels', propertyName: 'color' },\r\n                fontSize: <DataViewObjectPropertyIdentifier>{ objectName: 'labels', propertyName: 'fontSize' },\r\n            },\r\n        };\r\n\r\n        public static PolylineOpacity = 0.5;\r\n\r\n        private static OuterArcRadiusRatio = 0.9;\r\n        private static InnerArcRadiusRatio = 0.8;\r\n        private static DefaultLabelColor = \"#777777\";\r\n        private static DefaultLabelsFontSize = 12;\r\n\r\n        private static VisualClassName = 'chordChart';\r\n\r\n        private static sliceClass: ClassAndSelector = {\r\n            class: 'slice',\r\n            selector: '.slice',\r\n        };\r\n\r\n        private static chordClass: ClassAndSelector = {\r\n            class: 'chord',\r\n            selector: '.chord',\r\n        };\r\n\r\n        private static sliceTicksClass: ClassAndSelector = {\r\n            class: 'slice-ticks',\r\n            selector: '.slice-ticks'\r\n        };\r\n\r\n        private static tickPairClass: ClassAndSelector = {\r\n            class: 'tick-pair',\r\n            selector: '.tick-pair'\r\n        };\r\n\r\n        private static tickLineClass: ClassAndSelector = {\r\n            class: 'tick-line',\r\n            selector: '.tick-line'\r\n        };\r\n\r\n        private static tickTextClass: ClassAndSelector = {\r\n            class: 'tick-text',\r\n            selector: '.tick-text'\r\n        };\r\n\r\n        private static labelGraphicsContextClass: ClassAndSelector = {\r\n            class: 'labels',\r\n            selector: '.labels',\r\n        };\r\n\r\n        private static labelsClass: ClassAndSelector = {\r\n            class: 'data-labels',\r\n            selector: '.data-labels',\r\n        };\r\n\r\n        private static linesGraphicsContextClass: ClassAndSelector = {\r\n            class: 'lines',\r\n            selector: '.lines',\r\n        };\r\n\r\n        private static lineClass: ClassAndSelector = {\r\n            class: 'line-label',\r\n            selector: '.line-label',\r\n        };\r\n\r\n        private chordLayout: D3.Layout.ChordLayout;\r\n        private element: JQuery;\r\n\r\n        private svg: D3.Selection;\r\n        private mainGraphicsContext: D3.Selection;\r\n\r\n        private data: ChordChartData;\r\n        private colors: IDataColorPalette;\r\n        private selectionManager: utility.SelectionManager;\r\n        private dataView: DataView;\r\n        \r\n        /* Convert a DataView into a view model */\r\n        public static converter(dataView: DataView, colors: IDataColorPalette, prevAxisVisible: boolean): ChordChartData {\r\n            let catDv: DataViewCategorical = dataView.categorical;\r\n\r\n            let defaultDataPointColor: string = ChordChart.getDefaultDataPointColor(dataView).solid.color;\r\n            let labelColor = ChordChart.getLabelsColor(dataView);\r\n            let labelFontSize = ChordChart.getLabelsFontSize(dataView);\r\n\r\n            if (catDv && catDv.categories && catDv.categories.length > 0 && catDv.values && catDv.categories[0].values && catDv.categories[0].values[0]) {\r\n\r\n                let cat: DataViewCategoryColumn = catDv.categories[0];\r\n                let catValues = cat.values;\r\n                let values = catDv.values;\r\n                let dataMatrix: number[][] = [];\r\n\r\n                let legendData: LegendData = {\r\n                    dataPoints: [],\r\n                    title: values[0] && values[0].source ? values[0].source.displayName : \"\",\r\n                };\r\n\r\n                let toolTipData: ChordTooltipData[][] = [];\r\n                let sliceTooltipData: ChordTooltipData[] = [];\r\n\r\n                let max: number = 1000;\r\n\r\n                let seriesName: string[] = [];  /* series name array */\r\n                let seriesIndex: number[] = []; /* series index array */\r\n\r\n                let catIndex: number[] = [];    /* index array for category names */\r\n\r\n                let isDiffFromTo: boolean = false;  /* boolean variable indicates that From and To are different */\r\n\r\n                let labelData: ChordArcLabelData[] = [];    /* label data: !important */\r\n\r\n                let colorHelper = new ColorHelper(colors,\r\n                    ChordChart.chordChartProps.dataPoint.fill,\r\n                    defaultDataPointColor);\r\n\r\n                for (let i: number = 0, iLen = catValues.length; i < iLen; i++) {\r\n                    catIndex[catValues[i]] = i;\r\n                }\r\n\r\n                for (let i: number = 0, iLen = values.length; i < iLen; i++) {\r\n                    let seriesNameStr: string = converterHelper.getSeriesName(values[i].source);\r\n\r\n                    seriesName.push(seriesNameStr);\r\n                    seriesIndex[seriesNameStr] = i;\r\n                }\r\n\r\n                let totalFields: any[] = this.union_arrays(catValues, seriesName);\r\n\r\n                if (ChordChart.getValidArrayLength(totalFields) ===\r\n                    ChordChart.getValidArrayLength(catValues) + ChordChart.getValidArrayLength(seriesName)) {\r\n                    isDiffFromTo = true;\r\n                }\r\n\r\n                let formatStringProp = ChordChart.chordChartProps.general.formatString;\r\n                let categorySourceFormatString = valueFormatter.getFormatString(cat.source, formatStringProp);\r\n\r\n                for (let i: number = 0, iLen = totalFields.length; i < iLen; i++) {\r\n                    let id: SelectionId = null;\r\n                    let color: string = '';\r\n                    let isCategory: boolean = false;\r\n\r\n                    if (catIndex[totalFields[i]] !== undefined) {\r\n                        let index = catIndex[totalFields[i]];\r\n                        id = SelectionIdBuilder\r\n                            .builder()\r\n                            .withCategory(cat, catIndex[totalFields[i]])\r\n                            .createSelectionId();\r\n                        isCategory = true;\r\n                        let thisCategoryObjects = cat.objects ? cat.objects[index] : undefined;\r\n\r\n                        color = colorHelper.getColorForSeriesValue(thisCategoryObjects, /* cat.identityFields */ undefined, catValues[index]);\r\n\r\n                    } else if (seriesIndex[totalFields[i]] !== undefined) {\r\n                        let index = seriesIndex[totalFields[i]];\r\n\r\n                        let seriesData = values[index];\r\n                        let seriesObjects = seriesData && seriesData.objects && seriesData.objects[0];\r\n                        let seriesNameStr = converterHelper.getSeriesName(seriesData.source);\r\n\r\n                        id = SelectionId.createWithId(seriesData.identity);\r\n                        isCategory = false;\r\n\r\n                        color = colorHelper.getColorForSeriesValue(seriesObjects, /* values.identityFields */ undefined, seriesNameStr);\r\n                    }\r\n\r\n                    labelData.push({\r\n                        label: totalFields[i],\r\n                        labelColor: labelColor,\r\n                        barColor: color,\r\n                        isCategory: isCategory,\r\n                        identity: id,\r\n                        selected: false\r\n                    });\r\n\r\n                    dataMatrix.push([]);\r\n                    toolTipData.push([]);\r\n\r\n                    let formattedCategoryValue = valueFormatter.format(catValues[i], categorySourceFormatString);\r\n\r\n                    for (let j = 0, jLen = totalFields.length; j < jLen; j++) {\r\n                        let elementValue: number = 0;\r\n                        let tooltipInfo: TooltipDataItem[] = [];\r\n\r\n                        if (catIndex[totalFields[i]] !== undefined &&\r\n                            seriesIndex[totalFields[j]] !== undefined) {\r\n                            let row: number = catIndex[totalFields[i]];\r\n                            let col: number = seriesIndex[totalFields[j]];\r\n                            if (values[col].values[row] !== null) {\r\n                                elementValue = values[col].values[row];\r\n\r\n                                if (elementValue > max)\r\n                                    max = elementValue;\r\n\r\n                                tooltipInfo = TooltipBuilder.createTooltipInfo(\r\n                                    formatStringProp,\r\n                                    catDv,\r\n                                    formattedCategoryValue,\r\n                                    elementValue,\r\n                                    null,\r\n                                    null,\r\n                                    col,\r\n                                    row);\r\n                            }\r\n                        } else if (isDiffFromTo && catIndex[totalFields[j]] !== undefined &&\r\n                            seriesIndex[totalFields[i]] !== undefined) {\r\n                            let row: number = catIndex[totalFields[j]];\r\n                            let col: number = seriesIndex[totalFields[i]];\r\n                            if (values[col].values[row] !== null) {\r\n                                elementValue = values[col].values[row];\r\n                            }\r\n                        }\r\n\r\n                        dataMatrix[i].push(elementValue);\r\n                        toolTipData[i].push({\r\n                            tooltipInfo: tooltipInfo\r\n                        });\r\n                    }\r\n\r\n                    let totalSum = d3.sum(dataMatrix[i]);\r\n\r\n                    sliceTooltipData.push({\r\n                        tooltipInfo: [{\r\n                            displayName: totalFields[i],\r\n                            value: (ChordChart.isInt(totalSum)) ? totalSum.toFixed(0) : totalSum.toFixed(2)\r\n                        }]\r\n                    });\r\n                }\r\n\r\n                let chordLayout = d3.layout.chord()\r\n                    .padding(0.1)\r\n                    .matrix(dataMatrix);\r\n\r\n                let unitLength: number = Math.round(max / 5).toString().length - 1;\r\n\r\n                return {\r\n                    dataMatrix: dataMatrix,\r\n                    labelDataPoints: ChordChart.convertToChordArcDescriptor(chordLayout.groups(), labelData),\r\n                    legendData: legendData,\r\n                    tooltipData: toolTipData,\r\n                    sliceTooltipData: sliceTooltipData,\r\n                    tickUnit: Math.pow(10, unitLength),\r\n                    differentFromTo: isDiffFromTo,\r\n                    defaultDataPointColor: defaultDataPointColor,\r\n                    prevAxisVisible: prevAxisVisible,\r\n                    showAllDataPoints: ChordChart.getShowAllDataPoints(dataView),\r\n                    showLabels: ChordChart.getLabelsShow(dataView),\r\n                    showAxis: ChordChart.getAxisShow(dataView),\r\n                    labelFontSize: labelFontSize,\r\n                };\r\n            } else {\r\n                return {\r\n                    dataMatrix: [],\r\n                    labelDataPoints: [],\r\n                    legendData: null,\r\n                    tooltipData: [],\r\n                    sliceTooltipData: [],\r\n                    tickUnit: 1000,\r\n                    differentFromTo: false,\r\n                    defaultDataPointColor: defaultDataPointColor,\r\n                    prevAxisVisible: prevAxisVisible,\r\n                    showAllDataPoints: ChordChart.getShowAllDataPoints(dataView),\r\n                    showLabels: ChordChart.getLabelsShow(dataView),\r\n                    showAxis: ChordChart.getAxisShow(dataView),\r\n                    labelFontSize: labelFontSize,\r\n                };\r\n            }\r\n        }\r\n\r\n        /* Check every element of the array and returns the count of elements which are valid(not undefined) */\r\n        public static getValidArrayLength(array: any[]): number {\r\n            let len = 0;\r\n            for (let i: number = 0, iLen = array.length; i < iLen; i++) {\r\n                if (array[i] !== undefined) {\r\n                    len++;\r\n                }\r\n            }\r\n            return len;\r\n        }\r\n\r\n        /* Convert ChordLayout to ChordArcDescriptor */\r\n        public static convertToChordArcDescriptor(groups: D3.Layout.ArcDescriptor[], datum: ChordArcLabelData[]): ChordArcDescriptor[] {\r\n            let labelDataPoints: ChordArcDescriptor[] = [];\r\n            for (let i: number = 0, iLen = groups.length; i < iLen; i++) {\r\n                let labelDataPoint: ChordArcDescriptor = groups[i];\r\n                labelDataPoint.data = datum[i];\r\n                labelDataPoints.push(labelDataPoint);\r\n            }\r\n\r\n            return labelDataPoints;\r\n        }\r\n\r\n        /* Calculate radius */\r\n        private calculateRadius(viewport: IViewport): number {\r\n            if (this.data && this.data.showLabels) {\r\n                // if we have category or data labels, use a sigmoid to blend the desired denominator from 2 to 3.\r\n                // if we are taller than we are wide, we need to use a larger denominator to leave horizontal room for the labels.\r\n                let hw = viewport.height / viewport.width;\r\n                let denom = 2 + (1 / (1 + Math.exp(-5 * (hw - 1))));\r\n                return Math.min(viewport.height, viewport.width) / denom;\r\n            }\r\n\r\n            // no labels\r\n            return Math.min(viewport.height, viewport.width) / 2;\r\n        }\r\n        \r\n        /* Draw category labels */\r\n        public static drawDefaultCategoryLabels(graphicsContext: D3.Selection, chordData: ChordChartData, radius: number, viewport: IViewport): void {\r\n            /** Multiplier to place the end point of the reference line at 0.05 * radius away from the outer edge of the chord/pie. */\r\n\r\n            let arc: D3.Svg.Arc = d3.svg.arc()\r\n                .innerRadius(0)\r\n                .outerRadius(radius * ChordChart.InnerArcRadiusRatio);\r\n\r\n            let outerArc: D3.Svg.Arc = d3.svg.arc()\r\n                .innerRadius(radius * ChordChart.OuterArcRadiusRatio)\r\n                .outerRadius(radius * ChordChart.OuterArcRadiusRatio);\r\n\r\n            if (chordData.showLabels) {\r\n                let labelLayout = ChordChart.getChordChartLabelLayout(radius, outerArc, viewport, chordData.labelFontSize);\r\n                ChordChart.drawDefaultLabelsForChordChart(chordData.labelDataPoints,\r\n                    graphicsContext,\r\n                    labelLayout, viewport,\r\n                    radius, arc, outerArc);\r\n            }\r\n            else\r\n                dataLabelUtils.cleanDataLabels(graphicsContext, true);\r\n        }\r\n\r\n        /* One time setup*/\r\n        public init(options: VisualInitOptions): void {\r\n            let element = this.element = options.element;\r\n            this.selectionManager = new utility.SelectionManager({ hostServices: options.host });\r\n\r\n            this.svg = d3.select(element.get(0))\r\n                .append('svg')\r\n                .style('position', 'absolute')\r\n                .classed(ChordChart.VisualClassName, true);\r\n\r\n            this.mainGraphicsContext = this.svg\r\n                .append('g');\r\n\r\n            this.mainGraphicsContext\r\n                .append('g')\r\n                .classed('slices', true);\r\n\r\n            this.mainGraphicsContext\r\n                .append('g')\r\n                .classed('ticks', true);\r\n\r\n            this.mainGraphicsContext\r\n                .append('g')\r\n                .classed('chords', true);\r\n\r\n            this.colors = options.style.colorPalette.dataColors;\r\n        }\r\n    \r\n        /* Called for data, size, formatting changes*/\r\n        public update(options: VisualUpdateOptions) {\r\n            // assert dataView           \r\n            if (!options.dataViews || !options.dataViews[0]) return;\r\n            \r\n            // get animation duration\r\n            let duration = options.suppressAnimations ? 0 : AnimatorCommon.MinervaAnimationDuration;\r\n\r\n            let dataView = this.dataView = options.dataViews[0];\r\n            let prevAxisShow: boolean = (this.data) ? this.data.showAxis : !ChordChart.getAxisShow(dataView);\r\n\r\n            let data = this.data = ChordChart.converter(dataView, this.colors, prevAxisShow);\r\n\r\n            let viewport = options.viewport;\r\n\r\n            let chordLayout = this.chordLayout = d3.layout.chord()\r\n                .padding(0.1)\r\n                //.sortGroups(d3.descending)\r\n                .matrix(data.dataMatrix);\r\n\r\n            let width = viewport.width;\r\n            let height = viewport.height;\r\n\r\n            let radius = this.calculateRadius(viewport);\r\n            let sm = this.selectionManager;\r\n\r\n            let innerRadius: number = radius;\r\n            let outerRadius: number = radius * ChordChart.InnerArcRadiusRatio;\r\n\r\n            let arc: D3.Svg.Arc = d3.svg.arc().innerRadius(innerRadius).outerRadius(outerRadius);\r\n\r\n            this.svg\r\n                .attr({\r\n                    'width': width,\r\n                    'height': height\r\n                });\r\n\r\n            let mainGraphicsContext = this.mainGraphicsContext\r\n                .attr('transform', SVGUtil.translate(width / 2, height / 2));\r\n\r\n            let sliceShapes = this.svg.select('.slices')\r\n                .selectAll('path' + ChordChart.sliceClass.selector)\r\n                .data(chordLayout.groups);\r\n\r\n            sliceShapes.enter()\r\n                .insert(\"path\")\r\n                .classed(ChordChart.sliceClass.class, true);\r\n\r\n            sliceShapes.style('fill', (d, i) => data.labelDataPoints[i].data.barColor)\r\n                .style(\"stroke\", (d, i) => data.labelDataPoints[i].data.barColor)\r\n                .on('click', function(d, i) {\r\n                    sm.select(data.labelDataPoints[i].data.identity).then(ids=> {\r\n                        if (ids.length > 0) {\r\n                            mainGraphicsContext.selectAll(\".chords path.chord\")\r\n                                .style(\"opacity\", 1);\r\n\r\n                            mainGraphicsContext.selectAll(\".slices path.slice\")\r\n                                .style('opacity', 0.3);\r\n\r\n                            mainGraphicsContext.selectAll(\".chords path.chord\")\r\n                                .filter(function(d) { return d.source.index !== i && d.target.index !== i; })\r\n                                .style(\"opacity\", 0.3);\r\n\r\n                            d3.select(this).style('opacity', 1);\r\n                        } else {\r\n                            sliceShapes.style('opacity', 1);\r\n                            mainGraphicsContext.selectAll(\".chords path.chord\")\r\n                                .filter(function(d) { return d.source.index !== i && d.target.index !== i; })\r\n                                .style(\"opacity\", 1);\r\n                        }\r\n                    });\r\n\r\n                    d3.event.stopPropagation();\r\n                })\r\n                .transition()\r\n                .duration(duration)\r\n                .attr(\"d\", arc);\r\n\r\n            sliceShapes.exit()\r\n                .remove();\r\n\r\n            TooltipManager.addTooltip(sliceShapes, (tooltipEvent: TooltipEvent) => {\r\n                return data.sliceTooltipData[tooltipEvent.data.index].tooltipInfo;\r\n            });\r\n\r\n            let chordShapes = this.svg.select('.chords')\r\n                .selectAll('path' + ChordChart.chordClass.selector)\r\n                .data(chordLayout.chords);\r\n\r\n            chordShapes\r\n                .enter().insert(\"path\")\r\n                .classed(ChordChart.chordClass.class, true);\r\n\r\n            chordShapes.style(\"fill\", (d, i) => data.labelDataPoints[d.target.index].data.barColor)\r\n                .style(\"opacity\", 1)\r\n                .transition()\r\n                .duration(duration)\r\n                .attr(\"d\", d3.svg.chord().radius(innerRadius));\r\n\r\n            chordShapes.exit()\r\n                .remove();\r\n\r\n            this.svg\r\n                .on('click', () => this.selectionManager.clear().then(() => {\r\n                    sliceShapes.style('opacity', 1);\r\n                    chordShapes.style('opacity', 1);\r\n                }));\r\n\r\n            ChordChart.drawTicks(this.mainGraphicsContext, data, chordLayout, outerRadius, duration, viewport);\r\n            ChordChart.drawDefaultCategoryLabels(this.mainGraphicsContext, data, radius, viewport);\r\n\r\n            TooltipManager.addTooltip(chordShapes, (tooltipEvent: TooltipEvent) => {\r\n                let tooltipInfo: TooltipDataItem[] = [];\r\n                if (data.differentFromTo) {\r\n                    tooltipInfo = data.tooltipData[tooltipEvent.data.source.index]\r\n                    [tooltipEvent.data.source.subindex]\r\n                        .tooltipInfo;\r\n                } else {\r\n                    tooltipInfo.push({\r\n                        displayName: data.labelDataPoints[tooltipEvent.data.source.index].data.label\r\n                        + '->' + data.labelDataPoints[tooltipEvent.data.source.subindex].data.label,\r\n                        value: data.dataMatrix[tooltipEvent.data.source.index]\r\n                        [tooltipEvent.data.source.subindex].toString()\r\n                    });\r\n                    tooltipInfo.push({\r\n                        displayName: data.labelDataPoints[tooltipEvent.data.target.index].data.label\r\n                        + '->' + data.labelDataPoints[tooltipEvent.data.target.subindex].data.label,\r\n                        value: data.dataMatrix[tooltipEvent.data.target.index]\r\n                        [tooltipEvent.data.target.subindex].toString()\r\n                    });\r\n                }\r\n                return tooltipInfo;\r\n            });\r\n        }\r\n\r\n        /*About to remove your visual, do clean up here */\r\n        public destroy() {\r\n\r\n        }\r\n\r\n        /* Clean ticks */\r\n        public static cleanTicks(context: D3.Selection) {\r\n            let empty = [];\r\n            let tickLines = context.selectAll(ChordChart.tickLineClass.selector).data(empty);\r\n            tickLines.exit().remove();\r\n\r\n            let tickTexts = context.selectAll(ChordChart.tickTextClass.selector).data(empty);\r\n            tickTexts.exit().remove();\r\n\r\n            context.selectAll(ChordChart.tickPairClass.selector).remove();\r\n            context.selectAll(ChordChart.sliceTicksClass.selector).remove();\r\n        }\r\n        \r\n        /* Draw axis(ticks) around the arc */\r\n        public static drawTicks(graphicsContext: D3.Selection, chordData: ChordChartData, chordLayout: D3.Layout.ChordLayout, outerRadius: number, duration: number, viewport: IViewport): void {\r\n\r\n            if (chordData.showAxis) {\r\n                let tickShapes = graphicsContext.select('.ticks')\r\n                    .selectAll('g' + ChordChart.sliceTicksClass.selector)\r\n                    .data(chordLayout.groups);\r\n                let animDuration = (chordData.prevAxisVisible === chordData.showAxis) ? duration : 0;\r\n\r\n                tickShapes.enter().insert('g')\r\n                    .classed(ChordChart.sliceTicksClass.class, true);\r\n\r\n                let tickPairs = tickShapes.selectAll('g' + ChordChart.tickPairClass.selector)\r\n                    .data(function(d) {\r\n                        let k = (d.endAngle - d.startAngle) / d.value;\r\n                        let range = d3.range(0, d.value, d.value - 1 < 0.15 ? 0.15 : d.value - 1);\r\n                        let retval =\r\n                            range.map(function(v, i) {\r\n                                let divider: number = 1000;\r\n                                let unitStr: string = 'k';\r\n\r\n                                if (chordData.tickUnit >= 1000 * 1000) {\r\n                                    divider = 1000 * 1000;\r\n                                    unitStr = 'm';\r\n                                }\r\n                                else if (chordData.tickUnit >= 1000) {\r\n                                    divider = 1000;\r\n                                    unitStr = 'k';\r\n                                } else {\r\n                                    divider = 1;\r\n                                    unitStr = '';\r\n                                }\r\n                                let retv =\r\n                                    {\r\n                                        angle: v * k + d.startAngle,\r\n                                        label: Math.floor(v / divider) + unitStr\r\n                                    };\r\n                                return retv;\r\n\r\n                            });\r\n                        return retval;\r\n                    });\r\n\r\n                tickPairs.enter().insert('g')\r\n                    .classed(ChordChart.tickPairClass.class, true);\r\n\r\n                tickPairs.transition()\r\n                    .duration(animDuration)\r\n                    .attr('transform', function(d) {\r\n                        return 'rotate(' + (d.angle * 180 / Math.PI - 90) + ')'\r\n                            + 'translate(' + outerRadius + ',0)';\r\n                    });\r\n\r\n                tickPairs.selectAll('line' + ChordChart.tickLineClass.selector)\r\n                    .data((d) => [d])\r\n                    .enter().insert('line')\r\n                    .classed(ChordChart.tickLineClass.class, true)\r\n                    .style(\"stroke\", \"#000\")\r\n                    .attr(\"x1\", 1)\r\n                    .attr(\"y1\", 0)\r\n                    .attr(\"x2\", 5)\r\n                    .attr(\"y2\", 0);\r\n\r\n                tickPairs.selectAll('text' + ChordChart.tickTextClass.selector)\r\n                    .data((d) => [d])\r\n                    .enter().insert('text')\r\n                    .classed(ChordChart.tickTextClass.class, true)\r\n                    .style(\"text-anchor\", function(d) { return d.angle > Math.PI ? \"end\" : null; })\r\n                    .text(function(d) { return d.label; })\r\n                    .attr(\"transform\", function(d) { return d.angle > Math.PI ? \"rotate(180)translate(-16)\" : null; })\r\n                    .attr(\"x\", 8)\r\n                    .attr(\"dy\", \".35em\");\r\n\r\n                tickPairs.exit()\r\n                    .remove();\r\n\r\n                tickShapes.exit()\r\n                    .remove();\r\n\r\n            } else {\r\n                ChordChart.cleanTicks(graphicsContext);\r\n            }\r\n\r\n        }\r\n\r\n        /* Get format parameter axis whether it determines show ticks or not. Default value is true */\r\n        private static getAxisShow(dataView: DataView): boolean {\r\n            if (dataView && dataView.metadata) {\r\n                let objects = dataView.metadata.objects;\r\n                if (objects) {\r\n                    let axis = objects['axis'];\r\n                    if (axis && axis.hasOwnProperty('show')) {\r\n                        return <boolean>axis['show'];\r\n                    }\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n        \r\n        /* Get format parameter labels whether it determines show labels or not. Default value is true */\r\n        private static getLabelsShow(dataView: DataView): boolean {\r\n            if (dataView && dataView.metadata) {\r\n                let objects = dataView.metadata.objects;\r\n                if (objects) {\r\n                    let labels = objects['labels'];\r\n                    if (labels && labels.hasOwnProperty('show')) {\r\n                        return <boolean>labels['show'];\r\n                    }\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n\r\n        /* Get format parameter labels whether it determines show labels or not. Default value is true */\r\n        private static getLabelsColor(dataView: DataView): string {\r\n            if (dataView && dataView.metadata) {\r\n                let objects = dataView.metadata.objects;\r\n                if (objects) {\r\n                    let labels = objects['labels'];\r\n                    if (labels && labels.hasOwnProperty('color'))\r\n                        return labels['color'].solid.color;\r\n                }\r\n            }\r\n            return ChordChart.DefaultLabelColor;\r\n        }\r\n\r\n        private static getLabelsFontSize(dataView: DataView): number {\r\n            if (dataView && dataView.metadata) {\r\n                let objects = dataView.metadata.objects;\r\n                if (objects) {\r\n                    let labels = objects['labels'];\r\n                    if (labels && labels.hasOwnProperty('fontSize'))\r\n                        return labels['fontSize'];\r\n                }\r\n            }\r\n            return ChordChart.DefaultLabelsFontSize;\r\n        }\r\n       \r\n        /* Select labels */\r\n        public static selectLabels(filteredData: LabelEnabledDataPoint[], context: D3.Selection, isDonut: boolean = false, forAnimation: boolean = false): D3.UpdateSelection {\r\n\r\n            // Check for a case where resizing leaves no labels - then we need to remove the labels 'g'\r\n            if (filteredData.length === 0) {\r\n                dataLabelUtils.cleanDataLabels(context, true);\r\n                return null;\r\n            }\r\n\r\n            if (context.select(ChordChart.labelGraphicsContextClass.selector).empty())\r\n                context.append('g').classed(ChordChart.labelGraphicsContextClass.class, true);\r\n\r\n            // line chart ViewModel has a special 'key' property for point identification since the 'identity' field is set to the series identity\r\n            let hasKey: boolean = (<any>filteredData)[0].key !== null;\r\n            let hasDataPointIdentity: boolean = (<any>filteredData)[0].identity !== null;\r\n            let getIdentifier = hasKey ?\r\n                (d: any) => d.key\r\n                : hasDataPointIdentity ?\r\n                    (d: SelectableDataPoint) => d.identity.getKey()\r\n                    : undefined;\r\n\r\n            let labels = isDonut ?\r\n                context.select(ChordChart.labelGraphicsContextClass.selector).selectAll(ChordChart.labelsClass.selector).data(filteredData, (d: DonutArcDescriptor) => d.data.identity.getKey())\r\n                : getIdentifier !== null ?\r\n                    context.select(ChordChart.labelGraphicsContextClass.selector).selectAll(ChordChart.labelsClass.selector).data(filteredData, getIdentifier)\r\n                    : context.select(ChordChart.labelGraphicsContextClass.selector).selectAll(ChordChart.labelsClass.selector).data(filteredData);\r\n\r\n            let newLabels = labels.enter()\r\n                .append('text')\r\n                .classed(ChordChart.labelsClass.class, true);\r\n            if (forAnimation)\r\n                newLabels.style('opacity', 0);\r\n\r\n            return labels;\r\n        }\r\n        \r\n        /* Draw labels */\r\n        public static drawDefaultLabelsForChordChart(data: any[], context: D3.Selection, layout: ILabelLayout, viewport: IViewport, radius: number, arc: D3.Svg.Arc, outerArc: D3.Svg.Arc) {\r\n            // Hide and reposition labels that overlap\r\n            let dataLabelManager = new DataLabelManager();\r\n            let filteredData = dataLabelManager.hideCollidedLabels(viewport, data, layout,/* addTransform */ true);\r\n\r\n            let labels: D3.UpdateSelection = ChordChart.selectLabels(filteredData, context, true);\r\n\r\n            if (!labels) {\r\n                return;\r\n            }\r\n\r\n            labels\r\n                .attr({ x: (d: LabelEnabledDataPoint) => d.labelX, y: (d: LabelEnabledDataPoint) => d.labelY, dy: '.35em' })\r\n                .text((d: LabelEnabledDataPoint) => d.labeltext)\r\n                .style(layout.style);\r\n\r\n            labels\r\n                .exit()\r\n                .remove();\r\n\r\n            if (context.select(ChordChart.linesGraphicsContextClass.selector).empty()) {\r\n                context\r\n                    .append('g')\r\n                    .classed(ChordChart.linesGraphicsContextClass.class, true);\r\n            }\r\n\r\n            let lines = context.select(ChordChart.linesGraphicsContextClass.selector).selectAll('polyline')\r\n                .data(filteredData, (d: ChordArcDescriptor) => d.data.identity.getKey());\r\n            let innerLinePointMultiplier = 2.05;\r\n\r\n            let midAngle = function(d: ChordArcDescriptor) {\r\n                return d.startAngle + (d.endAngle - d.startAngle) / 2;\r\n            };\r\n\r\n            lines.enter()\r\n                .append('polyline')\r\n                .classed(ChordChart.lineClass.class, true);\r\n\r\n            lines\r\n                .attr('points', function(d) {\r\n                    let textPoint = outerArc.centroid(d);\r\n                    textPoint[0] = radius * 0.95 * (midAngle(d) < Math.PI ? 1 : -1);\r\n                    let midPoint = outerArc.centroid(d);\r\n                    let chartPoint = arc.centroid(d);\r\n                    chartPoint[0] *= innerLinePointMultiplier;\r\n                    chartPoint[1] *= innerLinePointMultiplier;\r\n                    return [chartPoint, midPoint, textPoint];\r\n                }).\r\n                style({\r\n                    'opacity': (d: ChordArcDescriptor) => ChordChart.PolylineOpacity,\r\n                    'stroke': (d: ChordArcDescriptor) => d.data.labelColor,\r\n                });\r\n\r\n            lines\r\n                .exit()\r\n                .remove();\r\n        }\r\n        \r\n        /* Get label layout */\r\n        public static getChordChartLabelLayout(radius: number, outerArc: D3.Svg.Arc, viewport: IViewport, labelFontSize: number): ILabelLayout {\r\n            let midAngle = function(d: ChordArcDescriptor) {\r\n                return d.startAngle + (d.endAngle - d.startAngle) / 2;\r\n            };\r\n\r\n            let spaceAvaliableForLabels: number = viewport.width / 2 - radius;\r\n            let minAvailableSpace: number = Math.min(spaceAvaliableForLabels, dataLabelUtils.maxLabelWidth);\r\n            var PixelConverter = jsCommon.PixelConverter;\r\n\r\n            return {\r\n                labelText: (d: DonutArcDescriptor) => {\r\n                    // show only category label\r\n                    return dataLabelUtils.getLabelFormattedText({\r\n                        label: d.data.label,\r\n                        maxWidth: minAvailableSpace,\r\n                        fontSize: labelFontSize,\r\n                    });\r\n                },\r\n                labelLayout: {\r\n                    x: (d: ChordArcDescriptor) => {\r\n                        return radius * (midAngle(d) < Math.PI ? 1 : -1);\r\n                    },\r\n                    y: (d: ChordArcDescriptor) => {\r\n                        let pos = outerArc.centroid(d);\r\n                        return pos[1];\r\n                    },\r\n                },\r\n                filter: (d: ChordArcDescriptor) => (d !== null && d.data !== null && d.data.label !== null),\r\n                style: {\r\n                    'fill': (d: ChordArcDescriptor) => d.data.labelColor,\r\n                    'text-anchor': (d: ChordArcDescriptor) => midAngle(d) < Math.PI ? 'start' : 'end',\r\n                    'font-size': (d: ChordArcDescriptor) => PixelConverter.fromPointToPixel(labelFontSize),\r\n                },\r\n            };\r\n        }\r\n        \r\n        /* Get Default Datapoint color */\r\n        private static getDefaultDataPointColor(dataView: DataView, defaultValue?: string): Fill {\r\n            if (dataView && dataView.metadata) {\r\n                let objects = dataView.metadata.objects;\r\n                if (objects) {\r\n                    let dataPoint = objects['dataPoint'];\r\n                    if (dataPoint && dataPoint.hasOwnProperty('defaultColor')) {\r\n                        let defaultColor = <Fill>dataPoint['defaultColor'];\r\n                        if (defaultColor) {\r\n                            return defaultColor;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            return { solid: { color: defaultValue } };\r\n        }\r\n\r\n        /* Get format paramter value (showAllDataPoints)  */\r\n        private static getShowAllDataPoints(dataView: DataView): boolean {\r\n            if (!dataView || !dataView.metadata || !dataView.metadata.objects)\r\n                return false;\r\n\r\n            let objects: DataViewObjects = dataView.metadata.objects;\r\n            let dataPoint = objects['dataPoint'];\r\n            if (dataPoint && dataPoint.hasOwnProperty('showAllDataPoints')) {\r\n                return <boolean>dataPoint['showAllDataPoints'];\r\n            }\r\n            return false;\r\n        }\r\n\r\n        /* Enumerate format values */\r\n        public enumerateObjectInstances(options: EnumerateVisualObjectInstancesOptions): VisualObjectInstance[] {\r\n            let instances: VisualObjectInstance[] = [];\r\n            let axis: VisualObjectInstance;\r\n\r\n            switch (options.objectName) {\r\n                case 'axis':\r\n                    axis = {\r\n                        objectName: 'axis',\r\n                        displayName: 'Axis',\r\n                        selector: null,\r\n                        properties: {\r\n                            show: ChordChart.getAxisShow(this.dataView)\r\n                        }\r\n                    };\r\n\r\n                    instances.push(axis);\r\n                    break;\r\n                case 'labels':\r\n                    axis = {\r\n                        objectName: 'labels',\r\n                        displayName: 'Labels',\r\n                        selector: null,\r\n                        properties: {\r\n                            show: ChordChart.getLabelsShow(this.dataView),\r\n                            color: ChordChart.getLabelsColor(this.dataView),\r\n                            fontSize: ChordChart.getLabelsFontSize(this.dataView),\r\n                        }\r\n                    };\r\n                    instances.push(axis);\r\n                    break;\r\n                case 'dataPoint':\r\n                    let defaultColor: VisualObjectInstance = {\r\n                        objectName: 'dataPoint',\r\n                        selector: null,\r\n                        properties: {\r\n                            defaultColor: {\r\n                                solid: { color: (this.data && this.data.defaultDataPointColor) ? this.data.defaultDataPointColor : this.colors.getColorByIndex(0).value }\r\n                            }\r\n                        }\r\n                    };\r\n\r\n                    instances.push(defaultColor);\r\n\r\n                    let showAllDataPoints: VisualObjectInstance = {\r\n                        objectName: 'dataPoint',\r\n                        selector: null,\r\n                        properties: {\r\n                            showAllDataPoints: this.data ? !!this.data.showAllDataPoints : false,\r\n                        }\r\n                    };\r\n\r\n                    instances.push(showAllDataPoints);\r\n\r\n                    if (this.data && this.data.labelDataPoints) {\r\n                        for (let i: number = 0, iLen = this.data.labelDataPoints.length; i < iLen; i++) {\r\n                            let labelDataPoint: ChordArcLabelData = this.data.labelDataPoints[i].data;\r\n\r\n                            if (labelDataPoint.isCategory) {\r\n                                let colorInstance: VisualObjectInstance = {\r\n                                    objectName: 'dataPoint',\r\n                                    displayName: labelDataPoint.label,\r\n                                    selector: ColorHelper.normalizeSelector(labelDataPoint.identity.getSelector()),\r\n                                    properties: {\r\n                                        fill: { solid: { color: labelDataPoint.barColor } }\r\n                                    }\r\n                                };\r\n\r\n                                instances.push(colorInstance);\r\n                            }\r\n                        }\r\n                    }\r\n                    break;\r\n            }\r\n            return instances;\r\n        }\r\n\r\n        /* Utility function for checking if it is integer or float */\r\n        public static isInt(n: number): boolean {\r\n            return n % 1 === 0;\r\n        }\r\n        \r\n        /* Utility function for union two arrays without duplicates */\r\n        public static union_arrays(x: any[], y: any[]): any[] {\r\n            let obj: Object = {};\r\n\r\n            for (let i: number = 0; i < x.length; i++) {\r\n                obj[x[i]] = x[i];\r\n            }\r\n\r\n            for (let i: number = 0; i < y.length; i++) {\r\n                obj[y[i]] = y[i];\r\n            }\r\n\r\n            let res: string[] = [];\r\n\r\n            for (let k in obj) {\r\n                if (obj.hasOwnProperty(k)) {  // <-- optional\r\n                    res.push(obj[k]);\r\n                }\r\n            }\r\n            return res;\r\n        }\r\n    }\r\n}\r\n","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.visuals.samples {\r\n    import ClassAndSelector = jsCommon.CssConstants.ClassAndSelector;\r\n    import DataRoleHelper = powerbi.data.DataRoleHelper;\r\n\r\n    interface ScatterChartMeasureMetadata {\r\n        idx: {\r\n            x?: number;\r\n            y?: number;\r\n            size?: number;\r\n            colorFill?: number;\r\n            shape?: number;\r\n            image?: number;\r\n            rotation?: number;\r\n            backdrop?: number;\r\n            xStart?: number;\r\n            xEnd?: number;\r\n            yStart?: number;\r\n            yEnd?: number;\r\n        };\r\n        cols: {\r\n            x?: DataViewMetadataColumn;\r\n            y?: DataViewMetadataColumn;\r\n            size?: DataViewMetadataColumn;\r\n            colorFill?: DataViewMetadataColumn;\r\n            shape?: DataViewMetadataColumn;\r\n            image?: DataViewMetadataColumn;\r\n            rotation?: DataViewMetadataColumn;\r\n            backdrop?: DataViewMetadataColumn;\r\n            xStart?: DataViewMetadataColumn;\r\n            xEnd?: DataViewMetadataColumn;\r\n            yStart?: DataViewMetadataColumn;\r\n            yEnd?: DataViewMetadataColumn;\r\n        };\r\n        axesLabels: ChartAxesLabels;\r\n    }\r\n\r\n    export interface EnhancedScatterChartDataPoint extends SelectableDataPoint, TooltipEnabledDataPoint, LabelEnabledDataPoint {\r\n        x: any;\r\n        y: any;\r\n        size: any;\r\n        radius: RadiusData;\r\n        fill: string;\r\n        formattedCategory: jsCommon.Lazy<string>;\r\n        colorFill?: string;\r\n        svgurl?: string;\r\n        shapeSymbolType?: (number) => string;\r\n        rotation: number;\r\n        backdrop?: string;\r\n        xStart?: number;\r\n        xEnd?: number;\r\n        yStart?: number;\r\n        yEnd?: number;\r\n    }\r\n\r\n    export interface EnhancedScatterChartData extends ScatterBehaviorChartData {\r\n        useShape: boolean;\r\n        useCustomColor: boolean;\r\n        backdrop?: {\r\n            show: boolean;\r\n            url: string;\r\n        };\r\n        outline?: boolean;\r\n        crosshair?: boolean;\r\n        xCol: DataViewMetadataColumn;\r\n        yCol: DataViewMetadataColumn;\r\n        dataPoints: EnhancedScatterChartDataPoint[];\r\n        legendData: LegendData;\r\n        axesLabels: ChartAxesLabels;\r\n        size?: DataViewMetadataColumn;\r\n        sizeRange: NumberRange;\r\n        dataLabelsSettings: PointDataLabelsSettings;\r\n        defaultDataPointColor?: string;\r\n        showAllDataPoints?: boolean;\r\n        hasDynamicSeries?: boolean;\r\n        fillPoint?: boolean;\r\n        colorBorder?: boolean;\r\n        colorByCategory?: boolean;\r\n        selectedIds: SelectionId[];\r\n    }\r\n\r\n    export class EnhancedScatterChart implements IVisual {\r\n        private AxisGraphicsContextClassName = 'axisGraphicsContext';\r\n        public static DefaultBubbleOpacity = 0.85;\r\n        public static DimmedBubbleOpacity = 0.4;\r\n        private static DataLabelsOffset = 5;\r\n        private static ClassName = 'enhancedScatterChart';\r\n        private static MainGraphicsContextClassName = 'mainGraphicsContext';\r\n        private static LegendLabelFontSizeDefault: number = 9;\r\n        private static LabelDisplayUnitsDefault: number = 0;\r\n        private static AxisFontSize = 11;\r\n\r\n        private static DotClasses: ClassAndSelector = {\r\n            class: 'dot',\r\n            selector: '.dot'\r\n        };\r\n        private static ImageClasses: ClassAndSelector = {\r\n            class: 'img',\r\n            selector: '.img'\r\n        };\r\n\r\n        private legend: ILegend;\r\n        private svgScrollable: D3.Selection;\r\n        private axisGraphicsContext: D3.Selection;\r\n        private axisGraphicsContextScrollable: D3.Selection;\r\n        private xAxisGraphicsContext: D3.Selection;\r\n        private backgroundGraphicsContext: D3.Selection;\r\n        private y1AxisGraphicsContext: D3.Selection;\r\n        private svg: D3.Selection;\r\n        private element: JQuery;\r\n        private mainGraphicsContext: D3.Selection;\r\n        private clearCatcher: D3.Selection;\r\n        private mainGraphicsG: D3.Selection;\r\n\r\n        private style: IVisualStyle;\r\n        private data: EnhancedScatterChartData;\r\n        private dataView: DataView;\r\n\r\n        private xAxisProperties: IAxisProperties;\r\n        private yAxisProperties: IAxisProperties;\r\n        private colors: IDataColorPalette;\r\n        private options: VisualInitOptions;\r\n        private interactivity: InteractivityOptions;\r\n        private interactivityService: IInteractivityService;\r\n        private categoryAxisProperties: DataViewObject;\r\n        private valueAxisProperties: DataViewObject;\r\n        private yAxisOrientation: string;\r\n        private scrollY: boolean;\r\n        private scrollX: boolean;\r\n\r\n        private dataViews: DataView[];\r\n        private legendObjectProperties: DataViewObject;\r\n        private hostServices: IVisualHostServices;\r\n        private layerLegendData: LegendData;\r\n        private legendLabelFontSize: number;\r\n        private cartesianSmallViewPortProperties: CartesianSmallViewPortProperties;\r\n        private hasCategoryAxis: boolean;\r\n        private yAxisIsCategorical: boolean;\r\n        private bottomMarginLimit: number;\r\n        private leftRightMarginLimit: number;\r\n        private isXScrollBarVisible: boolean;\r\n        private isYScrollBarVisible: boolean;\r\n        private ScrollBarWidth = 10;\r\n        private categoryAxisHasUnitType: boolean;\r\n        private valueAxisHasUnitType: boolean;\r\n        private svgDefaultImage: string;\r\n        private oldBackdrop: string;\r\n        private textProperties: TextProperties = {\r\n            fontFamily: 'wf_segoe-ui_normal',\r\n            fontSize: jsCommon.PixelConverter.toString(EnhancedScatterChart.AxisFontSize),\r\n        };\r\n        private behavior: IInteractiveBehavior;\r\n        private animator: IGenericAnimator;\r\n        private keyArray: string[];\r\n\r\n        private _margin: IMargin;\r\n        private get margin(): IMargin {\r\n            return this._margin || { left: 0, right: 0, top: 0, bottom: 0 };\r\n        }\r\n\r\n        private set margin(value: IMargin) {\r\n            this._margin = $.extend({}, value);\r\n            this._viewportIn = EnhancedScatterChart.substractMargin(this.viewport, this.margin);\r\n        }\r\n\r\n        private _viewport: IViewport;\r\n        private get viewport(): IViewport {\r\n            return this._viewport || { width: 0, height: 0 };\r\n        }\r\n\r\n        private set viewport(value: IViewport) {\r\n            this._viewport = $.extend({}, value);\r\n            this._viewportIn = EnhancedScatterChart.substractMargin(this.viewport, this.margin);\r\n        }\r\n\r\n        private _viewportIn: IViewport;\r\n        private get viewportIn(): IViewport {\r\n            return this._viewportIn || this.viewport;\r\n        }\r\n\r\n        private get legendViewport(): IViewport {\r\n            return this.legend.getMargins();\r\n        }\r\n\r\n        public static capabilities: VisualCapabilities = {\r\n            dataRoles: [\r\n                {\r\n                    name: 'Category',\r\n                    kind: VisualDataRoleKind.Grouping,\r\n                    displayName: data.createDisplayNameGetter('Role_DisplayName_Details'),\r\n                }, {\r\n                    name: 'Series',\r\n                    kind: VisualDataRoleKind.Grouping,\r\n                    displayName: data.createDisplayNameGetter('Role_DisplayName_Legend'),\r\n                }, {\r\n                    name: 'X',\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: data.createDisplayNameGetter('Role_DisplayName_X'),\r\n                }, {\r\n                    name: 'Y',\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: data.createDisplayNameGetter('Role_DisplayName_Y'),\r\n                }, {\r\n                    name: 'Size',\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: data.createDisplayNameGetter('Role_DisplayName_Size'),\r\n                }, {\r\n                    name: 'Gradient',\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: data.createDisplayNameGetter('Role_DisplayName_Gradient'),\r\n                }, {\r\n                    name: 'ColorFill',\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: 'Customized Color',\r\n                }, {\r\n                    name: 'Shape',\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: 'Shape',\r\n                }, {\r\n                    name: 'Image',\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: 'Image',\r\n                }, {\r\n                    name: 'Rotation',\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: 'Rotation',\r\n                }, {\r\n                    name: 'Backdrop',\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: 'Backdrop',\r\n                }, {\r\n                    name: 'X Start',\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: 'X Start',\r\n                }, {\r\n                    name: 'X End',\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: 'X End',\r\n                }, {\r\n                    name: 'Y Start',\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: 'Y Start',\r\n                }, {\r\n                    name: 'Y End',\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: 'Y End',\r\n                }\r\n            ],\r\n\r\n            dataViewMappings: [{\r\n                conditions: [{\r\n                    'Category': { max: 1 }, 'Series': { max: 1 }, 'X': { max: 1 }, 'Y': { max: 1 },\r\n                    'Size': { max: 1 }, 'Gradient': { max: 0 }, 'ColorFill': { max: 1 }, 'Shape': { max: 1 },\r\n                    'Image': { max: 0 }, 'Rotation': { max: 1 }, 'Backdrop': { max: 1 }, 'X Start': { max: 1 },\r\n                    'X End': { max: 1 }, 'Y Start': { max: 1 }, 'Y End': { max: 1 }\r\n                }, {\r\n                        'Category': { max: 1 }, 'Series': { max: 0 }, 'X': { max: 1 }, 'Y': { max: 1 },\r\n                        'Size': { max: 1 }, 'Gradient': { max: 1 }, 'ColorFill': { max: 1 }, 'Shape': { max: 1 },\r\n                        'Image': { max: 0 }, 'Rotation': { max: 1 }, 'Backdrop': { max: 1 }, 'X Start': { max: 1 },\r\n                        'X End': { max: 1 }, 'Y Start': { max: 1 }, 'Y End': { max: 1 }\r\n                    }, {\r\n                        'Category': { max: 1 }, 'Series': { max: 1 }, 'X': { max: 1 }, 'Y': { max: 1 },\r\n                        'Size': { max: 1 }, 'Gradient': { max: 0 }, 'ColorFill': { max: 0 }, 'Shape': { max: 0 },\r\n                        'Image': { max: 1 }, 'Rotation': { max: 1 }, 'Backdrop': { max: 1 }, 'X Start': { max: 1 },\r\n                        'X End': { max: 1 }, 'Y Start': { max: 1 }, 'Y End': { max: 1 }\r\n                    }, {\r\n                        'Category': { max: 1 }, 'Series': { max: 0 }, 'X': { max: 1 }, 'Y': { max: 1 },\r\n                        'Size': { max: 1 }, 'Gradient': { max: 1 }, 'ColorFill': { max: 0 }, 'Shape': { max: 0 },\r\n                        'Image': { max: 1 }, 'Rotation': { max: 1 }, 'Backdrop': { max: 1 }, 'X Start': { max: 1 },\r\n                        'X End': { max: 1 }, 'Y Start': { max: 1 }, 'Y End': { max: 1 }\r\n                    }],\r\n                categorical: {\r\n                    categories: {\r\n                        for: { in: 'Category' },\r\n                        dataReductionAlgorithm: { sample: {} }\r\n                    },\r\n                    values: {\r\n                        group: {\r\n                            by: 'Series',\r\n                            select: [\r\n                                { bind: { to: 'X' } },\r\n                                { bind: { to: 'Y' } },\r\n                                { bind: { to: 'Size' } },\r\n                                { bind: { to: 'Gradient' } },\r\n                                { bind: { to: 'ColorFill' } },\r\n                                { bind: { to: 'Shape' } },\r\n                                { bind: { to: 'Image' } },\r\n                                { bind: { to: 'Rotation' } },\r\n                                { bind: { to: 'Backdrop' } },\r\n                                { bind: { to: 'X Start' } },\r\n                                { bind: { to: 'X End' } },\r\n                                { bind: { to: 'Y Start' } },\r\n                                { bind: { to: 'Y End' } },\r\n                            ],\r\n                            dataReductionAlgorithm: { top: {} }\r\n                        }\r\n                    },\r\n                    rowCount: { preferred: { min: 2 } }\r\n                },\r\n            }],\r\n\r\n            objects: {\r\n                dataPoint: {\r\n                    displayName: data.createDisplayNameGetter('Visual_DataPoint'),\r\n                    properties: {\r\n                        defaultColor: {\r\n                            displayName: data.createDisplayNameGetter('Visual_DefaultColor'),\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        showAllDataPoints: {\r\n                            displayName: data.createDisplayNameGetter('Visual_DataPoint_Show_All'),\r\n                            type: { bool: true }\r\n                        },\r\n                        useShape: {\r\n                            displayName: data.createDisplayNameGetter('Visual_UseImage'),\r\n                            type: { bool: true }\r\n                        },\r\n                        fill: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Fill'),\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        fillRule: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Gradient'),\r\n                            type: { fillRule: {} },\r\n                            rule: {\r\n                                inputRole: 'Gradient',\r\n                                output: {\r\n                                    property: 'fill',\r\n                                    selector: ['Category'],\r\n                                },\r\n                            }\r\n                        }\r\n                    }\r\n                },\r\n                general: {\r\n                    displayName: data.createDisplayNameGetter('Visual_General'),\r\n                    properties: {\r\n                        formatString: {\r\n                            type: { formatting: { formatString: true } },\r\n                        },\r\n                    },\r\n                },\r\n                categoryAxis: {\r\n                    displayName: data.createDisplayNameGetter('Visual_XAxis'),\r\n                    properties: {\r\n                        show: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Show'),\r\n                            type: { bool: true }\r\n                        },\r\n                        axisScale: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Axis_Scale'),\r\n                            type: { formatting: { axisScale: true } }\r\n                        },\r\n                        start: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Axis_Start'),\r\n                            type: { numeric: true }\r\n                        },\r\n                        end: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Axis_End'),\r\n                            type: { numeric: true }\r\n                        },\r\n                        showAxisTitle: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Axis_Title'),\r\n                            type: { bool: true }\r\n                        },\r\n                        axisStyle: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Axis_Style'),\r\n                            type: { formatting: { axisStyle: true } }\r\n                        },\r\n                        axisColor: {\r\n                            displayName: 'Color',\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        labelDisplayUnits: {\r\n                            displayName: 'Display Units',\r\n                            type: { formatting: { labelDisplayUnits: true } },\r\n                        },\r\n                    }\r\n                },\r\n                valueAxis: {\r\n                    displayName: data.createDisplayNameGetter('Visual_YAxis'),\r\n                    properties: {\r\n                        show: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Show'),\r\n                            type: { bool: true }\r\n                        },\r\n                        position: {\r\n                            displayName: data.createDisplayNameGetter('Visual_YAxis_Position'),\r\n                            type: { formatting: { yAxisPosition: true } }\r\n                        },\r\n                        axisScale: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Axis_Scale'),\r\n                            type: { formatting: { axisScale: true } }\r\n                        },\r\n                        start: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Axis_Start'),\r\n                            type: { numeric: true }\r\n                        },\r\n                        end: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Axis_End'),\r\n                            type: { numeric: true }\r\n                        },\r\n                        showAxisTitle: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Axis_Title'),\r\n                            type: { bool: true }\r\n                        },\r\n                        axisStyle: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Axis_Style'),\r\n                            type: { formatting: { axisStyle: true } }\r\n                        },\r\n                        axisColor: {\r\n                            displayName: 'Color',\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        labelDisplayUnits: {\r\n                            displayName: 'Display Units',\r\n                            type: { formatting: { labelDisplayUnits: true } },\r\n                        }\r\n                    }\r\n                },\r\n                legend: {\r\n                    displayName: data.createDisplayNameGetter('Visual_Legend'),\r\n                    properties: {\r\n                        show: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Show'),\r\n                            type: { bool: true }\r\n                        },\r\n                        position: {\r\n                            displayName: data.createDisplayNameGetter('Visual_LegendPosition'),\r\n                            description: data.createDisplayNameGetter('Visual_LegendPositionDescription'),\r\n                            type: { enumeration: legendPosition.type },\r\n                        },\r\n                        showTitle: {\r\n                            displayName: data.createDisplayNameGetter('Visual_LegendShowTitle'),\r\n                            description: data.createDisplayNameGetter('Visual_LegendShowTitleDescription'),\r\n                            type: { bool: true }\r\n                        },\r\n                        titleText: {\r\n                            displayName: 'Legend Name',\r\n                            description: data.createDisplayNameGetter('Visual_LegendNameDescription'),\r\n                            type: { text: true }\r\n                        },\r\n                        labelColor: {\r\n                            displayName: 'Color',\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        fontSize: {\r\n                            displayName: 'Text Size',\r\n                            type: { formatting: { fontSize: true } }\r\n                        }\r\n                    }\r\n                },\r\n                categoryLabels: {\r\n                    displayName: data.createDisplayNameGetter('Visual_CategoryLabels'),\r\n                    properties: {\r\n                        show: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Show'),\r\n                            type: { bool: true }\r\n                        },\r\n                        color: {\r\n                            displayName: data.createDisplayNameGetter('Visual_LabelsFill'),\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        fontSize: {\r\n                            displayName: 'Text Size',\r\n                            type: { formatting: { fontSize: true } }\r\n                        },\r\n                    },\r\n                },\r\n                fillPoint: {\r\n                    displayName: data.createDisplayNameGetter('Visual_FillPoint'),\r\n                    properties: {\r\n                        show: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Fill'),\r\n                            type: { bool: true }\r\n                        },\r\n                    },\r\n                },\r\n                backdrop: {\r\n                    displayName: 'Backdrop',\r\n                    properties: {\r\n                        show: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Show'),\r\n                            type: { bool: true }\r\n                        },\r\n                        url: {\r\n                            displayName: 'Image URL',\r\n                            type: { text: true }\r\n                        },\r\n                    },\r\n                },\r\n                crosshair: {\r\n                    displayName: 'Crosshair',\r\n                    properties: {\r\n                        show: {\r\n                            displayName: 'Crosshair',\r\n                            type: { bool: true }\r\n                        },\r\n                    },\r\n                },\r\n                outline: {\r\n                    displayName: 'Outline',\r\n                    properties: {\r\n                        show: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Outline'),\r\n                            type: { bool: true }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        private static substractMargin(viewport: IViewport, margin: IMargin): IViewport {\r\n            return {\r\n                width: Math.max(viewport.width - (margin.left + margin.right), 0),\r\n                height: Math.max(viewport.height - (margin.top + margin.bottom), 0)\r\n            };\r\n        }\r\n\r\n        private static getCustomSymbolType(shape: any): (number) => string {\r\n            let customSymbolTypes = d3.map({\r\n                \"circle\": (size) => {\r\n                    let r = Math.sqrt(size / Math.PI);\r\n                    return \"M0,\" + r + \"A\" + r + \",\" + r + \" 0 1,1 0,\" + (-r) + \"A\" + r + \",\" + r + \" 0 1,1 0,\" + r + \"Z\";\r\n                },\r\n\r\n                \"cross\": function (size) {\r\n                    let r = Math.sqrt(size / 5) / 2;\r\n                    return \"M\" + -3 * r + \",\" + -r\r\n                        + \"H\" + -r + \"V\" + -3 * r + \"H\" + r + \"V\" + -r + \"H\" + 3 * r + \"V\" + r + \"H\" + r + \"V\" + 3 * r + \"H\" + -r + \"V\" + r + \"H\" + -3 * r + \"Z\";\r\n                },\r\n\r\n                \"diamond\": (size) => {\r\n                    let ry = Math.sqrt(size / (2 * Math.tan(Math.PI / 6))),\r\n                        rx = ry * Math.tan(Math.PI / 6);\r\n                    return \"M0,\" + -ry\r\n                        + \"L\" + rx + \",0\"\r\n                        + \" 0,\" + ry\r\n                        + \" \" + -rx + \",0\"\r\n                        + \"Z\";\r\n                },\r\n\r\n                \"square\": (size) => {\r\n                    let r = Math.sqrt(size) / 2;\r\n                    return \"M\" + -r + \",\" + -r\r\n                        + \"L\" + r + \",\" + -r\r\n                        + \" \" + r + \",\" + r\r\n                        + \" \" + -r + \",\" + r\r\n                        + \"Z\";\r\n                },\r\n\r\n                \"triangle-up\": (size) => {\r\n                    let rx = Math.sqrt(size / Math.sqrt(3)),\r\n                        ry = rx * Math.sqrt(3) / 2;\r\n                    return \"M0,\" + -ry\r\n                        + \"L\" + rx + \",\" + ry\r\n                        + \" \" + -rx + \",\" + ry\r\n                        + \"Z\";\r\n                },\r\n\r\n                \"triangle-down\": (size) => {\r\n                    let rx = Math.sqrt(size / Math.sqrt(3)),\r\n                        ry = rx * Math.sqrt(3) / 2;\r\n                    return \"M0,\" + ry\r\n                        + \"L\" + rx + \",\" + -ry\r\n                        + \" \" + -rx + \",\" + -ry\r\n                        + \"Z\";\r\n                },\r\n\r\n                'star': (size) => {\r\n                    let outerRadius = Math.sqrt(size / 2);\r\n                    let innerRadius = Math.sqrt(size / 10);\r\n                    let results = \"\";\r\n                    let angle = Math.PI / 5;\r\n                    for (let i = 0; i < 10; i++) {\r\n                        // Use outer or inner radius depending on what iteration we are in.\r\n                        let r = (i & 1) === 0 ? outerRadius : innerRadius;\r\n                        let currX = Math.cos(i * angle) * r;\r\n                        let currY = Math.sin(i * angle) * r;\r\n                        // Our first time we simply append the coordinates, subsequet times\r\n                        // we append a \", \" to distinguish each coordinate pair.\r\n                        if (i === 0) {\r\n                            results = \"M\" + currX + \",\" + currY + \"L\";\r\n                        } else {\r\n                            results += \" \" + currX + \",\" + currY;\r\n                        }\r\n                    }\r\n                    return results + \"Z\";\r\n                },\r\n\r\n                'hexagon': (size) => {\r\n                    let r = Math.sqrt(size / (6 * Math.sqrt(3)));\r\n                    let r2 = Math.sqrt(size / (2 * Math.sqrt(3)));\r\n\r\n                    return \"M0,\" + (2 * r) + \"L\" + (-r2) + \",\" + r + \" \" + (-r2) + \",\" + (-r) + \" 0,\" + (-2 * r) + \" \" + r2 + \",\" + (-r) + \" \" + r2 + \",\" + r + \"Z\";\r\n                },\r\n\r\n                'x': (size) => {\r\n                    let r = Math.sqrt(size / 10);\r\n                    return \"M0,\" + r + \"L\" + (-r) + \",\" + 2 * r + \" \" + (-2 * r) + \",\" + r + \" \" + (-r) + \",0 \" + (-2 * r) + \",\" + (-r) + \" \" + (-r) + \",\" + (-2 * r) + \" 0,\" + (-r) + \" \" + r + \",\" + (-2 * r) + \" \" + (2 * r) + \",\" + (-r) + \" \" + r + \",0 \" + (2 * r) + \",\" + r + \" \" + r + \",\" + (2 * r) + \"Z\";\r\n                },\r\n\r\n                'uparrow': (size) => {\r\n                    let r = Math.sqrt(size / 12);\r\n                    return \"M\" + r + \",\" + (3 * r) + \"L\" + (-r) + \",\" + (3 * r) + \" \" + (-r) + \",\" + (-r) + \" \" + (-2 * r) + \",\" + (-r) + \" 0,\" + (-3 * r) + \" \" + (2 * r) + \",\" + (-r) + \" \" + r + \",\" + (-r) + \"Z\";\r\n                },\r\n\r\n                'downarrow': (size) => {\r\n                    let r = Math.sqrt(size / 12);\r\n                    return \"M0,\" + (3 * r) + \"L\" + (-2 * r) + \",\" + r + \" \" + (-r) + \",\" + r + \" \" + (-r) + \",\" + (-3 * r) + \" \" + r + \",\" + (-3 * r) + \" \" + r + \",\" + r + \" \" + (2 * r) + \",\" + r + \"Z\";\r\n                }\r\n            });\r\n\r\n            let defaultValue = customSymbolTypes.entries()[0].value;\r\n            if (!shape) {\r\n                return defaultValue;\r\n            } else if (isNaN(shape)) {\r\n                return customSymbolTypes[shape && shape.toString().toLowerCase()] || defaultValue;\r\n            } else {\r\n                let result = customSymbolTypes.entries()[Math.floor(shape)];\r\n                return result ? result.value : defaultValue;\r\n            }\r\n        }\r\n\r\n        public init(options: VisualInitOptions): void {\r\n            this.options = options;\r\n            this.animator = new BaseAnimator();\r\n            this.behavior = new CartesianChartBehavior([new ScatterChartWebBehavior()]);\r\n            let element = this.element = options.element;\r\n            this.viewport = _.clone(options.viewport);\r\n            this.style = options.style;\r\n            this.hostServices = options.host;\r\n            this.colors = this.style.colorPalette.dataColors;\r\n            this.interactivity = options.interactivity;\r\n            this.margin = {\r\n                top: 1,\r\n                right: 1,\r\n                bottom: 1,\r\n                left: 1\r\n            };\r\n\r\n            this.yAxisOrientation = yAxisPosition.left;\r\n            this.adjustMargins();\r\n\r\n            let showLinesOnX = this.scrollY = true;\r\n\r\n            let showLinesOnY = this.scrollX = true;\r\n\r\n            let svg = this.svg = d3.select(element.get(0))\r\n                .append('svg')\r\n                .style('position', 'absolute')\r\n                .classed(EnhancedScatterChart.ClassName, true);\r\n\r\n            let axisGraphicsContext = this.axisGraphicsContext = svg.append('g')\r\n                .classed(this.AxisGraphicsContextClassName, true);\r\n\r\n            this.svgScrollable = svg.append('svg')\r\n                .classed('svgScrollable', true)\r\n                .style('overflow', 'hidden');\r\n\r\n            let axisGraphicsContextScrollable = this.axisGraphicsContextScrollable = this.svgScrollable.append('g')\r\n                .classed(this.AxisGraphicsContextClassName, true);\r\n\r\n            this.clearCatcher = appendClearCatcher(this.axisGraphicsContextScrollable);\r\n            let axisGroup = showLinesOnX ? axisGraphicsContextScrollable : axisGraphicsContext;\r\n\r\n            this.backgroundGraphicsContext = axisGraphicsContext.append('svg:image');\r\n            this.xAxisGraphicsContext = showLinesOnX ? axisGraphicsContext.append('g').attr('class', 'x axis') : axisGraphicsContextScrollable.append('g').attr('class', 'x axis');\r\n            this.y1AxisGraphicsContext = axisGroup.append('g').attr('class', 'y axis');\r\n\r\n            this.xAxisGraphicsContext.classed('showLinesOnAxis', showLinesOnX);\r\n            this.y1AxisGraphicsContext.classed('showLinesOnAxis', showLinesOnY);\r\n\r\n            this.xAxisGraphicsContext.classed('hideLinesOnAxis', !showLinesOnX);\r\n            this.y1AxisGraphicsContext.classed('hideLinesOnAxis', !showLinesOnY);\r\n            this.interactivityService = createInteractivityService(this.hostServices);\r\n\r\n            this.legend = createLegend(element, this.interactivity && this.interactivity.isInteractiveLegend, this.interactivityService, true);\r\n\r\n            this.mainGraphicsG = this.axisGraphicsContextScrollable.append('g')\r\n                .classed(EnhancedScatterChart.MainGraphicsContextClassName, true);\r\n\r\n            this.mainGraphicsContext = this.mainGraphicsG.append('svg');\r\n            this.svgDefaultImage = \"http://svg-edit.googlecode.com/svn-history/r1771/trunk/clipart/sun.svg\";\r\n            this.keyArray = [];\r\n        }\r\n\r\n        private adjustMargins(): void {\r\n            // Adjust margins if ticks are not going to be shown on either axis\r\n            let xAxis = this.element.find('.x.axis');\r\n\r\n            if (AxisHelper.getRecommendedNumberOfTicksForXAxis(this.viewportIn.width) === 0\r\n                && AxisHelper.getRecommendedNumberOfTicksForYAxis(this.viewportIn.height) === 0) {\r\n                this.margin = {\r\n                    top: 0,\r\n                    right: 0,\r\n                    bottom: 0,\r\n                    left: 0\r\n                };\r\n                xAxis.hide();\r\n            } else {\r\n                xAxis.show();\r\n            }\r\n        }\r\n\r\n        private getValueAxisProperties(dataViewMetadata: DataViewMetadata, axisTitleOnByDefault?: boolean): DataViewObject {\r\n            let toReturn: DataViewObject = {};\r\n            if (!dataViewMetadata)\r\n                return toReturn;\r\n\r\n            let objects = dataViewMetadata.objects;\r\n\r\n            if (objects) {\r\n                let valueAxisObject = objects['valueAxis'];\r\n                if (valueAxisObject) {\r\n                    toReturn = {\r\n                        show: valueAxisObject['show'],\r\n                        position: valueAxisObject['position'],\r\n                        axisScale: valueAxisObject['axisScale'],\r\n                        start: valueAxisObject['start'],\r\n                        end: valueAxisObject['end'],\r\n                        showAxisTitle: valueAxisObject['showAxisTitle'] == null ? axisTitleOnByDefault : valueAxisObject['showAxisTitle'],\r\n                        axisStyle: valueAxisObject['axisStyle'],\r\n                        axisColor: valueAxisObject['axisColor'],\r\n                        secShow: valueAxisObject['secShow'],\r\n                        secPosition: valueAxisObject['secPosition'],\r\n                        secAxisScale: valueAxisObject['secAxisScale'],\r\n                        secStart: valueAxisObject['secStart'],\r\n                        secEnd: valueAxisObject['secEnd'],\r\n                        secShowAxisTitle: valueAxisObject['secShowAxisTitle'],\r\n                        secAxisStyle: valueAxisObject['secAxisStyle'],\r\n                        labelDisplayUnits: valueAxisObject['labelDisplayUnits'],\r\n                    };\r\n                }\r\n            }\r\n            return toReturn;\r\n        }\r\n\r\n        private getCategoryAxisProperties(dataViewMetadata: DataViewMetadata, axisTitleOnByDefault?: boolean): DataViewObject {\r\n            let toReturn: DataViewObject = {};\r\n            if (!dataViewMetadata)\r\n                return toReturn;\r\n\r\n            let objects = dataViewMetadata.objects;\r\n\r\n            if (objects) {\r\n                let categoryAxisObject = objects['categoryAxis'];\r\n\r\n                if (categoryAxisObject) {\r\n                    toReturn = {\r\n                        show: categoryAxisObject['show'],\r\n                        axisType: categoryAxisObject['axisType'],\r\n                        axisScale: categoryAxisObject['axisScale'],\r\n                        axisColor: categoryAxisObject['axisColor'],\r\n                        start: categoryAxisObject['start'],\r\n                        end: categoryAxisObject['end'],\r\n                        showAxisTitle: categoryAxisObject['showAxisTitle'] == null ? axisTitleOnByDefault : categoryAxisObject['showAxisTitle'],\r\n                        axisStyle: categoryAxisObject['axisStyle'],\r\n                        labelDisplayUnits: categoryAxisObject['labelDisplayUnits']\r\n                    };\r\n                }\r\n            }\r\n            return toReturn;\r\n        }\r\n\r\n        public static converter(dataView: DataView, currentViewport: IViewport, colorPalette: IDataColorPalette, interactivityService?: IInteractivityService, categoryAxisProperties?: DataViewObject, valueAxisProperties?: DataViewObject): EnhancedScatterChartData {\r\n            let categoryValues: any[],\r\n                categoryFormatter: IValueFormatter,\r\n                categoryObjects: DataViewObjects[],\r\n                categoryIdentities: DataViewScopeIdentity[],\r\n                categoryQueryName: string;\r\n\r\n            let dataViewCategorical: DataViewCategorical = dataView.categorical;\r\n            let dataViewMetadata: DataViewMetadata = dataView.metadata;\r\n\r\n            if (dataViewCategorical.categories && dataViewCategorical.categories.length > 0) {\r\n                categoryValues = dataViewCategorical.categories[0].values;\r\n                categoryFormatter = valueFormatter.create({ format: valueFormatter.getFormatString(dataViewCategorical.categories[0].source, scatterChartProps.general.formatString), value: categoryValues[0], value2: categoryValues[categoryValues.length - 1] });\r\n                categoryIdentities = dataViewCategorical.categories[0].identity;\r\n                categoryObjects = dataViewCategorical.categories[0].objects;\r\n                categoryQueryName = dataViewCategorical.categories[0].source.queryName;\r\n            }\r\n            else {\r\n                categoryValues = [null];\r\n                // creating default formatter for null value (to get the right string of empty value from the locale)\r\n                categoryFormatter = valueFormatter.createDefaultFormatter(null);\r\n            }\r\n            let categories = dataViewCategorical.categories;\r\n            let dataValues = dataViewCategorical.values;\r\n            let hasDynamicSeries = !!dataValues.source;\r\n            let grouped = dataValues.grouped();\r\n            let useShape = (!!(DataRoleHelper.getMeasureIndexOfRole(grouped, 'Image') >= 0)) ? false : true;\r\n            let useCustomColor = (!!(DataRoleHelper.getMeasureIndexOfRole(grouped, 'ColorFill') >= 0)) ? true : false;\r\n            let dvSource = dataValues.source;\r\n            let scatterMetadata = EnhancedScatterChart.getMetadata(grouped, dvSource);\r\n            let dataLabelsSettings = dataLabelUtils.getDefaultPointLabelSettings();\r\n            let fillPoint = false;\r\n            let backdrop = { show: false, url: \"\" };\r\n            let crosshair = false;\r\n            let outline = false;\r\n            let defaultDataPointColor = \"\";\r\n            let showAllDataPoints = true;\r\n\r\n            if (dataViewMetadata && dataViewMetadata.objects) {\r\n                let objects = dataViewMetadata.objects;\r\n\r\n                defaultDataPointColor = DataViewObjects.getFillColor(objects, columnChartProps.dataPoint.defaultColor);\r\n                showAllDataPoints = DataViewObjects.getValue<boolean>(objects, columnChartProps.dataPoint.showAllDataPoints);\r\n                /*if(objects['dataPoint']){\r\n                    let shapeObj = objects['dataPoint'];\r\n                    if(shapeObj['useShape']){\r\n                        shape = <boolean>shapeObj['useShape'];\r\n                    }\r\n                }*/\r\n\r\n                let labelsObj = objects['categoryLabels'];\r\n                if (labelsObj) {\r\n                    dataLabelsSettings.show = (labelsObj['show'] !== undefined) ? <boolean>labelsObj['show'] : dataLabelsSettings.show;\r\n                    dataLabelsSettings.fontSize = (labelsObj['fontSize'] !== undefined) ? <number>labelsObj['fontSize'] : dataLabelsSettings.fontSize;\r\n                    if (labelsObj['color'] !== undefined) {\r\n                        dataLabelsSettings.labelColor = (<Fill>labelsObj['color']).solid.color;\r\n                    }\r\n                }\r\n\r\n                fillPoint = DataViewObjects.getValue<boolean>(objects, scatterChartProps.fillPoint.show, fillPoint);\r\n\r\n                let backdropObject = objects['backdrop'];\r\n                if (backdropObject !== undefined) {\r\n                    backdrop.show = <boolean>backdropObject['show'];\r\n                    if (backdrop.show) {\r\n                        backdrop.url = <string>backdropObject['url'];\r\n                    }\r\n                }\r\n                let crosshairObject = objects['crosshair'];\r\n                if (crosshairObject !== undefined) {\r\n                    crosshair = <boolean>crosshairObject['show'];\r\n                }\r\n                let outlineObject = objects['outline'];\r\n                if (outlineObject !== undefined) {\r\n                    outline = <boolean>outlineObject['show'];\r\n                }\r\n            }\r\n\r\n            let dataPoints = EnhancedScatterChart.createDataPoints(\r\n                dataValues,\r\n                scatterMetadata,\r\n                categories,\r\n                categoryValues,\r\n                categoryFormatter,\r\n                categoryIdentities,\r\n                categoryObjects,\r\n                colorPalette,\r\n                hasDynamicSeries,\r\n                dataLabelsSettings,\r\n                defaultDataPointColor,\r\n                categoryQueryName);\r\n\r\n            if (interactivityService) {\r\n                interactivityService.applySelectionStateToData(dataPoints);\r\n            }\r\n\r\n            let legendItems = hasDynamicSeries\r\n                ? EnhancedScatterChart.createSeriesLegend(dataValues, colorPalette, dataValues, valueFormatter.getFormatString(dvSource, scatterChartProps.general.formatString), defaultDataPointColor)\r\n                : [];\r\n\r\n            let legendTitle = dataValues && dvSource ? dvSource.displayName : \"\";\r\n            if (!legendTitle) {\r\n                legendTitle = categories && categories[0].source.displayName ? categories[0].source.displayName : \"\";\r\n            }\r\n\r\n            let legendData = { title: legendTitle, dataPoints: legendItems };\r\n\r\n            let sizeRange = EnhancedScatterChart.getSizeRangeForGroups(grouped, scatterMetadata.idx.size);\r\n\r\n            if (categoryAxisProperties && categoryAxisProperties[\"showAxisTitle\"] !== null && categoryAxisProperties[\"showAxisTitle\"] === false) {\r\n                scatterMetadata.axesLabels.x = null;\r\n            }\r\n            if (valueAxisProperties && valueAxisProperties[\"showAxisTitle\"] !== null && valueAxisProperties[\"showAxisTitle\"] === false) {\r\n                scatterMetadata.axesLabels.y = null;\r\n            }\r\n\r\n            if (dataPoints && dataPoints[0]) {\r\n                let point = dataPoints[0];\r\n                if (point.backdrop != null) {\r\n                    backdrop.show = true;\r\n                    backdrop.url = point.backdrop;\r\n                }\r\n                if (point.xStart != null) {\r\n                    categoryAxisProperties['start'] = point.xStart;\r\n                }\r\n                if (point.xEnd != null) {\r\n                    categoryAxisProperties['end'] = point.xEnd;\r\n                }\r\n                if (point.yStart != null) {\r\n                    valueAxisProperties['start'] = point.yStart;\r\n                }\r\n                if (point.yEnd != null) {\r\n                    valueAxisProperties['end'] = point.yEnd;\r\n                }\r\n            }\r\n\r\n            return {\r\n                xCol: scatterMetadata.cols.x,\r\n                yCol: scatterMetadata.cols.y,\r\n                dataPoints: dataPoints,\r\n                legendData: legendData,\r\n                axesLabels: scatterMetadata.axesLabels,\r\n                selectedIds: [],\r\n                size: scatterMetadata.cols.size,\r\n                sizeRange: sizeRange,\r\n                dataLabelsSettings: dataLabelsSettings,\r\n                defaultDataPointColor: defaultDataPointColor,\r\n                hasDynamicSeries: hasDynamicSeries,\r\n                showAllDataPoints: showAllDataPoints,\r\n                fillPoint: fillPoint,\r\n                useShape: useShape,\r\n                useCustomColor: useCustomColor,\r\n                backdrop: backdrop,\r\n                crosshair: crosshair,\r\n                outline: outline\r\n            };\r\n        }\r\n\r\n        private static createSeriesLegend(\r\n            dataValues: DataViewValueColumns,\r\n            colorPalette: IDataColorPalette,\r\n            categorical: DataViewValueColumns,\r\n            formatString: string,\r\n            defaultDataPointColor: string): LegendDataPoint[] {\r\n\r\n            let grouped = dataValues.grouped();\r\n            let colorHelper = new ColorHelper(colorPalette, scatterChartProps.dataPoint.fill, defaultDataPointColor);\r\n\r\n            let legendItems: LegendDataPoint[] = [];\r\n            for (let i = 0, len = grouped.length; i < len; i++) {\r\n                let grouping = grouped[i];\r\n                let color = colorHelper.getColorForSeriesValue(grouping.objects, dataValues.identityFields, grouping.name);\r\n\r\n                legendItems.push({\r\n                    color: color,\r\n                    icon: LegendIcon.Circle,\r\n                    label: valueFormatter.format(grouping.name, formatString),\r\n                    identity: grouping.identity ? SelectionId.createWithId(grouping.identity) : SelectionId.createNull(),\r\n                    selected: false,\r\n                });\r\n            }\r\n\r\n            return legendItems;\r\n        }\r\n\r\n        private static getSizeRangeForGroups(\r\n            dataViewValueGroups: DataViewValueColumnGroup[],\r\n            sizeColumnIndex: number): NumberRange {\r\n\r\n            let result: NumberRange = {};\r\n            if (dataViewValueGroups) {\r\n                dataViewValueGroups.forEach((group) => {\r\n                    let sizeColumn = ScatterChart.getMeasureValue(sizeColumnIndex, group.values);\r\n                    let currentRange: NumberRange = AxisHelper.getRangeForColumn(sizeColumn);\r\n                    if (result.min == null || result.min > currentRange.min) {\r\n                        result.min = currentRange.min;\r\n                    }\r\n                    if (result.max == null || result.max < currentRange.max) {\r\n                        result.max = currentRange.max;\r\n                    }\r\n                });\r\n            }\r\n            return result;\r\n        }\r\n\r\n        private static getMetadata(grouped: DataViewValueColumnGroup[], source: DataViewMetadataColumn): ScatterChartMeasureMetadata {\r\n            let xIndex = DataRoleHelper.getMeasureIndexOfRole(grouped, 'X');\r\n            let yIndex = DataRoleHelper.getMeasureIndexOfRole(grouped, 'Y');\r\n            let sizeIndex = DataRoleHelper.getMeasureIndexOfRole(grouped, 'Size');\r\n\r\n            let gradientIndex = DataRoleHelper.getMeasureIndexOfRole(grouped, 'Gradient');\r\n            let colorFillIndex = DataRoleHelper.getMeasureIndexOfRole(grouped, 'ColorFill');\r\n            let shapeIndex = DataRoleHelper.getMeasureIndexOfRole(grouped, 'Shape');\r\n            let imageIndex = DataRoleHelper.getMeasureIndexOfRole(grouped, 'Image');\r\n            let rotationIndex = DataRoleHelper.getMeasureIndexOfRole(grouped, 'Rotation');\r\n            let backdropIndex = DataRoleHelper.getMeasureIndexOfRole(grouped, 'Backdrop');\r\n            let xStartIndex = DataRoleHelper.getMeasureIndexOfRole(grouped, 'X Start');\r\n            let xEndIndex = DataRoleHelper.getMeasureIndexOfRole(grouped, 'X End');\r\n            let yStartIndex = DataRoleHelper.getMeasureIndexOfRole(grouped, 'Y Start');\r\n            let yEndIndex = DataRoleHelper.getMeasureIndexOfRole(grouped, 'Y End');\r\n            let xCol: DataViewMetadataColumn;\r\n            let yCol: DataViewMetadataColumn;\r\n            let sizeCol: DataViewMetadataColumn;\r\n            let colorFillCol: DataViewMetadataColumn;\r\n            let shapeCol: DataViewMetadataColumn;\r\n            let imageCol: DataViewMetadataColumn;\r\n            let rotationCol: DataViewMetadataColumn;\r\n            let backdropCol: DataViewMetadataColumn;\r\n            let xStartCol: DataViewMetadataColumn;\r\n            let xEndCol: DataViewMetadataColumn;\r\n            let yStartCol: DataViewMetadataColumn;\r\n            let yEndCol: DataViewMetadataColumn;\r\n            let xAxisLabel = \"\";\r\n            let yAxisLabel = \"\";\r\n\r\n            if (grouped && grouped.length) {\r\n                let firstGroup = grouped[0],\r\n                    measureCount = firstGroup.values.length;\r\n\r\n                if (!(xIndex >= 0))\r\n                    xIndex = EnhancedScatterChart.getDefaultMeasureIndex(measureCount, [yIndex, sizeIndex, gradientIndex, colorFillIndex, shapeIndex, imageIndex, rotationIndex, backdropIndex, xStartIndex, xEndIndex, yStartIndex, yEndIndex]);\r\n                if (!(yIndex >= 0))\r\n                    yIndex = EnhancedScatterChart.getDefaultMeasureIndex(measureCount, [xIndex, sizeIndex, gradientIndex, colorFillIndex, shapeIndex, imageIndex, rotationIndex, backdropIndex, xStartIndex, xEndIndex, yStartIndex, yEndIndex]);\r\n                if (!(sizeIndex >= 0))\r\n                    sizeIndex = EnhancedScatterChart.getDefaultMeasureIndex(measureCount, [xIndex, yIndex, gradientIndex, colorFillIndex, shapeIndex, imageIndex, rotationIndex, backdropIndex, xStartIndex, xEndIndex, yStartIndex, yEndIndex]);\r\n                if (!(colorFillIndex >= 0))\r\n                    colorFillIndex = EnhancedScatterChart.getDefaultMeasureIndex(measureCount, [xIndex, yIndex, sizeIndex, gradientIndex, shapeIndex, imageIndex, rotationIndex, backdropIndex, xStartIndex, xEndIndex, yStartIndex, yEndIndex]);\r\n                if (!(shapeIndex >= 0))\r\n                    shapeIndex = EnhancedScatterChart.getDefaultMeasureIndex(measureCount, [xIndex, yIndex, sizeIndex, gradientIndex, colorFillIndex, imageIndex, rotationIndex, backdropIndex, xStartIndex, xEndIndex, yStartIndex, yEndIndex]);\r\n                if (!(imageIndex >= 0)) {\r\n                    imageIndex = EnhancedScatterChart.getDefaultMeasureIndex(measureCount, [xIndex, yIndex, sizeIndex, gradientIndex, colorFillIndex, shapeIndex, rotationIndex, backdropIndex, xStartIndex, xEndIndex, yStartIndex, yEndIndex]);\r\n                }\r\n                if (!(rotationIndex >= 0))\r\n                    rotationIndex = EnhancedScatterChart.getDefaultMeasureIndex(measureCount, [xIndex, yIndex, sizeIndex, gradientIndex, colorFillIndex, shapeIndex, imageIndex, backdropIndex, xStartIndex, xEndIndex, yStartIndex, yEndIndex]);\r\n                if (!(backdropIndex >= 0))\r\n                    backdropIndex = EnhancedScatterChart.getDefaultMeasureIndex(measureCount, [xIndex, yIndex, sizeIndex, gradientIndex, colorFillIndex, shapeIndex, imageIndex, rotationIndex, xStartIndex, xEndIndex, yStartIndex, yEndIndex]);\r\n                if (!(xStartIndex >= 0))\r\n                    xStartIndex = EnhancedScatterChart.getDefaultMeasureIndex(measureCount, [xIndex, yIndex, sizeIndex, gradientIndex, colorFillIndex, shapeIndex, imageIndex, rotationIndex, backdropIndex, xEndIndex, yStartIndex, yEndIndex]);\r\n                if (!(xEndIndex >= 0))\r\n                    xEndIndex = EnhancedScatterChart.getDefaultMeasureIndex(measureCount, [xIndex, yIndex, sizeIndex, gradientIndex, colorFillIndex, shapeIndex, imageIndex, rotationIndex, backdropIndex, xStartIndex, yStartIndex, yEndIndex]);\r\n                if (!(yStartIndex >= 0))\r\n                    yStartIndex = EnhancedScatterChart.getDefaultMeasureIndex(measureCount, [xIndex, yIndex, sizeIndex, gradientIndex, colorFillIndex, shapeIndex, imageIndex, rotationIndex, backdropIndex, xStartIndex, xEndIndex, yEndIndex]);\r\n                if (!(yEndIndex >= 0))\r\n                    yEndIndex = EnhancedScatterChart.getDefaultMeasureIndex(measureCount, [xIndex, yIndex, sizeIndex, gradientIndex, colorFillIndex, shapeIndex, imageIndex, rotationIndex, backdropIndex, xStartIndex, xEndIndex, yStartIndex]);\r\n\r\n                if (xIndex >= 0) {\r\n                    xCol = firstGroup.values[xIndex].source;\r\n                    xAxisLabel = firstGroup.values[xIndex].source.displayName;\r\n                }\r\n                if (yIndex >= 0) {\r\n                    yCol = firstGroup.values[yIndex].source;\r\n                    yAxisLabel = firstGroup.values[yIndex].source.displayName;\r\n                }\r\n                if (sizeIndex >= 0) {\r\n                    sizeCol = firstGroup.values[sizeIndex].source;\r\n                }\r\n                if (colorFillIndex >= 0) {\r\n                    colorFillCol = firstGroup.values[colorFillIndex].source;\r\n                }\r\n                if (shapeIndex >= 0) {\r\n                    shapeCol = firstGroup.values[shapeIndex].source;\r\n                }\r\n                if (imageIndex >= 0) {\r\n                    imageCol = firstGroup.values[imageIndex].source;\r\n                }\r\n                if (rotationIndex >= 0) {\r\n                    rotationCol = firstGroup.values[rotationIndex].source;\r\n                }\r\n\r\n                if (backdropIndex >= 0) {\r\n                    backdropCol = firstGroup.values[backdropIndex].source;\r\n                }\r\n                if (xStartIndex >= 0) {\r\n                    xStartCol = firstGroup.values[xStartIndex].source;\r\n                }\r\n                if (xEndIndex >= 0) {\r\n                    xEndCol = firstGroup.values[xEndIndex].source;\r\n                }\r\n                if (yStartIndex >= 0) {\r\n                    yStartCol = firstGroup.values[yStartIndex].source;\r\n                }\r\n                if (yEndIndex >= 0) {\r\n                    yEndCol = firstGroup.values[yEndIndex].source;\r\n                }\r\n            }\r\n\r\n            return {\r\n                idx: {\r\n                    x: xIndex,\r\n                    y: yIndex,\r\n                    size: sizeIndex,\r\n                    colorFill: colorFillIndex,\r\n                    shape: shapeIndex,\r\n                    image: imageIndex,\r\n                    rotation: rotationIndex,\r\n                    backdrop: backdropIndex,\r\n                    xStart: xStartIndex,\r\n                    xEnd: xEndIndex,\r\n                    yStart: yStartIndex,\r\n                    yEnd: yEndIndex,\r\n                },\r\n                cols: {\r\n                    x: xCol,\r\n                    y: yCol,\r\n                    size: sizeCol,\r\n                    colorFill: colorFillCol,\r\n                    shape: shapeCol,\r\n                    image: imageCol,\r\n                    rotation: rotationCol,\r\n                    backdrop: backdropCol,\r\n                    xStart: xStartCol,\r\n                    xEnd: xEndCol,\r\n                    yStart: yStartCol,\r\n                    yEnd: yEndCol,\r\n                },\r\n                axesLabels: {\r\n                    x: xAxisLabel,\r\n                    y: yAxisLabel\r\n                }\r\n            };\r\n        }\r\n\r\n        private static getDefaultMeasureIndex(count: number, usedIndexes: number[]): number {\r\n            for (let i = 0; i < count; i++) {\r\n                let found = true;\r\n                for (let j = 0; j < usedIndexes.length; j++) {\r\n                    if (i === usedIndexes[j]) {\r\n                        found = false;\r\n                        break;\r\n                    }\r\n                }\r\n                if (found === true) {\r\n                    return i;\r\n                }\r\n            }\r\n            return -1;\r\n        }\r\n\r\n        public static createLazyFormattedCategory(formatter: IValueFormatter, value: string): jsCommon.Lazy<string> {\r\n            return new jsCommon.Lazy(() => formatter.format(value));\r\n        }\r\n\r\n        private static createDataPoints(\r\n            dataValues: DataViewValueColumns,\r\n            metadata: ScatterChartMeasureMetadata,\r\n            categories: DataViewCategoryColumn[],\r\n            categoryValues: any[],\r\n            categoryFormatter: IValueFormatter,\r\n            categoryIdentities: DataViewScopeIdentity[],\r\n            categoryObjects: DataViewObjects[],\r\n            colorPalette: IDataColorPalette,\r\n            hasDynamicSeries: boolean,\r\n            labelSettings: PointDataLabelsSettings,\r\n            defaultDataPointColor?: string,\r\n            categoryQueryName?: string): EnhancedScatterChartDataPoint[] {\r\n\r\n            let dataPoints: EnhancedScatterChartDataPoint[] = [],\r\n                indicies = metadata.idx,\r\n                formatStringProp = scatterChartProps.general.formatString,\r\n                dataValueSource = dataValues.source,\r\n                grouped = dataValues.grouped();\r\n\r\n            let colorHelper = new ColorHelper(colorPalette, scatterChartProps.dataPoint.fill, defaultDataPointColor);\r\n\r\n            for (let categoryIdx = 0, ilen = categoryValues.length; categoryIdx < ilen; categoryIdx++) {\r\n                let categoryValue = categoryValues[categoryIdx];\r\n\r\n                for (let seriesIdx = 0, len = grouped.length; seriesIdx < len; seriesIdx++) {\r\n                    let grouping = grouped[seriesIdx];\r\n                    let seriesValues = grouping.values;\r\n                    let measureX = ScatterChart.getMeasureValue(indicies.x, seriesValues);\r\n                    let measureY = ScatterChart.getMeasureValue(indicies.y, seriesValues);\r\n                    let measureSize = ScatterChart.getMeasureValue(indicies.size, seriesValues);\r\n                    let measureColorFill = ScatterChart.getMeasureValue(indicies.colorFill, seriesValues);\r\n                    let measureShape = ScatterChart.getMeasureValue(indicies.shape, seriesValues);\r\n                    let measureImage = ScatterChart.getMeasureValue(indicies.image, seriesValues);\r\n                    let measureRotation = ScatterChart.getMeasureValue(indicies.rotation, seriesValues);\r\n                    let measureBackdrop = ScatterChart.getMeasureValue(indicies.backdrop, seriesValues);\r\n                    let measureXStart = ScatterChart.getMeasureValue(indicies.xStart, seriesValues);\r\n                    let measureXEnd = ScatterChart.getMeasureValue(indicies.xEnd, seriesValues);\r\n                    let measureYStart = ScatterChart.getMeasureValue(indicies.yStart, seriesValues);\r\n                    let measureYEnd = ScatterChart.getMeasureValue(indicies.yEnd, seriesValues);\r\n\r\n                    let xVal = measureX && measureX.values && !isNaN(measureX.values[categoryIdx]) ? measureX.values[categoryIdx] : null;\r\n                    let yVal = measureY && measureY.values && !isNaN(measureY.values[categoryIdx]) ? measureY.values[categoryIdx] : 0;\r\n                    let size = measureSize && measureSize.values ? measureSize.values[categoryIdx] : null;\r\n                    let colorFill = measureColorFill && measureColorFill.values ? measureColorFill.values[categoryIdx] : null;\r\n                    let shapeSymbolType = EnhancedScatterChart.getCustomSymbolType(measureShape && measureShape.values && measureShape.values[categoryIdx]);\r\n                    let image = measureImage && measureImage.values ? measureImage.values[categoryIdx] : null;\r\n                    let rotation = measureRotation && measureRotation.values ? measureRotation.values[categoryIdx] : 0;\r\n                    let backdrop = measureBackdrop && measureBackdrop.values ? measureBackdrop.values[categoryIdx] : null;\r\n                    let xStart = measureXStart && measureXStart.values ? measureXStart.values[categoryIdx] : null;\r\n                    let xEnd = measureXEnd && measureXEnd.values ? measureXEnd.values[categoryIdx] : null;\r\n                    let yStart = measureYStart && measureYStart.values ? measureYStart.values[categoryIdx] : null;\r\n                    let yEnd = measureYEnd && measureYEnd.values ? measureYEnd.values[categoryIdx] : null;\r\n\r\n                    let hasNullValue = (xVal == null) || (yVal == null);\r\n\r\n                    if (hasNullValue)\r\n                        continue;\r\n\r\n                    let color: string;\r\n                    if (hasDynamicSeries) {\r\n                        color = colorHelper.getColorForSeriesValue(grouping.objects, dataValues.identityFields, grouping.name);\r\n                    } else {\r\n                        // If we have no Size measure then use a blank query name\r\n                        let measureSource = (measureSize != null)\r\n                            ? measureSize.source.queryName\r\n                            : '';\r\n                        color = colorHelper.getColorForMeasure(categoryObjects && categoryObjects[categoryIdx], measureSource);\r\n                    }\r\n\r\n                    let category = categories && categories.length > 0 ? categories[0] : null;\r\n                    let identity = SelectionIdBuilder.builder()\r\n                        .withCategory(category, categoryIdx)\r\n                        .withSeries(dataValues, grouping)\r\n                        .createSelectionId();\r\n\r\n                    let seriesData: TooltipSeriesDataItem[] = [];\r\n                    if (dataValueSource) {\r\n                        // Dynamic series\r\n                        seriesData.push({ value: grouping.name, metadata: { source: dataValueSource, values: [] } });\r\n                    }\r\n                    if (measureX) {\r\n                        seriesData.push({ value: xVal, metadata: measureX });\r\n                    }\r\n                    if (measureY) {\r\n                        seriesData.push({ value: yVal, metadata: measureY });\r\n                    }\r\n                    if (measureSize && measureSize.values && measureSize.values.length > 0) {\r\n                        seriesData.push({ value: measureSize.values[categoryIdx], metadata: measureSize });\r\n                    }\r\n                    if (measureColorFill && measureColorFill.values && measureColorFill.values.length > 0) {\r\n                        seriesData.push({ value: measureColorFill.values[categoryIdx], metadata: measureColorFill });\r\n                    }\r\n                    if (measureShape && measureShape.values && measureShape.values.length > 0) {\r\n                        seriesData.push({ value: measureShape.values[categoryIdx], metadata: measureShape });\r\n                    }\r\n                    if (measureImage && measureImage.values && measureImage.values.length > 0) {\r\n                        seriesData.push({ value: measureImage.values[categoryIdx], metadata: measureImage });\r\n                    }\r\n                    if (measureRotation && measureRotation.values && measureRotation.values.length > 0) {\r\n                        seriesData.push({ value: measureRotation.values[categoryIdx], metadata: measureRotation });\r\n                    }\r\n\r\n                    if (measureBackdrop && measureBackdrop.values && measureBackdrop.values.length > 0) {\r\n                        seriesData.push({ value: measureBackdrop.values[categoryIdx], metadata: measureBackdrop });\r\n                    }\r\n                    if (measureXStart && measureXStart.values && measureXStart.values.length > 0) {\r\n                        seriesData.push({ value: measureXStart.values[categoryIdx], metadata: measureXStart });\r\n                    }\r\n                    if (measureXEnd && measureXEnd.values && measureXEnd.values.length > 0) {\r\n                        seriesData.push({ value: measureXEnd.values[categoryIdx], metadata: measureXEnd });\r\n                    }\r\n                    if (measureYStart && measureYStart.values && measureYStart.values.length > 0) {\r\n                        seriesData.push({ value: measureYStart.values[categoryIdx], metadata: measureYStart });\r\n                    }\r\n                    if (measureYEnd && measureYEnd.values && measureYEnd.values.length > 0) {\r\n                        seriesData.push({ value: measureYEnd.values[categoryIdx], metadata: measureYEnd });\r\n                    }\r\n\r\n                    let tooltipInfo: TooltipDataItem[] = TooltipBuilder.createTooltipInfo(formatStringProp, null, categoryValue, null, categories, seriesData);\r\n\r\n                    let dataPoint: EnhancedScatterChartDataPoint = {\r\n                        x: xVal,\r\n                        y: yVal,\r\n                        size: size,\r\n                        radius: { sizeMeasure: measureSize, index: categoryIdx },\r\n                        fill: color,\r\n                        formattedCategory: this.createLazyFormattedCategory(categoryFormatter, categoryValue),\r\n                        selected: false,\r\n                        identity: identity,\r\n                        tooltipInfo: tooltipInfo,\r\n                        labelFill: labelSettings.labelColor,\r\n                        labelFontSize: labelSettings.fontSize,\r\n                        colorFill: colorFill,\r\n                        shapeSymbolType: shapeSymbolType,\r\n                        svgurl: image,\r\n                        rotation: rotation,\r\n                        backdrop: backdrop,\r\n                        xStart: xStart,\r\n                        xEnd: xEnd,\r\n                        yStart: yStart,\r\n                        yEnd: yEnd\r\n                    };\r\n\r\n                    dataPoints.push(dataPoint);\r\n                }\r\n            }\r\n            return dataPoints;\r\n        }\r\n\r\n        public setData(dataViews: DataView[]) {\r\n            this.data = {\r\n                xCol: undefined,\r\n                yCol: undefined,\r\n                dataPoints: [],\r\n                legendData: { dataPoints: [] },\r\n                axesLabels: { x: '', y: '' },\r\n                selectedIds: [],\r\n                sizeRange: [],\r\n                dataLabelsSettings: dataLabelUtils.getDefaultPointLabelSettings(),\r\n                defaultDataPointColor: null,\r\n                hasDynamicSeries: false,\r\n                useShape: true,\r\n                useCustomColor: false,\r\n            };\r\n\r\n            if (dataViews.length > 0) {\r\n                let dataView = dataViews[0];\r\n\r\n                if (dataView) {\r\n                    this.categoryAxisProperties = this.getCategoryAxisProperties(dataView.metadata, true);\r\n                    this.valueAxisProperties = this.getValueAxisProperties(dataView.metadata, true);\r\n                    this.dataView = dataView;\r\n\r\n                    if (dataView.categorical && dataView.categorical.values) {\r\n                        this.data = EnhancedScatterChart.converter(dataView, this.viewport, this.colors, this.interactivityService, this.categoryAxisProperties, this.valueAxisProperties);\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n\r\n        public update(options: VisualUpdateOptions) {\r\n\r\n            debug.assertValue(options, 'options');\r\n\r\n            let dataViews = this.dataViews = options.dataViews;\r\n            this.viewport = _.clone(options.viewport);\r\n\r\n            if (!dataViews) return;\r\n\r\n            if (dataViews && dataViews.length > 0) {\r\n                let warnings = getInvalidValueWarnings(\r\n                    dataViews,\r\n                    false /*supportsNaN*/,\r\n                    false /*supportsNegativeInfinity*/,\r\n                    false /*supportsPositiveInfinity*/);\r\n\r\n                if (warnings && warnings.length > 0)\r\n                    this.hostServices.setWarnings(warnings);\r\n\r\n                this.populateObjectProperties(dataViews);\r\n            }\r\n\r\n            this.setData(dataViews);\r\n            \r\n            // Note: interactive legend shouldn't be rendered explicitly here\r\n            // The interactive legend is being rendered in the render method of ICartesianVisual\r\n            if (!(this.options.interactivity && this.options.interactivity.isInteractiveLegend)) {\r\n                this.renderLegend();\r\n            }\r\n\r\n            this.render(options.suppressAnimations);\r\n\r\n        }\r\n\r\n        private populateObjectProperties(dataViews: DataView[]) {\r\n            if (dataViews && dataViews.length > 0) {\r\n                let dataViewMetadata = dataViews[0].metadata;\r\n\r\n                if (dataViewMetadata) {\r\n                    this.legendObjectProperties = DataViewObjects.getObject(dataViewMetadata.objects, 'legend', {});\r\n                }\r\n                else {\r\n                    this.legendObjectProperties = {};\r\n                }\r\n                this.categoryAxisProperties = this.getCategoryAxisProperties(dataViewMetadata);\r\n                this.valueAxisProperties = this.getValueAxisProperties(dataViewMetadata);\r\n                let axisPosition = this.valueAxisProperties['position'];\r\n                this.yAxisOrientation = axisPosition ? axisPosition.toString() : yAxisPosition.left;\r\n            }\r\n        }\r\n\r\n        private renderLegend(): void {\r\n            let legendData: LegendData = { title: \"\", dataPoints: [] };\r\n            let legend: ILegend = this.legend;\r\n\r\n            this.layerLegendData = this.data.legendData;\r\n            if (this.layerLegendData) {\r\n                legendData.title = this.layerLegendData.title || \"\";\r\n                legendData.dataPoints = legendData.dataPoints.concat(this.layerLegendData.dataPoints || []);\r\n                legendData.fontSize = this.legendLabelFontSize ? this.legendLabelFontSize : EnhancedScatterChart.LegendLabelFontSizeDefault;\r\n                if (this.layerLegendData.grouped) {\r\n                    legendData.grouped = true;\r\n                }\r\n            }\r\n\r\n            let legendProperties = this.legendObjectProperties;\r\n\r\n            if (legendProperties) {\r\n                LegendData.update(legendData, legendProperties);\r\n                let position = <string>legendProperties[legendProps.position];\r\n\r\n                if (position)\r\n                    legend.changeOrientation(LegendPosition[position]);\r\n            }\r\n            else {\r\n                legend.changeOrientation(LegendPosition.Top);\r\n            }\r\n\r\n            if ((legendData.dataPoints.length === 1 && !legendData.grouped) || this.hideLegends()) {\r\n                legendData.dataPoints = [];\r\n            }\r\n\r\n            let viewport = this.viewport;\r\n            legend.drawLegend(legendData, { height: viewport.height, width: viewport.width });\r\n            Legend.positionChartArea(this.svg, legend);\r\n        }\r\n        private hideLegends(): boolean {\r\n            if (this.cartesianSmallViewPortProperties) {\r\n                if (this.cartesianSmallViewPortProperties.hideLegendOnSmallViewPort && (this.viewport.height < this.cartesianSmallViewPortProperties.MinHeightLegendVisible)) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n\r\n        private shouldRenderAxis(axisProperties: IAxisProperties, propertyName: string = \"show\"): boolean {\r\n            if (!axisProperties) {\r\n                return false;\r\n            }\r\n            else if (axisProperties.isCategoryAxis && (!this.categoryAxisProperties || this.categoryAxisProperties[propertyName] == null || this.categoryAxisProperties[propertyName])) {\r\n                return axisProperties.values && axisProperties.values.length > 0;\r\n            }\r\n            else if (!axisProperties.isCategoryAxis && (!this.valueAxisProperties || this.valueAxisProperties[propertyName] == null || this.valueAxisProperties[propertyName])) {\r\n                return axisProperties.values && axisProperties.values.length > 0;\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        private getMaxMarginFactor(): number {\r\n            return this.options.style.maxMarginFactor || 0.25;\r\n        }\r\n\r\n        private adjustViewportbyBackdrop(): void {\r\n            let img = new Image();\r\n            let that = this;\r\n            img.src = this.data.backdrop.url;\r\n            img.onload = function () {\r\n                if (that.oldBackdrop !== this.src) {\r\n                    that.render(true);\r\n                    that.oldBackdrop = this.src;\r\n                }\r\n            };\r\n\r\n            if (img.width > 0 && img.height > 0) {\r\n                if (img.width * this.viewportIn.height < this.viewportIn.width * img.height) {\r\n                    let deltaWidth = this.viewportIn.width - this.viewportIn.height * img.width / img.height;\r\n                    this.viewport = { width: this.viewport.width - deltaWidth, height: this.viewport.height };\r\n                } else {\r\n                    let deltaHeight = this.viewportIn.height - this.viewportIn.width * img.height / img.width;\r\n                    this.viewport = { width: this.viewport.width, height: this.viewport.height - deltaHeight };\r\n                }\r\n            }\r\n        }\r\n\r\n        public render(suppressAnimations: boolean): void {\r\n            this.viewport.height -= this.legendViewport.height;\r\n            this.viewport.width -= this.legendViewport.width;\r\n\r\n            if (this.viewportIn.width === 0 || this.viewportIn.height === 0) {\r\n                return;\r\n            }\r\n\r\n            let maxMarginFactor = this.getMaxMarginFactor();\r\n            this.leftRightMarginLimit = this.viewport.width * maxMarginFactor;\r\n            let bottomMarginLimit = this.bottomMarginLimit = Math.max(25, Math.ceil(this.viewport.height * maxMarginFactor));\r\n\r\n            // reset defaults\r\n            this.margin.top = 8;\r\n            this.margin.bottom = bottomMarginLimit;\r\n            this.margin.right = 0;\r\n\r\n            this.calculateAxes(this.categoryAxisProperties, this.valueAxisProperties, this.textProperties, true);\r\n\r\n            this.yAxisIsCategorical = this.yAxisProperties.isCategoryAxis;\r\n            this.hasCategoryAxis = this.yAxisIsCategorical ? this.yAxisProperties && this.yAxisProperties.values.length > 0 : this.xAxisProperties && this.xAxisProperties.values.length > 0;\r\n\r\n            let renderXAxis = this.shouldRenderAxis(this.xAxisProperties);\r\n            let renderY1Axis = this.shouldRenderAxis(this.yAxisProperties);\r\n\r\n            let mainAxisScale;\r\n            this.isXScrollBarVisible = false;\r\n            this.isYScrollBarVisible = false;\r\n            let tickLabelMargins;\r\n            let axisLabels: ChartAxesLabels;\r\n            let chartHasAxisLabels: boolean;\r\n\r\n            let yAxisOrientation = this.yAxisOrientation;\r\n            let showY1OnRight = yAxisOrientation === yAxisPosition.right;\r\n\r\n            this.calculateAxes(this.categoryAxisProperties, this.valueAxisProperties, this.textProperties, true);\r\n\r\n            let doneWithMargins = false,\r\n                maxIterations = 2,\r\n                numIterations = 0;\r\n\r\n            while (!doneWithMargins && numIterations < maxIterations) {\r\n                numIterations++;\r\n                tickLabelMargins = AxisHelper.getTickLabelMargins(\r\n                    { width: this.viewportIn.width, height: this.viewport.height }, this.leftRightMarginLimit,\r\n                    TextMeasurementService.measureSvgTextWidth, TextMeasurementService.measureSvgTextHeight, { x: this.xAxisProperties, y1: this.yAxisProperties },\r\n                    this.bottomMarginLimit, this.textProperties,\r\n                    this.isXScrollBarVisible || this.isYScrollBarVisible, showY1OnRight,\r\n                    renderXAxis, renderY1Axis, false);\r\n\r\n                // We look at the y axes as main and second sides, if the y axis orientation is right so the main side represents the right side\r\n                let maxMainYaxisSide = showY1OnRight ? tickLabelMargins.yRight : tickLabelMargins.yLeft,\r\n                    maxSecondYaxisSide = showY1OnRight ? tickLabelMargins.yLeft : tickLabelMargins.yRight,\r\n                    xMax = tickLabelMargins.xMax;\r\n\r\n                maxMainYaxisSide += 10;\r\n                maxSecondYaxisSide += 10;\r\n                xMax += 12;\r\n                if (showY1OnRight && renderY1Axis) {\r\n                    maxSecondYaxisSide += 20;\r\n                }\r\n\r\n                if (!showY1OnRight && renderY1Axis) {\r\n                    maxMainYaxisSide += 20;\r\n                }\r\n\r\n                if (this.hideAxisLabels()) {\r\n                    this.xAxisProperties.axisLabel = null;\r\n                    this.yAxisProperties.axisLabel = null;\r\n                }\r\n\r\n                this.addUnitTypeToAxisLabel(this.xAxisProperties, this.yAxisProperties);\r\n\r\n                axisLabels = { x: this.xAxisProperties.axisLabel, y: this.yAxisProperties.axisLabel, y2: null };\r\n                chartHasAxisLabels = (axisLabels.x != null) || (axisLabels.y != null || axisLabels.y2 != null);\r\n\r\n                if (axisLabels.x != null)\r\n                    xMax += 18;\r\n\r\n                if (axisLabels.y != null)\r\n                    maxMainYaxisSide += 20;\r\n\r\n                if (axisLabels.y2 != null)\r\n                    maxSecondYaxisSide += 20;\r\n\r\n                this.margin.left = showY1OnRight ? maxSecondYaxisSide : maxMainYaxisSide;\r\n                this.margin.right = showY1OnRight ? maxMainYaxisSide : maxSecondYaxisSide;\r\n                this.margin.bottom = xMax;\r\n\r\n                // re-calculate the axes with the new margins\r\n                let previousTickCountY1 = this.yAxisProperties.values.length;\r\n\r\n                this.calculateAxes(this.categoryAxisProperties, this.valueAxisProperties, this.textProperties, true);\r\n\r\n                // the minor padding adjustments could have affected the chosen tick values, which would then need to calculate margins again\r\n                // e.g. [0,2,4,6,8] vs. [0,5,10] the 10 is wider and needs more margin.\r\n                if (this.yAxisProperties.values.length === previousTickCountY1)\r\n                    doneWithMargins = true;\r\n            }\r\n            // we have to do the above process again since changes are made to viewport.\r\n            \r\n            if (this.data.backdrop && this.data.backdrop.show && (this.data.backdrop.url !== undefined)) {\r\n                this.adjustViewportbyBackdrop();\r\n\r\n                doneWithMargins = false;\r\n                maxIterations = 2;\r\n                numIterations = 0;\r\n\r\n                while (!doneWithMargins && numIterations < maxIterations) {\r\n                    numIterations++;\r\n                    tickLabelMargins = AxisHelper.getTickLabelMargins(\r\n                        { width: this.viewportIn.width, height: this.viewport.height }, this.leftRightMarginLimit,\r\n                        TextMeasurementService.measureSvgTextWidth, TextMeasurementService.measureSvgTextHeight, { x: this.xAxisProperties, y1: this.yAxisProperties },\r\n                        this.bottomMarginLimit, this.textProperties,\r\n                        this.isXScrollBarVisible || this.isYScrollBarVisible, showY1OnRight,\r\n                        renderXAxis, renderY1Axis, false);\r\n\r\n                    // We look at the y axes as main and second sides, if the y axis orientation is right so the main side represents the right side\r\n                    let maxMainYaxisSide = showY1OnRight ? tickLabelMargins.yRight : tickLabelMargins.yLeft,\r\n                        maxSecondYaxisSide = showY1OnRight ? tickLabelMargins.yLeft : tickLabelMargins.yRight,\r\n                        xMax = tickLabelMargins.xMax;\r\n\r\n                    maxMainYaxisSide += 10;\r\n                    if (showY1OnRight && renderY1Axis)\r\n                        maxSecondYaxisSide += 15;\r\n                    xMax += 12;\r\n\r\n                    if (this.hideAxisLabels()) {\r\n                        this.xAxisProperties.axisLabel = null;\r\n                        this.yAxisProperties.axisLabel = null;\r\n                    }\r\n\r\n                    this.addUnitTypeToAxisLabel(this.xAxisProperties, this.yAxisProperties);\r\n\r\n                    axisLabels = { x: this.xAxisProperties.axisLabel, y: this.yAxisProperties.axisLabel, y2: null };\r\n                    chartHasAxisLabels = (axisLabels.x != null) || (axisLabels.y != null || axisLabels.y2 != null);\r\n\r\n                    if (axisLabels.x != null)\r\n                        xMax += 18;\r\n\r\n                    if (axisLabels.y != null)\r\n                        maxMainYaxisSide += 20;\r\n\r\n                    if (axisLabels.y2 != null)\r\n                        maxSecondYaxisSide += 20;\r\n\r\n                    this.margin.left = showY1OnRight ? maxSecondYaxisSide : maxMainYaxisSide;\r\n                    this.margin.right = showY1OnRight ? maxMainYaxisSide : maxSecondYaxisSide;\r\n                    this.margin.bottom = xMax;\r\n\r\n                    // re-calculate the axes with the new margins\r\n                    let previousTickCountY1 = this.yAxisProperties.values.length;\r\n\r\n                    this.calculateAxes(this.categoryAxisProperties, this.valueAxisProperties, this.textProperties, true);\r\n\r\n                    // the minor padding adjustments could have affected the chosen tick values, which would then need to calculate margins again\r\n                    // e.g. [0,2,4,6,8] vs. [0,5,10] the 10 is wider and needs more margin.\r\n                    if (this.yAxisProperties.values.length === previousTickCountY1)\r\n                        doneWithMargins = true;\r\n                }\r\n            }\r\n\r\n            this.renderChart(mainAxisScale, this.xAxisProperties, this.yAxisProperties, tickLabelMargins, chartHasAxisLabels, axisLabels, suppressAnimations);\r\n\r\n            this.updateAxis();\r\n\r\n            if (!this.data)\r\n                return;\r\n\r\n            let data = this.data;\r\n            let dataPoints = this.data.dataPoints;\r\n\r\n            let hasSelection = this.interactivityService && this.interactivityService.hasSelection();\r\n\r\n            this.mainGraphicsContext.attr('width', this.viewportIn.width)\r\n                .attr('height', this.viewportIn.height);\r\n\r\n            let sortedData = dataPoints.sort(function (a, b) {\r\n                return b.radius.sizeMeasure ? (b.radius.sizeMeasure.values[b.radius.index] - a.radius.sizeMeasure.values[a.radius.index]) : 0;\r\n            });\r\n\r\n            let duration = AnimatorCommon.GetAnimationDuration(this.animator, suppressAnimations);\r\n            let scatterMarkers = this.drawScatterMarkers(sortedData, hasSelection, data.sizeRange, duration);\r\n\r\n            let dataLabelsSettings = this.data.dataLabelsSettings;\r\n            if (dataLabelsSettings.show) {\r\n                let layout = this.getEnhanchedScatterChartLabelLayout(dataLabelsSettings, this.viewportIn, data.sizeRange);\r\n                let clonedDataPoints: Array<EnhancedScatterChartDataPoint> = this.cloneDataPoints(dataPoints);\r\n                //fix bug 3863: drawDefaultLabelsForDataPointChart add to datapoints[xxx].size = object , which causes when\r\n                //category labels is on and Fill Points option off to fill the points when mouse click occures because of default size\r\n                //is set to datapoints.\r\n                dataLabelUtils.drawDefaultLabelsForDataPointChart(clonedDataPoints, this.mainGraphicsG, layout, this.viewportIn);\r\n                let offset = dataLabelsSettings.fontSize * EnhancedScatterChart.DataLabelsOffset;\r\n                this.mainGraphicsG.select('.labels').attr('transform', SVGUtil.translate(offset, 0));\r\n            }\r\n            else {\r\n                dataLabelUtils.cleanDataLabels(this.mainGraphicsG);\r\n            }\r\n            let behaviorOptions: ScatterBehaviorOptions = undefined;\r\n            if (this.interactivityService) {\r\n                behaviorOptions = {\r\n                    dataPointsSelection: scatterMarkers,\r\n                    data: this.data,\r\n                    plotContext: this.mainGraphicsContext,\r\n                };\r\n            }\r\n\r\n            TooltipManager.addTooltip(scatterMarkers, (tooltipEvent: TooltipEvent) => tooltipEvent.data.tooltipInfo);\r\n\r\n            SVGUtil.flushAllD3TransitionsIfNeeded(this.options);\r\n\r\n            if (this.behavior) {\r\n                let layerBehaviorOptions: any[] = [];\r\n                layerBehaviorOptions.push(behaviorOptions);\r\n\r\n                if (this.interactivityService) {\r\n                    let cbehaviorOptions: CartesianBehaviorOptions = {\r\n                        layerOptions: layerBehaviorOptions,\r\n                        clearCatcher: this.clearCatcher,\r\n                    };\r\n                    this.interactivityService.bind(dataPoints, this.behavior, cbehaviorOptions);\r\n                }\r\n            }\r\n        }\r\n\r\n        private cloneDataPoints(dataPoints: Array<EnhancedScatterChartDataPoint>): Array<EnhancedScatterChartDataPoint> {\r\n            let clonedDataPoints: Array<EnhancedScatterChartDataPoint> = new Array<EnhancedScatterChartDataPoint>();\r\n\r\n            for (let dataPoint of dataPoints) {\r\n                let clonedDataPoint: EnhancedScatterChartDataPoint = _.clone(dataPoint);\r\n                clonedDataPoints.push(clonedDataPoint);\r\n            }\r\n\r\n            return clonedDataPoints;\r\n        }\r\n\r\n        private darkenZeroLine(g: D3.Selection): void {\r\n            let zeroTick = g.selectAll('g.tick').filter((data) => data === 0).node();\r\n            if (zeroTick) {\r\n                d3.select(zeroTick).select('line').classed('zero-line', true);\r\n            }\r\n        }\r\n\r\n        private getCategoryAxisFill(): Fill {\r\n            if (this.dataView && this.dataView.metadata.objects) {\r\n                let label = this.dataView.metadata.objects['categoryAxis'];\r\n                if (label) {\r\n                    return <Fill>label['axisColor'];\r\n                }\r\n            }\r\n            return { solid: { color: '#333' } };\r\n        }\r\n\r\n        private getEnhanchedScatterChartLabelLayout(labelSettings: PointDataLabelsSettings,\r\n            viewport: IViewport,\r\n            sizeRange: NumberRange): ILabelLayout {\r\n\r\n            let xScale = this.xAxisProperties.scale;\r\n            let yScale = this.yAxisProperties.scale;\r\n            let fontSizeInPx = jsCommon.PixelConverter.fromPoint(labelSettings.fontSize);\r\n            let offset = labelSettings.fontSize * EnhancedScatterChart.DataLabelsOffset;\r\n\r\n            return {\r\n                labelText: function (d: EnhancedScatterChartDataPoint) {\r\n                    return dataLabelUtils.getLabelFormattedText({\r\n                        label: d.formattedCategory.getValue(),\r\n                        fontSize: labelSettings.fontSize,\r\n                        maxWidth: viewport.width,\r\n                    });\r\n                },\r\n                labelLayout: {\r\n                    x: function (d: EnhancedScatterChartDataPoint) { return xScale(d.x) - offset; },\r\n                    y: function (d: EnhancedScatterChartDataPoint) {\r\n                        let margin = visuals.ScatterChart.getBubbleRadius(d.radius, sizeRange, viewport) + dataLabelUtils.labelMargin;\r\n                        return labelSettings.position === 0 /* Above */ ? yScale(d.y) - margin : yScale(d.y) + margin;\r\n                    },\r\n                },\r\n                filter: function (d: EnhancedScatterChartDataPoint) {\r\n                    return (d != null && d.formattedCategory.getValue() != null);\r\n                },\r\n                style: {\r\n                    'fill': function (d: EnhancedScatterChartDataPoint) { return d.labelFill; },\r\n                    'font-size': fontSizeInPx,\r\n                },\r\n            };\r\n        }\r\n\r\n        private getValueAxisFill(): Fill {\r\n            if (this.dataView && this.dataView.metadata.objects) {\r\n                let label = this.dataView.metadata.objects['valueAxis'];\r\n                if (label)\r\n                    return <Fill>label['axisColor'];\r\n            }\r\n\r\n            return { solid: { color: '#333' } };\r\n        }\r\n\r\n        private renderCrossHair() {\r\n            let xScale = <D3.Scale.LinearScale>this.xAxisProperties.scale;\r\n            let yScale = <D3.Scale.LinearScale>this.yAxisProperties.scale;\r\n            let mainGraphicsContext = this.mainGraphicsContext;\r\n            mainGraphicsContext.selectAll(\".crosshairCanvas\").remove();\r\n            if (this.data.crosshair) {\r\n                let canvas = mainGraphicsContext.append(\"g\").attr(\"class\", \"crosshairCanvas\").attr(\"id\", \"crosshairCanvas\");\r\n                let crossHair = canvas.append(\"g\").attr(\"class\", \"crosshair\");\r\n                let hLine = crossHair.append(\"line\").attr(\"id\", \"h_crosshair\") // horizontal cross hair\r\n                    .attr(\"x1\", 0)\r\n                    .attr(\"y1\", 0)\r\n                    .attr(\"x2\", 0)\r\n                    .attr(\"y2\", 0)\r\n                    .style(\"stroke\", \"gray\")\r\n                    .style(\"stroke-width\", \"1px\")\r\n                    .style(\"stroke-dasharray\", \"5,5\")\r\n                    .style(\"display\", \"none\");\r\n\r\n                let vLine = crossHair.append(\"line\").attr(\"id\", \"v_crosshair\") // vertical cross hair\r\n                    .attr(\"x1\", 0)\r\n                    .attr(\"y1\", 0)\r\n                    .attr(\"x2\", 0)\r\n                    .attr(\"y2\", 0)\r\n                    .style(\"stroke\", \"gray\")\r\n                    .style(\"stroke-width\", \"1px\")\r\n                    .style(\"stroke-dasharray\", \"5,5\")\r\n                    .style(\"display\", \"none\");\r\n\r\n                let text = crossHair.append(\"text\").attr(\"id\", \"crosshair_text\") // text label for cross hair\r\n                    .style(\"font-size\", \"10px\")\r\n                    .style(\"stroke\", \"gray\")\r\n                    .style(\"stroke-width\", \"0.5px\");\r\n\r\n                let addCrossHair = (xCoord, yCoord) => {\r\n                    \r\n                    // Update horizontal cross hair\r\n                    hLine.attr(\"x1\", 0)\r\n                        .attr(\"y1\", yCoord)\r\n                        .attr(\"x2\", this.viewportIn.width)\r\n                        .attr(\"y2\", yCoord)\r\n                        .style(\"display\", \"block\");\r\n                    \r\n                    // Update vertical cross hair\r\n                    vLine.attr(\"x1\", xCoord)\r\n                        .attr(\"y1\", 0)\r\n                        .attr(\"x2\", xCoord)\r\n                        .attr(\"y2\", this.viewportIn.height)\r\n                        .style(\"display\", \"block\");\r\n\r\n                    // Update text label\r\n                    text.attr(\"transform\", \"translate(\" + (xCoord + 5) + \",\" + (yCoord - 5) + \")\")\r\n                        .text(\"(\" + Math.round(xScale.invert(xCoord) * 100) / 100 + \" , \" + Math.round(yScale.invert(yCoord) * 100) / 100 + \")\");\r\n                };\r\n\r\n                this.axisGraphicsContextScrollable.on(\"mousemove\", function () {\r\n                    let coordinates = d3.mouse(this);\r\n                    let svgNode = this.viewportElement;\r\n                    let scaledRect = svgNode.getBoundingClientRect();\r\n                    let domRect = svgNode.getBBox();\r\n                    let ratioX = scaledRect.width / domRect.width;\r\n                    let ratioY = scaledRect.height / domRect.height;\r\n                    if (domRect.width > 0 && !Double.equalWithPrecision(ratioX, 1.0, 0.00001)) {\r\n                        coordinates[0] = coordinates[0] / ratioX;\r\n                    }\r\n                    if (domRect.height > 0 && !Double.equalWithPrecision(ratioY, 1.0, 0.00001)) {\r\n                        coordinates[1] = coordinates[1] / ratioY;\r\n                    }\r\n                    addCrossHair(coordinates[0], coordinates[1]);\r\n                })\r\n                    .on(\"mouseover\", function () {\r\n                        d3.selectAll(\".crosshair\").style(\"display\", \"block\");\r\n                    })\r\n                    .on(\"mouseout\", function () {\r\n                        d3.selectAll(\".crosshair\").style(\"display\", \"none\");\r\n                    });\r\n            }\r\n        }\r\n\r\n        private renderBackground() {\r\n            if (this.data.backdrop && this.data.backdrop.show && (this.data.backdrop.url !== undefined)) {\r\n                this.backgroundGraphicsContext\r\n                    .attr(\"xlink:href\", this.data.backdrop.url)\r\n                    .attr('x', 0)\r\n                    .attr('y', 0)\r\n                    .attr('width', this.viewportIn.width)\r\n                    .attr('height', this.viewportIn.height);\r\n            } else {\r\n                this.backgroundGraphicsContext\r\n                    .attr('width', 0)\r\n                    .attr('height', 0);\r\n            }\r\n        }\r\n\r\n        private renderChart(\r\n            mainAxisScale: any,\r\n            xAxis: IAxisProperties,\r\n            yAxis: IAxisProperties,\r\n            tickLabelMargins: any,\r\n            chartHasAxisLabels: boolean,\r\n            axisLabels: ChartAxesLabels,\r\n            suppressAnimations: boolean,\r\n            scrollScale?: any,\r\n            extent?: number[]) {\r\n\r\n            let bottomMarginLimit = this.bottomMarginLimit;\r\n            let leftRightMarginLimit = this.leftRightMarginLimit;\r\n            let duration = AnimatorCommon.GetAnimationDuration(this.animator, suppressAnimations);\r\n\r\n            this.renderBackground();\r\n            \r\n            //hide show x-axis here\r\n            if (this.shouldRenderAxis(xAxis)) {\r\n                xAxis.axis.orient(\"bottom\");\r\n                if (!xAxis.willLabelsFit)\r\n                    xAxis.axis.tickPadding(5);\r\n\r\n                let xAxisGraphicsElement = this.xAxisGraphicsContext;\r\n                if (duration) {\r\n                    xAxisGraphicsElement\r\n                        .transition()\r\n                        .duration(duration)\r\n                        .call(xAxis.axis)\r\n                        .call(this.darkenZeroLine);\r\n                }\r\n                else {\r\n                    xAxisGraphicsElement\r\n                        .call(xAxis.axis)\r\n                        .call(this.darkenZeroLine);\r\n                }\r\n                let xZeroTick = xAxisGraphicsElement.selectAll('g.tick').filter((data) => data === 0);\r\n                if (xZeroTick) {\r\n                    let xZeroColor = this.getValueAxisFill();\r\n                    if (xZeroColor)\r\n                        xZeroTick.selectAll('line').style({ 'stroke': xZeroColor.solid.color });\r\n                }\r\n\r\n                let xAxisTextNodes = xAxisGraphicsElement.selectAll('text');\r\n                if (xAxis.willLabelsWordBreak) {\r\n                    xAxisTextNodes\r\n                        .call(AxisHelper.LabelLayoutStrategy.wordBreak, xAxis, bottomMarginLimit);\r\n                } else {\r\n                    xAxisTextNodes\r\n                        .call(AxisHelper.LabelLayoutStrategy.rotate,\r\n                        bottomMarginLimit,\r\n                        TextMeasurementService.getTailoredTextOrDefault,\r\n                        CartesianChart.AxisTextProperties,\r\n                        !xAxis.willLabelsFit,\r\n                        bottomMarginLimit === tickLabelMargins.xMax,\r\n                        xAxis,\r\n                        this.margin,\r\n                        this.isXScrollBarVisible || this.isYScrollBarVisible);\r\n                }\r\n            }\r\n            else {\r\n                this.xAxisGraphicsContext.selectAll('*').remove();\r\n            }\r\n\r\n            if (this.shouldRenderAxis(yAxis)) {\r\n                let yAxisOrientation = this.yAxisOrientation;\r\n\r\n                yAxis.axis\r\n                    .tickSize(-this.viewportIn.width)\r\n                    .tickPadding(10)\r\n                    .orient(yAxisOrientation.toLowerCase());\r\n\r\n                let y1AxisGraphicsElement = this.y1AxisGraphicsContext;\r\n                if (duration) {\r\n                    y1AxisGraphicsElement\r\n                        .transition()\r\n                        .duration(duration)\r\n                        .call(yAxis.axis)\r\n                        .call(this.darkenZeroLine);\r\n                }\r\n                else {\r\n                    y1AxisGraphicsElement\r\n                        .call(yAxis.axis)\r\n                        .call(this.darkenZeroLine);\r\n                }\r\n\r\n                let yZeroTick = y1AxisGraphicsElement.selectAll('g.tick').filter((data) => data === 0);\r\n                if (yZeroTick) {\r\n                    let yZeroColor = this.getCategoryAxisFill();\r\n                    if (yZeroColor) {\r\n                        yZeroTick.selectAll('line').style({ 'stroke': yZeroColor.solid.color });\r\n                    }\r\n                }\r\n\r\n                if (tickLabelMargins.yLeft >= leftRightMarginLimit) {\r\n                    y1AxisGraphicsElement.selectAll('text')\r\n                        .call(AxisHelper.LabelLayoutStrategy.clip,\r\n                        // Can't use padding space to render text, so subtract that from available space for ellipses calculations\r\n                        leftRightMarginLimit - 10,\r\n                        TextMeasurementService.svgEllipsis);\r\n                }\r\n\r\n                // TODO: clip (svgEllipsis) the Y2 labels\r\n            }\r\n            else {\r\n                this.y1AxisGraphicsContext.selectAll('*').remove();\r\n            }\r\n            // Axis labels\r\n            //TODO: Add label for second Y axis for combo chart\r\n            if (chartHasAxisLabels) {\r\n                let hideXAxisTitle = !this.shouldRenderAxis(xAxis, \"showAxisTitle\");\r\n                let hideYAxisTitle = !this.shouldRenderAxis(yAxis, \"showAxisTitle\");\r\n                let hideY2AxisTitle = this.valueAxisProperties && this.valueAxisProperties[\"secShowAxisTitle\"] != null && this.valueAxisProperties[\"secShowAxisTitle\"] === false;\r\n\r\n                this.renderAxesLabels(axisLabels, this.legendViewport.height, hideXAxisTitle, hideYAxisTitle, hideY2AxisTitle);\r\n            }\r\n            else {\r\n                this.axisGraphicsContext.selectAll('.xAxisLabel').remove();\r\n                this.axisGraphicsContext.selectAll('.yAxisLabel').remove();\r\n            }\r\n            this.renderCrossHair();\r\n        }\r\n\r\n        private renderAxesLabels(axisLabels: ChartAxesLabels, legendMargin: number, hideXAxisTitle: boolean, hideYAxisTitle: boolean, hideY2AxisTitle: boolean): void {\r\n            this.axisGraphicsContext.selectAll('.xAxisLabel').remove();\r\n            this.axisGraphicsContext.selectAll('.yAxisLabel').remove();\r\n\r\n            let margin = this.margin;\r\n            let width = this.viewportIn.width;\r\n            let height = this.viewport.height;\r\n            let fontSize = EnhancedScatterChart.AxisFontSize;\r\n            let yAxisOrientation = this.yAxisOrientation;\r\n            let showY1OnRight = yAxisOrientation === yAxisPosition.right;\r\n\r\n            if (!hideXAxisTitle) {\r\n                let xAxisLabel = this.axisGraphicsContext.append(\"text\")\r\n                    .style(\"text-anchor\", \"middle\")\r\n                    .text(axisLabels.x)\r\n                    .call((text: D3.Selection) => {\r\n                        text.each(function () {\r\n                            let text = d3.select(this);\r\n                            text.attr({\r\n                                \"class\": \"xAxisLabel\",\r\n                                \"transform\": SVGUtil.translate(width / 2, height - fontSize - 2)\r\n                            });\r\n                        });\r\n                    });\r\n\r\n                xAxisLabel.call(AxisHelper.LabelLayoutStrategy.clip,\r\n                    width,\r\n                    TextMeasurementService.svgEllipsis);\r\n            }\r\n\r\n            if (!hideYAxisTitle) {\r\n                let yAxisLabel = this.axisGraphicsContext.append(\"text\")\r\n                    .style(\"text-anchor\", \"middle\")\r\n                    .text(axisLabels.y)\r\n                    .call((text: D3.Selection) => {\r\n                        text.each(function () {\r\n                            let text = d3.select(this);\r\n                            text.attr({\r\n                                \"class\": \"yAxisLabel\",\r\n                                \"transform\": \"rotate(-90)\",\r\n                                \"y\": showY1OnRight ? width + margin.right - fontSize : -margin.left,\r\n                                \"x\": -((height - margin.top - legendMargin) / 2),\r\n                                \"dy\": \"1em\"\r\n                            });\r\n                        });\r\n                    });\r\n\r\n                yAxisLabel.call(AxisHelper.LabelLayoutStrategy.clip,\r\n                    height - (margin.bottom + margin.top),\r\n                    TextMeasurementService.svgEllipsis);\r\n            }\r\n\r\n            if (!hideY2AxisTitle && axisLabels.y2) {\r\n                let y2AxisLabel = this.axisGraphicsContext.append(\"text\")\r\n                    .style(\"text-anchor\", \"middle\")\r\n                    .text(axisLabels.y2)\r\n                    .call((text: D3.Selection) => {\r\n                        text.each(function () {\r\n                            let text = d3.select(this);\r\n                            text.attr({\r\n                                \"class\": \"yAxisLabel\",\r\n                                \"transform\": \"rotate(-90)\",\r\n                                \"y\": showY1OnRight ? -margin.left : width + margin.right - fontSize,\r\n                                \"x\": -((height - margin.top - legendMargin) / 2),\r\n                                \"dy\": \"1em\"\r\n                            });\r\n                        });\r\n                    });\r\n\r\n                y2AxisLabel.call(AxisHelper.LabelLayoutStrategy.clip,\r\n                    height - (margin.bottom + margin.top),\r\n                    TextMeasurementService.svgEllipsis);\r\n            }\r\n        }\r\n\r\n        private updateAxis(): void {\r\n            this.adjustMargins();\r\n\r\n            let yAxisOrientation = this.yAxisOrientation;\r\n            let showY1OnRight = yAxisOrientation === yAxisPosition.right;\r\n\r\n            this.xAxisGraphicsContext\r\n                .attr('transform', SVGUtil.translate(0, this.viewportIn.height));\r\n\r\n            this.y1AxisGraphicsContext\r\n                .attr('transform', SVGUtil.translate(showY1OnRight ? this.viewportIn.width : 0, 0));\r\n\r\n            this.svg.attr({\r\n                'width': this.viewport.width,\r\n                'height': this.viewport.height\r\n            });\r\n\r\n            this.svgScrollable.attr({\r\n                'width': this.viewport.width,\r\n                'height': this.viewport.height\r\n            });\r\n\r\n            this.svgScrollable.attr({\r\n                'x': 0\r\n            });\r\n\r\n            let left: number = this.margin.left;\r\n            let top: number = this.margin.top;\r\n\r\n            this.axisGraphicsContext.attr('transform', SVGUtil.translate(left, top));\r\n            this.axisGraphicsContextScrollable.attr('transform', SVGUtil.translate(left, top));\r\n            this.clearCatcher.attr('transform', SVGUtil.translate(-left, -top));\r\n\r\n            if (this.isXScrollBarVisible) {\r\n                this.svgScrollable.attr({\r\n                    'x': left\r\n                });\r\n                this.axisGraphicsContextScrollable.attr('transform', SVGUtil.translate(0, top));\r\n                this.svgScrollable.attr('width', this.viewportIn.width);\r\n                this.svg.attr('width', this.viewport.width)\r\n                    .attr('height', this.viewport.height + this.ScrollBarWidth);\r\n            }\r\n            else if (this.isYScrollBarVisible) {\r\n                this.svgScrollable.attr('height', this.viewportIn.height + top);\r\n                this.svg.attr('width', this.viewport.width + this.ScrollBarWidth)\r\n                    .attr('height', this.viewport.height);\r\n            }\r\n        }\r\n\r\n        private getUnitType(xAxis: IAxisProperties) {\r\n            if (xAxis.formatter &&\r\n                xAxis.formatter.displayUnit &&\r\n                xAxis.formatter.displayUnit.value > 1)\r\n                return xAxis.formatter.displayUnit.title;\r\n            return null;\r\n        }\r\n\r\n        private addUnitTypeToAxisLabel(xAxis: IAxisProperties, yAxis: IAxisProperties): void {\r\n            let unitType = this.getUnitType(xAxis);\r\n            if (xAxis.isCategoryAxis) {\r\n                this.categoryAxisHasUnitType = unitType !== null;\r\n            }\r\n            else {\r\n                this.valueAxisHasUnitType = unitType !== null;\r\n            }\r\n\r\n            if (xAxis.axisLabel && unitType) {\r\n                if (xAxis.isCategoryAxis) {\r\n                    xAxis.axisLabel = AxisHelper.createAxisLabel(this.categoryAxisProperties, xAxis.axisLabel, unitType);\r\n                }\r\n                else {\r\n                    xAxis.axisLabel = AxisHelper.createAxisLabel(this.valueAxisProperties, xAxis.axisLabel, unitType);\r\n                }\r\n            }\r\n\r\n            unitType = this.getUnitType(yAxis);\r\n\r\n            if (!yAxis.isCategoryAxis) {\r\n                this.valueAxisHasUnitType = unitType !== null;\r\n            }\r\n            else {\r\n                this.categoryAxisHasUnitType = unitType !== null;\r\n            }\r\n\r\n            if (yAxis.axisLabel && unitType) {\r\n                if (!yAxis.isCategoryAxis) {\r\n                    yAxis.axisLabel = AxisHelper.createAxisLabel(this.valueAxisProperties, yAxis.axisLabel, unitType);\r\n                }\r\n                else {\r\n                    yAxis.axisLabel = AxisHelper.createAxisLabel(this.categoryAxisProperties, yAxis.axisLabel, unitType);\r\n                }\r\n            }\r\n        }\r\n\r\n        private hideAxisLabels(): boolean {\r\n            if (this.cartesianSmallViewPortProperties) {\r\n                if (this.cartesianSmallViewPortProperties.hideAxesOnSmallViewPort\r\n                    && ((this.viewport.height + this.legendViewport.height) < this.cartesianSmallViewPortProperties.MinHeightAxesVisible)\r\n                    && !this.options.interactivity.isInteractiveLegend) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n\r\n        private drawScatterMarkers(scatterData: EnhancedScatterChartDataPoint[], hasSelection: boolean, sizeRange: NumberRange, duration: number) {\r\n            let xScale = this.xAxisProperties.scale;\r\n            let yScale = this.yAxisProperties.scale;\r\n            let shouldEnableFill = (!sizeRange || !sizeRange.min) && this.data.fillPoint;\r\n\r\n            let markers;\r\n            let useCustomColor = this.data.useCustomColor;\r\n            if (this.data.useShape) {\r\n                this.mainGraphicsContext.selectAll(EnhancedScatterChart.ImageClasses.selector).remove();\r\n                markers = this.mainGraphicsContext.classed('ScatterMarkers', true).selectAll(EnhancedScatterChart.DotClasses.selector).data(scatterData, (d: EnhancedScatterChartDataPoint) => d.identity.getKey());\r\n                markers.enter()\r\n                    .append('path')\r\n                    .classed(EnhancedScatterChart.DotClasses.class, true).attr('id', 'markershape');\r\n                markers\r\n                    .style({\r\n                        'stroke-opacity': (d: EnhancedScatterChartDataPoint) => ScatterChart.getBubbleOpacity(d, hasSelection),\r\n                        'stroke-width': '1px',\r\n                        'stroke': (d: EnhancedScatterChartDataPoint) => {\r\n                            let color = useCustomColor ? d.colorFill : d.fill;\r\n                            if (this.data.outline) {\r\n                                return d3.rgb(color).darker();\r\n                            } else {\r\n                                return d3.rgb(color);\r\n                            }\r\n                        },\r\n                        'fill': (d: EnhancedScatterChartDataPoint) => d3.rgb(useCustomColor ? d.colorFill : d.fill),\r\n                        'fill-opacity': (d: EnhancedScatterChartDataPoint) => (d.size != null || shouldEnableFill) ? ScatterChart.getBubbleOpacity(d, hasSelection) : 0,\r\n                    })\r\n                    .attr(\"d\", (d: EnhancedScatterChartDataPoint) => {\r\n                        let r = ScatterChart.getBubbleRadius(d.radius, sizeRange, this.viewport);\r\n                        let area = 4 * r * r;\r\n                        return d.shapeSymbolType(area);\r\n                    })\r\n                    .transition()\r\n                    .duration((d) => {\r\n                        if (this.keyArray.indexOf(d.identity.getKey()) >= 0) {\r\n                            return duration;\r\n                        } else {\r\n                            return 0;\r\n                        }\r\n                    })\r\n                    .attr(\"transform\", function (d) { return \"translate(\" + xScale(d.x) + \",\" + yScale(d.y) + \") rotate(\" + d.rotation + \")\"; });\r\n            } else {\r\n                this.mainGraphicsContext.selectAll(EnhancedScatterChart.DotClasses.selector).remove();\r\n                markers = this.mainGraphicsContext.classed('ScatterMarkers', true).selectAll(EnhancedScatterChart.ImageClasses.selector).data(scatterData, (d: EnhancedScatterChartDataPoint) => d.identity.getKey());\r\n                markers.enter().append(\"svg:image\")\r\n                    .classed(EnhancedScatterChart.ImageClasses.class, true).attr('id', 'markerimage');\r\n                markers\r\n                    .attr(\"xlink:href\", (d) => {\r\n                        if (d.svgurl !== undefined && d.svgurl != null && d.svgurl !== \"\") {\r\n                            return d.svgurl;\r\n                        } else {\r\n                            return this.svgDefaultImage;\r\n                        }\r\n                    })\r\n                    .attr(\"width\", (d) => {\r\n                        return ScatterChart.getBubbleRadius(d.radius, sizeRange, this.viewport) * 2;\r\n                    })\r\n                    .attr(\"height\", (d) => {\r\n                        return ScatterChart.getBubbleRadius(d.radius, sizeRange, this.viewport) * 2;\r\n                    })\r\n                    .transition()\r\n                    .duration((d) => {\r\n                        if (this.keyArray.indexOf(d.identity.getKey()) >= 0) {\r\n                            return duration;\r\n                        } else {\r\n                            return 0;\r\n                        }\r\n                    })\r\n                    .attr(\"transform\", (d) => {\r\n                        let radius = ScatterChart.getBubbleRadius(d.radius, sizeRange, this.viewport);\r\n                        return \"translate(\" + (xScale(d.x) - radius) + \",\" + (yScale(d.y) - radius) + \") rotate(\" + d.rotation + \",\" + radius + \",\" + radius + \")\";\r\n                    });\r\n            }\r\n\r\n            markers.exit().remove();\r\n            this.keyArray = [];\r\n            for (let i = 0; i < scatterData.length; i++) {\r\n                this.keyArray.push(scatterData[i].identity.getKey());\r\n            }\r\n\r\n            return markers;\r\n        }\r\n\r\n        public calculateAxes(\r\n            categoryAxisProperties: DataViewObject,\r\n            valueAxisProperties: DataViewObject,\r\n            textProperties: TextProperties,\r\n            scrollbarVisible: boolean): IAxisProperties[] {\r\n\r\n            let visualOptions: CalculateScaleAndDomainOptions = {\r\n                viewport: this.viewport,\r\n                margin: this.margin,\r\n                forcedXDomain: [categoryAxisProperties ? categoryAxisProperties['start'] : null, categoryAxisProperties ? categoryAxisProperties['end'] : null],\r\n                forceMerge: valueAxisProperties && valueAxisProperties['secShow'] === false,\r\n                showCategoryAxisLabel: false,\r\n                showValueAxisLabel: false,\r\n                categoryAxisScaleType: categoryAxisProperties && categoryAxisProperties['axisScale'] != null ? <string>categoryAxisProperties['axisScale'] : null,\r\n                valueAxisScaleType: valueAxisProperties && valueAxisProperties['axisScale'] != null ? <string>valueAxisProperties['axisScale'] : null,\r\n                valueAxisDisplayUnits: valueAxisProperties && valueAxisProperties['labelDisplayUnits'] != null ? <number>valueAxisProperties['labelDisplayUnits'] : EnhancedScatterChart.LabelDisplayUnitsDefault,\r\n                categoryAxisDisplayUnits: categoryAxisProperties && categoryAxisProperties['labelDisplayUnits'] != null ? <number>categoryAxisProperties['labelDisplayUnits'] : EnhancedScatterChart.LabelDisplayUnitsDefault,\r\n                trimOrdinalDataOnOverflow: false\r\n            };\r\n\r\n            if (valueAxisProperties) {\r\n                visualOptions.forcedYDomain = AxisHelper.applyCustomizedDomain([valueAxisProperties['start'], valueAxisProperties['end']], visualOptions.forcedYDomain);\r\n            }\r\n\r\n            visualOptions.showCategoryAxisLabel = (!!categoryAxisProperties && !!categoryAxisProperties['showAxisTitle']);\r\n\r\n            visualOptions.showValueAxisLabel = true;\r\n\r\n            let width = this.viewport.width - (this.margin.left + this.margin.right);\r\n\r\n            let axes = this.calculateAxesProperties(visualOptions);\r\n            axes[0].willLabelsFit = AxisHelper.LabelLayoutStrategy.willLabelsFit(\r\n                axes[0],\r\n                width,\r\n                TextMeasurementService.measureSvgTextWidth,\r\n                textProperties);\r\n\r\n            // If labels do not fit and we are not scrolling, try word breaking\r\n            axes[0].willLabelsWordBreak = (!axes[0].willLabelsFit && !scrollbarVisible) && AxisHelper.LabelLayoutStrategy.willLabelsWordBreak(\r\n                axes[0], this.margin, width, TextMeasurementService.measureSvgTextWidth,\r\n                TextMeasurementService.estimateSvgTextHeight, TextMeasurementService.getTailoredTextOrDefault,\r\n                textProperties);\r\n            return axes;\r\n        }\r\n\r\n        public calculateAxesProperties(options: CalculateScaleAndDomainOptions): IAxisProperties[] {\r\n            let data = this.data;\r\n            let dataPoints = data.dataPoints;\r\n            this.margin = options.margin;\r\n            this.viewport = options.viewport;\r\n\r\n            let minY = 0,\r\n                maxY = 10,\r\n                minX = 0,\r\n                maxX = 10;\r\n            if (dataPoints.length > 0) {\r\n                minY = d3.min<EnhancedScatterChartDataPoint, number>(dataPoints, d => d.y);\r\n                maxY = d3.max<EnhancedScatterChartDataPoint, number>(dataPoints, d => d.y);\r\n                minX = d3.min<EnhancedScatterChartDataPoint, number>(dataPoints, d => d.x);\r\n                maxX = d3.max<EnhancedScatterChartDataPoint, number>(dataPoints, d => d.x);\r\n            }\r\n\r\n            let xDomain = [minX, maxX];\r\n            let combinedXDomain = AxisHelper.combineDomain(options.forcedXDomain, xDomain);\r\n\r\n            this.xAxisProperties = AxisHelper.createAxis({\r\n                pixelSpan: this.viewportIn.width,\r\n                dataDomain: combinedXDomain,\r\n                metaDataColumn: data.xCol,\r\n                formatString: valueFormatter.getFormatString(data.xCol, scatterChartProps.general.formatString),\r\n                outerPadding: 0,\r\n                isScalar: true,\r\n                isVertical: false,\r\n                forcedTickCount: options.forcedTickCount,\r\n                useTickIntervalForDisplayUnits: true,\r\n                isCategoryAxis: true, //scatter doesn't have a categorical axis, but this is needed for the pane to react correctly to the x-axis toggle one/off\r\n                scaleType: options.categoryAxisScaleType,\r\n                axisDisplayUnits: options.categoryAxisDisplayUnits\r\n            });\r\n            this.xAxisProperties.axis.tickSize(-this.viewportIn.height, 0);\r\n            this.xAxisProperties.axisLabel = this.data.axesLabels.x;\r\n\r\n            let combinedDomain = AxisHelper.combineDomain(options.forcedYDomain, [minY, maxY]);\r\n\r\n            this.yAxisProperties = AxisHelper.createAxis({\r\n                pixelSpan: this.viewportIn.height,\r\n                dataDomain: combinedDomain,\r\n                metaDataColumn: data.yCol,\r\n                formatString: valueFormatter.getFormatString(data.yCol, scatterChartProps.general.formatString),\r\n                outerPadding: 0,\r\n                isScalar: true,\r\n                isVertical: true,\r\n                forcedTickCount: options.forcedTickCount,\r\n                useTickIntervalForDisplayUnits: true,\r\n                isCategoryAxis: false,\r\n                scaleType: options.valueAxisScaleType,\r\n                axisDisplayUnits: options.valueAxisDisplayUnits\r\n            });\r\n            this.yAxisProperties.axisLabel = this.data.axesLabels.y;\r\n\r\n            return [this.xAxisProperties, this.yAxisProperties];\r\n        }\r\n\r\n        private enumerateDataPoints(enumeration: ObjectEnumerationBuilder): void {\r\n            let data = this.data;\r\n            if (!data)\r\n                return;\r\n\r\n            let seriesCount = data.dataPoints.length;\r\n\r\n            if (!data.hasDynamicSeries) {\r\n                // Add default color and show all slices\r\n                enumeration.pushInstance({\r\n                    objectName: 'dataPoint',\r\n                    selector: null,\r\n                    properties: {\r\n                        defaultColor: { solid: { color: data.defaultDataPointColor || this.colors.getColorByIndex(0).value } }\r\n                    }\r\n                }).pushInstance({\r\n                    objectName: 'dataPoint',\r\n                    selector: null,\r\n                    properties: {\r\n                        showAllDataPoints: !!data.showAllDataPoints\r\n                    }\r\n                });\r\n\r\n                for (let i = 0; i < seriesCount; i++) {\r\n                    let seriesDataPoints = data.dataPoints[i];\r\n                    enumeration.pushInstance({\r\n                        objectName: 'dataPoint',\r\n                        displayName: seriesDataPoints.formattedCategory.getValue(),\r\n                        selector: ColorHelper.normalizeSelector(seriesDataPoints.identity.getSelector(), /*isSingleSeries*/ true),\r\n                        properties: {\r\n                            fill: { solid: { color: seriesDataPoints.fill } }\r\n                        },\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                let legendDataPointLength = data.legendData.dataPoints.length;\r\n                for (let i = 0; i < legendDataPointLength; i++) {\r\n                    let series = data.legendData.dataPoints[i];\r\n                    enumeration.pushInstance({\r\n                        objectName: 'dataPoint',\r\n                        displayName: series.label,\r\n                        selector: ColorHelper.normalizeSelector(series.identity.getSelector()),\r\n                        properties: {\r\n                            fill: { solid: { color: series.color } }\r\n                        },\r\n                    });\r\n                }\r\n            }\r\n        }\r\n\r\n        public enumerateObjectInstances(options: EnumerateVisualObjectInstancesOptions): VisualObjectInstanceEnumeration {\r\n            let enumeration = new ObjectEnumerationBuilder();\r\n\r\n            switch (options.objectName) {\r\n                case 'dataPoint':\r\n                    let categoricalDataView: DataViewCategorical = this.dataView && this.dataView.categorical ? this.dataView.categorical : null;\r\n                    if (!GradientUtils.hasGradientRole(categoricalDataView))\r\n                        this.enumerateDataPoints(enumeration);\r\n                    break;\r\n                case 'categoryAxis':\r\n                    this.getCategoryAxisValues(enumeration);\r\n                    break;\r\n                case 'valueAxis':\r\n                    this.getValueAxisValues(enumeration);\r\n                    break;\r\n                case 'categoryLabels':\r\n                    if (this.data)\r\n                        dataLabelUtils.enumerateCategoryLabels(enumeration, this.data.dataLabelsSettings, true);\r\n                    else\r\n                        dataLabelUtils.enumerateCategoryLabels(enumeration, null, true);\r\n                    break;\r\n                case 'fillPoint':\r\n                    let sizeRange = this.data.sizeRange;\r\n                    // Check if the card should be shown or not\r\n                    if (sizeRange && sizeRange.min)\r\n                        break;\r\n\r\n                    enumeration.pushInstance({\r\n                        objectName: 'fillPoint',\r\n                        selector: null,\r\n                        properties: {\r\n                            show: this.data.fillPoint,\r\n                        },\r\n                    });\r\n                    break;\r\n                case 'backdrop':\r\n                    enumeration.pushInstance({\r\n                        objectName: 'backdrop',\r\n                        displayName: 'Backdrop',\r\n                        selector: null,\r\n                        properties: {\r\n                            show: this.data.backdrop ? this.data.backdrop.show : false,\r\n                            url: this.data.backdrop ? this.data.backdrop.url : null\r\n                        },\r\n                    });\r\n                    break;\r\n                case 'crosshair':\r\n                    enumeration.pushInstance({\r\n                        objectName: 'crosshair',\r\n                        selector: null,\r\n                        properties: {\r\n                            show: this.data.crosshair\r\n                        },\r\n                    });\r\n                    break;\r\n                case 'outline':\r\n                    enumeration.pushInstance({\r\n                        objectName: 'outline',\r\n                        selector: null,\r\n                        properties: {\r\n                            show: this.data.outline\r\n                        },\r\n                    });\r\n                    break;\r\n                case 'legend':\r\n                    this.getLegendValue(enumeration);\r\n                    break;\r\n            }\r\n            return enumeration.complete();\r\n        }\r\n\r\n        public hasLegend(): boolean {\r\n            return this.data && this.data.hasDynamicSeries;\r\n        }\r\n\r\n        private getLegendValue(enumeration: ObjectEnumerationBuilder): void {\r\n            if (!this.hasLegend())\r\n                return;\r\n            let show = DataViewObject.getValue<boolean>(this.legendObjectProperties, legendProps.show, this.legend.isVisible());\r\n            let showTitle = DataViewObject.getValue<boolean>(this.legendObjectProperties, legendProps.showTitle, true);\r\n            let titleText = DataViewObject.getValue<string>(this.legendObjectProperties, legendProps.titleText, this.layerLegendData ? this.layerLegendData.title : '');\r\n            let legendLabelColor = DataViewObject.getValue<string>(this.legendObjectProperties, legendProps.labelColor, LegendData.DefaultLegendLabelFillColor);\r\n            this.legendLabelFontSize = DataViewObject.getValue<number>(this.legendObjectProperties, legendProps.fontSize, EnhancedScatterChart.LegendLabelFontSizeDefault);\r\n\r\n            enumeration.pushInstance({\r\n                selector: null,\r\n                properties: {\r\n                    show: show,\r\n                    position: LegendPosition[this.legend.getOrientation()],\r\n                    showTitle: showTitle,\r\n                    titleText: titleText,\r\n                    labelColor: legendLabelColor,\r\n                    fontSize: this.legendLabelFontSize,\r\n                },\r\n                objectName: 'legend'\r\n            });\r\n        }\r\n\r\n        private getCategoryAxisValues(enumeration: ObjectEnumerationBuilder): void {\r\n            let supportedType = axisType.both;\r\n            let isScalar = true;\r\n            let logPossible = false;\r\n            let scaleOptions = [axisScale.log, axisScale.linear];//until options can be update in propPane, show all options\r\n\r\n            if (!isScalar) {\r\n                if (this.categoryAxisProperties) {\r\n                    this.categoryAxisProperties['start'] = null;\r\n                    this.categoryAxisProperties['end'] = null;\r\n                }\r\n            }\r\n\r\n            let instance: VisualObjectInstance = {\r\n                selector: null,\r\n                properties: {},\r\n                objectName: 'categoryAxis',\r\n                validValues: {\r\n                    axisScale: scaleOptions\r\n                }\r\n            };\r\n\r\n            instance.properties['show'] = this.categoryAxisProperties && this.categoryAxisProperties['show'] != null ? this.categoryAxisProperties['show'] : true;\r\n            if (this.yAxisIsCategorical)//in case of e.g. barChart\r\n                instance.properties['position'] = this.valueAxisProperties && this.valueAxisProperties['position'] != null ? this.valueAxisProperties['position'] : yAxisPosition.left;\r\n            if (supportedType === axisType.both) {\r\n                instance.properties['axisType'] = isScalar ? axisType.scalar : axisType.categorical;\r\n            }\r\n            if (isScalar) {\r\n                instance.properties['axisScale'] = (this.categoryAxisProperties && this.categoryAxisProperties['axisScale'] != null && logPossible) ? this.categoryAxisProperties['axisScale'] : axisScale.linear;\r\n                instance.properties['start'] = this.categoryAxisProperties ? this.categoryAxisProperties['start'] : null;\r\n                instance.properties['end'] = this.categoryAxisProperties ? this.categoryAxisProperties['end'] : null;\r\n                instance.properties['labelDisplayUnits'] = this.categoryAxisProperties && this.categoryAxisProperties['labelDisplayUnits'] != null ? this.categoryAxisProperties['labelDisplayUnits'] : EnhancedScatterChart.LabelDisplayUnitsDefault;\r\n            }\r\n            instance.properties['showAxisTitle'] = this.categoryAxisProperties && this.categoryAxisProperties['showAxisTitle'] != null ? this.categoryAxisProperties['showAxisTitle'] : true;\r\n\r\n            enumeration\r\n                .pushInstance(instance)\r\n                .pushInstance({\r\n                    selector: null,\r\n                    properties: {\r\n                        axisStyle: this.categoryAxisProperties && this.categoryAxisProperties['axisStyle'] ? this.categoryAxisProperties['axisStyle'] : axisStyle.showTitleOnly,\r\n                        labelColor: this.categoryAxisProperties ? this.categoryAxisProperties['labelColor'] : null\r\n                    },\r\n                    objectName: 'categoryAxis',\r\n                    validValues: {\r\n                        axisStyle: this.categoryAxisHasUnitType ? [axisStyle.showTitleOnly, axisStyle.showUnitOnly, axisStyle.showBoth] : [axisStyle.showTitleOnly]\r\n                    }\r\n                });\r\n        }\r\n\r\n        //todo: wrap all these object getters and other related stuff into an interface\r\n        private getValueAxisValues(enumeration: ObjectEnumerationBuilder): void {\r\n            let scaleOptions = [axisScale.log, axisScale.linear];  //until options can be update in propPane, show all options\r\n            let logPossible = false;\r\n\r\n            let instance: VisualObjectInstance = {\r\n                selector: null,\r\n                properties: {},\r\n                objectName: 'valueAxis',\r\n                validValues: {\r\n                    axisScale: scaleOptions,\r\n                    secAxisScale: scaleOptions\r\n                }\r\n            };\r\n\r\n            instance.properties['show'] = this.valueAxisProperties && this.valueAxisProperties['show'] != null ? this.valueAxisProperties['show'] : true;\r\n\r\n            if (!this.yAxisIsCategorical) {\r\n                instance.properties['position'] = this.valueAxisProperties && this.valueAxisProperties['position'] != null ? this.valueAxisProperties['position'] : yAxisPosition.left;\r\n            }\r\n            instance.properties['axisScale'] = (this.valueAxisProperties && this.valueAxisProperties['axisScale'] != null && logPossible) ? this.valueAxisProperties['axisScale'] : axisScale.linear;\r\n            instance.properties['start'] = this.valueAxisProperties ? this.valueAxisProperties['start'] : null;\r\n            instance.properties['end'] = this.valueAxisProperties ? this.valueAxisProperties['end'] : null;\r\n            instance.properties['showAxisTitle'] = this.valueAxisProperties && this.valueAxisProperties['showAxisTitle'] != null ? this.valueAxisProperties['showAxisTitle'] : true;\r\n            instance.properties['labelDisplayUnits'] = this.valueAxisProperties && this.valueAxisProperties['labelDisplayUnits'] != null ? this.valueAxisProperties['labelDisplayUnits'] : EnhancedScatterChart.LabelDisplayUnitsDefault;\r\n\r\n            enumeration\r\n                .pushInstance(instance)\r\n                .pushInstance({\r\n                    selector: null,\r\n                    properties: {\r\n                        axisStyle: this.valueAxisProperties && this.valueAxisProperties['axisStyle'] != null ? this.valueAxisProperties['axisStyle'] : axisStyle.showTitleOnly,\r\n                        labelColor: this.valueAxisProperties ? this.valueAxisProperties['labelColor'] : null\r\n                    },\r\n                    objectName: 'valueAxis',\r\n                    validValues: {\r\n                        axisStyle: this.valueAxisHasUnitType ? [axisStyle.showTitleOnly, axisStyle.showUnitOnly, axisStyle.showBoth] : [axisStyle.showTitleOnly]\r\n                    },\r\n                });\r\n        }\r\n\r\n        public onClearSelection(): void {\r\n            if (this.interactivityService)\r\n                this.interactivityService.clearSelection();\r\n        }\r\n    }\r\n}","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nvar THREE: any;\r\nvar WebGLHeatmap;\r\nvar GlobeMapCanvasLayers: JQuery[];\r\n\r\nmodule powerbi.visuals.samples {\r\n    import TouchRect = controls.TouchUtils.Rectangle;\r\n    import DataRoleHelper = powerbi.data.DataRoleHelper;\r\n\r\n    interface RenderData {\r\n        lat: number;\r\n        lng: number;\r\n        height: number;\r\n        heightBySeries: number[];\r\n        seriesToolTipData: any[];\r\n        heat: number;\r\n        toolTipData: any;\r\n    }\r\n\r\n    export class GlobeMap implements IVisual {\r\n        public static MercartorSphere: any;\r\n        private viewport: IViewport;\r\n        private container: JQuery;\r\n        private domElement: HTMLElement;\r\n        private camera: any;\r\n        private renderer: any;\r\n        private scene: any;\r\n        private orbitControls: any;\r\n        private earth: any;\r\n        private settings: any;\r\n        private renderData: RenderData[] = [];\r\n        private heatmap: any;\r\n        private heatTexture: any;\r\n        private mapTextures: any[];\r\n        private barsGroup: any;\r\n        private readyToRender: boolean;\r\n        private categoricalView: any;\r\n        private deferredRenderTimerId: any;\r\n        private globeMapLocationCache: any;\r\n        private locationsToLoad: number = 0;\r\n        private locationsLoaded: number = 0;\r\n        private renderLoopEnabled = true;\r\n        private needsRender = false;\r\n        private mousePosNormalized: any;\r\n        private mousePos: any;\r\n        private rayCaster: any;\r\n        private selectedBar: any;\r\n        private hoveredBar: any;\r\n        private averageBarVector: any;\r\n        private zoomControl: any;\r\n\r\n        public static capabilities: VisualCapabilities = {\r\n            dataRoles: [\r\n                {\r\n                    name: 'Category',\r\n                    kind: VisualDataRoleKind.Grouping,\r\n                    displayName: data.createDisplayNameGetter('Role_DisplayName_Location'),\r\n                    preferredTypes: [\r\n                        { geography: { address: true } },\r\n                        { geography: { city: true } },\r\n                        { geography: { continent: true } },\r\n                        { geography: { country: true } },\r\n                        { geography: { county: true } },\r\n                        { geography: { place: true } },\r\n                        { geography: { postalCode: true } },\r\n                        { geography: { region: true } },\r\n                        { geography: { stateOrProvince: true } },\r\n                    ],\r\n                },\r\n                {\r\n                    name: 'Series',\r\n                    kind: powerbi.VisualDataRoleKind.Grouping,\r\n                    displayName: \"Legend\",\r\n                },\r\n                {\r\n                    name: 'X',\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: 'Longitude',\r\n                    description: 'Use to override the longitude of locations',\r\n                    preferredTypes: [{ geography: { longitude: true } }],\r\n                },\r\n                {\r\n                    name: 'Y',\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: 'Latitude',\r\n                    description: 'Use to override the latitude of locations',\r\n                    preferredTypes: [{ geography: { latitude: true } }],\r\n                },\r\n                {\r\n                    name: 'Height',\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: 'Bar Height',\r\n                },\r\n                {\r\n                    name: 'Heat',\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: 'Heat Intensity',\r\n                }\r\n            ],\r\n            objects: {\r\n                general: {\r\n                    displayName: data.createDisplayNameGetter('Visual_General'),\r\n                    properties: {\r\n                        formatString: {\r\n                            type: { formatting: { formatString: true } },\r\n                        },\r\n                    },\r\n                },\r\n                legend: {\r\n                    displayName: data.createDisplayNameGetter('Visual_Legend'),\r\n                    properties: {\r\n                        show: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Show'),\r\n                            type: { bool: true }\r\n                        },\r\n                        position: {\r\n                            displayName: data.createDisplayNameGetter('Visual_LegendPosition'),\r\n                            type: { formatting: { legendPosition: true } }\r\n                        },\r\n                        showTitle: {\r\n                            displayName: data.createDisplayNameGetter('Visual_LegendShowTitle'),\r\n                            type: { bool: true }\r\n                        },\r\n                        titleText: {\r\n                            displayName: data.createDisplayNameGetter('Visual_LegendTitleText'),\r\n                            type: { text: true }\r\n                        }\r\n                    }\r\n                },\r\n                dataPoint: {\r\n                    displayName: data.createDisplayNameGetter('Visual_DataPoint'),\r\n                    properties: {\r\n                        defaultColor: {\r\n                            displayName: data.createDisplayNameGetter('Visual_DefaultColor'),\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        showAllDataPoints: {\r\n                            displayName: data.createDisplayNameGetter('Visual_DataPoint_Show_All'),\r\n                            type: { bool: true }\r\n                        },\r\n                        fill: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Fill'),\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        fillRule: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Gradient'),\r\n                            type: { fillRule: {} },\r\n                            rule: {\r\n                                inputRole: 'Gradient',\r\n                                output: {\r\n                                    property: 'fill',\r\n                                    selector: ['Category'],\r\n                                },\r\n                            },\r\n                        }\r\n                    }\r\n                },\r\n                categoryLabels: {\r\n                    displayName: data.createDisplayNameGetter('Visual_CategoryLabels'),\r\n                    properties: {\r\n                        show: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Show'),\r\n                            type: { bool: true }\r\n                        },\r\n                        color: {\r\n                            displayName: data.createDisplayNameGetter('Visual_LabelsFill'),\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                    },\r\n                },\r\n            },\r\n            dataViewMappings: [{\r\n                conditions: [\r\n                    { 'Category': { max: 1 }, 'Series': { max: 1 }, 'Height': { max: 1 }, 'Heat': { max: 1 } },\r\n                ],\r\n                categorical: {\r\n                    categories: {\r\n                        for: { in: 'Category' },\r\n                        dataReductionAlgorithm: { top: {} }\r\n                    },\r\n                    values: {\r\n                        group: {\r\n                            by: 'Series',\r\n                            select: [\r\n                                { bind: { to: 'Height' } },\r\n                                { bind: { to: 'Heat' } },\r\n                                { bind: { to: 'X' } },\r\n                                { bind: { to: 'Y' } },\r\n                            ],\r\n                            dataReductionAlgorithm: { top: {} }\r\n                        }\r\n                    },\r\n                    rowCount: { preferred: { min: 2 } }\r\n                },\r\n            }],\r\n            sorting: {\r\n                custom: {},\r\n            }\r\n        };\r\n\r\n        public static converter(dataView: DataView): any {\r\n            return {};\r\n        }\r\n\r\n        public init(options: VisualInitOptions): void {\r\n            this.container = options.element;\r\n            this.viewport = options.viewport;\r\n            this.readyToRender = false;\r\n            if (!this.globeMapLocationCache) this.globeMapLocationCache = {};\r\n\r\n            if (!THREE) {\r\n                loadGlobeMapLibs();\r\n            }\r\n\r\n            if (THREE) {\r\n                this.setup();\r\n            }\r\n        }\r\n\r\n        private setup() {\r\n            this.initSettings();\r\n            this.initTextures();\r\n            this.initMercartorSphere();\r\n            this.initZoomControl();\r\n            this.initScene();\r\n            this.initHeatmap();\r\n            this.readyToRender = true;\r\n            this.composeRenderData();\r\n            this.initRayCaster();\r\n        }\r\n\r\n        private initSettings() {\r\n            var settings = this.settings = <any>{};\r\n            settings.autoRotate = false;\r\n            settings.earthRadius = 30;\r\n            settings.cameraRadius = 100;\r\n            settings.earthSegments = 100;\r\n            settings.heatmapSize = 1000;\r\n            settings.heatPointSize = 7;\r\n            settings.heatIntensity = 10;\r\n            settings.heatmapScaleOnZoom = 0.95;\r\n            settings.barWidth = 0.3;\r\n            settings.barHeight = 5;\r\n            settings.rotateSpeed = 0.5;\r\n            settings.zoomSpeed = 0.8;\r\n            settings.cameraAnimDuration = 1000; //ms\r\n            settings.clickInterval = 200; //ms\r\n        }\r\n\r\n        private initScene() {\r\n            var viewport = this.viewport;\r\n            var settings = this.settings;\r\n            var clock = new THREE.Clock();\r\n            var renderer = this.renderer = new THREE.WebGLRenderer({ antialias: true, preserveDrawingBuffer: true });\r\n            this.container.append(renderer.domElement);\r\n            this.domElement = renderer.domElement;\r\n            var camera = this.camera = new THREE.PerspectiveCamera(35, viewport.width / viewport.height, 0.1, 10000);\r\n            var orbitControls = this.orbitControls = new THREE.OrbitControls(camera, this.domElement);\r\n            var scene = this.scene = new THREE.Scene();\r\n\r\n            renderer.setSize(viewport.width, viewport.height);\r\n            renderer.setClearColor(0xbac4d2, 1);\r\n            camera.position.z = settings.cameraRadius;\r\n\r\n            orbitControls.maxDistance = settings.cameraRadius;\r\n            orbitControls.minDistance = settings.earthRadius + 1;\r\n            orbitControls.rotateSpeed = settings.rotateSpeed;\r\n            orbitControls.zoomSpeed = settings.zoomSpeed;\r\n            orbitControls.autoRotate = settings.autoRotate;\r\n\r\n            var ambientLight = new THREE.AmbientLight(0x000000);\r\n            var light1 = new THREE.DirectionalLight(0xffffff, 0.4);\r\n            var light2 = new THREE.DirectionalLight(0xffffff, 0.4);\r\n            var earth = this.earth = this.createEarth();\r\n\r\n            scene.add(ambientLight);\r\n            scene.add(light1);\r\n            scene.add(light2);\r\n            scene.add(earth);\r\n\r\n            light1.position.set(20, 20, 20);\r\n            light2.position.set(0, 0, -20);\r\n\r\n            var _zis = this;\r\n\r\n            requestAnimationFrame(function render() {\r\n                try {\r\n                    if (_zis.renderLoopEnabled) requestAnimationFrame(render);\r\n                    if (!_zis.shouldRender()) return;\r\n                    orbitControls.update(clock.getDelta());\r\n                    _zis.setEarthTexture();\r\n                    _zis.intersectBars();\r\n                    _zis.heatmap.display(); // Needed for IE/Edge to behave nicely\r\n                    renderer.render(scene, camera);\r\n                    _zis.needsRender = false;\t\r\n                    //console.log(\"render\");\t\t\t\r\n                } catch (e) {\r\n                    console.error(e);\r\n                }\r\n            });\r\n        }\r\n\r\n        private shouldRender(): boolean {\r\n            return this.readyToRender && this.needsRender;\r\n        }\r\n\r\n        private createEarth() {\r\n            var geometry = new GlobeMap.MercartorSphere(this.settings.earthRadius, this.settings.earthSegments, this.settings.earthSegments);\r\n            var material = new THREE.MeshPhongMaterial({\r\n                map: this.mapTextures[0],\r\n                side: THREE.DoubleSide,\r\n                shininess: 1,\r\n                emissive: 0xaaaaaa,\r\n                //wireframe: true\r\n            });\r\n            return new THREE.Mesh(geometry, material);\r\n        }\r\n\r\n        public zoomClicked(zoomDirection: any) {\r\n            if (this.orbitControls.enabled === false || this.orbitControls.enableZoom === false)\r\n                return;\r\n\r\n            if (zoomDirection === -1)\r\n                this.orbitControls.constraint.dollyOut(Math.pow(0.95, this.settings.zoomSpeed));\r\n            else if (zoomDirection === 1)\r\n                this.orbitControls.constraint.dollyIn(Math.pow(0.95, this.settings.zoomSpeed));\r\n\r\n            this.orbitControls.update();\r\n            this.animateCamera(this.camera.position);\r\n        }\r\n\r\n        public rotateCam(deltaX: number, deltaY: number) {\r\n            if (this.orbitControls.enabled === false || this.orbitControls.enableRotate === false)\r\n                return;\r\n\r\n            this.orbitControls.constraint.rotateLeft(2 * Math.PI * deltaX / this.domElement.offsetHeight * this.settings.rotateSpeed);\r\n            this.orbitControls.constraint.rotateUp(2 * Math.PI * deltaY / this.domElement.offsetHeight * this.settings.rotateSpeed);\r\n            this.orbitControls.update();\r\n            this.animateCamera(this.camera.position);\r\n        }\r\n\r\n        private initZoomControl() {\r\n            let radius = 17;\r\n            let zoomControlWidth = radius * 8.5;\r\n            let zoomControlHeight = radius * 8.5;\r\n            let startX = radius * 3;\r\n            let startY = radius + 3;\r\n            let gap = radius * 2;\r\n\r\n            let zoomCss = {\r\n                'position': 'absolute',\r\n                'left': 'calc(100% - ' + zoomControlWidth + 'px)',\r\n                'top': 'calc(100% - ' + zoomControlHeight + 'px)',\r\n                'zIndex': '1000',\r\n            };\r\n\r\n            let zoomContainer =\r\n                d3.select(this.container[0])\r\n                    .append('div')\r\n                    .style(zoomCss);\r\n\r\n            this.zoomControl = zoomContainer.append(\"svg\")\r\n                .attr({\r\n                    \"width\": zoomControlWidth,\r\n                    \"height\": zoomControlHeight\r\n                });\r\n\r\n            let bottom = this.zoomControl.append(\"g\").on(\"click\", () => this.rotateCam(0, -5));\r\n\r\n            bottom.append(\"circle\").attr({\r\n                cx: startX + gap,\r\n                cy: startY + (2 * gap),\r\n                r: radius,\r\n                fill: \"white\",\r\n                opacity: 0.5,\r\n                stroke: 'gray',\r\n            });\r\n\r\n            bottom.append(\"path\").attr({\r\n                d: \"M\" + (startX + (2 * radius)) + \" \" + (startY + (radius * 4.7)) + \" l12 -20 a40,70 0 0,1 -24,0z\",\r\n                fill: \"gray\",\r\n            });\r\n\r\n            let left = this.zoomControl.append(\"g\").on(\"click\", () => this.rotateCam(5, 0));\r\n\r\n            left.append(\"circle\").attr({\r\n                cx: startX,\r\n                cy: startY + gap,\r\n                r: radius,\r\n                fill: \"white\",\r\n                stroke: \"gray\",\r\n                opacity: 0.5,\r\n            });\r\n\r\n            left.append(\"path\").attr({\r\n                d: \"M\" + (startX - radius / 1.5) + \" \" + (startY + (radius * 2)) + \" l20 -12 a70,40 0 0,0 0,24z\",\r\n                fill: \"gray\",\r\n            });\r\n\r\n            let top = this.zoomControl.append(\"g\").on(\"click\", () => this.rotateCam(0, 5));\r\n\r\n            top.append(\"circle\").attr({\r\n                cx: startX + gap,\r\n                cy: startY,\r\n                r: radius,\r\n                fill: \"white\",\r\n                stroke: \"gray\",\r\n                opacity: 0.5,\r\n            });\r\n\r\n            top.append(\"path\").attr({\r\n                d: \"M\" + (startX + (2 * radius)) + \" \" + (startY - (radius / 1.5)) + \" l12 20 a40,70 0 0,0 -24,0z\",\r\n                fill: \"gray\",\r\n            });\r\n\r\n            let right = this.zoomControl.append(\"g\").on(\"click\", () => this.rotateCam(-5, 0));\r\n\r\n            right.append(\"circle\").attr({\r\n                cx: startX + (2 * gap),\r\n                cy: startY + gap,\r\n                r: radius,\r\n                fill: \"white\",\r\n                stroke: \"gray\",\r\n                opacity: 0.5,\r\n            });\r\n\r\n            right.append(\"path\").attr({\r\n                d: \"M\" + (startX + (4.7 * radius)) + \" \" + (startY + (radius * 2)) + \" l-20 -12 a70,40 0 0,1 0,24z\",\r\n                fill: \"gray\",\r\n            });\r\n\r\n            let zoomIn = this.zoomControl.append(\"g\").on(\"click\", () => this.zoomClicked(-1));\r\n\r\n            zoomIn.append(\"circle\").attr({\r\n                cx: startX + 4 * radius,\r\n                cy: startY + 6 * radius,\r\n                r: radius,\r\n                fill: \"white\",\r\n                stroke: \"gray\",\r\n                opacity: 0.5,\r\n            });\r\n\r\n            zoomIn.append(\"rect\").attr({\r\n                x: startX + 3.5 * radius,\r\n                y: startY + 5.9 * radius,\r\n                width: radius,\r\n                height: radius / 3,\r\n                fill: \"gray\",\r\n            });\r\n            zoomIn.append(\"rect\").attr({\r\n                x: startX + (4 * radius) - radius / 6,\r\n                y: startY + 5.55 * radius,\r\n                width: radius / 3,\r\n                height: radius,\r\n                fill: \"gray\",\r\n            });\r\n\r\n            var zoomOut = this.zoomControl.append(\"g\").on(\"click\", () => this.zoomClicked(1));\r\n\r\n            zoomOut.append(\"circle\").attr({\r\n                cx: startX,\r\n                cy: startY + 6 * radius,\r\n                r: radius,\r\n                fill: \"white\",\r\n                stroke: \"gray\",\r\n                opacity: \"0.50\",\r\n            });\r\n\r\n            zoomOut.append(\"rect\").attr({\r\n                x: startX - (radius / 2),\r\n                y: startY + 5.9 * radius,\r\n                width: radius,\r\n                height: radius / 3,\r\n                fill: \"gray\",\r\n            });\r\n        }\r\n\r\n        private initTextures() {\r\n            if (!GlobeMapCanvasLayers) {\r\n                // Initialize once, since this is a CPU + Network heavy operation.\r\n                GlobeMapCanvasLayers = [];\r\n\r\n                for (var level = 2; level <= 5; ++level) {\r\n                    var canvas = this.getBingMapCanvas(level);\r\n                    GlobeMapCanvasLayers.push(canvas);\r\n                }\r\n            }\r\n\r\n            // Can't execute in for loop because variable assignement gets overwritten\r\n            var createTexture = (canvas: JQuery) => {\r\n                var texture = new THREE.Texture(canvas.get(0));\r\n                texture.needsUpdate = true;\r\n                canvas.on(\"ready\", (e, resolution) => {\r\n                    //console.log(\"level ready\", resolution, texture)\r\n                    texture.needsUpdate = true;\r\n                    this.needsRender = true;\r\n                });\r\n                return texture;\r\n\r\n            };\r\n\r\n            this.mapTextures = [];\r\n            for (var i = 0; i < GlobeMapCanvasLayers.length; ++i) {\r\n                this.mapTextures.push(createTexture(GlobeMapCanvasLayers[i]));\r\n            }\r\n        }\r\n\r\n        private initHeatmap() {\r\n            var settings = this.settings;\r\n\r\n            //console.log(\"initHeatmap\");\r\n            try {\r\n                var heatmap = this.heatmap = new WebGLHeatmap({ width: settings.heatmapSize, height: settings.heatmapSize, intensityToAlpha: true });\r\n            } catch (e) {\r\n                // IE & Edge will throw an error about texImage2D, we need to ignore it\r\n                console.error(e);\r\n            }\r\n\r\n            // canvas contents will be used for a texture\r\n            var texture = this.heatTexture = new THREE.Texture(heatmap.canvas);\r\n            texture.needsUpdate = true;\r\n\r\n            var material = new THREE.MeshBasicMaterial({ map: texture, transparent: true });\r\n            var geometry = new THREE.SphereGeometry(settings.earthRadius + 0.01, settings.earthSegments, settings.earthSegments);\r\n            var mesh = new THREE.Mesh(geometry, material);\r\n\r\n            window[\"heatmap\"] = heatmap;\r\n            window[\"heatmapTexture\"] = texture;\r\n\r\n            this.scene.add(mesh);\r\n        }\r\n\r\n        private setEarthTexture() {\r\n            //get distance as arbitrary value from 0-1\r\n            if (!this.camera) return;\r\n            var maxDistance = this.settings.cameraRadius - this.settings.earthRadius;\r\n            var distance = (this.camera.position.length() - this.settings.earthRadius) / maxDistance;\r\n\r\n            var texture;\r\n            if (distance <= 1 / 5) {\r\n                texture = this.mapTextures[3];\r\n            } else if (distance <= 2 / 5) {\r\n                texture = this.mapTextures[2];\r\n            } else if (distance <= 3 / 5) {\r\n                texture = this.mapTextures[1];\r\n            } else {\r\n                texture = this.mapTextures[0];\r\n            }\r\n\r\n            if (this.earth.material.map !== texture) {\r\n                this.earth.material.map = texture;\r\n            }\r\n\r\n            if (this.selectedBar) {\r\n                this.orbitControls.rotateSpeed = this.settings.rotateSpeed;\r\n            } else {\r\n                this.orbitControls.rotateSpeed = this.settings.rotateSpeed * distance;\r\n            }\r\n\r\n            //console.log(distance, this.orbitControls.rotateSpeed);\r\n        }\r\n\r\n        public update(options: VisualUpdateOptions) {\r\n            this.needsRender = true;\r\n            this.cleanHeatAndBar();\r\n            if (options.viewport.height !== this.viewport.height || options.viewport.width !== this.viewport.width) {\r\n                var viewport = this.viewport = options.viewport;\r\n                if (this.camera && this.renderer) {\r\n                    this.camera.aspect = viewport.width / viewport.height;\r\n                    this.camera.updateProjectionMatrix();\r\n                    this.renderer.setSize(viewport.width, viewport.height);\r\n                }\r\n                return;\r\n            }\r\n\r\n            // PowerBI fires two update calls, one for size, one for data\r\n            if (options.dataViews[0] && options.dataViews[0].categorical) {\r\n                this.composeRenderData(options.dataViews[0].categorical);\r\n            }\r\n        }\r\n\r\n        public cleanHeatAndBar() {\r\n            this.heatmap.clear();\r\n            this.heatTexture.needsUpdate = true;\r\n            if (this.barsGroup) {\r\n                this.scene.remove(this.barsGroup);\r\n            }\r\n        }\r\n\r\n        private renderMagic() {\r\n            if (!this.readyToRender) {\r\n                //console.log(\"not ready to render\");\r\n                this.defferedRender();\r\n                return;\r\n            }\r\n\r\n            var renderData = this.renderData;\r\n            var heatmap = this.heatmap;\r\n            var settings = this.settings;\r\n\r\n            heatmap.clear();\r\n\r\n            if (this.barsGroup) {\r\n                this.scene.remove(this.barsGroup);\r\n            }\r\n\r\n            this.barsGroup = new THREE.Object3D();\r\n            this.scene.add(this.barsGroup);\r\n\r\n            //colors for stacked vector by series values\r\n            var barMaterials = [\r\n                new THREE.MeshPhongMaterial({ color: 0xff00ff, side: THREE.DoubleSide, shading: THREE.FlatShading, transparent: true }),\r\n                new THREE.MeshPhongMaterial({ color: 0xffff1a, side: THREE.DoubleSide, shading: THREE.FlatShading, transparent: true }),\r\n                new THREE.MeshPhongMaterial({ color: 0xff0000, side: THREE.DoubleSide, shading: THREE.FlatShading, transparent: true }),\r\n                new THREE.MeshPhongMaterial({ color: 0x00ffff, side: THREE.DoubleSide, shading: THREE.FlatShading, transparent: true }),\r\n                new THREE.MeshPhongMaterial({ color: 0x994d00, side: THREE.DoubleSide, shading: THREE.FlatShading, transparent: true }),\r\n                new THREE.MeshPhongMaterial({ color: 0xb3cccc, side: THREE.DoubleSide, shading: THREE.FlatShading, transparent: true }),\r\n                new THREE.MeshPhongMaterial({ color: 0xace600, side: THREE.DoubleSide, shading: THREE.FlatShading, transparent: true }),\r\n                new THREE.MeshPhongMaterial({ color: 0x52527a, side: THREE.DoubleSide, shading: THREE.FlatShading, transparent: true }),\r\n            ];\r\n\r\n            this.averageBarVector = new THREE.Vector3();\r\n\r\n            for (var i = 0, len = renderData.length; i < len; ++i) {\r\n                var renderDatum = renderData[i];\r\n\r\n                if (!renderDatum.lat || !renderDatum.lng) continue;\r\n\r\n                if (renderDatum.heat > 0.001) {\r\n                    if (renderDatum.heat < 0.1) renderDatum.heat = 0.1;\r\n                    var x = (180 + renderDatum.lng) / 360 * settings.heatmapSize;\r\n                    var y = (1 - ((90 + renderDatum.lat) / 180)) * settings.heatmapSize;\r\n                    heatmap.addPoint(x, y, settings.heatPointSize, renderDatum.heat * settings.heatIntensity);\r\n                }\r\n\r\n                if (renderDatum.height >= 0) {\r\n                    if (renderDatum.height < 0.01) renderDatum.height = 0.01;\r\n                    var latRadians = renderDatum.lat / 180 * Math.PI; //radians\r\n                    var lngRadians = renderDatum.lng / 180 * Math.PI;\r\n\r\n                    var x = Math.cos(lngRadians) * Math.cos(latRadians);\r\n                    var z = -Math.sin(lngRadians) * Math.cos(latRadians);\r\n                    var y = Math.sin(latRadians);\r\n                    var v = new THREE.Vector3(x, y, z);\r\n\r\n                    this.averageBarVector.add(v);\r\n\r\n                    var barHeight = settings.barHeight * renderDatum.height;\r\n                    //this array holds the relative series values to the actual measure for example [0.2,0.3,0.5]\r\n                    //this is how we draw the vectors relativly to the complete value one on top of another. \r\n                    var measuresBySeries = [];\r\n                    //this array holds the original values of the series for the tool tips\r\n                    var dataPointToolTip = [];\r\n                    if (renderDatum.heightBySeries) {\r\n                        for (var c = 0; c < renderDatum.heightBySeries.length; c++) {\r\n                            if (renderDatum.heightBySeries[c])\r\n                                measuresBySeries.push(renderDatum.heightBySeries[c]);\r\n                            dataPointToolTip.push(renderDatum.seriesToolTipData[c]);\r\n                        }\r\n                    } else {\r\n                        //no category series so we'll just draw one value\r\n                        measuresBySeries.push(1);\r\n                    }\r\n\r\n                    var previousMeasureValue = 0;\r\n                    for (var j = 0; j < measuresBySeries.length; j++) {\r\n                        previousMeasureValue += measuresBySeries[j];\r\n                        var geometry = new THREE.CubeGeometry(settings.barWidth, settings.barWidth, barHeight * measuresBySeries[j]);\r\n                        var bar = new THREE.Mesh(geometry, barMaterials[j % (barMaterials.length - 1)]);\r\n                        bar.position = v.clone().multiplyScalar(settings.earthRadius + ((barHeight / 2) * previousMeasureValue));\r\n                        bar.lookAt(v);\r\n                        bar.toolTipData = dataPointToolTip.length === 0 ? renderDatum.toolTipData : this.getToolTipDataForSeries(renderDatum.toolTipData, dataPointToolTip[j]);\r\n                        this.barsGroup.add(bar);\r\n                        previousMeasureValue += measuresBySeries[j];\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (this.barsGroup.children.length > 0 && this.camera) {\r\n                this.averageBarVector.multiplyScalar(1 / this.barsGroup.children.length);\r\n                if (this.locationsLoaded === this.locationsToLoad) {\r\n                    this.animateCamera(this.averageBarVector);\r\n                }\r\n            }\r\n\r\n            heatmap.update();\r\n            heatmap.blur();\r\n            this.heatTexture.needsUpdate = true;\r\n            this.needsRender = true;\t\t\t\r\n\r\n            //console.log(\"renderMagic done! locations:\", this.barsGroup.children.length, \"toload/loaded\", this.locationsToLoad, this.locationsLoaded)\r\n        }\r\n\r\n        private getToolTipDataForSeries(toolTipData, dataPointToolTip): any {\r\n            var result = jQuery.extend(true, {\r\n                series: { displayName: dataPointToolTip.displayName, value: dataPointToolTip.value }\r\n            }, toolTipData);\r\n            result.height.value = dataPointToolTip.dataPointValue;\r\n            return result;\r\n        }\r\n\r\n        private composeRenderData(categoricalView?) {\r\n            // memoize last value\r\n            if (categoricalView) {\r\n                this.categoricalView = categoricalView;\r\n            } else {\r\n                categoricalView = this.categoricalView;\r\n            }\r\n\r\n            this.renderData = [];\r\n            var locations = [];\r\n            var globeMapLocationCache = this.globeMapLocationCache;\r\n\r\n            //console.log(\"categoricalView\", categoricalView)\r\n            if (!categoricalView) return;\r\n            var categories = categoricalView.categories;\r\n            var grouped = categoricalView.values.grouped();\r\n            var heightIndex = 0;\r\n            var intensityIndex = 0;\r\n            try {\r\n                heightIndex = DataRoleHelper.getMeasureIndexOfRole(grouped, \"Height\");\r\n                intensityIndex = DataRoleHelper.getMeasureIndexOfRole(grouped, \"Heat\");\r\n                var longitudeIndex = DataRoleHelper.getMeasureIndexOfRole(grouped, \"X\");\r\n                var latitudeIndex = DataRoleHelper.getMeasureIndexOfRole(grouped, \"Y\");\r\n            } catch (e) { }\r\n\r\n            var locationType, heights, heightsBySeries, toolTipDataBySeries, heats, latitudes, longitudes, locationDispName, heightDispName, heatDispName, heightFormat, heatFormat;\r\n\r\n            if (heightIndex !== undefined && categoricalView.values[heightIndex] && categoricalView.values !== undefined) {\r\n                var locationCategory = categories[0];\r\n                locations = locationCategory.values;\r\n                locationDispName = locationCategory.source.displayName;\r\n                if (locationCategory.source.type.category) {\r\n                    locationType = locationCategory.source.type.category.toLowerCase();\r\n                } else {\r\n                    locationType = \"\";\r\n                }\r\n            } else {\r\n                locations = [];\r\n            }\r\n\r\n            // For debugging since devTools - salesByCountry isn't really sales by country\r\n            //var places = [\"kenya\", \"india\", \"united states\", \"london\", \"australia\", \"canada\"]\r\n            //heightIndex = 0;\r\n\r\n            if (heightIndex !== undefined && categoricalView.values[heightIndex]) {\r\n                // heights = categoricalView.values[heightIndex].values;\r\n                heightDispName = categoricalView.values[heightIndex].source.displayName;\r\n                heightFormat = categoricalView.values[heightIndex].source.format;\r\n                if (grouped.length > 1) {\r\n                    heights = new Array(locations.length);\r\n                    heightsBySeries = new Array(locations.length);\r\n                    toolTipDataBySeries = new Array(locations.length);\r\n                    //creating a matrix for drawing values by series later.\r\n                    for (var i = 0; i < grouped.length; i++) {\r\n                        var values = grouped[i].values[heightIndex].values;\r\n                        for (var j = 0; j < values.length; j++) {\r\n                            if (!heights[j]) heights[j] = 0;\r\n                            heights[j] += values[j] ? values[j] : 0;\r\n                            if (!heightsBySeries[j]) heightsBySeries[j] = [];\r\n                            heightsBySeries[j][i] = values[j];\r\n                            if (!toolTipDataBySeries[j]) toolTipDataBySeries[j] = [];\r\n                            toolTipDataBySeries[j][i] = { displayName: categoricalView.values.source.displayName, value: grouped[i].name, dataPointValue: values[j] };\r\n                        }\r\n                    }\r\n                    for (var i = 0; i < grouped.length; i++) {\r\n                        var values = grouped[i].values[heightIndex].values;\r\n                        for (var j = 0; j < values.length; j++) { \r\n                            //calculating relative size of series\r\n                            heightsBySeries[j][i] = values[j] / heights[j];\r\n                        }\r\n                    }\r\n                } else {\r\n                    heights = categoricalView.values[heightIndex].values;\r\n                    heightsBySeries = new Array(grouped.length);\r\n                }\r\n\r\n            } else {\r\n                heightsBySeries = new Array(locations.length);\r\n                heights = new Array(locations.length);\r\n            }\r\n\r\n            if (intensityIndex !== undefined && categoricalView.values[intensityIndex]) {\r\n                if (grouped.length > 1) {\r\n                    heats = new Array(locations.length);\r\n                    for (var i = 0; i < grouped.length; i++) {\r\n                        var values = grouped[i].values[intensityIndex].values;\r\n                        for (var j = 0; j < values.length; j++) {\r\n                            if (!heats[j]) heats[j] = 0;\r\n                            heats[j] += values[j] ? values[j] : 0;\r\n                        }\r\n                    }\r\n                } else {\r\n                    heats = categoricalView.values[intensityIndex].values;\r\n                }\r\n                heatDispName = categoricalView.values[intensityIndex].source.displayName;\r\n                heatFormat = categoricalView.values[intensityIndex].source.format;\r\n            } else {\r\n                heats = new Array(locations.length);\r\n            }\r\n\r\n            if (longitudeIndex !== undefined && categoricalView.values[longitudeIndex]\r\n                && latitudeIndex !== undefined && categoricalView.values[latitudeIndex]) {\r\n                longitudes = categoricalView.values[longitudeIndex].values;\r\n                latitudes = categoricalView.values[latitudeIndex].values;\r\n            }\r\n            else {\r\n                longitudes = null;\r\n                latitudes = null;\r\n            }\r\n\r\n            var maxHeight = Math.max.apply(null, heights) || 1;\r\n            var maxHeat = Math.max.apply(null, heats) || 1;\r\n            var heatFormatter = valueFormatter.create({ format: heatFormat, value: heats[0], value2: heats[1] });\r\n            var heightFormatter = valueFormatter.create({ format: heightFormat, value: heights[0], value2: heights[1] });\r\n\r\n            for (var i = 0, len = locations.length; i < len; ++i) {\r\n                var place = locations[i];\r\n                var lat, lng, latlng, height, heat;\r\n\r\n                //place = places[i];\r\n\r\n                if (place && typeof (place) === \"string\") {\r\n                    place = place.toLowerCase();\r\n                    var placeKey = place + \"/\" + locationType;\r\n\r\n                    if (!longitudes && globeMapLocationCache[placeKey]) {\r\n                        latlng = globeMapLocationCache[placeKey];\r\n                        lat = latlng.latitude;\r\n                        lng = latlng.longitude;\r\n                    }\r\n                    else if (longitudes) {\r\n                        lat = latitudes[i];\r\n                        lng = longitudes[i];\r\n                    }\r\n\r\n                    height = heights[i] / maxHeight;\r\n                    heat = heats[i] / maxHeat;\r\n\r\n                    var renderDatum = {\r\n                        lat: lat,\r\n                        lng: lng,\r\n                        height: height ? height || 0.01 : undefined,\r\n                        heightBySeries: heightsBySeries[i],\r\n                        seriesToolTipData: toolTipDataBySeries ? toolTipDataBySeries[i] : undefined,\r\n                        heat: heat || 0,\r\n                        toolTipData: {\r\n                            location: { displayName: locationDispName, value: locations[i] },\r\n                            height: { displayName: heightDispName, value: heightFormatter.format(heights[i]) },\r\n                            heat: { displayName: heatDispName, value: heatFormatter.format(heats[i]) }\r\n                        }\r\n                    };\r\n\r\n                    this.renderData.push(renderDatum);\r\n\r\n                    if (!longitudes && !latlng) {\r\n                        this.geocodeRenderDatum(renderDatum, place, locationType);\r\n                    }\r\n                }\r\n            }\r\n\r\n            try {\r\n                this.renderMagic();\r\n            } catch (e) {\r\n                console.error(e);\r\n            }\r\n        }\r\n\r\n        private geocodeRenderDatum(renderDatum, place, locationType) {\r\n            var placeKey = place + \"/\" + locationType;\r\n            this.globeMapLocationCache[placeKey] = {}; //store empty object so we don't send AJAX request again\r\n            this.locationsToLoad++;\r\n\r\n            try {\r\n                var geocoder = powerbi.visuals[\"BI\"].Services.GeocodingManager.geocode;\r\n            } catch (e) {\r\n                geocoder = services.geocode;\r\n            }\r\n\r\n            if (geocoder) {\r\n                geocoder(place, locationType).always((latlng: any) => {\r\n                    // we use always because we want to cache unknown values. \r\n                    // No point asking bing again and again when it tells us it doesn't know about a location\r\n                    this.globeMapLocationCache[placeKey] = latlng;\r\n                    this.locationsLoaded++;\r\n                    //console.log(place, latlng);\r\n\r\n                    if (latlng.latitude && latlng.longitude) {\r\n                        renderDatum.lat = latlng.latitude;\r\n                        renderDatum.lng = latlng.longitude;\r\n\r\n                        this.defferedRender();\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        private defferedRender() {\r\n            if (!this.deferredRenderTimerId) {\r\n                this.deferredRenderTimerId = setTimeout(() => {\r\n                    this.deferredRenderTimerId = null;\r\n                    this.composeRenderData();\r\n                }, 500);\r\n            }\r\n        }\r\n\r\n        private initRayCaster() {\r\n            this.rayCaster = new THREE.Raycaster();\r\n            var settings = this.settings;\r\n            var mousePosNormalized = this.mousePosNormalized = new THREE.Vector2();\r\n            var mousePos = this.mousePos = new THREE.Vector2();\r\n            var element = this.container.get(0);\r\n            var mouseDownTime;\r\n\r\n            $(this.domElement).on(\"mousemove\", (event) => {\r\n                // get coordinates in -1 to +1 space\r\n                var rect = element.getBoundingClientRect();\r\n                mousePos.x = event.clientX;\r\n                mousePos.y = event.clientY;\r\n                mousePosNormalized.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;\r\n                mousePosNormalized.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;\r\n                this.needsRender = true;\r\n            }).on(\"mousedown\", (event) => {\r\n                mouseDownTime = Date.now();\r\n            }).on(\"mouseup\", (event) => {\r\n                // Debounce slow clicks\r\n                if ((Date.now() - mouseDownTime) > settings.clickInterval) return;\r\n                if (this.hoveredBar && event.shiftKey) {\r\n                    this.selectedBar = this.hoveredBar;\r\n                    this.animateCamera(this.selectedBar.position, () => {\r\n                        if (!this.selectedBar) return;\r\n                        this.orbitControls.center.copy(this.selectedBar.position.clone().normalize().multiplyScalar(settings.earthRadius));\r\n                        this.orbitControls.minDistance = 1;\r\n                    });\r\n                } else {\r\n                    if (this.selectedBar) {\r\n                        this.animateCamera(this.selectedBar.position, () => {\r\n                            this.orbitControls.center.set(0, 0, 0);\r\n                            this.orbitControls.minDistance = settings.earthRadius + 1;\r\n                        });\r\n                        this.selectedBar = null;\r\n                    }\r\n                }\r\n            }).on(\"mousewheel DOMMouseScroll\", (e: any) => {\r\n                this.needsRender = true;\r\n                if (this.orbitControls.enabled && this.orbitControls.enableZoom) {\r\n                    this.heatTexture.needsUpdate = true;\r\n                    e = e.originalEvent;\r\n                    var delta = e.wheelDelta > 0 || e.detail < 0 ? 1 : -1;\r\n                    var scale = delta > 0 ? this.settings.heatmapScaleOnZoom : (1 / this.settings.heatmapScaleOnZoom);\r\n                    this.heatmap.multiply(scale);\r\n                    this.heatmap.update();\r\n                }\r\n            });\r\n        }\r\n\r\n        private intersectBars() {\r\n            if (!this.rayCaster || !this.barsGroup) return;\r\n            var rayCaster = this.rayCaster;\r\n            rayCaster.setFromCamera(this.mousePosNormalized, this.camera);\r\n            var intersects = rayCaster.intersectObjects(this.barsGroup.children);\r\n\r\n            if (intersects && intersects.length > 0) {\r\n                //console.log(intersects[0], this.mousePos.x, this.mousePos.y);\r\n                var object = intersects[0].object;\r\n                if (!object || !object.toolTipData) return;\r\n                var toolTipData = object.toolTipData;\r\n                var toolTipItems: TooltipDataItem[] = [];\r\n                if (toolTipData.location.displayName) toolTipItems.push(toolTipData.location);\r\n                if (toolTipData.series) toolTipItems.push(toolTipData.series);\r\n                if (toolTipData.height.displayName) toolTipItems.push(toolTipData.height);\r\n                if (toolTipData.heat.displayName) toolTipItems.push(toolTipData.heat);\r\n                this.hoveredBar = object;\r\n                TooltipManager.ToolTipInstance.show(toolTipItems, <TouchRect>{ x: this.mousePos.x, y: this.mousePos.y, width: 0, height: 0 });\r\n            } else {\r\n                this.hoveredBar = null;\r\n                TooltipManager.ToolTipInstance.hide();\r\n            }\r\n        }\r\n\r\n        private animateCamera(to: any, done?: Function) {\r\n            if (!this.camera) return;\r\n            var startTime = Date.now();\r\n            var duration = this.settings.cameraAnimDuration;\r\n            var endTime = startTime + duration;\r\n            var startPos = this.camera.position.clone().normalize();\r\n            var endPos = to.clone().normalize();\r\n            var length = this.camera.position.length();\r\n\r\n            var easeInOut = function (t) {\r\n                t *= 2;\r\n                if (t < 1) return (t * t * t) / 2;\r\n                t -= 2;\r\n                return (t * t * t + 2) / 2;\r\n            };\r\n\r\n            var onUpdate = () => {\r\n                var now = Date.now();\r\n                var t = (now - startTime) / duration;\r\n                if (t > 1) t = 1;\r\n                t = easeInOut(t);\r\n\r\n                var pos = new THREE.Vector3()\r\n                    .add(startPos.clone().multiplyScalar(1 - t))\r\n                    .add(endPos.clone().multiplyScalar(t))\r\n                    .normalize()\r\n                    .multiplyScalar(length);\r\n\r\n                this.camera.position = pos;\r\n\r\n                if (now < endTime) {\r\n                    requestAnimationFrame(onUpdate);\r\n                } else if (done) {\r\n                    done();\r\n                }\r\n\r\n                this.needsRender = true;\r\n            };\r\n            requestAnimationFrame(onUpdate);\r\n        }\r\n\r\n        public destroy() {\r\n            clearTimeout(this.deferredRenderTimerId);\r\n            this.renderLoopEnabled = false;\r\n            this.scene = null;\r\n            this.heatmap = null;\r\n            this.heatTexture = null;\r\n            this.camera = null;\r\n            if (this.renderer) {\r\n                if (this.renderer.context) {\r\n                    let extension = this.renderer.context.getExtension('WEBGL_lose_context');\r\n                    if (extension)\r\n                        extension.loseContext();\r\n                    this.renderer.context = null;\r\n                }\r\n                this.renderer.domElement = null;\r\n            }\r\n            this.renderer = null;\r\n            this.renderData = null;\r\n            this.barsGroup = null;\r\n            if (this.orbitControls) this.orbitControls.dispose();\r\n            this.orbitControls = null;\r\n            if (this.domElement) $(this.domElement)\r\n                .off(\"mousemove mouseup mousedown mousewheel DOMMouseScroll\");\r\n            this.domElement = null;\r\n            if (this.container) this.container.empty();\r\n        }\r\n\r\n        private initMercartorSphere() {\r\n            if (GlobeMap.MercartorSphere) return;\r\n\r\n            var MercartorSphere = function (radius, widthSegments, heightSegments) {\r\n                THREE.Geometry.call(this);\r\n\r\n                this.radius = radius;\r\n                this.widthSegments = widthSegments;\r\n                this.heightSegments = heightSegments;\r\n\r\n                this.t = 0;\r\n\r\n                var x, y, vertices = [], uvs = [];\r\n\r\n                function interplolate(a, b, t) {\r\n                    return (1 - t) * a + t * b;\r\n                }\r\n\r\n                // interpolates between sphere and plane\r\n                function interpolateVertex(u, v, t) {\r\n                    var maxLng = Math.PI * 2;\r\n                    var maxLat = Math.PI;\r\n                    var radius = this.radius;\r\n\r\n                    var sphereX = - radius * Math.cos(u * maxLng) * Math.sin(v * maxLat);\r\n                    var sphereY = - radius * Math.cos(v * maxLat);\r\n                    var sphereZ = radius * Math.sin(u * maxLng) * Math.sin(v * maxLat);\r\n\r\n                    var planeX = u * radius * 2 - radius;\r\n                    var planeY = v * radius * 2 - radius;\r\n                    var planeZ = 0;\r\n\r\n                    var x = interplolate(sphereX, planeX, t);\r\n                    var y = interplolate(sphereY, planeY, t);\r\n                    var z = interplolate(sphereZ, planeZ, t);\r\n\r\n                    return new THREE.Vector3(x, y, z);\r\n                }\r\n\r\n                // http://mathworld.wolfram.com/MercatorProjection.html\r\n                // Mercator projection goes form +85.05 to -85.05 degrees\r\n                function interpolateUV(u, v, t) {\r\n                    var lat = (v - 0.5) * 90 * 2 / 180 * Math.PI; //turn from 0-1 into lat in radians\r\n                    var sin = Math.sin(lat);\r\n                    var normalizedV = 0.5 + 0.25 * Math.log((1 + sin) / (1 - sin)) / Math.PI;\r\n                    return new THREE.Vector2(u, normalizedV);//interplolate(normalizedV1, v, t))\r\n                }\r\n\r\n                for (y = 0; y <= heightSegments; y++) {\r\n\r\n                    var verticesRow = [];\r\n                    var uvsRow = [];\r\n\r\n                    for (x = 0; x <= widthSegments; x++) {\r\n\r\n                        var u = x / widthSegments;\r\n                        var v = y / heightSegments;\r\n\r\n                        this.vertices.push(interpolateVertex.call(this, u, v, this.t));\r\n                        uvsRow.push(interpolateUV.call(this, u, v, this.t));\r\n                        verticesRow.push(this.vertices.length - 1);\r\n                    }\r\n\r\n                    vertices.push(verticesRow);\r\n                    uvs.push(uvsRow);\r\n\r\n                }\r\n\r\n                //console.log(vertices, uvs);\r\n\r\n                for (y = 0; y < this.heightSegments; y++) {\r\n\r\n                    for (x = 0; x < this.widthSegments; x++) {\r\n\r\n                        var v1 = vertices[y][x + 1];\r\n                        var v2 = vertices[y][x];\r\n                        var v3 = vertices[y + 1][x];\r\n                        var v4 = vertices[y + 1][x + 1];\r\n\r\n                        var n1 = this.vertices[v1].clone().normalize();\r\n                        var n2 = this.vertices[v2].clone().normalize();\r\n                        var n3 = this.vertices[v3].clone().normalize();\r\n                        var n4 = this.vertices[v4].clone().normalize();\r\n\r\n                        var uv1 = uvs[y][x + 1].clone();\r\n                        var uv2 = uvs[y][x].clone();\r\n                        var uv3 = uvs[y + 1][x].clone();\r\n                        var uv4 = uvs[y + 1][x + 1].clone();\r\n\r\n                        var normals = [n1, n2, n3, n4];\r\n\r\n                        this.faces.push(new THREE.Face4(v1, v2, v3, v4, normals));\r\n                        this.faceVertexUvs[0].push([uv1, uv2, uv3, uv4]);\r\n                    }\r\n\r\n                }\r\n\r\n                this.computeCentroids();\r\n                this.computeFaceNormals();\r\n\r\n                this.boundingSphere = new THREE.Sphere(new THREE.Vector3(), radius);\r\n            };\r\n\r\n            MercartorSphere.prototype = Object.create(THREE.Geometry.prototype);\r\n            GlobeMap.MercartorSphere = MercartorSphere;\r\n        }\r\n\r\n        private getBingMapCanvas(resolution): JQuery {\r\n            var tileSize = 256;\r\n            var numSegments = Math.pow(2, resolution);\r\n            var numTiles = numSegments * numSegments;\r\n            var tilesLoaded = 0;\r\n            var canvasSize = tileSize * numSegments;\r\n            var canvas: JQuery = $('<canvas/>').attr({ width: canvasSize, height: canvasSize });\r\n            var canvasElem: any = canvas.get(0);\r\n            var canvasContext = canvasElem.getContext(\"2d\");\r\n\r\n            function generateQuads(res, quad) {\r\n                if (res <= resolution) {\r\n                    if (res === resolution) {\r\n                        loadTile(quad);\r\n                        //console.log(res, maxResolution, quad);\r\n                    }\r\n\r\n                    generateQuads(res + 1, quad + \"0\");\r\n                    generateQuads(res + 1, quad + \"1\");\r\n                    generateQuads(res + 1, quad + \"2\");\r\n                    generateQuads(res + 1, quad + \"3\");\r\n                }\r\n            }\r\n\r\n            function loadTile(quad) {\r\n                var template: any = \"https://t{server}.tiles.virtualearth.net/tiles/r{quad}.jpeg?g=0&mkt={language}\";\r\n                var numServers = 7;\r\n                var server = Math.round(Math.random() * numServers);\r\n                var language = (navigator[\"languages\"] && navigator[\"languages\"].length) ? navigator[\"languages\"][0] : navigator.language;\r\n                var url = template.replace(\"{server}\", server)\r\n                    .replace(\"{quad}\", quad)\r\n                    .replace(\"{language}\", language);\r\n                var coords = getCoords(quad);\r\n                //console.log(quad, coords.x, coords.y)\r\n\r\n                var tile = new Image();\r\n                tile.onload = function () {\r\n                    tilesLoaded++;\r\n                    canvasContext.drawImage(tile, coords.x * tileSize, coords.y * tileSize, tileSize, tileSize);\r\n                    if (tilesLoaded === numTiles) {\r\n                        canvas.trigger(\"ready\", resolution);\r\n                    }\r\n                };\r\n\r\n                // So the canvas doesn't get tainted\r\n                tile.crossOrigin = '';\r\n                tile.src = url;\r\n            }\r\n\r\n            function getCoords(quad) {\r\n                var x = 0;\r\n                var y = 0;\r\n                var last = quad.length - 1;\r\n\r\n                for (var i = last; i >= 0; i--) {\r\n                    var chr = quad.charAt(i);\r\n                    var pow = Math.pow(2, last - i);\r\n\r\n                    if (chr === \"1\") {\r\n                        x += pow;\r\n                    } else if (chr === \"2\") {\r\n                        y += pow;\r\n                    } else if (chr === \"3\") {\r\n                        x += pow;\r\n                        y += pow;\r\n                    }\r\n                }\r\n\r\n                return { x: x, y: y };\r\n            }\r\n\r\n            generateQuads(0, \"\");\r\n            return canvas;\r\n        }\r\n    }\r\n}\r\n\r\nfunction loadGlobeMapLibs() {\r\n    // include GlobeMapLibs.js\r\n}","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.visuals.samples {\r\n    import SelectionManager = utility.SelectionManager;\r\n    import ClassAndSelector = jsCommon.CssConstants.ClassAndSelector;\r\n    import CreateClassAndSelector = jsCommon.CssConstants.createClassAndSelector;\r\n    import PixelConverter = jsCommon.PixelConverter;\r\n\r\n    export interface RadarChartConstructorOptions {\r\n        animator?: IGenericAnimator;\r\n        svg?: D3.Selection;\r\n        margin?: IMargin;\r\n    }\r\n\r\n    export interface RadarChartDatapoint extends SelectableDataPoint {\r\n        x: number;\r\n        y: number;\r\n        y0?: number;\r\n        color?: string;\r\n        value?: number;\r\n        tooltipInfo?: TooltipDataItem[];\r\n        labelFormatString?: string;\r\n        labelFontSize?: string;\r\n    }\r\n\r\n    export interface RadarChartData {\r\n        legendData: LegendData;\r\n        series: RadarChartSeries[];\r\n        settings: RadarChartSettings;\r\n        dataLabelsSettings: PointDataLabelsSettings;\r\n    }\r\n\r\n    export interface RadarChartSeries {\r\n        fill: string;\r\n        name: string;\r\n        data: RadarChartDatapoint[];\r\n        identity: SelectionId;\r\n    }\r\n\r\n    export interface RadarChartSettings {\r\n        showLegend?: boolean;\r\n    }\r\n\r\n    export interface RadarChartBehaviorOptions {\r\n        selection: D3.Selection;\r\n        clearCatcher: D3.Selection;\r\n    }\r\n    \r\n    /**\r\n     * RadarChartBehavior\r\n     */\r\n    export class RadarChartWebBehavior implements IInteractiveBehavior {\r\n        private selection: D3.Selection;\r\n\r\n        public bindEvents(options: RadarChartBehaviorOptions, selectionHandler: ISelectionHandler): void {\r\n            let selection = this.selection = options.selection;\r\n            let clearCatcher = options.clearCatcher;\r\n\r\n            selection.on('click', function (d: SelectableDataPoint) {\r\n                selectionHandler.handleSelection(d, d3.event.ctrlKey);\r\n                d3.event.stopPropagation();\r\n            });\r\n\r\n            clearCatcher.on('click', function () {\r\n                selectionHandler.handleClearSelection();\r\n            });\r\n        }\r\n\r\n        public renderSelection(hasSelection: boolean): void {\r\n            this.selection.style(\"opacity\", (d: SelectableDataPoint) => (hasSelection && !d.selected) ? RadarChart.DimmedAreaFillOpacity : RadarChart.AreaFillOpacity);\r\n        }\r\n    }\r\n\r\n    export class RadarChart implements IVisual {\r\n        public static capabilities: VisualCapabilities = {\r\n            dataRoles: [\r\n                {\r\n                    displayName: 'Category',\r\n                    name: 'Category',\r\n                    kind: powerbi.VisualDataRoleKind.Grouping,\r\n                },\r\n                {\r\n                    displayName: 'Y Axis',\r\n                    name: 'Y',\r\n                    kind: powerbi.VisualDataRoleKind.Measure,\r\n                },\r\n            ],\r\n            dataViewMappings: [{\r\n                conditions: [{ 'Category': { min: 1, max: 1 } }],\r\n                categorical: {\r\n                    categories: {\r\n                        for: { in: 'Category' },\r\n                        dataReductionAlgorithm: { top: {} }\r\n                    },\r\n                    values: {\r\n                        select: [{ bind: { to: 'Y' } }]\r\n                    }\r\n                }\r\n            }],\r\n            objects: {\r\n                general: {\r\n                    displayName: data.createDisplayNameGetter('Visual_General'),\r\n                    properties: {\r\n                        formatString: {\r\n                            type: { formatting: { formatString: true } },\r\n                        },\r\n                    },\r\n                },\r\n                legend: {\r\n                    displayName: data.createDisplayNameGetter('Visual_Legend'),\r\n                    description: data.createDisplayNameGetter('Visual_LegendDescription'),\r\n                    properties: {\r\n                        show: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Show'),\r\n                            type: { bool: true }\r\n                        },\r\n                        position: {\r\n                            displayName: data.createDisplayNameGetter('Visual_LegendPosition'),\r\n                            description: data.createDisplayNameGetter('Visual_LegendPositionDescription'),\r\n                            type: { enumeration: legendPosition.type }\r\n                        },\r\n                        showTitle: {\r\n                            displayName: data.createDisplayNameGetter('Visual_LegendShowTitle'),\r\n                            description: data.createDisplayNameGetter('Visual_LegendShowTitleDescription'),\r\n                            type: { bool: true }\r\n                        },\r\n                        titleText: {\r\n                            displayName: data.createDisplayNameGetter('Visual_LegendName'),\r\n                            description: data.createDisplayNameGetter('Visual_LegendNameDescription'),\r\n                            type: { text: true },\r\n                            suppressFormatPainterCopy: true\r\n                        },\r\n                        labelColor: {\r\n                            displayName: data.createDisplayNameGetter('Visual_LegendTitleColor'),\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        fontSize: {\r\n                            displayName: data.createDisplayNameGetter('Visual_TextSize'),\r\n                            type: { formatting: { fontSize: true } }\r\n                        }\r\n                    }\r\n                },\r\n                dataPoint: {\r\n                    displayName: data.createDisplayNameGetter('Visual_DataPoint'),\r\n                    description: data.createDisplayNameGetter('Visual_DataPointDescription'),\r\n                    properties: {\r\n                        fill: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Fill'),\r\n                            type: { fill: { solid: { color: true } } }\r\n                        }\r\n                    }\r\n                },\r\n                labels: {\r\n                    displayName: data.createDisplayNameGetter('Visual_DataPointsLabels'),\r\n                    description: data.createDisplayNameGetter('Visual_DataPointsLabelsDescription'),\r\n                    properties: {\r\n                        show: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Show'),\r\n                            type: { bool: true }\r\n                        },\r\n                        color: {\r\n                            displayName: data.createDisplayNameGetter('Visual_LabelsFill'),\r\n                            description: data.createDisplayNameGetter('Visual_LabelsFillDescription'),\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        labelDisplayUnits: {\r\n                            displayName: data.createDisplayNameGetter('Visual_DisplayUnits'),\r\n                            description: data.createDisplayNameGetter('Visual_DisplayUnitsDescription'),\r\n                            type: { formatting: { labelDisplayUnits: true } },\r\n                            suppressFormatPainterCopy: true,\r\n                        },\r\n                        labelPrecision: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Precision'),\r\n                            description: data.createDisplayNameGetter('Visual_PrecisionDescription'),\r\n                            placeHolderText: data.createDisplayNameGetter('Visual_Precision_Auto'),\r\n                            type: { numeric: true },\r\n                            suppressFormatPainterCopy: true,\r\n                        },\r\n                        fontSize: {\r\n                            displayName: data.createDisplayNameGetter('Visual_TextSize'),\r\n                            type: { formatting: { fontSize: true } }\r\n                        },\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        /** Note: Public for testability */\r\n        public static formatStringProp: DataViewObjectPropertyIdentifier = {\r\n            objectName: 'general',\r\n            propertyName: 'formatString',\r\n        };\r\n\r\n        private static Properties: any = {\r\n            legend: {\r\n                show: <DataViewObjectPropertyIdentifier>{ objectName: 'legend', propertyName: 'show' }\r\n            },\r\n            dataPoint: {\r\n                fill: <DataViewObjectPropertyIdentifier>{ objectName: 'dataPoint', propertyName: 'fill' }\r\n            },\r\n            labels: {\r\n                show: <DataViewObjectPropertyIdentifier>{ objectName: 'labels', propertyName: 'show' },\r\n                color: <DataViewObjectPropertyIdentifier>{ objectName: 'labels', propertyName: 'color' },\r\n                displayUnits: <DataViewObjectPropertyIdentifier>{ objectName: 'labels', propertyName: 'labelDisplayUnits' },\r\n                precision: <DataViewObjectPropertyIdentifier>{ objectName: 'labels', propertyName: 'labelPrecision' },\r\n                fontSize: <DataViewObjectPropertyIdentifier>{ objectName: 'labels', propertyName: 'fontSize' },\r\n            }\r\n        };\r\n\r\n        private static VisualClassName = 'radarChart';\r\n        private static Segments: ClassAndSelector = CreateClassAndSelector('segments');\r\n        private static SegmentNode: ClassAndSelector = CreateClassAndSelector('segmentNode');\r\n        private static Axis: ClassAndSelector = CreateClassAndSelector('axis');\r\n        private static AxisNode: ClassAndSelector = CreateClassAndSelector('axisNode');\r\n        private static AxisLabel: ClassAndSelector = CreateClassAndSelector('axisLabel');\r\n        private static Chart: ClassAndSelector = CreateClassAndSelector('chart');\r\n        private static ChartNode: ClassAndSelector = CreateClassAndSelector('chartNode');\r\n        private static ChartPolygon: ClassAndSelector = CreateClassAndSelector('chartPolygon');\r\n        private static ChartDot: ClassAndSelector = CreateClassAndSelector('chartDot');\r\n\r\n        private svg: D3.Selection;\r\n        private segments: D3.Selection;\r\n        private axis: D3.Selection;\r\n        private chart: D3.Selection;\r\n\r\n        private mainGroupElement: D3.Selection;\r\n        private colors: IDataColorPalette;\r\n        private selectionManager: SelectionManager;\r\n        private viewport: IViewport;\r\n        private interactivityService: IInteractivityService;\r\n\r\n        private animator: IGenericAnimator;\r\n        private margin: IMargin;\r\n        private legend: ILegend;\r\n        private legendObjectProperties: DataViewObject;\r\n        private radarChartData: RadarChartData;\r\n        private isInteractiveChart: boolean;\r\n\r\n        private static DefaultMargin: IMargin = {\r\n            top: 50,\r\n            bottom: 50,\r\n            right: 100,\r\n            left: 100\r\n        };\r\n\r\n        private static SegmentLevels: number = 6;\r\n        private static SegmentFactor: number = 1;\r\n        private static Radians: number = 2 * Math.PI;\r\n        private static Scale: number = 1;\r\n        public static AreaFillOpacity = 1;\r\n        public static DimmedAreaFillOpacity = 0.4;\r\n        private angle: number;\r\n        private radius: number;\r\n\r\n        public static converter(dataView: DataView, colors: IDataColorPalette): RadarChartData {\r\n            if (!dataView ||\r\n                !dataView.categorical ||\r\n                !dataView.categorical.categories ||\r\n                !(dataView.categorical.categories.length > 0) ||\r\n                !dataView.categorical.categories[0] ||\r\n                !dataView.categorical.values ||\r\n                !(dataView.categorical.values.length > 0)) {\r\n                return {\r\n                    legendData: {\r\n                        dataPoints: []\r\n                    },\r\n                    settings: {\r\n                        showLegend: true\r\n                    },\r\n                    series: [],\r\n                    dataLabelsSettings: dataLabelUtils.getDefaultPointLabelSettings(),\r\n                };\r\n            }\r\n\r\n            let catDv: DataViewCategorical = dataView.categorical;\r\n            let values = catDv.values;\r\n            let series: RadarChartSeries[] = [];\r\n            let colorHelper = new ColorHelper(colors, RadarChart.Properties.dataPoint.fill);\r\n            let legendData: LegendData = {\r\n                fontSize: 8.25,\r\n                dataPoints: [],\r\n                title: \"\"\r\n            };\r\n\r\n            //Parse legend settings          \r\n            let legendSettings: RadarChartSettings = RadarChart.parseSettings(dataView);\r\n            let dataLabelsSettings: PointDataLabelsSettings = RadarChart.parseLabelSettings(dataView);\r\n\r\n            for (let i = 0, iLen = values.length; i < iLen; i++) {\r\n                let color = colors.getColorByIndex(i).value,\r\n                    serieIdentity: SelectionId,\r\n                    queryName: string,\r\n                    displayName: string,\r\n                    dataPoints: RadarChartDatapoint[] = [];\r\n\r\n                if (values[i].source) {\r\n                    let source = values[i].source;\r\n\r\n                    if (source.queryName) {\r\n                        queryName = source.queryName;\r\n                        serieIdentity = SelectionId.createWithMeasure(queryName);\r\n                    }\r\n\r\n                    if (source.displayName)\r\n                        displayName = source.displayName;\r\n\r\n                    if (source.objects) {\r\n                        let objects: any = source.objects;\r\n                        color = colorHelper.getColorForMeasure(objects, queryName);\r\n                    }\r\n                }\r\n\r\n                legendData.dataPoints.push({\r\n                    label: displayName,\r\n                    color: color,\r\n                    icon: LegendIcon.Box,\r\n                    selected: false,\r\n                    identity: serieIdentity\r\n                });\r\n\r\n                for (let k = 0, kLen = values[i].values.length; k < kLen; k++) {\r\n\r\n                    let dataPointIdentity = SelectionIdBuilder\r\n                        .builder()\r\n                        .withMeasure(queryName)\r\n                        .withCategory(catDv.categories[0], k)\r\n                        .withSeries(dataView.categorical.values, dataView.categorical.values[i])\r\n                        .createSelectionId();\r\n\r\n                    let tooltipInfo: TooltipDataItem[] = TooltipBuilder.createTooltipInfo(RadarChart.formatStringProp,\r\n                        catDv,\r\n                        catDv.categories[0].values[k],\r\n                        values[i].values[k],\r\n                        null,\r\n                        null,\r\n                        i);\r\n\r\n                    let labelFormatString = valueFormatter.getFormatString(catDv.values[i].source, RadarChart.formatStringProp);\r\n                    let fontSizeInPx = jsCommon.PixelConverter.fromPoint(dataLabelsSettings.fontSize);\r\n\r\n                    dataPoints.push({\r\n                        x: k,\r\n                        y: values[i].values[k],\r\n                        color: color,\r\n                        identity: dataPointIdentity,\r\n                        selected: false,\r\n                        tooltipInfo: tooltipInfo,\r\n                        value: values[i].values[k],\r\n                        labelFormatString: labelFormatString,\r\n                        labelFontSize: fontSizeInPx,\r\n                    });\r\n                }\r\n\r\n                if (dataPoints.length > 0)\r\n                    series.push({\r\n                        fill: color,\r\n                        name: displayName,\r\n                        data: dataPoints,\r\n                        identity: serieIdentity,\r\n                    });\r\n            }\r\n\r\n            return {\r\n                legendData: legendData,\r\n                settings: legendSettings,\r\n                series: series,\r\n                dataLabelsSettings: dataLabelsSettings,\r\n            };\r\n        }\r\n\r\n        public constructor(options?: RadarChartConstructorOptions) {\r\n\r\n            if (options) {\r\n                if (options.svg)\r\n                    this.svg = options.svg;\r\n\r\n                if (options.animator)\r\n                    this.animator = options.animator;\r\n\r\n                if (options.margin)\r\n                    this.margin = options.margin;\r\n            }\r\n        }\r\n\r\n        public init(options: VisualInitOptions): void {\r\n            let element = options.element;\r\n            this.selectionManager = new SelectionManager({ hostServices: options.host });\r\n\r\n            if (!this.svg) {\r\n                this.svg = d3.select(element.get(0)).append('svg');\r\n                this.svg.style('position', 'absolute');\r\n            }\r\n\r\n            if (!this.margin)\r\n                this.margin = RadarChart.DefaultMargin;\r\n\r\n            this.svg.classed(RadarChart.VisualClassName, true);\r\n            this.interactivityService = visuals.createInteractivityService(options.host);\r\n            this.isInteractiveChart = options.interactivity && options.interactivity.isInteractiveLegend;\r\n            this.legend = createLegend(element,\r\n                this.isInteractiveChart,\r\n                this.interactivityService,\r\n                true,\r\n                LegendPosition.Top);\r\n            this.colors = options.style.colorPalette.dataColors;\r\n            this.mainGroupElement = this.svg.append('g');\r\n\r\n            this.segments = this.mainGroupElement\r\n                .append('g')\r\n                .classed(RadarChart.Segments.class, true);\r\n\r\n            this.axis = this.mainGroupElement\r\n                .append('g')\r\n                .classed(RadarChart.Axis.class, true);\r\n\r\n            this.chart = this.mainGroupElement\r\n                .append('g')\r\n                .classed(RadarChart.Chart.class, true);\r\n        }\r\n\r\n        public update(options: VisualUpdateOptions): void {\r\n            if (!options.dataViews || !options.dataViews[0])\r\n                return;\r\n\r\n            let dataView = options.dataViews[0];\r\n            this.radarChartData = RadarChart.converter(dataView, this.colors);\r\n            let categories: any[] = [],\r\n                series = this.radarChartData.series,\r\n                dataViewMetadataColumn: DataViewMetadataColumn,\r\n                duration = AnimatorCommon.GetAnimationDuration(this.animator, options.suppressAnimations);\r\n\r\n            if (dataView.categorical &&\r\n                dataView.categorical.categories &&\r\n                dataView.categorical.categories[0] &&\r\n                dataView.categorical.categories[0].values)\r\n                categories = dataView.categorical.categories[0].values;\r\n\r\n            if (dataView.metadata && dataView.metadata.columns && dataView.metadata.columns.length > 0)\r\n                dataViewMetadataColumn = dataView.metadata.columns[0];\r\n\r\n            this.viewport = {\r\n                height: options.viewport.height > 0 ? options.viewport.height : 0,\r\n                width: options.viewport.width > 0 ? options.viewport.width : 0\r\n            };\r\n\r\n            this.parseLegendProperties(dataView);\r\n            this.renderLegend(this.radarChartData);\r\n            this.updateViewport();\r\n\r\n            this.svg\r\n                .attr({\r\n                    'height': this.viewport.height,\r\n                    'width': this.viewport.width\r\n                });\r\n\r\n            let mainGroup = this.mainGroupElement;\r\n            mainGroup.attr('transform', SVGUtil.translate(this.viewport.width / 2, this.viewport.height / 2));\r\n           \r\n            let width: number = this.viewport.width - this.margin.left - this.margin.right;\r\n            let height: number = this.viewport.height - this.margin.top - this.margin.bottom;\r\n\r\n            this.angle = RadarChart.Radians / categories.length;\r\n            this.radius = RadarChart.SegmentFactor * RadarChart.Scale * Math.min(width, height) / 2;\r\n\r\n            this.drawCircularSegments(categories);\r\n            this.drawAxes(categories);\r\n            this.drawAxesLabels(categories, dataViewMetadataColumn);\r\n            this.drawChart(series, duration);\r\n            this.drawDataLabels(series);\r\n        }\r\n\r\n        private getRadarChartLabelLayout(labelSettings: PointDataLabelsSettings, allDataPoints: RadarChartDatapoint[]): ILabelLayout {\r\n\r\n            let formattersCache = dataLabelUtils.createColumnFormatterCacheManager();\r\n            let angle: number = this.angle;\r\n            let radius: number = this.radius;\r\n            let dataPoints: RadarChartDatapoint[][] = this.getDataPoints(this.radarChartData.series);\r\n            let stack = d3.layout.stack();\r\n            let layers = stack(dataPoints);\r\n            let viewport = this.viewport;\r\n            let halfHeight = this.viewport.height / 2;\r\n            let halfWidth = this.viewport.width / 2;\r\n            let y = d3.scale.linear()\r\n                .domain([0, d3.max(layers, (layer) => {\r\n                    return d3.max(layer, (d) => {\r\n                        return d.y0 + d.y;\r\n                    });\r\n                })]).range([0, radius]);\r\n\r\n            return {\r\n                labelText: (d: RadarChartDatapoint) => {\r\n\r\n                    let formmater = formattersCache.getOrCreate(d.labelFormatString, labelSettings);\r\n\r\n                    if (labelSettings.displayUnits === 0) {\r\n                        let maxDataPoint: RadarChartDatapoint = _.max(allDataPoints, d => d.value);\r\n                        let maxValue = maxDataPoint.value > 0 ? maxDataPoint.value : 0;\r\n\r\n                        formmater = formattersCache.getOrCreate(d.labelFormatString, labelSettings, maxValue);\r\n                    }\r\n                    return dataLabelUtils.getLabelFormattedText({ label: formmater.format(d.value), maxWidth: viewport.width, fontSize: labelSettings.fontSize });\r\n                },\r\n                labelLayout: {\r\n                    x: (d: RadarChartDatapoint) => -1 * y(d.y) * Math.sin(d.x * angle) + halfWidth,\r\n                    y: (d: RadarChartDatapoint) => -1 * y(d.y) * Math.cos(d.x * angle) + halfHeight - 10,\r\n                },\r\n                filter: (d: RadarChartDatapoint) => {\r\n                    return (d != null && d.value != null);\r\n                },\r\n                style: {\r\n                    'fill': labelSettings.labelColor,\r\n                    'font-size': (d: RadarChartDatapoint) => PixelConverter.fromPoint(labelSettings.fontSize),\r\n                },\r\n            };\r\n        }\r\n\r\n        private drawCircularSegments(values: string[]): void {\r\n            let data = [];\r\n            let angle: number = this.angle,\r\n                factor: number = RadarChart.SegmentFactor,\r\n                levels: number = RadarChart.SegmentLevels,\r\n                radius: number = this.radius;\r\n\r\n            for (let level = 0; level < levels - 1; level++) {\r\n                let levelFactor: number = radius * ((level + 1) / levels);\r\n                let transform: number = -1 * levelFactor;\r\n\r\n                for (let i = 0; i < values.length; i++)\r\n                    data.push({\r\n                        x1: levelFactor * (1 - factor * Math.sin(i * angle)),\r\n                        y1: levelFactor * (1 - factor * Math.cos(i * angle)),\r\n                        x2: levelFactor * (1 - factor * Math.sin((i + 1) * angle)),\r\n                        y2: levelFactor * (1 - factor * Math.cos((i + 1) * angle)),\r\n                        translate: SVGUtil.translate(transform, transform)\r\n                    });\r\n            }\r\n\r\n            let selection = this.mainGroupElement\r\n                .select(RadarChart.Segments.selector)\r\n                .selectAll(RadarChart.SegmentNode.selector)\r\n                .data(data);\r\n\r\n            selection\r\n                .enter()\r\n                .append('svg:line')\r\n                .classed(RadarChart.SegmentNode.class, true);\r\n            selection\r\n                .attr({\r\n                    'x1': item => item.x1,\r\n                    'y1': item => item.y1,\r\n                    'x2': item => item.x2,\r\n                    'y2': item => item.y2,\r\n                    'transform': item => item.translate\r\n                });\r\n\r\n            selection.exit().remove();\r\n        }\r\n\r\n        private drawDataLabels(series: RadarChartSeries[]): void {\r\n\r\n            let allDataPoints: RadarChartDatapoint[] = this.getAllDataPointsList(series);\r\n\r\n            if (this.radarChartData.dataLabelsSettings.show) {\r\n                let layout = this.getRadarChartLabelLayout(this.radarChartData.dataLabelsSettings, allDataPoints);\r\n                let viewport = this.viewport;\r\n                let labels = dataLabelUtils.drawDefaultLabelsForDataPointChart(allDataPoints, this.mainGroupElement, layout, viewport);\r\n\r\n                if (labels)\r\n                    labels.attr('transform', SVGUtil.translate(-(viewport.width / 2), -(viewport.height / 2)));\r\n            }\r\n            else\r\n                dataLabelUtils.cleanDataLabels(this.mainGroupElement);\r\n        }\r\n\r\n        private drawAxes(values: string[]): void {\r\n\r\n            let angle: number = this.angle,\r\n                radius: number = -1 * this.radius;\r\n\r\n            let selection: D3.Selection = this.mainGroupElement\r\n                .select(RadarChart.Axis.selector)\r\n                .selectAll(RadarChart.AxisNode.selector);\r\n\r\n            let axis = selection.data(values);\r\n\r\n            axis\r\n                .enter()\r\n                .append('svg:line');\r\n            axis\r\n                .attr({\r\n                    'x1': 0,\r\n                    'y1': 0,\r\n                    'x2': (name, i) => radius * Math.sin(i * angle),\r\n                    'y2': (name, i) => radius * Math.cos(i * angle)\r\n                })\r\n                .classed(RadarChart.AxisNode.class, true);\r\n\r\n            axis.exit().remove();\r\n        }\r\n\r\n        private drawAxesLabels(values: string[], dataViewMetadataColumn?: DataViewMetadataColumn): void {\r\n            let angle: number = this.angle,\r\n                radius: number = -1 * this.radius,\r\n                length: number = values.length;\r\n\r\n            let formatter = valueFormatter.create({\r\n                format: valueFormatter.getFormatString(dataViewMetadataColumn, RadarChart.formatStringProp, true),\r\n                value: values[0],\r\n                value2: values[length - 1],\r\n            });\r\n\r\n            let selection: D3.Selection = this.mainGroupElement\r\n                .select(RadarChart.Axis.selector)\r\n                .selectAll(RadarChart.AxisLabel.selector);\r\n\r\n            let labels = selection.data(values);\r\n\r\n            labels\r\n                .enter()\r\n                .append('svg:text');\r\n\r\n            labels\r\n                .attr({\r\n                    'text-anchor': 'middle',\r\n                    'dy': '1.5em',\r\n                    'transform': SVGUtil.translate(0, -10),\r\n                    'x': (name, i) => { return (radius - 20) * Math.sin(i * angle); },\r\n                    'y': (name, i) => { return (radius - 10) * Math.cos(i * angle); }\r\n                })\r\n                .text(item => formatter.format(item))\r\n                .classed(RadarChart.AxisLabel.class, true);\r\n\r\n            labels.exit().remove();\r\n        }\r\n\r\n        private drawChart(series: RadarChartSeries[], duration: number): void {\r\n            let angle: number = this.angle,\r\n                radius: number = this.radius,\r\n                dotRadius: number = 5,\r\n                dataPoints: RadarChartDatapoint[][] = this.getDataPoints(series);\r\n\r\n            let stack = d3.layout.stack();\r\n            let layers = stack(dataPoints);\r\n\r\n            let y = d3.scale.linear()\r\n                .domain([0, d3.max(layers, (layer) => {\r\n                    return d3.max(layer, (d) => {\r\n                        return d.y0 + d.y;\r\n                    });\r\n                })]).range([0, radius]);\r\n\r\n            let calculatePoints = (points) => {\r\n                return points.map((value) => {\r\n                    let x1 = -1 * y(value.y) * Math.sin(value.x * angle);\r\n                    let y1 = -1 * y(value.y) * Math.cos(value.x * angle);\r\n                    return `${x1},${y1}`;\r\n                }).join(' ');\r\n            };\r\n\r\n            let selection = this.chart.selectAll(RadarChart.ChartNode.selector).data(layers);\r\n\r\n            selection\r\n                .enter()\r\n                .append('g')\r\n                .classed(RadarChart.ChartNode.class, true);\r\n\r\n            let polygon = selection.selectAll(RadarChart.ChartPolygon.selector).data(d => {\r\n                if (d && d.length > 0) {\r\n                    return [d];\r\n                }\r\n\r\n                return [];\r\n            });\r\n            polygon\r\n                .enter()\r\n                .append('polygon')\r\n                .classed(RadarChart.ChartPolygon.class, true);\r\n            polygon\r\n                .style('fill', d => d[0].color)\r\n                .style('opacity', RadarChart.DimmedAreaFillOpacity)\r\n                .on('mouseover', function (d) {\r\n                    d3.select(this).transition()\r\n                        .duration(duration)\r\n                        .style('opacity', RadarChart.AreaFillOpacity);\r\n                })\r\n                .on('mouseout', function (d) {\r\n                    d3.select(this).transition()\r\n                        .duration(duration)\r\n                        .style('opacity', RadarChart.DimmedAreaFillOpacity);\r\n                })\r\n                .attr('points', calculatePoints);\r\n            polygon.exit().remove();\r\n\r\n            let dots = selection.selectAll(RadarChart.ChartDot.selector)\r\n                .data((d: RadarChartDatapoint[]) => { return d.filter(d => d.y != null); });\r\n\r\n            dots.enter()\r\n                .append('svg:circle')\r\n                .classed(RadarChart.ChartDot.class, true);\r\n            dots.attr('r', dotRadius)\r\n                .attr({\r\n                    'cx': (value) => -1 * y(value.y) * Math.sin(value.x * angle),\r\n                    'cy': (value) => -1 * y(value.y) * Math.cos(value.x * angle)\r\n                })\r\n                .style('fill', d => d.color);\r\n\r\n            dots.exit().remove();\r\n\r\n            TooltipManager.addTooltip(dots, (tooltipEvent: TooltipEvent) => tooltipEvent.data.tooltipInfo, true);\r\n\r\n            selection.exit().remove();\r\n\r\n            let behaviorOptions: RadarChartBehaviorOptions = undefined;\r\n\r\n            if (this.interactivityService) {\r\n                \t\t\t\t\t                      \r\n                // Register interactivity\r\n                let dataPointsToBind = this.getAllDataPointsList(series);\r\n\r\n                behaviorOptions = { selection: dots, clearCatcher: this.svg };\r\n                this.interactivityService.bind(dataPointsToBind, new RadarChartWebBehavior(), behaviorOptions);\r\n            }\r\n        }\r\n\r\n        private renderLegend(radarChartData: RadarChartData): void {\r\n            if (!radarChartData.legendData)\r\n                return;\r\n\r\n            let legendData: LegendData = radarChartData.legendData;\r\n\r\n            if (this.legendObjectProperties) {\r\n                LegendData.update(legendData, this.legendObjectProperties);\r\n                let position = <string>this.legendObjectProperties[legendProps.position];\r\n\r\n                if (position)\r\n                    this.legend.changeOrientation(LegendPosition[position]);\r\n            }\r\n            else\r\n                this.legend.changeOrientation(LegendPosition.Top);\r\n\r\n            let viewport = this.viewport;\r\n            this.legend.drawLegend(legendData, { height: viewport.height, width: viewport.width });\r\n            Legend.positionChartArea(this.svg, this.legend);\r\n        }\r\n\r\n        private getDataPoints(series: RadarChartSeries[]): RadarChartDatapoint[][] {\r\n            let dataPoints: RadarChartDatapoint[][] = [];\r\n\r\n            for (let serie of series) {\r\n                dataPoints.push(serie.data);\r\n            }\r\n\r\n            return dataPoints;\r\n        }\r\n\r\n        private getAllDataPointsList(series: RadarChartSeries[]): RadarChartDatapoint[] {\r\n            let dataPoints: RadarChartDatapoint[] = [];\r\n\r\n            for (let serie of series) {\r\n                dataPoints = dataPoints.concat(serie.data);\r\n            }\r\n\r\n            return dataPoints;\r\n        }\r\n\r\n        private parseLegendProperties(dataView: DataView): void {\r\n            if (!dataView || !dataView.metadata) {\r\n                this.legendObjectProperties = {};\r\n                return;\r\n            }\r\n\r\n            this.legendObjectProperties = DataViewObjects.getObject(dataView.metadata.objects, \"legend\", {});\r\n        }\r\n\r\n        private static parseSettings(dataView: DataView): RadarChartSettings {\r\n            let objects: DataViewObjects;\r\n\r\n            if (!dataView || !dataView.metadata || !dataView.metadata.columns || !dataView.metadata.objects)\r\n                objects = null;\r\n            else\r\n                objects = dataView.metadata.objects;\r\n\r\n            return {\r\n                showLegend: DataViewObjects.getValue(objects, RadarChart.Properties.legend.show, true)\r\n            };\r\n        }\r\n\r\n        private static parseLabelSettings(dataView: DataView): PointDataLabelsSettings {\r\n            let objects: DataViewObjects;\r\n\r\n            if (!dataView || !dataView.metadata || !dataView.metadata.objects)\r\n                objects = null;\r\n            else\r\n                objects = dataView.metadata.objects;\r\n\r\n            let dataLabelsSettings: PointDataLabelsSettings = dataLabelUtils.getDefaultPointLabelSettings();\r\n\r\n            let labelsObj: PointDataLabelsSettings = {\r\n                show: DataViewObjects.getValue(objects, RadarChart.Properties.labels.show, dataLabelsSettings.show),\r\n                labelColor: DataViewObjects.getFillColor(objects, RadarChart.Properties.labels.color, dataLabelsSettings.labelColor),\r\n                displayUnits: DataViewObjects.getValue(objects, RadarChart.Properties.labels.displayUnits, dataLabelsSettings.displayUnits),\r\n                precision: DataViewObjects.getValue(objects, RadarChart.Properties.labels.precision, dataLabelsSettings.precision),\r\n                fontSize: DataViewObjects.getValue(objects, RadarChart.Properties.labels.fontSize, dataLabelsSettings.fontSize),\r\n                position: dataLabelsSettings.position\r\n            };\r\n\r\n            return labelsObj;\r\n        }\r\n\r\n        // This function returns the values to be displayed in the property pane for each object.\r\n        // Usually it is a bind pass of what the property pane gave you, but sometimes you may want to do\r\n        // validation and return other values/defaults\r\n        public enumerateObjectInstances(options: EnumerateVisualObjectInstancesOptions): VisualObjectInstanceEnumeration {\r\n            let enumeration = new ObjectEnumerationBuilder();\r\n            let settings: RadarChartSettings;\r\n\r\n            if (!this.radarChartData || !this.radarChartData.settings)\r\n                return [];\r\n\r\n            settings = this.radarChartData.settings;\r\n\r\n            switch (options.objectName) {\r\n                case \"legend\":\r\n                    enumeration.pushInstance(this.enumerateLegend(settings));\r\n                    break;\r\n                case \"dataPoint\":\r\n                    this.enumerateDataPoint(enumeration);\r\n                    break;\r\n                case 'labels':\r\n                    this.enumerateDataLabels(enumeration);\r\n                    break;\r\n            }\r\n\r\n            return enumeration.complete();\r\n        }\r\n\r\n        private getLabelSettingsOptions(enumeration: ObjectEnumerationBuilder, labelSettings: PointDataLabelsSettings): VisualDataLabelsSettingsOptions {\r\n            return {\r\n                enumeration: enumeration,\r\n                dataLabelsSettings: labelSettings,\r\n                show: true,\r\n                displayUnits: true,\r\n                precision: true,\r\n                fontSize: true,\r\n            };\r\n        }\r\n\r\n        private enumerateDataLabels(enumeration: ObjectEnumerationBuilder): void {\r\n            let labelSettings = this.radarChartData.dataLabelsSettings;\r\n           \r\n            //Draw default settings\r\n            dataLabelUtils.enumerateDataLabels(this.getLabelSettingsOptions(enumeration, labelSettings));\r\n        }\r\n\r\n        private enumerateLegend(settings: RadarChartSettings): VisualObjectInstance {\r\n            let showTitle: boolean = true,\r\n                titleText: string = \"\",\r\n                legend: VisualObjectInstance,\r\n                labelColor: DataColorPalette,\r\n                fontSize: number = 8;\r\n\r\n            showTitle = DataViewObject.getValue(this.legendObjectProperties, legendProps.showTitle, showTitle);\r\n            titleText = DataViewObject.getValue(this.legendObjectProperties, legendProps.titleText, titleText);\r\n            labelColor = DataViewObject.getValue(this.legendObjectProperties, legendProps.labelColor, labelColor);\r\n            fontSize = DataViewObject.getValue(this.legendObjectProperties, legendProps.fontSize, fontSize);\r\n            legend = {\r\n                objectName: \"legend\",\r\n                displayName: \"legend\",\r\n                selector: null,\r\n                properties: {\r\n                    show: settings.showLegend,\r\n                    position: LegendPosition[this.legend.getOrientation()],\r\n                    showTitle: showTitle,\r\n                    titleText: titleText,\r\n                    labelColor: labelColor,\r\n                    fontSize: fontSize,\r\n                }\r\n            };\r\n\r\n            return legend;\r\n        }\r\n\r\n        private enumerateDataPoint(enumeration: ObjectEnumerationBuilder): void {\r\n            if (!this.radarChartData || !this.radarChartData.series)\r\n                return;\r\n\r\n            let series: RadarChartSeries[] = this.radarChartData.series;\r\n\r\n            for (let serie of series) {\r\n                enumeration.pushInstance({\r\n                    objectName: \"dataPoint\",\r\n                    displayName: serie.name,\r\n                    selector: ColorHelper.normalizeSelector(serie.identity.getSelector(), false),\r\n                    properties: {\r\n                        fill: { solid: { color: serie.fill } }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        private updateViewport(): void {\r\n            let legendMargins: IViewport = this.legend.getMargins(),\r\n                legendPosition: LegendPosition;\r\n\r\n            legendPosition = LegendPosition[<string>this.legendObjectProperties[legendProps.position]];\r\n\r\n            switch (legendPosition) {\r\n                case LegendPosition.Top:\r\n                case LegendPosition.TopCenter:\r\n                case LegendPosition.Bottom:\r\n                case LegendPosition.BottomCenter:\r\n                    this.viewport.height -= legendMargins.height;\r\n                    break;\r\n\r\n                case LegendPosition.Left:\r\n                case LegendPosition.LeftCenter:\r\n                case LegendPosition.Right:\r\n                case LegendPosition.RightCenter:\r\n                    this.viewport.width -= legendMargins.width;\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n}","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *\r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *\r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.visuals.samples {\r\n    import SelectionManager = utility.SelectionManager;\r\n    import ValueFormatter = powerbi.visuals.valueFormatter;\r\n    import ClassAndSelector = jsCommon.CssConstants.ClassAndSelector;\r\n    import getAnimationDuration = AnimatorCommon.GetAnimationDuration;\r\n\r\n    type D3Element =\r\n        D3.UpdateSelection |\r\n        D3.Selection |\r\n        D3.Selectors |\r\n        D3.Transition.Transition;\r\n\r\n    export interface HistogramConstructorOptions {\r\n        svg?: D3.Selection;\r\n        animator?: IGenericAnimator;\r\n        margin?: IMargin;\r\n    }\r\n\r\n    export interface HistogramSettings {\r\n        displayName?: string;\r\n        fillColor?: string;\r\n        frequency: boolean;\r\n        bins?: number;\r\n        precision: number;\r\n    }\r\n\r\n    export interface HistogramData extends D3.Layout.Bin, TooltipEnabledDataPoint {\r\n        range: number[];\r\n        selectionIds: SelectionId[];\r\n    }\r\n\r\n    export interface HistogramDataView {\r\n        data: HistogramData[];\r\n        xScale?: D3.Scale.LinearScale;\r\n        yScale?: D3.Scale.LinearScale;\r\n        settings: HistogramSettings;\r\n        formatter: IValueFormatter;\r\n    }\r\n\r\n    interface HistogramValue {\r\n        value: number;\r\n        selectionId: SelectionId;\r\n        frequency: number;\r\n    }\r\n\r\n    interface Legend {\r\n        text: string;\r\n        transform?: string;\r\n        dx?: string;\r\n        dy?: string;\r\n    }\r\n\r\n    interface Brackets {\r\n        left: string;\r\n        right: string;\r\n    }\r\n\r\n    interface HistogramProperty {\r\n        [propertyName: string]: DataViewObjectPropertyIdentifier;\r\n    }\r\n\r\n    interface HistogramProperties {\r\n        [objectName: string]: HistogramProperty;\r\n    }\r\n\r\n    export class HistogramChartWarning {\r\n        public static ErrorInvalidDataValues: string = \"Some data values are invalid or too big\";\r\n\r\n        private message: string;\r\n        constructor(message: string) {\r\n            this.message = message;\r\n        }\r\n\r\n        public get code(): string {\r\n            return \"BulletChartWarning\";\r\n        }\r\n\r\n        public getMessages(resourceProvider: jsCommon.IStringResourceProvider): IVisualErrorMessage {\r\n            return {\r\n                message: this.message,\r\n                title: resourceProvider.get(\"\"),\r\n                detail: resourceProvider.get(\"\")\r\n            };\r\n        }\r\n    }\r\n\r\n    export class Histogram implements IVisual {\r\n        private static ClassName: string = \"histogram\";\r\n        private static FrequencyText: string = \"Frequency\";\r\n        private static DensityText: string = \"Density\";\r\n\r\n        private static Properties: HistogramProperties = {\r\n            general: {\r\n                bins: {\r\n                    objectName: \"general\",\r\n                    propertyName: \"bins\"\r\n                },\r\n                frequency: {\r\n                    objectName: \"general\",\r\n                    propertyName: \"frequency\"\r\n                },\r\n                formatString: {\r\n                    objectName: \"general\",\r\n                    propertyName: \"formatString\"\r\n                }\r\n            },\r\n            dataPoint: {\r\n                fill: {\r\n                    objectName: \"dataPoint\",\r\n                    propertyName: \"fill\"\r\n                }\r\n            },\r\n            labels: {\r\n                labelPrecision: {\r\n                    objectName: \"labels\",\r\n                    propertyName: \"labelPrecision\"\r\n                }\r\n            }\r\n        };\r\n\r\n        private static DefaultHistogramSettings: HistogramSettings = {\r\n            frequency: true,\r\n            displayName: \"Histogram\",\r\n            bins: null,\r\n            fillColor: \"cadetblue\",\r\n            precision: 2\r\n        };\r\n\r\n        private static Axes: ClassAndSelector = {\r\n            \"class\": \"axes\",\r\n            selector: \".axes\"\r\n        };\r\n\r\n        private static Axis: ClassAndSelector = {\r\n            \"class\": \"axis\",\r\n            selector: \".axis\"\r\n        };\r\n\r\n        private static Columns: ClassAndSelector = {\r\n            \"class\": \"columns\",\r\n            selector: \".columns\"\r\n        };\r\n\r\n        private static Column: ClassAndSelector = {\r\n            \"class\": \"column\",\r\n            selector: \".column\"\r\n        };\r\n\r\n        private static Legends: ClassAndSelector = {\r\n            \"class\": \"legends\",\r\n            selector: \".legends\"\r\n        };\r\n\r\n        private static Legend: ClassAndSelector = {\r\n            \"class\": \"legend\",\r\n            selector: \".legend\"\r\n        };\r\n\r\n        public static capabilities: VisualCapabilities = {\r\n            dataRoles: [{\r\n                name: \"Values\",\r\n                kind: VisualDataRoleKind.Grouping,\r\n                displayName: data.createDisplayNameGetter(\"Role_DisplayName_Values\")\r\n            }, {\r\n                name: \"Frequency\",\r\n                kind: VisualDataRoleKind.Measure,\r\n                displayName: \"Frequency\"\r\n            }],\r\n            dataViewMappings: [{\r\n                conditions: [{ \"Values\": { min: 1, max: 1 }, \"Frequency\": { min: 0, max: 1 } }],\r\n                categorical: {\r\n                    categories: {\r\n                        bind: { to: \"Values\" },\r\n                        dataReductionAlgorithm: { top: {} }\r\n                    },\r\n                    values: { for: { in: \"Frequency\" } }\r\n                }\r\n            }],\r\n            sorting: {\r\n                implicit: {\r\n                    clauses: [{ role: \"Values\", direction: 1 /*SortDirection.Ascending*/ }] //Constant SortDirection.Ascending currently is not supported on the msit\r\n                }\r\n            },\r\n            objects: {\r\n                general: {\r\n                    displayName: data.createDisplayNameGetter(\"Visual_General\"),\r\n                    properties: {\r\n                        formatString: { type: { formatting: { formatString: true } } },\r\n                        bins: {\r\n                            displayName: \"Bins\",\r\n                            type: { numeric: true }\r\n                        },\r\n                        frequency: {\r\n                            displayName: \"Frequency\",\r\n                            type: { bool: true }\r\n                        }\r\n                    },\r\n                },\r\n                dataPoint: {\r\n                    displayName: data.createDisplayNameGetter(\"Visual_DataPoint\"),\r\n                    properties: {\r\n                        fill: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Fill'),\r\n                            type: { fill: { solid: { color: true } } }\r\n                        }\r\n                    }\r\n                },\r\n                labels: {\r\n                    displayName: data.createDisplayNameGetter('Visual_DataPointsLabels'),\r\n                    properties: {\r\n                        labelPrecision: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Precision'),\r\n                            type: { numeric: true }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        private ColumnPadding: number = 1;\r\n        private MinColumnHeight: number = 1;\r\n        private MinOpacity: number = 0.3;\r\n        private MaxOpacity: number = 1;\r\n        private NumberOfLabelsOnAxisY: number = 5;\r\n        private MinNumberOfBins: number = 0;\r\n        private MaxNumberOfBins: number = 100;\r\n        private MinPrecision: number = 0;\r\n        private MaxPrecision: number = 17; // max number of decimals in float\r\n        private TooltipDisplayName: string = \"Range\";\r\n        private SeparatorNumbers: string = \", \";\r\n        private LegendSize: number = 50;\r\n        private AxisSize: number = 30;\r\n\r\n        private ExcludeBrackets: Brackets = {\r\n            left: \"(\",\r\n            right: \")\"\r\n        };\r\n\r\n        private IncludeBrackets: Brackets = {\r\n            left: \"[\",\r\n            right: \"]\"\r\n        };\r\n\r\n        private margin: IMargin = {\r\n            top: 10,\r\n            right: 10,\r\n            bottom: 10,\r\n            left: 10\r\n        };\r\n\r\n        private durationAnimations: number = 200;\r\n\r\n        private viewport: IViewport;\r\n        private hostService: IVisualHostServices;\r\n        private selectionManager: SelectionManager;\r\n        private colors: IDataColorPalette;\r\n\r\n        private root: D3.Selection;\r\n        private svg: D3.Selection;\r\n        private main: D3.Selection;\r\n        private axes: D3.Selection;\r\n        private axisX: D3.Selection;\r\n        private axisY: D3.Selection;\r\n        private legend: D3.Selection;\r\n        private columns: D3.Selection;\r\n\r\n        private histogramDataView: HistogramDataView;\r\n\r\n        private animator: IGenericAnimator;\r\n\r\n        private get columnsSelection(): D3.Selection {\r\n            return this.main.select(Histogram.Columns.selector)\r\n                .selectAll(Histogram.Column.selector);\r\n        }\r\n\r\n        constructor(histogramConstructorOptions?: HistogramConstructorOptions) {\r\n            if (histogramConstructorOptions) {\r\n                if (histogramConstructorOptions.svg) {\r\n                    this.svg = histogramConstructorOptions.svg;\r\n                }\r\n\r\n                if (histogramConstructorOptions.animator) {\r\n                    this.animator = histogramConstructorOptions.animator;\r\n                }\r\n\r\n                this.margin = histogramConstructorOptions.margin || this.margin;\r\n            }\r\n        }\r\n\r\n        public init(visualsOptions: VisualInitOptions): void {\r\n            this.hostService = visualsOptions.host;\r\n\r\n            if (this.svg) {\r\n                this.root = this.svg;\r\n            } else {\r\n                this.root = d3.select(visualsOptions.element.get(0))\r\n                    .append(\"svg\");\r\n            }\r\n\r\n            var style: IVisualStyle = visualsOptions.style;\r\n\r\n            this.colors = style && style.colorPalette\r\n                ? style.colorPalette.dataColors\r\n                : new DataColorPalette();\r\n\r\n            this.root.classed(Histogram.ClassName, true);\r\n\r\n            this.main = this.root.append(\"g\");\r\n\r\n            this.axes = this.main\r\n                .append(\"g\")\r\n                .classed(Histogram.Axes[\"class\"], true);\r\n\r\n            this.axisX = this.axes\r\n                .append(\"g\")\r\n                .classed(Histogram.Axis[\"class\"], true);\r\n\r\n            this.axisY = this.axes\r\n                .append(\"g\")\r\n                .classed(Histogram.Axis[\"class\"], true);\r\n\r\n            this.legend = this.main\r\n                .append(\"g\")\r\n                .classed(Histogram.Legends[\"class\"], true);\r\n\r\n            this.columns = this.main\r\n                .append(\"g\")\r\n                .classed(Histogram.Columns[\"class\"], true);\r\n\r\n            this.selectionManager = new SelectionManager({ hostServices: visualsOptions.host });\r\n        }\r\n\r\n        public converter(dataView: DataView): HistogramDataView {\r\n            if (!dataView ||\r\n                !dataView.categorical ||\r\n                !dataView.categorical.categories ||\r\n                !dataView.categorical.categories[0] ||\r\n                !dataView.categorical.categories[0].values ||\r\n                !(dataView.categorical.categories[0].values.length > 0)) {\r\n                return null;\r\n            }\r\n\r\n            var settings: HistogramSettings,\r\n                histogramLayout: D3.Layout.HistogramLayout,\r\n                values: HistogramValue[],\r\n                numericalValues: number[] = [],\r\n                data: D3.Layout.Bin[],\r\n                xScale: D3.Scale.LinearScale,\r\n                yScale: D3.Scale.LinearScale,\r\n                valueFormatter: IValueFormatter,\r\n                frequencies: number[] = [],\r\n                identities: DataViewScopeIdentity[] = [],\r\n                shiftByValues: number = 0,\r\n                sumFrequency: number = 0;\r\n\r\n            if (dataView.categorical.values &&\r\n                dataView.categorical.values[0] &&\r\n                dataView.categorical.values[0].values) {\r\n                frequencies = dataView.categorical.values[0].values;\r\n            }\r\n\r\n            if (dataView.categorical.categories[0].identity\r\n                && dataView.categorical.categories[0].identity.length > 0) {\r\n                identities = dataView.categorical.categories[0].identity;\r\n            }\r\n\r\n            settings = this.parseSettings(dataView);\r\n\r\n            if (!settings) {\r\n                return null;\r\n            }\r\n\r\n            values = this.getValuesByFrequencies(\r\n                dataView.categorical.categories[0].values,\r\n                frequencies,\r\n                identities);\r\n\r\n            values.forEach((value: HistogramValue) => {\r\n                numericalValues.push(value.value);\r\n\r\n                sumFrequency += value.frequency;\r\n            });\r\n\r\n            histogramLayout = d3.layout.histogram();\r\n\r\n            if (settings.bins && settings.bins > this.MinNumberOfBins) {\r\n                histogramLayout = histogramLayout.bins(settings.bins);\r\n            }\r\n\r\n            data = histogramLayout.frequency(settings.frequency)(numericalValues);\r\n\r\n            data.forEach((bin: D3.Layout.Bin, index: number) => {\r\n                var filteredValues: HistogramValue[],\r\n                    frequency: number;\r\n\r\n                filteredValues = values.filter((value: HistogramValue) => {\r\n                    return this.isValueContainedInRange(value, bin, index);\r\n                });\r\n\r\n                frequency = filteredValues.reduce((previousValue: number, currentValue: HistogramValue): number => {\r\n                    return previousValue + currentValue.frequency;\r\n                }, 0);\r\n\r\n                bin.y = settings.frequency\r\n                    ? frequency\r\n                    : frequency / sumFrequency;\r\n\r\n                shiftByValues += bin.length;\r\n            });\r\n\r\n            xScale = d3.scale.linear()\r\n                .domain([\r\n                    d3.min(data, (item: D3.Layout.Bin) => d3.min(item)),\r\n                    d3.max(data, (item: D3.Layout.Bin) => d3.max(item))\r\n                ])\r\n                .range([0, this.viewport.width - this.LegendSize - this.AxisSize]);\r\n\r\n            yScale = d3.scale.linear()\r\n                .domain([\r\n                    0,\r\n                    d3.max(data, (item: D3.Layout.Bin) => item.y)\r\n                ])\r\n                .range([this.viewport.height - this.LegendSize, 0]);\r\n\r\n            valueFormatter = ValueFormatter.create({\r\n                format: ValueFormatter.getFormatString(\r\n                    dataView.categorical.categories[0].source, Histogram.Properties[\"general\"][\"formatString\"]),\r\n                value: values[0].value,\r\n                value2: values[values.length - 1].value,\r\n                precision: settings.precision\r\n            });\r\n\r\n            return {\r\n                xScale: xScale,\r\n                yScale: yScale,\r\n                settings: settings,\r\n                data: this.getData(values, numericalValues, data, settings, valueFormatter),\r\n                formatter: valueFormatter\r\n            };\r\n        }\r\n\r\n        private getValuesByFrequencies(sourceValues: number[], frequencies: number[], identities: DataViewScopeIdentity[]): HistogramValue[] {\r\n            var values: HistogramValue[] = [];\r\n\r\n            sourceValues.forEach((item: number, index: number) => {\r\n                var frequency: number = 1,\r\n                    value: number = Number(item);\r\n\r\n                value = isNaN(value) ? 0 : value;\r\n\r\n                if (frequencies\r\n                    && frequencies[index]\r\n                    && !isNaN(frequencies[index])\r\n                    && frequencies[index] > 1) {\r\n                    frequency = frequencies[index];\r\n                }\r\n\r\n                values.push({\r\n                    value: value,\r\n                    frequency: frequency,\r\n                    selectionId: SelectionId.createWithId(identities[index])\r\n                });\r\n            });\r\n\r\n            return values;\r\n        }\r\n\r\n        private getData(\r\n            values: HistogramValue[],\r\n            numericalValues: number[],\r\n            data: D3.Layout.Bin[],\r\n            settings: HistogramSettings,\r\n            valueFormatter: IValueFormatter): HistogramData[] {\r\n            var minValue: number = d3.min(numericalValues),\r\n                maxValue: number = d3.max(numericalValues);\r\n\r\n            return data.map((bin: HistogramData, index: number): HistogramData => {\r\n                bin.range = this.getRange(minValue, maxValue, bin.dx, index);\r\n                bin.tooltipInfo = this.getTooltipData(bin.y, bin.range, settings, index === 0, valueFormatter);\r\n                bin.selectionIds = this.getSelectionIds(values, bin, index);\r\n\r\n                return bin;\r\n            });\r\n        }\r\n\r\n        private getRange(minValue: number, maxValue: number, step: number, index: number): number[] {\r\n            var leftBorder: number = minValue + index * step,\r\n                rightBorder: number = leftBorder + step;\r\n\r\n            return [leftBorder, rightBorder];\r\n        }\r\n\r\n        private getTooltipData(\r\n            value: number,\r\n            range: number[],\r\n            settings: HistogramSettings,\r\n            includeLeftBorder: boolean,\r\n            valueFormatter: IValueFormatter): TooltipDataItem[] {\r\n\r\n            return [{\r\n                displayName: this.getLegendText(settings),\r\n                value: valueFormatter.format(value)\r\n            }, {\r\n                displayName: this.TooltipDisplayName,\r\n                value: this.rangeToString(range, includeLeftBorder, valueFormatter)\r\n            }];\r\n        }\r\n\r\n        private getSelectionIds(values: HistogramValue[], bin: HistogramData, index: number): SelectionId[] {\r\n            var selectionIds: SelectionId[] = [];\r\n\r\n            values.forEach((value: HistogramValue) => {\r\n                if (this.isValueContainedInRange(value, bin, index)) {\r\n                    selectionIds.push(value.selectionId);\r\n                }\r\n            });\r\n\r\n            return selectionIds;\r\n        }\r\n\r\n        private isValueContainedInRange(value: HistogramValue, bin: D3.Layout.Bin, index: number): boolean {\r\n            return ((index === 0 && value.value >= bin.x) || (value.value > bin.x)) && value.value <= bin.x + bin.dx;\r\n        }\r\n\r\n        private parseSettings(dataView: DataView): HistogramSettings {\r\n            if (!dataView ||\r\n                !dataView.metadata ||\r\n                !dataView.metadata.columns ||\r\n                !dataView.metadata.columns[0]) {\r\n                return null;\r\n            }\r\n\r\n            var histogramSettings: HistogramSettings = <HistogramSettings>{},\r\n                objects: DataViewObjects,\r\n                colorHelper: ColorHelper;\r\n\r\n            colorHelper = new ColorHelper(\r\n                this.colors,\r\n                Histogram.Properties[\"dataPoint\"][\"fill\"],\r\n                Histogram.DefaultHistogramSettings.fillColor);\r\n\r\n            histogramSettings.displayName = Histogram.DefaultHistogramSettings.displayName;\r\n            histogramSettings.fillColor = Histogram.DefaultHistogramSettings.fillColor;\r\n            histogramSettings.bins = Histogram.DefaultHistogramSettings.bins;\r\n            histogramSettings.frequency = Histogram.DefaultHistogramSettings.frequency;\r\n            histogramSettings.displayName =\r\n                dataView.metadata.columns[0].displayName || Histogram.DefaultHistogramSettings.displayName;\r\n\r\n            objects = this.getObjectsFromDataView(dataView);\r\n\r\n            if (objects) {\r\n                histogramSettings.fillColor = colorHelper.getColorForMeasure(objects, \"\");\r\n                histogramSettings.bins = this.getBins(objects);\r\n                histogramSettings.frequency = this.getFrequency(objects);\r\n                histogramSettings.precision = this.getPrecision(objects);\r\n            }\r\n\r\n            return histogramSettings;\r\n        }\r\n\r\n        private getBins(objects: DataViewObjects): number {\r\n            var binsNumber: number;\r\n\r\n            binsNumber = Number(DataViewObjects.getValue<number>(\r\n                objects,\r\n                Histogram.Properties[\"general\"][\"bins\"],\r\n                Histogram.DefaultHistogramSettings.bins));\r\n\r\n            if (!binsNumber || isNaN(binsNumber) || binsNumber <= this.MinNumberOfBins) {\r\n                return Histogram.DefaultHistogramSettings.bins;\r\n            }\r\n\r\n            if (binsNumber > this.MaxNumberOfBins) {\r\n                return this.MaxNumberOfBins;\r\n            }\r\n\r\n            return binsNumber;\r\n        }\r\n\r\n        private getFrequency(objects: DataViewObjects): boolean {\r\n            return DataViewObjects.getValue<boolean>(\r\n                objects,\r\n                Histogram.Properties[\"general\"][\"frequency\"],\r\n                Histogram.DefaultHistogramSettings.frequency);\r\n        }\r\n\r\n        private getPrecision(objects: DataViewObjects): number {\r\n            var precision: number = DataViewObjects.getValue(\r\n                objects,\r\n                Histogram.Properties[\"labels\"][\"labelPrecision\"],\r\n                Histogram.DefaultHistogramSettings.precision);\r\n\r\n            if (precision <= this.MinPrecision) {\r\n                return this.MinPrecision;\r\n            }\r\n\r\n            if (precision >= this.MaxPrecision) {\r\n                return this.MaxPrecision;\r\n            }\r\n\r\n            return precision;\r\n        }\r\n\r\n        public validateData(data: HistogramDataView): boolean {\r\n            if (data && data.data.some(x=> x.range.some(x => isNaN(x) || x === Infinity || x === -Infinity))) {\r\n                this.hostService.setWarnings([new HistogramChartWarning(HistogramChartWarning.ErrorInvalidDataValues)]);\r\n                return false;\r\n            }\r\n\r\n            return true;\r\n        }\r\n\r\n        public update(visualUpdateOptions: VisualUpdateOptions): void {\r\n            if (!visualUpdateOptions ||\r\n                !visualUpdateOptions.dataViews ||\r\n                !visualUpdateOptions.dataViews[0]) {\r\n                return;\r\n            }\r\n\r\n            var dataView: DataView = visualUpdateOptions.dataViews[0];\r\n\r\n            this.durationAnimations = getAnimationDuration(\r\n                this.animator,\r\n                visualUpdateOptions.suppressAnimations);\r\n\r\n            this.setSize(visualUpdateOptions.viewport);\r\n\r\n            this.histogramDataView = this.converter(dataView);\r\n            if (!this.validateData(this.histogramDataView)) {\r\n                this.histogramDataView.data = [];\r\n            }\r\n\r\n            this.render();\r\n        }\r\n\r\n        private setSize(viewport: IViewport): void {\r\n            var height: number,\r\n                width: number;\r\n\r\n            height = viewport.height -\r\n                this.margin.top -\r\n                this.margin.bottom;\r\n\r\n            width = viewport.width -\r\n                this.margin.left -\r\n                this.margin.right;\r\n\r\n            this.viewport = {\r\n                height: height,\r\n                width: width\r\n            };\r\n\r\n            this.updateElements(viewport.height, viewport.width);\r\n        }\r\n\r\n        private updateElements(height: number, width: number): void {\r\n            var shiftToRight: number = this.margin.left + this.LegendSize;\r\n\r\n            this.root.attr({\r\n                \"height\": height,\r\n                \"width\": width\r\n            });\r\n\r\n            this.main.attr(\"transform\", SVGUtil.translate(this.margin.left, this.margin.top));\r\n\r\n            this.legend.attr(\"transform\", SVGUtil.translate(this.margin.left, this.margin.top));\r\n\r\n            this.columns.attr(\"transform\", SVGUtil.translate(shiftToRight, 0));\r\n\r\n            this.axes.attr(\"transform\", SVGUtil.translate(shiftToRight, 0));\r\n\r\n            this.axisX.attr(\r\n                \"transform\",\r\n                SVGUtil.translate(0, this.viewport.height - this.LegendSize));\r\n        }\r\n\r\n        private render(): void {\r\n            if (!this.histogramDataView || !this.histogramDataView.settings) {\r\n                return;\r\n            }\r\n\r\n            this.renderAxes();\r\n            var columnsSelection: D3.UpdateSelection = this.renderColumns();\r\n            this.renderLegend();\r\n\r\n            this.bindSelectionHandler(columnsSelection);\r\n        }\r\n\r\n        private renderColumns(): D3.UpdateSelection {\r\n            var data: HistogramData[] = this.histogramDataView.data,\r\n                yScale: D3.Scale.LinearScale = this.histogramDataView.yScale,\r\n                countOfValues: number = data.length,\r\n                widthOfColumn: number,\r\n                updateColumnsSelection: D3.UpdateSelection;\r\n\r\n            widthOfColumn = countOfValues && ((this.viewport.width - this.AxisSize - this.LegendSize) / countOfValues - this.ColumnPadding);\r\n\r\n            if (widthOfColumn < 0) {\r\n                widthOfColumn = 0;\r\n            }\r\n\r\n            updateColumnsSelection = this.columnsSelection.data(data);\r\n\r\n            updateColumnsSelection\r\n                .enter()\r\n                .append(\"svg:rect\");\r\n\r\n            updateColumnsSelection\r\n                .attr(\"x\", this.ColumnPadding / 2)\r\n                .attr(\"width\", widthOfColumn)\r\n                .attr(\"height\", (item: HistogramData) => this.getColumnHeight(item, yScale))\r\n                .style(\"fill\", this.histogramDataView.settings.fillColor)\r\n                .attr(\"class\", Histogram.Column[\"class\"])\r\n                .attr(\"transform\", (item: HistogramData, index: number) => SVGUtil.translate(\r\n                    widthOfColumn * index + this.ColumnPadding * index,\r\n                    yScale(item.y) - this.ColumnPadding / 2.5));\r\n\r\n            if (countOfValues) {\r\n                //if data is empty, it throws for some reason\r\n                updateColumnsSelection.classed(Histogram.Column[\"class\"]);\r\n            }\r\n\r\n            updateColumnsSelection.exit().remove();\r\n\r\n            this.renderTooltip(updateColumnsSelection);\r\n\r\n            return updateColumnsSelection;\r\n        }\r\n\r\n        private renderTooltip(selection: D3.UpdateSelection): void {\r\n            TooltipManager.addTooltip(selection, (tooltipEvent: TooltipEvent) => {\r\n                return (<HistogramData> tooltipEvent.data).tooltipInfo;\r\n            });\r\n        }\r\n\r\n        private getColumnHeight(column: D3.Layout.Bin, y: D3.Scale.LinearScale): number {\r\n            var height: number = this.viewport.height - this.LegendSize - y(column.y);\r\n\r\n            return height > 0 ? height : this.MinColumnHeight;\r\n        }\r\n\r\n        private renderAxes(): void {\r\n            var xScale: D3.Scale.LinearScale = this.histogramDataView.xScale,\r\n                yScale: D3.Scale.LinearScale = this.histogramDataView.yScale,\r\n                valueFormatter: IValueFormatter = this.histogramDataView.formatter,\r\n                xAxis: D3.Svg.Axis,\r\n                yAxis: D3.Svg.Axis;\r\n\r\n            xAxis = d3.svg.axis()\r\n                .scale(xScale)\r\n                .orient(\"bottom\")\r\n                .tickValues(this.rangesToArray(this.histogramDataView.data))\r\n                .tickFormat((item: number) => valueFormatter.format(item));\r\n\r\n            yAxis = d3.svg.axis()\r\n                .scale(yScale)\r\n                .orient(\"left\")\r\n                .ticks(this.NumberOfLabelsOnAxisY);\r\n\r\n            this.axisX.call(xAxis);\r\n\r\n            this.axisY.call(yAxis);\r\n        }\r\n\r\n        private rangesToArray(data: HistogramData[]): number[] {\r\n            return data.reduce((previousValue: number[], currentValue: HistogramData, index: number) => {\r\n                var range: number[];\r\n\r\n                range = index === 0\r\n                    ? currentValue.range\r\n                    : currentValue.range.slice(1);\r\n\r\n                return previousValue.concat(range);\r\n            }, []);\r\n        }\r\n\r\n        private rangeToString(range: number[], includeLeftBorder: boolean, valueFormatter: IValueFormatter): string {\r\n            var leftBracket: string,\r\n                rightBracket: string = this.IncludeBrackets.right,\r\n                leftBorder: string = valueFormatter.format(range[0]),\r\n                rightBorder: string = valueFormatter.format(range[1]);\r\n\r\n            leftBracket = includeLeftBorder\r\n                ? this.IncludeBrackets.left\r\n                : this.ExcludeBrackets.left;\r\n\r\n            return `${leftBracket}${leftBorder}${this.SeparatorNumbers}${rightBorder}${rightBracket}`;\r\n        }\r\n\r\n        private renderLegend(): void {\r\n            var legendElements: D3.Selection,\r\n                legendSelection: D3.UpdateSelection,\r\n                datalegends: Legend[] = this.getDataLegends(this.histogramDataView.settings);\r\n\r\n            legendElements = this.main\r\n                .select(Histogram.Legends.selector)\r\n                .selectAll(Histogram.Legend.selector);\r\n\r\n            legendSelection = legendElements.data(datalegends);\r\n\r\n            legendSelection\r\n                .enter()\r\n                .append(\"svg:text\");\r\n\r\n            legendSelection\r\n                .attr(\"x\", 0)\r\n                .attr(\"y\", 0)\r\n                .attr(\"dx\", (item: Legend) => item.dx)\r\n                .attr(\"dy\", (item: Legend) => item.dy)\r\n                .attr(\"transform\", (item: Legend) => item.transform)\r\n                .attr(\"class\", Histogram.Legend[\"class\"])\r\n                .text((item: Legend) => item.text)\r\n                .classed(Histogram.Legend[\"class\"], true);\r\n\r\n            legendSelection\r\n                .exit()\r\n                .remove();\r\n        }\r\n\r\n        private getDataLegends(settings: HistogramSettings): Legend[] {\r\n            var bottomLegendText: string = this.getLegendText(settings);\r\n\r\n            return [{\r\n                transform: SVGUtil.translate(\r\n                    this.viewport.width / 2,\r\n                    this.viewport.height),\r\n                text: settings.displayName,\r\n                dx: \"1em\",\r\n                dy: \"-1em\"\r\n            }, {\r\n                transform: SVGUtil.translateAndRotate(\r\n                    0,\r\n                    this.viewport.height / 2,\r\n                    0,\r\n                    0,\r\n                    270),\r\n                text: bottomLegendText,\r\n                dx: \"3em\"\r\n            }];\r\n        }\r\n\r\n        private getLegendText(settings: HistogramSettings): string {\r\n            return settings.frequency\r\n                ? Histogram.FrequencyText\r\n                : Histogram.DensityText;\r\n        }\r\n\r\n        private bindSelectionHandler(columnsSelection: D3.UpdateSelection): void {\r\n            this.setSelection(columnsSelection);\r\n\r\n            columnsSelection.on(\"click\", (data: HistogramData) => {\r\n                this.selectionManager.clear();\r\n\r\n                data.selectionIds.forEach((selectionId: SelectionId) => {\r\n                    this.selectionManager.select(selectionId, true).then((selectionIds: SelectionId[]) => {\r\n                        if (selectionIds.length > 0) {\r\n                            this.setSelection(columnsSelection, data);\r\n                        } else {\r\n                            this.setSelection(columnsSelection);\r\n                        }\r\n                    });\r\n                });\r\n\r\n                d3.event.stopPropagation();\r\n            });\r\n\r\n            this.root.on(\"click\", () => {\r\n                this.selectionManager.clear();\r\n                this.setSelection(columnsSelection);\r\n            });\r\n        }\r\n\r\n        private setSelection(columnsSelection: D3.UpdateSelection, data?: HistogramData): void {\r\n            columnsSelection.transition()\r\n                .duration(this.durationAnimations)\r\n                .style(\"fill-opacity\", this.MaxOpacity);\r\n\r\n            if (!data) {\r\n                return;\r\n            }\r\n\r\n            columnsSelection\r\n                .filter((columnSelection: HistogramData) => {\r\n                    return columnSelection !== data;\r\n                })\r\n                .transition()\r\n                .duration(this.durationAnimations)\r\n                .style(\"fill-opacity\", this.MinOpacity);\r\n        }\r\n\r\n        public enumerateObjectInstances(options: EnumerateVisualObjectInstancesOptions): VisualObjectInstance[] {\r\n            var instances: VisualObjectInstance[] = [],\r\n                settings: HistogramSettings;\r\n\r\n            if (!this.histogramDataView ||\r\n                !this.histogramDataView.settings) {\r\n                return instances;\r\n            }\r\n\r\n            settings = this.histogramDataView.settings;\r\n\r\n            switch (options.objectName) {\r\n                case \"general\": {\r\n                    var general: VisualObjectInstance = {\r\n                        objectName: \"general\",\r\n                        displayName: \"general\",\r\n                        selector: null,\r\n                        properties: {\r\n                            bins: settings.bins,\r\n                            frequency: settings.frequency\r\n                        }\r\n                    };\r\n\r\n                    instances.push(general);\r\n                    break;\r\n                }\r\n                case \"dataPoint\": {\r\n                    var dataPoint: VisualObjectInstance = {\r\n                        objectName: \"dataPoint\",\r\n                        displayName: \"dataPoint\",\r\n                        selector: null,\r\n                        properties: {\r\n                            fill: settings.fillColor\r\n                        }\r\n                    };\r\n\r\n                    instances.push(dataPoint);\r\n                    break;\r\n                }\r\n                case \"labels\": {\r\n                    var labels: VisualObjectInstance = {\r\n                        objectName: \"labels\",\r\n                        displayName: \"labels\",\r\n                        selector: null,\r\n                        properties: {\r\n                            labelPrecision: settings.precision\r\n                        }\r\n                    };\r\n\r\n                    instances.push(labels);\r\n                    break;\r\n                }\r\n            }\r\n\r\n            return instances;\r\n        }\r\n\r\n        private getObjectsFromDataView(dataView: DataView): DataViewObjects {\r\n            if (!dataView ||\r\n                !dataView.metadata ||\r\n                !dataView.metadata.columns ||\r\n                !dataView.metadata.objects) {\r\n                    return null;\r\n            }\r\n\r\n            return dataView.metadata.objects;\r\n        }\r\n\r\n        public destroy(): void {\r\n            this.root = null;\r\n        }\r\n    }\r\n}","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved.\r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *\r\n *  The above copyright notice and this permission notice shall be included in\r\n *  all copies or substantial portions of the Software.\r\n *\r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.visuals.samples {\r\n    import ClassAndSelector = jsCommon.CssConstants.ClassAndSelector;\r\n    import getAnimationDuration = AnimatorCommon.GetAnimationDuration;\r\n    import CreateClassAndSelector = jsCommon.CssConstants.createClassAndSelector;\r\n    import AxisScale = powerbi.visuals.axisScale;\r\n    import PixelConverter = jsCommon.PixelConverter;\r\n\r\n    const MaxXAxisHeight: number = 40;\r\n    const LabelMargin: number = 15;\r\n    const DefaultRadius: number = 5;\r\n    const DefaultStrokeWidth: number = 1;\r\n    const DefaultDataPointColor = \"#00B8AA\";\r\n    const MinPrecision: number = 0;\r\n    const MaxPrecision: number = 17;\r\n\r\n    export const DotPlotProperties: any = {\r\n        general: {\r\n            formatString: <DataViewObjectPropertyIdentifier>{\r\n                objectName: \"general\",\r\n                propertyName: \"formatString\"\r\n            }\r\n        },\r\n        labels: {\r\n            show: <DataViewObjectPropertyIdentifier>{\r\n                objectName: \"labels\",\r\n                propertyName: \"show\"\r\n            },\r\n            fontSize: <DataViewObjectPropertyIdentifier>{\r\n                objectName: \"labels\",\r\n                propertyName: \"fontSize\"\r\n            },\r\n            labelPrecision: <DataViewObjectPropertyIdentifier>{\r\n                objectName: \"labels\",\r\n                propertyName: \"labelPrecision\"\r\n            },\r\n            labelDisplayUnits: <DataViewObjectPropertyIdentifier>{\r\n                objectName: \"labels\",\r\n                propertyName: \"labelDisplayUnits\"\r\n            },\r\n            labelColor: <DataViewObjectPropertyIdentifier>{\r\n                objectName: \"labels\",\r\n                propertyName: \"labelColor\"\r\n            }\r\n        },\r\n        dataPoint: {\r\n            fill: <DataViewObjectPropertyIdentifier>{\r\n                objectName: \"dataPoint\",\r\n                propertyName: \"fill\"\r\n            }\r\n        },\r\n        categories: {\r\n            show: <DataViewObjectPropertyIdentifier>{\r\n                objectName: \"categories\",\r\n                propertyName: \"show\"\r\n            },\r\n            fontColor: <DataViewObjectPropertyIdentifier>{\r\n                objectName: \"categories\",\r\n                propertyName: \"fontColor\"\r\n            },\r\n            fontSize: <DataViewObjectPropertyIdentifier>{\r\n                objectName: \"categories\",\r\n                propertyName: \"fontSize\"\r\n            }\r\n        }\r\n    };\r\n\r\n    export interface DotPlotSelectors {\r\n        svgPlotSelector: ClassAndSelector;\r\n        plotSelector: ClassAndSelector;\r\n        plotGroupSelector: ClassAndSelector;\r\n        axisSelector: ClassAndSelector;\r\n        xAxisSelector: ClassAndSelector;\r\n        circleSeletor: ClassAndSelector;\r\n    }\r\n\r\n    export interface DotPlotChartCategory {\r\n        value: string;\r\n        selectionId: SelectionId;\r\n    }\r\n\r\n    export interface DotPlotConstructorOptions {\r\n        animator?: IGenericAnimator;\r\n        svg?: D3.Selection;\r\n        margin?: IMargin;\r\n        radius?: number;\r\n        strokeWidth?: number;\r\n    }\r\n\r\n    export interface DotPlotDataPoint {\r\n        x: number;\r\n        y: number;\r\n        tooltipInfo: TooltipDataItem[];\r\n    }\r\n\r\n    export interface DotPlotSettings {\r\n        labelSettings?: VisualDataLabelsSettings;\r\n        formatter?: IValueFormatter;\r\n        tooltipFormatter?: IValueFormatter;\r\n        categorySettings?: DotPlotCategorySettings;\r\n        defaultDataPointColor?: string;\r\n    }\r\n\r\n    export interface DotPlotCategorySettings {\r\n        show?: boolean;\r\n        fontColor?: string;\r\n        fontSize?: number;\r\n    }\r\n\r\n    export interface DotPlotDataGroup extends SelectableDataPoint {\r\n        label?: string;\r\n        value?: number;\r\n        color?: string;\r\n        tooltipInfo?: TooltipDataItem[];\r\n        dataPoints: DotPlotDataPoint[];\r\n        labelFontSize: string;\r\n        highlight?: boolean;\r\n    }\r\n\r\n    export interface DotPlotDataView {\r\n        displayName: string;\r\n        dataPoints: DotPlotDataGroup[];\r\n        values: any[];\r\n        settings: DotPlotSettings;\r\n        categories: DotPlotChartCategory[];\r\n    }\r\n\r\n    export class DotPlot implements IVisual {\r\n        public static capabilities: VisualCapabilities = {\r\n            dataRoles: [{\r\n                name: 'Category',\r\n                kind: powerbi.VisualDataRoleKind.Grouping,\r\n                displayName: 'Category'\r\n            },\r\n                {\r\n                    name: \"Values\",\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: 'Values'\r\n                }],\r\n            dataViewMappings: [{\r\n                conditions: [\r\n                    { 'Category': { max: 1 }, 'Values': { max: 1 } },\r\n                ],\r\n                categorical: {\r\n                    categories: {\r\n                        for: { in: 'Category' },\r\n                        dataReductionAlgorithm: { top: {} }\r\n                    },\r\n                    values: {\r\n                        group: {\r\n                            by: \"Series\",\r\n                            select: [{ for: { in: \"Values\" } }],\r\n                            dataReductionAlgorithm: { top: {} }\r\n                        }\r\n                    }\r\n                },\r\n            }],\r\n            objects: {\r\n                general: {\r\n                    displayName: 'General',\r\n                    properties: {\r\n                        formatString: {\r\n                            type: { formatting: { formatString: true } },\r\n                        },\r\n                    },\r\n                },\r\n                dataPoint: {\r\n                    displayName: 'Data colors',\r\n                    properties: {\r\n                        fill: {\r\n                            displayName: 'Fill',\r\n                            type: { fill: { solid: { color: true } } }\r\n                        }\r\n                    }\r\n                },\r\n                labels: {\r\n                    displayName: \"Data labels\",\r\n                    description: 'Display data label options',\r\n                    properties: {\r\n                        show: {\r\n                            displayName: 'Show',\r\n                            type: { bool: true }\r\n                        },\r\n                        showSeries: {\r\n                            displayName: 'Show',\r\n                            type: { bool: true }\r\n                        },\r\n                        color: {\r\n                            displayName: 'Color',\r\n                            description: 'Select color for data labels',\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        labelDisplayUnits: {\r\n                            displayName: 'Display units',\r\n                            description: 'Select the units (millions, billions, etc.)',\r\n                            type: { formatting: { labelDisplayUnits: true } },\r\n                            suppressFormatPainterCopy: true\r\n                        },\r\n                        labelPrecision: {\r\n                            displayName: 'Decimal places',\r\n                            description: 'Select the number of decimal places to display',\r\n                            placeHolderText: 'Auto',\r\n                            type: { numeric: true },\r\n                            suppressFormatPainterCopy: true\r\n                        },\r\n                        showAll: {\r\n                            displayName: 'Customize series',\r\n                            type: { bool: true }\r\n                        },\r\n                        fontSize: {\r\n                            displayName: 'Text Size',\r\n                            type: { formatting: { fontSize: true } }\r\n                        },\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        private DefaultMargin: IMargin = {\r\n            top: 10,\r\n            bottom: 10,\r\n            right: 20,\r\n            left: 20\r\n        };\r\n\r\n        private svg: D3.Selection;\r\n        private xAxis: D3.Selection;\r\n        private dotPlot: D3.Selection;\r\n        private clearCatcher: D3.Selection;\r\n        private behavior: IInteractiveBehavior;\r\n\r\n        private colors: IDataColorPalette;\r\n        private dataView: DataView;\r\n        private animator: IGenericAnimator;\r\n        private durationAnimations: number = 200;\r\n        private dotPlotDataView: DotPlotDataView;\r\n\r\n        private radius: number;\r\n        private strokeWidth: number;\r\n        private interactivityService: IInteractivityService;\r\n        private scaleType: string = AxisScale.linear;\r\n        private textProperties: TextProperties = {\r\n            fontFamily: 'wf_segoe-ui_normal',\r\n            fontSize: jsCommon.PixelConverter.toString(9),\r\n        };\r\n\r\n        private dotPlotSelectors: DotPlotSelectors =\r\n        {\r\n            svgPlotSelector: CreateClassAndSelector('dotplot'),\r\n            plotSelector: CreateClassAndSelector('dotplotSelector'),\r\n            plotGroupSelector: CreateClassAndSelector('dotplotGroup'),\r\n            axisSelector: CreateClassAndSelector('axisGraphicsContext'),\r\n            xAxisSelector: CreateClassAndSelector('x axis'),\r\n            circleSeletor: CreateClassAndSelector('circleSelector'),\r\n        };\r\n\r\n        private DefaultDotPlotSettings: DotPlotSettings = {\r\n            labelSettings: {\r\n                show: true,\r\n                precision: 2,\r\n                fontSize: dataLabelUtils.DefaultFontSizeInPt,\r\n                displayUnits: 0,\r\n                labelColor: dataLabelUtils.defaultLabelColor,\r\n            },\r\n            categorySettings: {\r\n                show: true,\r\n                fontColor: LegendData.DefaultLegendLabelFillColor\r\n            },\r\n            defaultDataPointColor: DefaultDataPointColor\r\n        };\r\n\r\n        private static getTooltipData(value: number): TooltipDataItem[] {\r\n            return [{\r\n                displayName: \"Value\",\r\n                value: value.toString()\r\n            }];\r\n        }\r\n\r\n        public static converter(dataView: DataView, scale: D3.Scale.OrdinalScale, defaultMargin: IMargin, defaultSetting: DotPlotSettings, colors: IDataColorPalette, viewport: IViewport, radius: number): DotPlotDataView {\r\n            let values: DataViewValueColumns = dataView.categorical.values,\r\n                dataPointsGroup: DotPlotDataGroup[] = [],\r\n                displayName: string = dataView.categorical.categories[0].source.displayName,\r\n                objects: DataViewObjects = this.getObjectsFromDataView(dataView),\r\n                settings: DotPlotSettings,\r\n                defaultColor = DataViewObjects.getFillColor(objects, DotPlotProperties.dataPoint.fill, colors.getColorByIndex(0).value);\r\n\r\n            let categories: DotPlotChartCategory[] = dataView.categorical.categories[0].values.map((x, i) => <DotPlotChartCategory>{\r\n                value: x,\r\n                selectionId: SelectionId.createWithId(dataView.categorical.categories[0].identity[i])\r\n            });\r\n\r\n            settings = {\r\n                categorySettings: this.getCategorySettings(objects, defaultSetting),\r\n                defaultDataPointColor: defaultColor,\r\n                labelSettings: this.parseSettings(objects, defaultSetting)\r\n            };\r\n\r\n            let categoryColumn = dataView.categorical.categories[0];\r\n            let diameter: number = 2 * radius + 1;\r\n            let dotsTotalHeight: number = viewport.height - radius - MaxXAxisHeight;\r\n            let maxDots: number = Math.floor((dotsTotalHeight - defaultMargin.top) / diameter) - 1;\r\n            let fontSizeInPx: string = PixelConverter.fromPoint(settings.labelSettings.fontSize);\r\n\r\n            let yScale: D3.Scale.LinearScale = d3.scale.linear()\r\n                .domain([0, maxDots])\r\n                .range([dotsTotalHeight - defaultMargin.bottom, defaultMargin.top + defaultMargin.bottom]);\r\n\r\n            for (let value of values) {\r\n                let min = _.min(value.values);\r\n                let max = _.max(value.values);\r\n\r\n                let color = DataViewObjects.getFillColor(objects, DotPlotProperties.dataPoint.fill, colors.getColorByIndex(0).value);\r\n                let length = value.values.length;\r\n                let minDots = min / (max / maxDots);\r\n                let dotsScale = d3.scale.log().domain([min, max]).range([minDots === 0 ? 1 : minDots, maxDots]).clamp(true);\r\n\r\n                for (let k = 0; k < length; k++) {\r\n                    let y = dotsScale(value.values[k]);\r\n                    let dataPoints: DotPlotDataPoint[] = [];\r\n\r\n                    for (let level = 0; level < y; level++) {\r\n                        dataPoints.push({\r\n                            x: scale(categories[k].value) + scale.rangeBand() / 2,\r\n                            y: yScale(level),\r\n                            tooltipInfo: DotPlot.getTooltipData(value.values[k])\r\n                        });\r\n                    }\r\n\r\n                    let categorySelectionId = SelectionIdBuilder.builder().withCategory(categoryColumn, k).createSelectionId();\r\n                    let tooltipInfo = DotPlot.getTooltipData(value.values[k]);\r\n\r\n                    dataPointsGroup.push({\r\n                        selected: false,\r\n                        value: value.values[k],\r\n                        label: value.values[k],\r\n                        color: color,\r\n                        identity: categorySelectionId,\r\n                        tooltipInfo: tooltipInfo,\r\n                        dataPoints: dataPoints,\r\n                        labelFontSize: fontSizeInPx,\r\n                    });\r\n                }\r\n            }\r\n\r\n            return {\r\n                dataPoints: dataPointsGroup,\r\n                values: dataView.categorical.categories[0].values,\r\n                displayName: displayName,\r\n                categories: categories,\r\n                settings: settings\r\n            };\r\n        }\r\n\r\n        public constructor(options?: DotPlotConstructorOptions) {\r\n            if (options) {\r\n                if (options.svg) {\r\n                    this.svg = options.svg;\r\n                }\r\n                if (options.animator) {\r\n                    this.animator = options.animator;\r\n                }\r\n\r\n                this.radius = options.radius || DefaultRadius;\r\n                this.strokeWidth = options.strokeWidth || DefaultStrokeWidth;\r\n            }\r\n        }\r\n\r\n        public init(options: VisualInitOptions): void {\r\n            let element = options.element;\r\n            this.behavior = new DotplotBehavior();\r\n\r\n            this.interactivityService = createInteractivityService(options.host);\r\n            this.radius = DefaultRadius;\r\n            this.strokeWidth = DefaultStrokeWidth;\r\n            this.colors = options.style.colorPalette.dataColors;\r\n\r\n            this.svg = d3.select(element.get(0)).append('svg').classed(this.dotPlotSelectors.svgPlotSelector.class, true).style('position', 'absolute');\r\n            this.clearCatcher = appendClearCatcher(this.svg);\r\n\r\n            let axisGraphicsContext = this.svg.append('g').classed(this.dotPlotSelectors.axisSelector.class, true);\r\n            this.dotPlot = this.svg.append('g').classed(this.dotPlotSelectors.plotSelector.class, true);\r\n            this.xAxis = axisGraphicsContext.append(\"g\").classed(this.dotPlotSelectors.xAxisSelector.class, true);\r\n        }\r\n\r\n        public update(options: VisualUpdateOptions): void {\r\n            if (!options.dataViews || !options.dataViews[0]) return;\r\n\r\n            this.durationAnimations = getAnimationDuration(this.animator, options.suppressAnimations);\r\n            let dataView = this.dataView = options.dataViews[0];\r\n            let viewport = options.viewport;\r\n\r\n            if (!dataView ||\r\n                !dataView.categorical ||\r\n                !dataView.categorical.values ||\r\n                dataView.categorical.values.length < 1 ||\r\n                !dataView.categorical ||\r\n                !dataView.categorical.categories ||\r\n                !dataView.categorical.categories[0]) {\r\n                this.clearData();\r\n                return;\r\n            }\r\n\r\n            let viewportIn: IViewport =\r\n                {\r\n                    height: (viewport.height - this.DefaultMargin.top),\r\n                    width: (viewport.width - this.DefaultMargin.left)\r\n                };\r\n\r\n            this.svg.style({\r\n                height: PixelConverter.toString(viewport.height),\r\n                width: PixelConverter.toString(viewport.width)\r\n            });\r\n\r\n            let xAxisProperties = this.calculateAxes(viewportIn, this.textProperties, false);\r\n            let data = DotPlot.converter(dataView, <D3.Scale.OrdinalScale>xAxisProperties.scale, this.DefaultMargin, this.DefaultDotPlotSettings, this.colors, viewport, this.radius);\r\n\r\n            this.dotPlotDataView = data;\r\n            let dataPoints = data.dataPoints;\r\n\r\n            if (this.interactivityService)\r\n                this.interactivityService.applySelectionStateToData(dataPoints);\r\n\r\n            this.renderAxis(viewportIn.height - MaxXAxisHeight, xAxisProperties, data, this.durationAnimations);\r\n            this.drawDotPlot(dataPoints, data.settings);\r\n\r\n            let dataLabelsSettings = data.settings.labelSettings;\r\n            if (dataLabelsSettings.show) {\r\n                let layout = this.getEnhanchedDotplotLayout(dataLabelsSettings, viewportIn);\r\n                dataLabelUtils.drawDefaultLabelsForDataPointChart(dataPoints, this.svg, layout, viewportIn, !options.suppressAnimations, this.durationAnimations);\r\n            }\r\n            else {\r\n                dataLabelUtils.cleanDataLabels(this.svg);\r\n            }\r\n        }\r\n\r\n        public enumerateObjectInstances(options: EnumerateVisualObjectInstancesOptions): VisualObjectInstanceEnumeration {\r\n            let enumeration = new ObjectEnumerationBuilder();\r\n\r\n            switch (options.objectName) {\r\n                case 'dataPoint':\r\n                    this.enumerateDataPoints(enumeration, this.dataView);\r\n                    break;\r\n                case 'labels':\r\n                    this.enumerateDataLabels(enumeration, this.dataView);\r\n                    break;\r\n                case 'categories':\r\n                    this.enumerateCategories(enumeration, this.dataView);\r\n                    break;\r\n            }\r\n\r\n            return enumeration.complete();\r\n        }\r\n\r\n        private static getObjectsFromDataView(dataView: DataView): DataViewObjects {\r\n            if (!dataView ||\r\n                !dataView.metadata ||\r\n                !dataView.metadata.columns ||\r\n                !dataView.metadata.objects) {\r\n                return null;\r\n            }\r\n\r\n            return dataView.metadata.objects;\r\n        }\r\n\r\n        private static parseSettings(objects: DataViewObjects, defaultDotPlotSettings: DotPlotSettings): VisualDataLabelsSettings {\r\n            let precision = this.getPrecision(objects, defaultDotPlotSettings);\r\n\r\n            return {\r\n                show: DataViewObjects.getValue(objects, DotPlotProperties.labels.show, defaultDotPlotSettings.labelSettings.show),\r\n                precision: precision,\r\n                fontSize: DataViewObjects.getValue(objects, DotPlotProperties.labels.fontSize, defaultDotPlotSettings.labelSettings.fontSize),\r\n                displayUnits: DataViewObjects.getValue<number>(objects, DotPlotProperties.labels.labelDisplayUnits, defaultDotPlotSettings.labelSettings.displayUnits),\r\n                labelColor: DataViewObjects.getFillColor(objects, DotPlotProperties.labels.labelColor, defaultDotPlotSettings.labelSettings.labelColor),\r\n            };\r\n        }\r\n\r\n        private static getCategorySettings(objects: DataViewObjects, defaultDotPlotSettings: DotPlotSettings): DotPlotCategorySettings {\r\n            return {\r\n                show: DataViewObject.getValue<boolean>(objects, DotPlotProperties.categories.show, defaultDotPlotSettings.categorySettings.show),\r\n                fontColor: DataViewObjects.getFillColor(objects, DotPlotProperties.categories.fontColor, defaultDotPlotSettings.categorySettings.fontColor)\r\n            };\r\n        }\r\n\r\n        private static getPrecision(objects: DataViewObjects, defaultDotPlotSettings: DotPlotSettings): number {\r\n            let precision: number = DataViewObjects.getValue<number>(objects, DotPlotProperties.labels.labelPrecision, defaultDotPlotSettings.labelSettings.precision);\r\n\r\n            if (precision <= MinPrecision)\r\n                return MinPrecision;\r\n\r\n            if (precision >= MaxPrecision)\r\n                return MaxPrecision;\r\n\r\n            return precision;\r\n        }\r\n\r\n        private drawDotPlot(data: DotPlotDataGroup[], setting: DotPlotSettings): void {\r\n            let selection: D3.UpdateSelection = this.dotPlot.selectAll(this.dotPlotSelectors.plotGroupSelector.selector).data(data);\r\n            let hasSelection = this.interactivityService && this.interactivityService.hasSelection();\r\n\r\n            selection\r\n                .enter()\r\n                .append('g')\r\n                .attr(\r\n                {\r\n                    stroke: \"black\",\r\n                    \"stroke-width\": this.strokeWidth\r\n                }).\r\n                style(\"fill-opacity\", (item: DotPlotDataGroup) => ColumnUtil.getFillOpacity(item.selected, item.highlight, hasSelection, false)).\r\n                classed(this.dotPlotSelectors.plotGroupSelector.class, true);\r\n\r\n            let circleSelection = selection.selectAll(this.dotPlotSelectors.circleSeletor.selector).data((d: DotPlotDataGroup) => { return d.dataPoints; });\r\n            circleSelection.enter().append('circle')\r\n                .classed(this.dotPlotSelectors.circleSeletor.class, true);\r\n\r\n            circleSelection.attr(\r\n                {\r\n                    cx: (point: DotPlotDataPoint) => { return point.x; },\r\n                    cy: (point: DotPlotDataPoint) => { return point.y; },\r\n                    r: this.radius,\r\n                    fill: setting.defaultDataPointColor\r\n                });\r\n\r\n            this.renderTooltip(selection);\r\n            circleSelection.exit().remove();\r\n            selection.exit().remove();\r\n\r\n            let interactivityService = this.interactivityService;\r\n            if (interactivityService) {\r\n                interactivityService.applySelectionStateToData(data);\r\n\r\n                let behaviorOptions: DotplotBehaviorOptions = {\r\n                    columns: selection,\r\n                    clearCatcher: this.clearCatcher,\r\n                    interactivityService: this.interactivityService,\r\n                };\r\n                interactivityService.bind(data, this.behavior, behaviorOptions);\r\n            }\r\n        }\r\n\r\n        private getEnhanchedDotplotLayout(labelSettings: VisualDataLabelsSettings, viewport: IViewport): ILabelLayout {\r\n            let fontSizeInPx = jsCommon.PixelConverter.fromPoint(labelSettings.fontSize);\r\n\r\n            let formatter: IValueFormatter = valueFormatter.create({\r\n                format: valueFormatter.getFormatString(this.dataView.categorical.categories[0].source, DotPlotProperties.general.formatString),\r\n                precision: labelSettings.precision,\r\n                value: labelSettings.displayUnits\r\n            });\r\n\r\n            return {\r\n                labelText: function (d) {\r\n                    return dataLabelUtils.getLabelFormattedText({\r\n                        label: formatter.format(d.label),\r\n                        fontSize: labelSettings.fontSize,\r\n                        maxWidth: viewport.width,\r\n                    });\r\n                },\r\n                labelLayout: {\r\n                    x: (d: DotPlotDataGroup) => d && d.dataPoints && d.dataPoints[d.dataPoints.length - 1] ? d.dataPoints[d.dataPoints.length - 1].x : 0,\r\n                    y: (d: DotPlotDataGroup) => d && d.dataPoints && d.dataPoints[d.dataPoints.length - 1] ? d.dataPoints[d.dataPoints.length - 1].y - LabelMargin : 0\r\n                },\r\n                filter: function (d) {\r\n                    return (d != null && d.label != null);\r\n                },\r\n                style: {\r\n                    'fill': labelSettings.categoryLabelColor,\r\n                    'font-size': fontSizeInPx,\r\n                },\r\n            };\r\n        }\r\n\r\n        private enumerateDataLabels(enumeration: ObjectEnumerationBuilder, dataView: DataView): void {\r\n            let objects = dataView && dataView.metadata ? dataView.metadata.objects : undefined;\r\n            enumeration.pushInstance({\r\n                objectName: \"labels\",\r\n                displayName: \"Labels\",\r\n                selector: null,\r\n                properties: {\r\n                    show: DataViewObjects.getValue<boolean>(objects, DotPlotProperties.labels.show, this.DefaultDotPlotSettings.labelSettings.show),\r\n                    fontSize: DataViewObjects.getValue<number>(objects, DotPlotProperties.labels.fontSize, this.DefaultDotPlotSettings.labelSettings.fontSize),\r\n                    labelPrecision: DataViewObjects.getValue<number>(objects, DotPlotProperties.labels.labelPrecision, this.DefaultDotPlotSettings.labelSettings.precision),\r\n                    labelDisplayUnits: DataViewObjects.getValue<number>(objects, DotPlotProperties.labels.labelDisplayUnits, this.DefaultDotPlotSettings.labelSettings.displayUnits),\r\n                    labelColor: DataViewObjects.getFillColor(objects, DotPlotProperties.labels.labelColor, this.DefaultDotPlotSettings.labelSettings.labelColor)\r\n                }\r\n            });\r\n        }\r\n\r\n        private enumerateDataPoints(enumeration: ObjectEnumerationBuilder, dataView: DataView): void {\r\n            let objects = dataView && dataView.metadata ? dataView.metadata.objects : undefined;\r\n            let dataPointColor = DataViewObjects.getFillColor(objects, DotPlotProperties.dataPoint.fill, this.DefaultDotPlotSettings.defaultDataPointColor);\r\n            enumeration.pushInstance({\r\n                objectName: \"dataPoint\",\r\n                displayName: \"Data Points\",\r\n                selector: null,\r\n                properties: {\r\n                    fill: { solid: { color: dataPointColor } }\r\n                }\r\n            });\r\n        }\r\n\r\n        private enumerateCategories(enumeration: ObjectEnumerationBuilder, dataView: DataView): void {\r\n            let objects = dataView && dataView.metadata ? dataView.metadata.objects : undefined;\r\n            let categoriesSettings = DotPlot.getCategorySettings(objects, this.DefaultDotPlotSettings);\r\n            enumeration.pushInstance({\r\n                objectName: \"categories\",\r\n                displayName: \"Categories\",\r\n                selector: null,\r\n                properties: {\r\n                    show: categoriesSettings.show,\r\n                    fontSize: categoriesSettings.fontSize,\r\n                    fontColor: categoriesSettings.fontColor\r\n                }\r\n            });\r\n        }\r\n\r\n        private clearData(): void {\r\n            this.dotPlot.selectAll(\"*\").remove();\r\n            this.xAxis.selectAll(\"*\").remove();\r\n            dataLabelUtils.cleanDataLabels(this.svg);\r\n        }\r\n\r\n        private renderTooltip(selection: D3.UpdateSelection): void {\r\n            TooltipManager.addTooltip(selection, (tooltipEvent: TooltipEvent) =>\r\n                (<DotPlotDataGroup>tooltipEvent.data).tooltipInfo);\r\n        }\r\n\r\n        private calculateAxes(\r\n            viewportIn: IViewport,\r\n            textProperties: TextProperties,\r\n            scrollbarVisible: boolean): IAxisProperties {\r\n\r\n            let category = this.dataView.categorical.categories && this.dataView.categorical.categories.length > 0\r\n                ? this.dataView.categorical.categories[0]\r\n                : {\r\n                    source: undefined,\r\n                    values: [valueFormatter.format(null)],\r\n                    identity: undefined,\r\n                };\r\n\r\n            let visualOptions: CalculateScaleAndDomainOptions = {\r\n                viewport: viewportIn,\r\n                margin: this.DefaultMargin,\r\n                forcedXDomain: this.dataView.categorical.categories[0].values,\r\n                forceMerge: false,\r\n                showCategoryAxisLabel: false,\r\n                showValueAxisLabel: false,\r\n                categoryAxisScaleType: this.scaleType,\r\n                valueAxisScaleType: null,\r\n                valueAxisDisplayUnits: 0,\r\n                categoryAxisDisplayUnits: 0,\r\n                trimOrdinalDataOnOverflow: false,\r\n            };\r\n\r\n            let width = viewportIn.width;\r\n            let axes = this.calculateAxesProperties(viewportIn, visualOptions, category.source);\r\n            axes.willLabelsFit = AxisHelper.LabelLayoutStrategy.willLabelsFit(\r\n                axes,\r\n                width,\r\n                TextMeasurementService.measureSvgTextWidth,\r\n                textProperties);\r\n\r\n            // If labels do not fit and we are not scrolling, try word breaking\r\n            axes.willLabelsWordBreak = (!axes.willLabelsFit && !scrollbarVisible) && AxisHelper.LabelLayoutStrategy.willLabelsWordBreak(\r\n                axes, this.DefaultMargin, width, TextMeasurementService.measureSvgTextWidth,\r\n                TextMeasurementService.estimateSvgTextHeight, TextMeasurementService.getTailoredTextOrDefault,\r\n                textProperties);\r\n\r\n            return axes;\r\n        }\r\n\r\n        private calculateAxesProperties(viewportIn: IViewport, options: CalculateScaleAndDomainOptions, metaDataColumn: DataViewMetadataColumn): IAxisProperties {\r\n            let xAxisProperties = AxisHelper.createAxis({\r\n                pixelSpan: viewportIn.width,\r\n                dataDomain: options.forcedXDomain,\r\n                metaDataColumn: metaDataColumn,\r\n                formatString: valueFormatter.getFormatString(metaDataColumn, DotPlotProperties.general.formatString),\r\n                outerPadding: 0,\r\n                isScalar: false,\r\n                isVertical: false,\r\n                forcedTickCount: options.forcedTickCount,\r\n                useTickIntervalForDisplayUnits: true,\r\n                isCategoryAxis: true,\r\n                getValueFn: (index, type) => index,\r\n                scaleType: options.categoryAxisScaleType,\r\n                axisDisplayUnits: options.categoryAxisDisplayUnits\r\n            });\r\n\r\n            xAxisProperties.axisLabel = \"New Label\";\r\n            return xAxisProperties;\r\n        }\r\n\r\n        private renderAxis(height: number, xAxisProperties: IAxisProperties, data: DotPlotDataView, duration: number): void {\r\n            this.xAxis.attr(\r\n                {\r\n                    transform: SVGUtil.translate(0, height)\r\n                });\r\n\r\n            let xAxis = xAxisProperties.axis;\r\n            xAxis.orient('bottom');\r\n\r\n            this.xAxis\r\n                .transition()\r\n                .duration(duration)\r\n                .call(xAxis);\r\n        }\r\n    }\r\n\r\n    export interface DotplotBehaviorOptions {\r\n        columns: D3.Selection;\r\n        clearCatcher: D3.Selection;\r\n        interactivityService: IInteractivityService;\r\n    }\r\n\r\n    export class DotplotBehavior implements IInteractiveBehavior {\r\n        private columns: D3.Selection;\r\n        private clearCatcher: D3.Selection;\r\n        private interactivityService: IInteractivityService;\r\n\r\n        public bindEvents(options: DotplotBehaviorOptions, selectionHandler: ISelectionHandler): void {\r\n            this.columns = options.columns;\r\n            this.clearCatcher = options.clearCatcher;\r\n            this.interactivityService = options.interactivityService;\r\n\r\n            this.columns.on('click', (d: SelectableDataPoint, i: number) => {\r\n                selectionHandler.handleSelection(d, d3.event.ctrlKey);\r\n            });\r\n\r\n            options.clearCatcher.on('click', () => {\r\n                selectionHandler.handleClearSelection();\r\n            });\r\n        }\r\n\r\n        public renderSelection(hasSelection: boolean) {\r\n            let hasHighlights = this.interactivityService.hasSelection();\r\n            this.columns.style(\"fill-opacity\", (d: DotPlotDataGroup) => ColumnUtil.getFillOpacity(d.selected, d.highlight, !d.highlight && hasSelection, !d.selected && hasHighlights));\r\n        }\r\n    }\r\n}\r\n","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\n/*\r\n *  This file is based on or incorporates material from the projects listed below (Third Party IP). \r\n *  The original copyright notice and the license under which Microsoft received such Third Party IP, \r\n *  are set forth below. Such licenses and notices are provided for informational purposes only. \r\n *  Microsoft licenses the Third Party IP to you under the licensing terms for the Microsoft product. \r\n *  Microsoft reserves all other rights not expressly granted under this agreement, whether by \r\n *  implication, estoppel or otherwise.\r\n *  \r\n *  d3 Force Layout\r\n *  Copyright (c) 2010-2015, Michael Bostock\r\n *  All rights reserved.\r\n *  \r\n *  Redistribution and use in source and binary forms, with or without\r\n *  modification, are permitted provided that the following conditions are met:\r\n *  \r\n *  * Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer.\r\n *  \r\n *  * Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *  \r\n *  * The name Michael Bostock may not be used to endorse or promote products\r\n *    derived from this software without specific prior written permission.\r\n *  \r\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\r\n *  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n *  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n *  DISCLAIMED. IN NO EVENT SHALL MICHAEL BOSTOCK BE LIABLE FOR ANY DIRECT,\r\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\r\n *  BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\r\n *  DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\r\n *  OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\r\n *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\r\n *  EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n\r\nmodule powerbi.visuals.samples {\r\n    import PixelConverter = jsCommon.PixelConverter;\r\n\r\n    module linkColorType {\r\n        export var byWeight: string = 'ByWeight';\r\n        export var byLinkType: string = 'ByLinkType';\r\n        export var interactive: string = 'Interactive';\r\n\r\n        export var type: IEnumType = createEnumType([\r\n            { value: byWeight, displayName: 'ByWeight' },\r\n            { value: byLinkType, displayName: 'ByLinkType' },\r\n            { value: interactive, displayName: 'Interactive' },\r\n        ]);\r\n    }\r\n\r\n    export interface ForceGraphOptions {\r\n        showDataLabels: boolean;\r\n        labelColor: string;\r\n        fontSize: number;\r\n        showArrow: boolean;\r\n        showLabel: boolean;\r\n        colorLink: string;\r\n        thickenLink: boolean;\r\n        displayImage: boolean;\r\n        defaultImage: string;\r\n        imageUrl: string;\r\n        imageExt: string;\r\n        nameMaxLength: number;\r\n        highlightReachableLinks: boolean;\r\n        charge: number;\r\n        defaultLinkColor: string;\r\n        defaultLinkHighlightColor: string;\r\n        defaultLinkThickness: string;\r\n    }\r\n\r\n    export var forceProps = {\r\n        general: {\r\n            formatString: <DataViewObjectPropertyIdentifier>{\r\n                objectName: \"general\",\r\n                propertyName: \"formatString\"\r\n            }\r\n        },\r\n        labels: {\r\n            show: <DataViewObjectPropertyIdentifier>{\r\n                objectName: \"labels\",\r\n                propertyName: \"show\"\r\n            },\r\n            color: <DataViewObjectPropertyIdentifier>{\r\n                objectName: \"labels\",\r\n                propertyName: \"color\"\r\n            },\r\n            fontSize: <DataViewObjectPropertyIdentifier>{\r\n                objectName: \"labels\",\r\n                propertyName: \"fontSize\"\r\n            }\r\n        },\r\n        links: {\r\n            showArrow: <DataViewObjectPropertyIdentifier>{ objectName: 'links', propertyName: 'showArrow' },\r\n            showLabel: <DataViewObjectPropertyIdentifier>{ objectName: 'links', propertyName: 'showLabel' },\r\n            colorLink: <DataViewObjectPropertyIdentifier>{ objectName: 'links', propertyName: 'colorLink' },\r\n            thickenLink: <DataViewObjectPropertyIdentifier>{ objectName: 'links', propertyName: 'thickenLink' },\r\n        },\r\n        nodes: {\r\n            displayImage: <DataViewObjectPropertyIdentifier>{ objectName: 'nodes', propertyName: 'displayImage' },\r\n            defaultImage: <DataViewObjectPropertyIdentifier>{ objectName: 'nodes', propertyName: 'defaultImage' },\r\n            imageUrl: <DataViewObjectPropertyIdentifier>{ objectName: 'nodes', propertyName: 'imageUrl' },\r\n            imageExt: <DataViewObjectPropertyIdentifier>{ objectName: 'nodes', propertyName: 'imageExt' },\r\n            nameMaxLength: <DataViewObjectPropertyIdentifier>{ objectName: 'nodes', propertyName: 'nameMaxLength' },\r\n            highlightReachableLinks: <DataViewObjectPropertyIdentifier>{ objectName: 'nodes', propertyName: 'highlightReachableLinks' },\r\n        },\r\n        size: {\r\n            charge: <DataViewObjectPropertyIdentifier>{ objectName: 'size', propertyName: 'charge' },\r\n        }\r\n    };\r\n\r\n    export interface ForceGraphData {\r\n        nodes: {};\r\n        links: any[];\r\n        minFiles: number;\r\n        maxFiles: number;\r\n        linkedByName: {};\r\n        linkTypes: {};\r\n    }\r\n\r\n    export class ForceGraph implements IVisual {\r\n        public static VisualClassName = 'forceGraph';\r\n        private root: D3.Selection;\r\n        private paths: D3.Selection;\r\n        private nodes: D3.Selection;\r\n        private forceLayout: D3.Layout.ForceLayout;\r\n        private dataView: DataView;\r\n        private colors: IDataColorPalette;\r\n        private options: ForceGraphOptions;\r\n        private data: ForceGraphData;\r\n\r\n        private marginValue: IMargin;\r\n        private get margin(): IMargin {\r\n            return this.marginValue || { left: 0, right: 0, top: 0, bottom: 0 };\r\n        }\r\n        private set margin(value: IMargin) {\r\n            this.marginValue = $.extend({}, value);\r\n            this.viewportInValue = ForceGraph.substractMargin(this.viewport, this.margin);\r\n        }\r\n\r\n        private viewportValue: IViewport;\r\n        private get viewport(): IViewport {\r\n            return this.viewportValue || { width: 0, height: 0 };\r\n        }\r\n        private set viewport(value: IViewport) {\r\n            this.viewportValue = $.extend({}, value);\r\n            this.viewportInValue = ForceGraph.substractMargin(this.viewport, this.margin);\r\n        }\r\n\r\n        private viewportInValue: IViewport;\r\n        private get viewportIn(): IViewport {\r\n            return this.viewportInValue || this.viewport;\r\n        }\r\n\r\n        private static substractMargin(viewport: IViewport, margin: IMargin): IViewport {\r\n            return {\r\n                width: Math.max(viewport.width - (margin.left + margin.right), 0),\r\n                height: Math.max(viewport.height - (margin.top + margin.bottom), 0)\r\n            };\r\n        }\r\n\r\n        private scale1to10(d) {\r\n            let scale = d3.scale.linear().domain([this.data.minFiles, this.data.maxFiles]).rangeRound([1, 10]).clamp(true);\r\n            return scale(d);\r\n        }\r\n\r\n        private getLinkColor(d): string {\r\n            switch (this.options.colorLink) {\r\n                case linkColorType.byWeight:\r\n                    return this.colors.getColorByIndex(this.scale1to10(d.filecount)).value;\r\n                case linkColorType.byLinkType:\r\n                    return d.type && this.data.linkTypes[d.type] ? this.data.linkTypes[d.type].color : this.options.defaultLinkColor;\r\n            };\r\n            return this.options.defaultLinkColor;\r\n        }\r\n\r\n        private getDefaultOptions(): ForceGraphOptions {\r\n            return {\r\n                showDataLabels: true,\r\n                labelColor: dataLabelUtils.defaultLabelColor,\r\n                fontSize: dataLabelUtils.DefaultFontSizeInPt,\r\n                showArrow: false,\r\n                showLabel: false,\r\n                colorLink: linkColorType.interactive,\r\n                thickenLink: true,\r\n                displayImage: false,\r\n                defaultImage: \"Home\",\r\n                imageUrl: \"\",\r\n                imageExt: \".png\",\r\n                nameMaxLength: 10,\r\n                highlightReachableLinks: false,\r\n                charge: -15,\r\n                defaultLinkColor: \"#bbb\",\r\n                defaultLinkHighlightColor: \"#f00\",\r\n                defaultLinkThickness: \"1.5px\",\r\n            };\r\n        }\r\n\r\n        private updateOptions(objects: DataViewObjects) {\r\n            this.options.showDataLabels = DataViewObjects.getValue(objects, forceProps.labels.show, this.options.showDataLabels);\r\n            this.options.labelColor = DataViewObjects.getFillColor(objects, forceProps.labels.color, this.options.labelColor);\r\n            this.options.fontSize = DataViewObjects.getValue(objects, forceProps.labels.fontSize, this.options.fontSize);\r\n            this.options.showArrow = DataViewObjects.getValue(objects, forceProps.links.showArrow, this.options.showArrow);\r\n            this.options.showLabel = DataViewObjects.getValue(objects, forceProps.links.showLabel, this.options.showLabel);\r\n            this.options.colorLink = DataViewObjects.getValue(objects, forceProps.links.colorLink, this.options.colorLink);\r\n            this.options.thickenLink = DataViewObjects.getValue(objects, forceProps.links.thickenLink, this.options.thickenLink);\r\n            this.options.displayImage = DataViewObjects.getValue(objects, forceProps.nodes.displayImage, this.options.displayImage);\r\n            this.options.defaultImage = DataViewObjects.getValue(objects, forceProps.nodes.defaultImage, this.options.defaultImage);\r\n            this.options.imageUrl = DataViewObjects.getValue(objects, forceProps.nodes.imageUrl, this.options.imageUrl);\r\n            this.options.imageExt = DataViewObjects.getValue(objects, forceProps.nodes.imageExt, this.options.imageExt);\r\n            this.options.nameMaxLength = DataViewObjects.getValue(objects, forceProps.nodes.nameMaxLength, this.options.nameMaxLength);\r\n            this.options.highlightReachableLinks = DataViewObjects.getValue(objects, forceProps.nodes.highlightReachableLinks, this.options.highlightReachableLinks);\r\n            this.options.charge = DataViewObjects.getValue(objects, forceProps.size.charge, this.options.charge);\r\n            if (this.options.charge >= 0 || this.options.charge < -100) this.options.charge = this.getDefaultOptions().charge;\r\n        }\r\n\r\n        public static capabilities: VisualCapabilities = {\r\n            dataRoles: [\r\n                {\r\n                    name: 'Source',\r\n                    kind: VisualDataRoleKind.Grouping,\r\n                    displayName: 'Source',\r\n                },\r\n                {\r\n                    name: 'Target',\r\n                    kind: VisualDataRoleKind.Grouping,\r\n                    displayName: 'Target',\r\n                },\r\n                {\r\n                    name: 'Weight',\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: 'Weight',\r\n                },\r\n                {\r\n                    name: 'LinkType',\r\n                    kind: VisualDataRoleKind.Grouping,\r\n                    displayName: 'LinkType',\r\n                    description: 'Links can be colored by link types',\r\n                },\r\n                {\r\n                    name: 'SourceType',\r\n                    kind: VisualDataRoleKind.Grouping,\r\n                    displayName: 'SourceType',\r\n                    description: 'Source type represents the image name for source entities',\r\n                },\r\n                {\r\n                    name: 'TargetType',\r\n                    kind: VisualDataRoleKind.Grouping,\r\n                    displayName: 'TargetType',\r\n                    description: 'Target type represents the image name for target entities',\r\n                },\r\n            ],\r\n            objects: {\r\n                general: {\r\n                    properties: {\r\n                        formatString: {\r\n                            type: { formatting: { formatString: true } },\r\n                        }\r\n                    }\r\n                },\r\n                labels: {\r\n                    displayName: 'Data labels',\r\n                    properties: {\r\n                        show: {\r\n                            displayName: 'Show',\r\n                            type: { bool: true }\r\n                        },\r\n                        color: {\r\n                            displayName: 'Fill',\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        fontSize: {\r\n                            displayName: 'Text Size',\r\n                            type: { formatting: { fontSize: true } }\r\n                        }\r\n                    }\r\n                },\r\n                links: {\r\n                    displayName: 'Links',\r\n                    properties: {\r\n                        showArrow: {\r\n                            type: { bool: true },\r\n                            displayName: 'Arrow'\r\n                        },\r\n                        showLabel: {\r\n                            type: { bool: true },\r\n                            displayName: 'Label',\r\n                            description: 'Displays weight on links',\r\n                        },\r\n                        colorLink: {\r\n                            type: { enumeration: linkColorType.type },\r\n                            displayName: 'Color',\r\n                        },\r\n                        thickenLink: {\r\n                            type: { bool: true },\r\n                            displayName: 'Thickness',\r\n                            description: 'Thickenss of links represents weight',\r\n                        },\r\n                    }\r\n                },\r\n                nodes: {\r\n                    displayName: 'Nodes',\r\n                    properties: {\r\n                        displayImage: {\r\n                            type: { bool: true },\r\n                            displayName: 'Image',\r\n                            description: 'Images are loaded from image url + source or target type + image extension',\r\n                        },\r\n                        defaultImage: {\r\n                            type: { text: true },\r\n                            displayName: 'Default image'\r\n                        },\r\n                        imageUrl: {\r\n                            type: { text: true },\r\n                            displayName: 'Image url'\r\n                        },\r\n                        imageExt: {\r\n                            type: { text: true },\r\n                            displayName: 'Image extension'\r\n                        },\r\n                        nameMaxLength: {\r\n                            type: { numeric: true },\r\n                            displayName: 'Max name length',\r\n                            description: 'Max length of the name of entities displayed',\r\n                        },\r\n                        highlightReachableLinks: {\r\n                            type: { bool: true },\r\n                            displayName: 'Highlight all reachable links',\r\n                            description: \"In interactive mode, whether a node's all reachable links will be highlighted\",\r\n                        },\r\n                    }\r\n                },\r\n                size: {\r\n                    displayName: 'Size',\r\n                    properties: {\r\n                        charge: {\r\n                            type: { numeric: true },\r\n                            displayName: 'Charge',\r\n                            description: 'The larger the negative charge the more apart the entities, must be negative but greater than -100',\r\n                        },\r\n                    }\r\n                },\r\n            },\r\n            dataViewMappings: [{\r\n                conditions: [\r\n                    { 'Source': { max: 1 }, 'Target': { max: 1 }, 'Weight': { max: 1 }, 'LinkType': { max: 1 }, 'SourceType': { max: 1 }, 'TargetType': { max: 1 } },\r\n                ],\r\n                categorical: {\r\n                    categories: {\r\n                        for: { in: 'Source' },\r\n                        dataReductionAlgorithm: { top: {} }\r\n                    },\r\n                    values: {\r\n                        select: [\r\n                            { bind: { to: 'Target' } },\r\n                            { bind: { to: 'Weight' } },\r\n                            { bind: { to: 'LinkType' } },\r\n                            { bind: { to: 'SourceType' } },\r\n                            { bind: { to: 'TargetType' } },\r\n                        ],\r\n                    },\r\n                    rowCount: { preferred: { min: 1 } }\r\n                },\r\n            }],\r\n            suppressDefaultTitle: true,\r\n        };\r\n\r\n        public enumerateObjectInstances(options: EnumerateVisualObjectInstancesOptions): VisualObjectInstanceEnumeration {\r\n            let enumeration = new ObjectEnumerationBuilder();\r\n\r\n            switch (options.objectName) {\r\n                case 'labels':\r\n                    this.enumerateLabels(enumeration);\r\n                    break;\r\n                case 'links':\r\n                    this.enumerateLinks(enumeration);\r\n                    break;\r\n                case 'nodes':\r\n                    this.enumerateNodes(enumeration);\r\n                    break;\r\n                case 'size':\r\n                    this.enumerateSize(enumeration);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n\r\n            return enumeration.complete();\r\n        }\r\n\r\n        private enumerateLabels(enumeration: ObjectEnumerationBuilder): void {\r\n            let labels: VisualObjectInstance,\r\n                options: ForceGraphOptions;\r\n\r\n            if (!this.options || !this.options)\r\n                return;\r\n\r\n            options = this.options;\r\n\r\n            labels = {\r\n                objectName: 'labels',\r\n                displayName: 'Labels',\r\n                selector: null,\r\n                properties: {\r\n                    show: options.showDataLabels,\r\n                    fontSize: options.fontSize,\r\n                    color: options.labelColor\r\n                }\r\n            };\r\n\r\n            enumeration.pushInstance(labels);\r\n        }\r\n\r\n        private enumerateLinks(enumeration: ObjectEnumerationBuilder): void {\r\n            let links: VisualObjectInstance,\r\n                options: ForceGraphOptions;\r\n\r\n            if (!this.options)\r\n                return;\r\n\r\n            options = this.options;\r\n\r\n            links = {\r\n                objectName: 'links',\r\n                displayName: 'Links',\r\n                selector: null,\r\n                properties: {\r\n                    showArrow: options.showArrow,\r\n                    colorLink: options.colorLink,\r\n                    showLabel: options.showLabel,\r\n                    thickenLink: options.thickenLink,\r\n                }\r\n            };\r\n\r\n            enumeration.pushInstance(links);\r\n        }\r\n\r\n        private enumerateNodes(enumeration: ObjectEnumerationBuilder): void {\r\n            let nodes: VisualObjectInstance,\r\n                options: ForceGraphOptions;\r\n\r\n            if (!this.options)\r\n                return;\r\n\r\n            options = this.options;\r\n\r\n            nodes = {\r\n                objectName: 'nodes',\r\n                displayName: 'Nodes',\r\n                selector: null,\r\n                properties: {\r\n                    displayImage: options.displayImage,\r\n                    defaultImage: options.defaultImage,\r\n                    imageUrl: options.imageUrl,\r\n                    imageExt: options.imageExt,\r\n                    nameMaxLength: options.nameMaxLength,\r\n                    highlightReachableLinks: options.highlightReachableLinks,\r\n                }\r\n            };\r\n\r\n            enumeration.pushInstance(nodes);\r\n        }\r\n\r\n        private enumerateSize(enumeration: ObjectEnumerationBuilder): void {\r\n            let size: VisualObjectInstance,\r\n                options: ForceGraphOptions;\r\n\r\n            if (!this.options)\r\n                return;\r\n\r\n            options = this.options;\r\n\r\n            size = {\r\n                objectName: 'size',\r\n                displayName: 'Size',\r\n                selector: null,\r\n                properties: {\r\n                    charge: options.charge,\r\n                }\r\n            };\r\n\r\n            enumeration.pushInstance(size);\r\n        }\r\n\r\n        public static converter(dataView: DataView, colors: IDataColorPalette): ForceGraphData {\r\n            let categorical: DataViewCategorical = dataView.categorical;\r\n            let nodes = {};\r\n            let minFiles = Number.MAX_VALUE;\r\n            let maxFiles = 0;\r\n            let linkedByName = {};\r\n            let links = [];\r\n            let linkDataPoints = {};\r\n            let linkTypeCount = 0;\r\n            let sourceCol = -1, targetCol = -1, weightCol = -1, linkTypeCol = -1, sourceTypeCol = -1, targetTypeCol = -1;\r\n            let rows;\r\n            let tooltipInfo: TooltipDataItem[] = [];\r\n            let formatStringProp = forceProps.general.formatString;\r\n\r\n            if (dataView && dataView.categorical && dataView.categorical.categories && dataView.metadata && dataView.metadata.columns) {\r\n                let metadataColumns = dataView.metadata.columns;\r\n                for (let i = 0; i < metadataColumns.length; i++) {\r\n                    let col = metadataColumns[i];\r\n                    if (col.roles) {\r\n                        if (col.roles['Source'])\r\n                            sourceCol = i;\r\n                        else if (col.roles['Target'])\r\n                            targetCol = i;\r\n                        else if (col.roles['Weight'])\r\n                            weightCol = i;\r\n                        else if (col.roles['LinkType'])\r\n                            linkTypeCol = i;\r\n                        else if (col.roles['SourceType'])\r\n                            sourceTypeCol = i;\r\n                        else if (col.roles['TargetType'])\r\n                            targetTypeCol = i;\r\n                    }\r\n                }\r\n            }\r\n            if (dataView && dataView.table) {\r\n                rows = dataView.table.rows;\r\n            }\r\n            if (sourceCol < 0 || targetCol < 0)\r\n                return <ForceGraphData>{\r\n                    nodes: {},\r\n                    links: [],\r\n                    minFiles: 0,\r\n                    maxFiles: 0,\r\n                    linkedByName: {},\r\n                    linkTypes: {},\r\n                };\r\n\r\n            let categorySourceFormatString = valueFormatter.getFormatString(categorical.categories[0].source, formatStringProp);\r\n            let categoryTargetFormatString = valueFormatter.getFormatString(categorical.categories[1].source, formatStringProp);\r\n            let weightFormatString = valueFormatter.getFormatString(categorical.values ? categorical.values[0].source : null, formatStringProp, true);\r\n\r\n            rows.forEach(function(item) {\r\n                linkedByName[item[sourceCol] + \",\" + item[targetCol]] = 1;\r\n                let source = nodes[item[sourceCol]] ||\r\n                    (nodes[item[sourceCol]] = { name: item[sourceCol], image: sourceTypeCol > 0 ? item[sourceTypeCol] : '', adj: {} });\r\n                let target = nodes[item[targetCol]] ||\r\n                    (nodes[item[targetCol]] = { name: item[targetCol], image: targetTypeCol > 0 ? item[targetTypeCol] : '', adj: {} });\r\n                source.adj[target.name] = 1;\r\n                target.adj[source.name] = 1;\r\n\r\n                tooltipInfo = [{\r\n                    displayName: dataView.metadata.columns[0].displayName,\r\n                    value: valueFormatter.format(source.name, categorySourceFormatString)\r\n                }, {\r\n                        displayName: dataView.metadata.columns[1].displayName,\r\n                        value: valueFormatter.format(target.name, categoryTargetFormatString)\r\n                    }];\r\n\r\n                if (weightCol > 0)\r\n                    tooltipInfo.push({\r\n                        displayName: dataView.metadata.columns[2].displayName,\r\n                        value: valueFormatter.format(item[weightCol], weightFormatString)\r\n                    });\r\n\r\n                let link = {\r\n                    source: source,\r\n                    target: target,\r\n                    filecount: weightCol > 0 ? item[weightCol] : 0,\r\n                    type: linkTypeCol > 0 ? item[linkTypeCol] : '',\r\n                    tooltipInfo: tooltipInfo,\r\n                };\r\n\r\n                if (linkTypeCol > 0) {\r\n                    if (!linkDataPoints[item[linkTypeCol]]) {\r\n                        linkDataPoints[item[linkTypeCol]] = {\r\n                            label: item[linkTypeCol],\r\n                            color: colors.getColorByIndex(linkTypeCount++).value,\r\n                        };\r\n                    };\r\n                };\r\n                if (link.filecount < minFiles) { minFiles = link.filecount; };\r\n                if (link.filecount > maxFiles) { maxFiles = link.filecount; };\r\n                links.push(link);\r\n            });\r\n\r\n            return {\r\n                nodes: nodes,\r\n                links: links,\r\n                minFiles: minFiles,\r\n                maxFiles: maxFiles,\r\n                linkedByName: linkedByName,\r\n                linkTypes: linkDataPoints,\r\n            };\r\n        }\r\n\r\n        public init(options: VisualInitOptions): void {\r\n            this.root = d3.select(options.element.get(0));\r\n            this.forceLayout = d3.layout.force();\r\n            this.colors = options.style.colorPalette.dataColors;\r\n            this.options = this.getDefaultOptions();\r\n        }\r\n\r\n        public update(options: VisualUpdateOptions) {\r\n            if (!options.dataViews || (options.dataViews.length < 1)) return;\r\n            this.data = ForceGraph.converter(this.dataView = options.dataViews[0], this.colors);\r\n            if (!this.data) return;\r\n            if (options.dataViews[0].metadata && options.dataViews[0].metadata.objects)\r\n                this.updateOptions(options.dataViews[0].metadata.objects);\r\n            this.viewport = options.viewport;\r\n            let k = Math.sqrt(Object.keys(this.data.nodes).length / (this.viewport.width * this.viewport.height));\r\n\r\n            this.root.selectAll(\"svg\").remove();\r\n\r\n            let svg = this.root\r\n                .append(\"svg\")\r\n                .attr(\"width\", this.viewport.width)\r\n                .attr(\"height\", this.viewport.height)\r\n                .classed(ForceGraph.VisualClassName, true);\r\n\r\n            this.forceLayout\r\n                .gravity(100 * k)\r\n                .links(this.data.links)\r\n                .size([this.viewport.width, this.viewport.height])\r\n                .linkDistance(100)\r\n                .charge(this.options.charge / k)\r\n                .on(\"tick\", this.tick());\r\n            this.updateNodes();\r\n            this.forceLayout.start();\r\n\r\n            // uncomment if we don't need the marker-end workaround\r\n            //if (this.options.showArrow) {\r\n            // build the arrow.\r\n            //function marker(d, i) {\r\n            //    let val = \"mid_\" + i;\r\n            //    svg.append(\"defs\").selectAll(\"marker\")\r\n            //        .data([val])      // Different link/path types can be defined here\r\n            //        .enter().append(\"marker\")    // This section adds in the arrows\r\n            //        .attr(\"id\", String)\r\n            //        .attr(\"viewBox\", \"0 -5 10 10\")\r\n            //        .attr(\"refX\", 10)\r\n            //        .attr(\"refY\", 0)\r\n            //        .attr(\"markerWidth\", 6)\r\n            //        .attr(\"markerHeight\", 6)\r\n            //        .attr(\"orient\", \"auto\")\r\n            //        .attr(\"markerUnits\", \"userSpaceOnUse\")\r\n            //        .append(\"path\")\r\n            //        .attr(\"d\", \"M0,-5L10,0L0,5\")\r\n            //    //below works if no marker-end workaround needed\r\n            //        .style(\"fill\", d => this.getLinkColor(d))\r\n            //    ;\r\n            //    return \"url(#\" + val + \")\";\r\n            //}\r\n            //}\r\n            this.paths = svg.selectAll(\".link\")\r\n                .data(this.forceLayout.links())\r\n                .enter().append(\"path\")\r\n                .attr(\"class\", \"link\")\r\n                .attr(\"id\", (d, i) => \"linkid_\" + i)\r\n                // uncomment if we don't need the marker-end workaround\r\n                //.attr(\"marker-end\", function (d, i) { return marker(d, i); })\r\n                .attr(\"stroke-width\", d => this.options.thickenLink ? this.scale1to10(d.filecount) : this.options.defaultLinkThickness)\r\n                .style(\"stroke\", d => this.getLinkColor(d))\r\n                // no need for \"fill\" if we don't need the marker-end workaround\r\n                .style(\"fill\", d => { if (this.options.showArrow) return this.getLinkColor(d); })\r\n                .on(\"mouseover\", this.fadePath(.3, this.options.defaultLinkHighlightColor))\r\n                .on(\"mouseout\", this.fadePath(1, this.options.defaultLinkColor));\r\n\r\n            TooltipManager.addTooltip(this.paths, (tooltipEvent: TooltipEvent) => {\r\n                return tooltipEvent.data.tooltipInfo;\r\n            });\r\n\r\n            if (this.options.showLabel) {\r\n                svg.selectAll(\".linklabelholder\")\r\n                    .data(this.forceLayout.links())\r\n                    .enter().append(\"g\")\r\n                    .attr(\"class\", \"linklabelholder\")\r\n                    .append(\"text\")\r\n                    .attr(\"class\", \"linklabel\")\r\n                    .attr(\"y\", \"-12\")\r\n                    .attr(\"text-anchor\", \"middle\")\r\n                    .style(\"fill\", \"#000\")\r\n                    .append(\"textPath\")\r\n                    .attr(\"xlink:href\", (d, i) => \"#linkid_\" + i)\r\n                    .attr(\"startOffset\", \"25%\") //use \"50%\" if we don't need the marker-end workaround\r\n                    .text(d => this.options.colorLink === linkColorType.byLinkType ? d.type : d.filecount);\r\n            }\r\n\r\n            // define the nodes\r\n            this.nodes = svg.selectAll(\".node\")\r\n                .data(this.forceLayout.nodes())\r\n                .enter().append(\"g\")\r\n                .attr(\"class\", \"node\")\r\n                .call(this.forceLayout.drag)\r\n                .on(\"mouseover\", this.fadeNode(.3, this.options.defaultLinkHighlightColor))\r\n                .on(\"mouseout\", this.fadeNode(1, this.options.defaultLinkColor))\r\n                .on(\"mousedown\", () => d3.event.stopPropagation())\r\n                .attr(\"drag-resize-disabled\", true);\r\n\r\n            // add the nodes\r\n            if (this.options.displayImage) {\r\n                this.nodes.append(\"image\")\r\n                    .attr(\"xlink:href\", d =>\r\n                        d.image && d.image !== '' ?\r\n                            this.options.imageUrl + d.image + this.options.imageExt :\r\n                            (\r\n                                this.options.defaultImage && this.options.defaultImage !== '' ?\r\n                                    this.options.imageUrl + this.options.defaultImage + this.options.imageExt :\r\n                                    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAbCAMAAAHNDTTxAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACuUExURQAAAMbGxvLy8sfHx/Hx8fLy8vHx8cnJycrKyvHx8fHx8cvLy/Ly8szMzM3NzfHx8dDQ0PHx8fLy8vHx8e/v79LS0tPT0/Ly8tTU1NXV1dbW1vHx8fHx8fDw8NjY2PT09PLy8vLy8vHx8fLy8vHx8fHx8enp6fDw8PLy8uPj4+Tk5OXl5fHx8b+/v/Pz8+bm5vHx8ejo6PLy8vHx8fLy8sTExPLy8vLy8sXFxfHx8YCtMbUAAAA6dFJOUwD/k/+b7/f///+r/////0z/w1RcEP//ZP///4fj/v8Yj3yXn/unDEhQ////YP9Y/8//aIMU/9+L/+fzC4s1AAAACXBIWXMAABcRAAAXEQHKJvM/AAABQElEQVQoU5WS61LCMBCFFymlwSPKVdACIgWkuNyL+P4v5ibZ0jKjP/xm0uw5ySa7mRItAhnMoIC5TwQZdCZiZjcoC8WU6EVsmZgzoqGdxafgvJAvjUXCb2M+0cXNsd/GDarZqSf7av3M2P1E3xhfLkPUvLD5joEYwVVJQXM6+9McWUwLf4nDTCQZAy96UoDjNI/jhl3xPLbQamu8xD7iaIsPKw7GJ7KZEnWLY3Gi8EFj5nqibXnwD5VEGjJXk5sbpLppfvvo1RazQVrhSopPK4TODrtnjS3dY4ic8KurruWQYF+UG60BacexTMyT2jlNg41dOmKvTpkUd/Jevy7ZxQ61ULRUpoododx8GeDPvIrktbFVdUsK6f8Na5VlVpjZJtowTXVy7kfXF5wCaV1tqXAFuIdWJu+JviaQzNzfQvQDGKRXXEmy83cAAAAASUVORK5CYII='\r\n                            )\r\n                    )\r\n                    .attr(\"x\", \"-12px\")\r\n                    .attr(\"y\", \"-12px\")\r\n                    .attr(\"width\", \"24px\")\r\n                    .attr(\"height\", \"24px\");\r\n            } else {\r\n                this.nodes.append(\"circle\")\r\n                    .attr(\"r\", d => d.weight < 5 ? 5 : d.weight);\r\n            }\r\n\r\n            // add the text\r\n            if (this.options.showDataLabels) {\r\n                this.nodes.append(\"text\")\r\n                    .attr({\r\n                        x: 12,\r\n                        dy: \".35em\"\r\n                    })\r\n                    .style({\r\n                        fill: this.options.labelColor,\r\n                        'font-size': PixelConverter.fromPoint(this.options.fontSize)\r\n                    })\r\n                    .text(d => d.name ? (d.name.length > this.options.nameMaxLength ? d.name.substr(0, this.options.nameMaxLength) : d.name) : '');\r\n            }\r\n        }\r\n\r\n        private updateNodes() {\r\n            let oldNodes = this.forceLayout.nodes();\r\n            this.forceLayout.nodes(d3.values(this.data.nodes));\r\n            this.forceLayout.nodes().forEach((node, i) => {\r\n                if (!oldNodes[i]) {\r\n                    return;\r\n                }\r\n                node.x = oldNodes[i].x;\r\n                node.y = oldNodes[i].y;\r\n                node.px = oldNodes[i].px;\r\n                node.py = oldNodes[i].py;\r\n                node.weight = oldNodes[i].weight;\r\n            });\r\n        }\r\n\r\n        private tick() {\r\n            let viewport = this.viewportIn;\r\n            // limitX and limitY is necessary when you minimize the graph and then resize it to normal.\r\n            //\"width/height * 20\" seems enough to move nodes freely by force layout.\r\n            let maxWidth = viewport.width * 20;\r\n            let maxHeight = viewport.height * 20;\r\n            let limitX = x => Math.max((viewport.width - maxWidth) / 2, Math.min((viewport.width + maxWidth) / 2, x));\r\n            let limitY = y => Math.max((viewport.height - maxHeight) / 2, Math.min((viewport.height + maxHeight) / 2, y));\r\n            //use this if we don't need the marker-end workaround\r\n            //path.attr(\"d\", function (d) {\r\n            //    let dx = d.target.x - d.source.x,\r\n            //        dy = d.target.y - d.source.y,\r\n            //        dr = Math.sqrt(dx * dx + dy * dy);\r\n            //    // x and y distances from center to outside edge of target node\r\n            //    let offsetX = (dx * d.target.radius) / dr;\r\n            //    let offsetY = (dy * d.target.radius) / dr;\r\n            //    return \"M\" +\r\n            //        d.source.x + \",\" +\r\n            //        d.source.y + \"A\" +\r\n            //        dr + \",\" + dr + \" 0 0,1 \" +\r\n            //        (d.target.x - offsetX) + \",\" +\r\n            //        (d.target.y - offsetY);\r\n            //});\r\n\r\n            let getPath = this.options.showArrow ?\r\n                //this is for marker-end workaround, build the marker with the path\r\n                d => {\r\n                    d.source.x = limitX(d.source.x);\r\n                    d.source.y = limitY(d.source.y);\r\n                    d.target.x = limitX(d.target.x);\r\n                    d.target.y = limitY(d.target.y);\r\n                    let dx = d.target.x - d.source.x,\r\n                        dy = d.target.y - d.source.y,\r\n                        dr = Math.sqrt(dx * dx + dy * dy),\r\n                        theta = Math.atan2(dy, dx) + Math.PI / 7.85,\r\n                        d90 = Math.PI / 2,\r\n                        dtxs = d.target.x - 6 * Math.cos(theta),\r\n                        dtys = d.target.y - 6 * Math.sin(theta);\r\n                    return \"M\" +\r\n                        d.source.x + \",\" +\r\n                        d.source.y + \"A\" +\r\n                        dr + \",\" + dr + \" 0 0 1,\" +\r\n                        d.target.x + \",\" +\r\n                        d.target.y +\r\n                        \"A\" + dr + \",\" + dr + \" 0 0 0,\" + d.source.x + \",\" + d.source.y + \"M\" + dtxs + \",\" + dtys + \"l\" + (3.5 * Math.cos(d90 - theta) - 10 * Math.cos(theta)) + \",\" + (-3.5 * Math.sin(d90 - theta) - 10 * Math.sin(theta)) + \"L\" + (dtxs - 3.5 * Math.cos(d90 - theta) - 10 * Math.cos(theta)) + \",\" + (dtys + 3.5 * Math.sin(d90 - theta) - 10 * Math.sin(theta)) + \"z\";\r\n                } :\r\n                d => {\r\n                    d.source.x = limitX(d.source.x);\r\n                    d.source.y = limitY(d.source.y);\r\n                    d.target.x = limitX(d.target.x);\r\n                    d.target.y = limitY(d.target.y);\r\n                    let dx = d.target.x - d.source.x,\r\n                        dy = d.target.y - d.source.y,\r\n                        dr = Math.sqrt(dx * dx + dy * dy);\r\n                    return \"M\" +\r\n                        d.source.x + \",\" +\r\n                        d.source.y + \"A\" +\r\n                        dr + \",\" + dr + \" 0 0,1 \" +\r\n                        d.target.x + \",\" +\r\n                        d.target.y;\r\n                };\r\n\r\n            return () => {\r\n                this.paths.each(function() { this.parentNode.insertBefore(this, this); });\r\n                this.paths.attr(\"d\", getPath);\r\n                this.nodes.attr(\"transform\", d => \"translate(\" + limitX(d.x) + \",\" + limitY(d.y) + \")\");\r\n            };\r\n        }\r\n\r\n        private fadePath(opacity: number, highlight: string) {\r\n            if (this.options.colorLink !== linkColorType.interactive) return;\r\n            return d => {\r\n                this.paths.style(\"stroke-opacity\", o => o.source === d.source && o.target === d.target ? 1 : opacity);\r\n                this.paths.style(\"stroke\", o => o.source === d.source && o.target === d.target ? highlight : this.options.defaultLinkColor);\r\n            };\r\n        }\r\n\r\n        private isReachable(a, b): boolean {\r\n            if (a.name === b.name) return true;\r\n            if (this.data.linkedByName[a.name + \",\" + b.name]) return true;\r\n            let visited = {};\r\n            for (let name in this.data.nodes) {\r\n                visited[name] = false;\r\n            };\r\n            visited[a.name] = true;\r\n\r\n            let stack = [];\r\n            stack.push(a.name);\r\n            while (stack.length > 0) {\r\n                let cur = stack.pop();\r\n                let node = this.data.nodes[cur];\r\n                for (let nb in node.adj) {\r\n                    if (nb === b.name) return true;\r\n\r\n                    if (!visited[nb]) {\r\n                        visited[nb] = true;\r\n                        stack.push(nb);\r\n                    }\r\n                }\r\n            };\r\n            return false;\r\n        }\r\n\r\n        private fadeNode(opacity: number, highlight: string) {\r\n            if (this.options.colorLink !== linkColorType.interactive) return;\r\n            let isConnected = (a, b) => this.data.linkedByName[a.name + \",\" + b.name] || this.data.linkedByName[b.name + \",\" + a.name] || a.name === b.name;\r\n\r\n            return d => {\r\n                let that = this;\r\n                this.nodes.style(\"stroke-opacity\", function(o) {\r\n                    let thisOpacity = (that.options.highlightReachableLinks ? that.isReachable(d, o) : isConnected(d, o)) ? 1 : opacity;\r\n                    this.setAttribute('fill-opacity', thisOpacity);\r\n                    return thisOpacity;\r\n                });\r\n\r\n                this.paths.style(\"stroke-opacity\", o =>\r\n                    (this.options.highlightReachableLinks ? this.isReachable(d, o.source) :\r\n                        (o.source === d || o.target === d)) ? 1 : opacity);\r\n                this.paths.style(\"stroke\", o =>\r\n                    (this.options.highlightReachableLinks ? this.isReachable(d, o.source) :\r\n                        (o.source === d || o.target === d)) ? highlight : this.options.defaultLinkColor);\r\n            };\r\n        }\r\n\r\n        public destroy(): void {\r\n            this.root = null;\r\n        }\r\n    }\r\n}","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *\r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *\r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.visuals.samples {\r\n    import SelectionManager = utility.SelectionManager;\r\n    import PixelConverter = jsCommon.PixelConverter;\r\n    import IStringResourceProvider = jsCommon.IStringResourceProvider;\r\n\r\n    const PercentFormat: string = \"0.00 %;-0.00 %;0.00 %\";\r\n    const MillisecondsInADay: number = 86400000;\r\n    const MillisecondsInWeek: number = 604800000;\r\n    const MillisecondsInAMonth: number = 2629746000;\r\n    const MillisecondsInAYear: number = 31556952000;\r\n    export const DefaultDateType: string = \"Week\";\r\n    const ChartLineHeight: number = 40;\r\n    const PaddingTasks: number = 5;\r\n\r\n    export module dateTypeSelector {\r\n        export const day: string = 'Day';\r\n        export const week: string = 'Week';\r\n        export const month: string = 'Month';\r\n        export const year: string = 'Year';\r\n\r\n        export const type: IEnumType = createEnumType([\r\n            { value: day, displayName: 'Day' },\r\n            { value: week, displayName: 'Week' },\r\n            { value: month, displayName: 'Month' },\r\n            { value: year, displayName: 'Year' }\r\n        ]);\r\n    }\r\n    export interface Task extends SelectableDataPoint {\r\n        id: number;\r\n        name: string;\r\n        start: Date;\r\n        duration: number;\r\n        completion: number;\r\n        resource: string;\r\n        end: Date;\r\n        taskType: string;\r\n        description: string;\r\n        color: string;\r\n        tooltipInfo: TooltipDataItem[];\r\n    }\r\n\r\n    export interface GanttChartFormatters {\r\n        startDateFormatter: IValueFormatter;\r\n        completionFormatter: IValueFormatter;\r\n        durationFormatter: IValueFormatter;\r\n    }\r\n\r\n    export interface GanttChartData {\r\n        legendData: LegendData;\r\n        series: GanttSeries[];\r\n        showLegend: boolean;\r\n    }\r\n\r\n    export interface GanttViewModel {\r\n        taskLabelsShow: boolean;\r\n        taskLabelsColor: string;\r\n        taskLabelsFontSize: number;\r\n        taskLabelsWidth: number;\r\n        taskProgressColor: string;\r\n        taskResourceShow: boolean;\r\n        taskResourceColor: string;\r\n        taskResourceFontSize: number;\r\n        legendData: LegendData;\r\n        taskTypes: TaskTypes;\r\n        dateType: string;\r\n    }\r\n\r\n    export interface GanttDataPoint extends SelectableDataPoint {\r\n        color: string;\r\n        value: any;\r\n    }\r\n\r\n    export interface GanttSeries extends SelectableDataPoint {\r\n        tasks: Task[];\r\n        fill: string;\r\n        name: string;\r\n    }\r\n\r\n    export interface TaskTypes { /*TODO: change to more proper name*/\r\n        types: string[];\r\n        typeName: string;\r\n    };\r\n\r\n    interface Line {\r\n        x1: number;\r\n        y1: number;\r\n        x2: number;\r\n        y2: number;\r\n        tooltipInfo: TooltipDataItem[];\r\n    }\r\n\r\n    export const GanttChartProps = {\r\n        legend: {\r\n            show: <DataViewObjectPropertyIdentifier>{ objectName: 'legend', propertyName: 'show' },\r\n            position: <DataViewObjectPropertyIdentifier>{ objectName: 'legend', propertyName: 'position' },\r\n            showTitle: <DataViewObjectPropertyIdentifier>{ objectName: 'legend', propertyName: 'showTitle' },\r\n            titleText: <DataViewObjectPropertyIdentifier>{ objectName: 'legend', propertyName: 'titleText' },\r\n            labelColor: <DataViewObjectPropertyIdentifier>{ objectName: 'legend', propertyName: 'labelColor' },\r\n            fontSize: <DataViewObjectPropertyIdentifier>{ objectName: 'legend', propertyName: 'fontSize' },\r\n        },\r\n        taskCompletion: {\r\n            fill: <DataViewObjectPropertyIdentifier>{ objectName: 'taskCompletion', propertyName: 'fill' },\r\n        },\r\n        dataPoint: {\r\n            fill: <DataViewObjectPropertyIdentifier>{ objectName: 'dataPoint', propertyName: 'fill' },\r\n        },\r\n        taskLabels: {\r\n            show: <DataViewObjectPropertyIdentifier>{ objectName: 'taskLabels', propertyName: 'show' },\r\n            fill: <DataViewObjectPropertyIdentifier>{ objectName: 'taskLabels', propertyName: 'fill' },\r\n            fontSize: <DataViewObjectPropertyIdentifier>{ objectName: 'taskLabels', propertyName: 'fontSize' },\r\n            width: <DataViewObjectPropertyIdentifier>{ objectName: 'taskLabels', propertyName: 'width' },\r\n        },\r\n        taskResource: {\r\n            show: <DataViewObjectPropertyIdentifier>{ objectName: 'taskResource', propertyName: 'show' },\r\n            fill: <DataViewObjectPropertyIdentifier>{ objectName: 'taskResource', propertyName: 'fill' },\r\n            fontSize: <DataViewObjectPropertyIdentifier>{ objectName: 'taskResource', propertyName: 'fontSize' },\r\n        },\r\n        ganttDateType:\r\n        {\r\n            type: <DataViewObjectPropertyIdentifier>{ objectName: 'ganttDateType', propertyName: 'type' },\r\n        }\r\n    };\r\n\r\n    module Selectors {\r\n\r\n        import ClassAndSelector = jsCommon.CssConstants.ClassAndSelector;\r\n        import CreateClassAndSelector = jsCommon.CssConstants.createClassAndSelector;\r\n\r\n        export const ClassName: ClassAndSelector = CreateClassAndSelector(\"gantt\");\r\n        export const Chart: ClassAndSelector = CreateClassAndSelector(\"chart\");\r\n        export const ChartLine: ClassAndSelector = CreateClassAndSelector(\"chart-line\");\r\n        export const Body: ClassAndSelector = CreateClassAndSelector(\"gantt-body\");\r\n        export const AxisGroup: ClassAndSelector = CreateClassAndSelector(\"axis\");\r\n        export const Domain: ClassAndSelector = CreateClassAndSelector(\"domain\");\r\n        export const AxisTick: ClassAndSelector = CreateClassAndSelector(\"tick\");\r\n\r\n        export const Tasks: ClassAndSelector = CreateClassAndSelector(\"tasks\");\r\n        export const SingleTask: ClassAndSelector = CreateClassAndSelector(\"task\");\r\n        export const TaskRect: ClassAndSelector = CreateClassAndSelector(\"task-rect\");\r\n        export const TaskProgress: ClassAndSelector = CreateClassAndSelector(\"task-progress\");\r\n        export const TaskResource: ClassAndSelector = CreateClassAndSelector(\"task-resource\");\r\n        export const SingleMilestone: ClassAndSelector = CreateClassAndSelector(\"milestone\");\r\n\r\n        export const TaskLabels: ClassAndSelector = CreateClassAndSelector(\"task-labels\");\r\n        export const TaskLines: ClassAndSelector = CreateClassAndSelector(\"task-lines\");\r\n        export const SingleTaskLine: ClassAndSelector = CreateClassAndSelector(\"task-line\");\r\n        export const Label: ClassAndSelector = CreateClassAndSelector(\"label\");\r\n        export const LegendItems: ClassAndSelector = CreateClassAndSelector(\"legendItem\");\r\n        export const LegendTitle: ClassAndSelector = CreateClassAndSelector(\"legendTitle\");\r\n    }\r\n\r\n    export class Gantt implements IVisual {\r\n\r\n        private data: GanttChartData;\r\n        private dataView: DataView;\r\n        private viewport: IViewport;\r\n        private colors: IDataColorPalette;\r\n        private legend: ILegend;\r\n        private legendObjectProperties: DataViewObject;\r\n\r\n        private textProperties: TextProperties = {\r\n            fontFamily: 'wf_segoe-ui_normal',\r\n            fontSize: jsCommon.PixelConverter.toString(9),\r\n        };\r\n\r\n        private static DefaultValues = {\r\n            AxisTickSize: 6,\r\n            LabelFontSize: 9,\r\n            LegendFontSize: 8,\r\n            LegendLabelColor: \"#000000\",\r\n            MaxTaskOpacity: 1,\r\n            MinTaskOpacity: 0.4,\r\n            ProgressBarHeight: 4,\r\n            ProgressColor: \"#000000\",\r\n            ResourceFontSize: 9,\r\n            ResourceWidth: 100,\r\n            TaskColor: \"#00B099\",\r\n            TaskLabelColor: \"#000000\",\r\n            TaskLabelWidth: 110,\r\n            TaskLineWidth: 15,\r\n            TaskResourceColor: \"#000000\",\r\n            ganttFormatString: \"MMM dd\"\r\n        };\r\n\r\n        public static capabilities: VisualCapabilities = {\r\n            dataRoles: [\r\n                {\r\n                    name: \"Legend\",\r\n                    kind: VisualDataRoleKind.Grouping,\r\n                    displayName: \"Legend\",\r\n                }, {\r\n                    name: \"Task\",\r\n                    kind: VisualDataRoleKind.Grouping,\r\n                    displayName: \"Task\"\r\n                }, {\r\n                    name: \"StartDate\",\r\n                    kind: VisualDataRoleKind.Grouping,\r\n                    displayName: \"Start Date\",\r\n                }, {\r\n                    name: \"Duration\",\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: \"Duration\",\r\n                    requiredTypes: [{ numeric: true }, { integer: true }]\r\n                }, {\r\n                    name: \"Completion\",\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: \"% Completion\",\r\n                    requiredTypes: [{ numeric: true }, { integer: true }]\r\n                }, {\r\n                    name: \"Resource\",\r\n                    kind: VisualDataRoleKind.Grouping,\r\n                    displayName: \"Resource\"\r\n                }\r\n            ],\r\n            dataViewMappings: [{\r\n                conditions: [\r\n                    {\r\n                        \"Legend\": { min: 0, max: 1 },\r\n                        \"Task\": { min: 1, max: 1 },\r\n                        \"StartDate\": { min: 0, max: 0 },\r\n                        \"Duration\": { min: 0, max: 0 },\r\n                        \"Completion\": { min: 0, max: 0 },\r\n                        \"Resource\": { min: 0, max: 0 }\r\n                    }, {\r\n                        \"Legend\": { min: 0, max: 1 },\r\n                        \"Task\": { min: 1, max: 1 },\r\n                        \"StartDate\": { min: 0, max: 1 },\r\n                        \"Duration\": { min: 0, max: 0 },\r\n                        \"Completion\": { min: 0, max: 0 },\r\n                        \"Resource\": { min: 0, max: 0 }\r\n                    }, {\r\n                        \"Legend\": { min: 0, max: 1 },\r\n                        \"Task\": { min: 0, max: 1 },\r\n                        \"StartDate\": { min: 0, max: 1 },\r\n                        \"Duration\": { min: 0, max: 1 },\r\n                        \"Completion\": { min: 0, max: 1 },\r\n                        \"Resource\": { min: 0, max: 1 },\r\n                    }\r\n                ],\r\n                table: {\r\n                    rows: {\r\n                        select:\r\n                        [\r\n                            { for: { in: \"Legend\" } },\r\n                            { for: { in: \"Task\" } },\r\n                            { for: { in: \"StartDate\" } },\r\n                            { for: { in: \"Duration\" } },\r\n                            { for: { in: \"Completion\" } },\r\n                            { for: { in: \"Resource\" } },\r\n                        ]\r\n                    },\r\n                },\r\n            }],\r\n            sorting: {\r\n                default: {},\r\n            },\r\n            objects: {\r\n                legend: {\r\n                    displayName: \"Legend\",\r\n                    description: \"Display legend options\",\r\n                    properties: {\r\n                        show: {\r\n                            displayName: \"Show\",\r\n                            type: { bool: true }\r\n                        },\r\n                        position: {\r\n                            displayName: \"Position\",\r\n                            description: \"Select the location for the legend\",\r\n                            type: { enumeration: legendPosition.type }\r\n                        },\r\n                        showTitle: {\r\n                            displayName: \"Title\",\r\n                            description: \"Display a title for legend symbols\",\r\n                            type: { bool: true }\r\n                        },\r\n                        titleText: {\r\n                            displayName: \"Legend Name\",\r\n                            description: \"Title text\",\r\n                            type: { text: true },\r\n                            suppressFormatPainterCopy: true\r\n                        },\r\n                        labelColor: {\r\n                            displayName: \"Color\",\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        fontSize: {\r\n                            displayName: \"Text Size\",\r\n                            type: { formatting: { fontSize: true } }\r\n                        }\r\n                    }\r\n                },\r\n                //dataPoint: {\r\n                //    displayName: \"Data colors\",\r\n                //    properties: {\r\n                //        fill: {\r\n                //            displayName: \"Fill\",\r\n                //            type: { fill: { solid: { color: true } } }\r\n                //        }\r\n                //    }\r\n                //},\r\n                taskLabels: {\r\n                    displayName: 'Category Labels',\r\n                    properties: {\r\n                        show: {\r\n                            displayName: \"Show\",\r\n                            type: { bool: true }\r\n                        },\r\n                        fill: {\r\n                            displayName: 'Fill',\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        fontSize: {\r\n                            displayName: 'Font Size',\r\n                            type: { formatting: { fontSize: true } }\r\n                        },\r\n                        width: {\r\n                            displayName: 'Width',\r\n                            type: { numeric: true }\r\n                        }\r\n                    }\r\n                },\r\n                taskCompletion: {\r\n                    displayName: 'Task Completion',\r\n                    properties: {\r\n                        show: {\r\n                            type: { bool: true }\r\n                        },\r\n                        fill: {\r\n                            displayName: 'Completion Color',\r\n                            type: { fill: { solid: { color: true } } }\r\n                        }\r\n                    }\r\n                },\r\n                taskResource: {\r\n                    displayName: 'Data Labels',\r\n                    properties: {\r\n                        show: {\r\n                            displayName: \"Show\",\r\n                            type: { bool: true }\r\n                        },\r\n                        fill: {\r\n                            displayName: 'Color',\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        fontSize: {\r\n                            displayName: 'Font Size',\r\n                            type: { formatting: { fontSize: true } }\r\n                        }\r\n                    }\r\n                },\r\n                ganttDateType: {\r\n                    displayName: 'Gantt Date Type',\r\n                    properties: {\r\n                        type: {\r\n                            displayName: \"Type\",\r\n                            type: { enumeration: dateTypeSelector.type }\r\n                        },\r\n                    }\r\n                },\r\n            }\r\n        };\r\n\r\n        private margin: IMargin = {\r\n            top: 50,\r\n            right: 40,\r\n            bottom: 40,\r\n            left: 10\r\n        };\r\n\r\n        private style: IVisualStyle;\r\n        private body: D3.Selection;\r\n        private ganttSvg: D3.Selection;\r\n        private viewModel: GanttViewModel;\r\n        private timeScale: D3.Scale.TimeScale;\r\n        private axisGroup: D3.Selection;\r\n\r\n        private chartGroup: D3.Selection;\r\n        private taskGroup: D3.Selection;\r\n        private lineGroup: D3.Selection;\r\n\r\n        private clearCatcher: D3.Selection;\r\n        private ganttDiv: D3.Selection;\r\n        private selectionManager: SelectionManager;\r\n        private behavior: GanttChartBehavior;\r\n        private interactivityService: IInteractivityService;\r\n        private hostServices: IVisualHostServices;\r\n        private isInteractiveChart: boolean;\r\n\r\n        public static getMaxTaskOpacity(): number {\r\n            return Gantt.DefaultValues.MaxTaskOpacity;\r\n        }\r\n\r\n        public static getMinTaskOpacity(): number {\r\n            return Gantt.DefaultValues.MinTaskOpacity;\r\n        }\r\n\r\n        public init(options: VisualInitOptions): void {\r\n            let element: JQuery = options.element;\r\n\r\n            this.style = options.style;\r\n            this.body = d3.select(element.get(0));\r\n\r\n            this.hostServices = options.host;\r\n            this.selectionManager = new SelectionManager({ hostServices: options.host });\r\n\r\n            this.isInteractiveChart = options.interactivity && options.interactivity.isInteractiveLegend;\r\n            this.interactivityService = createInteractivityService(this.hostServices);\r\n            this.createViewport(element);\r\n            this.updateChartSize(options.viewport);\r\n            this.behavior = new GanttChartBehavior();\r\n            this.colors = options.style.colorPalette.dataColors;\r\n\r\n            this.data = {\r\n                legendData: null,\r\n                series: null,\r\n                showLegend: null\r\n            };\r\n        }\r\n\r\n        /**\r\n         * Create the vieport area of the gantt chart\r\n         */\r\n        private createViewport(element: JQuery): void {\r\n            //create div container to the whole viewport area\r\n            this.ganttDiv = this.body.append(\"div\")\r\n                .classed(Selectors.Body.class, true);\r\n\r\n            //create container to the svg area\r\n            this.ganttSvg = this.ganttDiv\r\n                .append(\"svg\")\r\n                .classed(Selectors.ClassName.class, true);\r\n         \r\n            //create clear catcher\r\n            this.clearCatcher = appendClearCatcher(this.ganttSvg);\r\n\r\n            //create axis container\r\n            this.axisGroup = this.ganttSvg\r\n                .append(\"g\")\r\n                .classed(Selectors.AxisGroup.class, true);\r\n            \r\n            //create task lines container\r\n            this.lineGroup = this.ganttSvg\r\n                .append(\"g\")\r\n                .classed(Selectors.TaskLines.class, true);\r\n            \r\n            //create chart container\r\n            this.chartGroup = this.ganttSvg\r\n                .append(\"g\")\r\n                .classed(Selectors.Chart.class, true);\r\n            \r\n            //create tasks container\r\n            this.taskGroup = this.chartGroup\r\n                .append(\"g\")\r\n                .classed(Selectors.Tasks.class, true);\r\n\r\n            //create legend container\r\n            this.legend = createLegend(element.children(Selectors.Body.selector),\r\n                this.isInteractiveChart,\r\n                this.interactivityService,\r\n                true,\r\n                LegendPosition.Top);\r\n        }\r\n\r\n        /**\r\n         * Clear the viewport area\r\n         */\r\n        private clearViewport(): void {\r\n            this.body.selectAll(Selectors.LegendItems.selector).remove();\r\n            this.body.selectAll(Selectors.LegendTitle.selector).remove();\r\n            this.axisGroup.selectAll(Selectors.AxisTick.selector).remove();\r\n            this.axisGroup.selectAll(Selectors.Domain.selector).remove();\r\n            this.lineGroup.selectAll(\"*\").remove();\r\n            this.chartGroup.selectAll(Selectors.ChartLine.selector).remove();\r\n            this.chartGroup.selectAll(Selectors.SingleTask.selector).remove();\r\n        }\r\n\r\n        /**\r\n         * Update div container size to the whole viewport area\r\n         * @param viewport The vieport to change it size \r\n         */\r\n        private updateChartSize(viewport: IViewport): void {\r\n            this.ganttDiv.style({\r\n                height: PixelConverter.toString(viewport.height),\r\n                width: PixelConverter.toString(viewport.width)\r\n            });\r\n        }\r\n\r\n        /**\r\n       * Create the gantt tasks series based on all task types\r\n       * @param taskTypes All unique types from the tasks array.\r\n       */\r\n        private createSeries(objects: DataViewObjects, tasks: Task[]): GanttSeries[] {\r\n            let colorHelper = new ColorHelper(this.colors, GanttChartProps.dataPoint.fill);\r\n            let taskGroup: _.Dictionary<Task[]> = _.groupBy(tasks, t=> t.taskType);\r\n            let taskTypes = Gantt.getAllTasksTypes(this.dataView);\r\n\r\n            let series: GanttSeries[] = _.map(taskTypes.types, type => {\r\n                return {\r\n                    tasks: taskGroup[type],\r\n                    fill: colorHelper.getColorForMeasure(objects, type),\r\n                    name: type,\r\n                    identity: SelectionId.createWithMeasure(type),\r\n                    selected: false\r\n                };\r\n            });\r\n\r\n            return series;\r\n        }\r\n\r\n        /**\r\n        * Convert the dataView to view model\r\n        * @param dataView The data Model\r\n        */\r\n        public static converter(dataView: DataView, colorPalette: IDataColorPalette): GanttViewModel {\r\n            let taskLabelsShow: boolean = DataViewObjects.getValue<boolean>(dataView.metadata.objects, GanttChartProps.taskLabels.show, true);\r\n            let taskLabelsColor: string = DataViewObjects.getFillColor(dataView.metadata.objects, GanttChartProps.taskLabels.fill, Gantt.DefaultValues.TaskLabelColor);\r\n            let taskLabelsFontSize: number = DataViewObjects.getValue<number>(dataView.metadata.objects, GanttChartProps.taskLabels.fontSize, Gantt.DefaultValues.LabelFontSize);\r\n            let taskLabelsWidth: number = DataViewObjects.getValue<number>(dataView.metadata.objects, GanttChartProps.taskLabels.width, taskLabelsShow ? Gantt.DefaultValues.TaskLabelWidth : 0);\r\n            let taskProgressColor: string = DataViewObjects.getFillColor(dataView.metadata.objects, GanttChartProps.taskCompletion.fill, Gantt.DefaultValues.ProgressColor);\r\n            let taskResourceColor: string = DataViewObjects.getFillColor(dataView.metadata.objects, GanttChartProps.taskResource.fill, Gantt.DefaultValues.TaskResourceColor);\r\n            let taskResourceFontSize: number = DataViewObjects.getValue<number>(dataView.metadata.objects, GanttChartProps.taskResource.fontSize, Gantt.DefaultValues.ResourceFontSize);\r\n            let taskResourceShow: boolean = DataViewObjects.getValue<boolean>(dataView.metadata.objects, GanttChartProps.taskResource.show, true);\r\n            let dateType: string = DataViewObjects.getValue<string>(dataView.metadata.objects, GanttChartProps.ganttDateType.type, DefaultDateType);\r\n\r\n            let taskTypes = Gantt.getAllTasksTypes(dataView);\r\n            let colorHelper = new ColorHelper(colorPalette, GanttChartProps.dataPoint.fill);\r\n            let legendData: LegendData = {\r\n                fontSize: Gantt.DefaultValues.LegendFontSize,\r\n                dataPoints: [],\r\n                title: taskTypes.typeName\r\n            };\r\n\r\n            legendData.dataPoints = _.map(taskTypes.types, type => {\r\n                return {\r\n                    label: type,\r\n                    color: colorHelper.getColorForMeasure(dataView.metadata.objects, type),\r\n                    icon: LegendIcon.Circle,\r\n                    selected: false,\r\n                    identity: SelectionId.createWithMeasure(type)\r\n                };\r\n            });\r\n\r\n            let settings: GanttViewModel = {\r\n                taskLabelsShow: taskLabelsShow,\r\n                taskLabelsColor: taskLabelsColor,\r\n                taskLabelsFontSize: taskLabelsFontSize,\r\n                taskLabelsWidth: taskLabelsWidth,\r\n                taskProgressColor: taskProgressColor,\r\n                taskResourceShow: taskResourceShow,\r\n                taskResourceColor: taskResourceColor,\r\n                taskResourceFontSize: taskResourceFontSize,\r\n                legendData: legendData,\r\n                taskTypes: taskTypes,\r\n                dateType: dateType\r\n            };\r\n\r\n            return settings;\r\n        }\r\n\r\n        /**\r\n         * Returns the chart formatters\r\n         * @param dataView The data Model\r\n         */\r\n        private parseSettings(dataView: DataView): GanttChartFormatters {\r\n            if (!dataView ||\r\n                !dataView.metadata ||\r\n                !dataView.metadata.columns)\r\n                return null;\r\n\r\n            let dateFormat = \"d\";\r\n            let numberFormat = \"#\";\r\n\r\n            for (let dvColumn of dataView.metadata.columns) {\r\n                if (!!dataView.categorical.categories) {\r\n                    for (let dvCategory of dataView.categorical.categories) {\r\n                        if (this.hasRole(dvCategory.source, \"StartDate\"))\r\n                            dateFormat = dvColumn.format;\r\n                    }\r\n                }\r\n            }\r\n\r\n            return <GanttChartFormatters>{\r\n                startDateFormatter: valueFormatter.create({ format: dateFormat }),\r\n                durationFormatter: valueFormatter.create({ format: numberFormat }),\r\n                completionFormatter: valueFormatter.create({ format: PercentFormat, value: 1, allowFormatBeautification: true })\r\n            };\r\n        }\r\n\r\n        private isValidDate(date: Date) {\r\n            if (Object.prototype.toString.call(date) !== \"[object Date]\")\r\n                return false;\r\n            return !isNaN(date.getTime());\r\n        }\r\n\r\n        private convertToDecimal(number) {\r\n            if (!(number >= 0 && number <= 1))\r\n                return (number / 100);\r\n            return number;\r\n        }\r\n\r\n        /**\r\n        * Create task objects dataView\r\n        * @param dataView The data Model.\r\n        * @param formatters task attributes represented format.\r\n        * @param series An array that holds the color data of different task groups.\r\n        */\r\n        private createTasks(dataView: DataView, formatters: GanttChartFormatters): Task[] {\r\n            let columnSource = dataView.table.columns;\r\n            let data = dataView.table.rows;\r\n            let categories = dataView.categorical.categories[0];\r\n            let colorHelper = new ColorHelper(this.colors, GanttChartProps.dataPoint.fill);\r\n\r\n            return data.map((child: DataViewTableRow, index: number) => {\r\n                let dateString = this.getTaskProperty<Date>(columnSource, child, \"StartDate\");\r\n                //let startDate = new Date(dateString);\r\n                dateString = this.isValidDate(dateString) ? dateString : new Date(Date.now());\r\n\r\n                let duration = this.getTaskProperty<number>(columnSource, child, \"Duration\");\r\n\r\n                let completionValue = this.getTaskProperty<number>(columnSource, child, \"Completion\");\r\n                let completion = this.convertToDecimal(completionValue);\r\n                completion = completion <= 1 ? completion : 1;\r\n\r\n                let taskType = this.getTaskProperty<string>(columnSource, child, \"Legend\");\r\n                let tasksTypeColor: string = colorHelper.getColorForMeasure(dataView.metadata.objects, taskType);\r\n\r\n                let task: Task = {\r\n                    id: index,\r\n                    name: this.getTaskProperty<string>(columnSource, child, \"Task\"),\r\n                    start: dateString ? dateString : new Date(Date.now()),\r\n                    duration: duration > 0 ? duration : 1,\r\n                    end: null,\r\n                    completion: completion > 0 ? completion : 0,\r\n                    resource: this.getTaskProperty<string>(columnSource, child, \"Resource\"),\r\n                    taskType: taskType,\r\n                    color: tasksTypeColor ? tasksTypeColor : Gantt.DefaultValues.TaskColor, /* get color by task type  */\r\n                    tooltipInfo: null,\r\n                    description: \"\",\r\n                    identity: SelectionId.createWithIdAndMeasure(categories.identity[index], taskType),\r\n                    selected: false\r\n                };\r\n\r\n                task.end = d3.time.day.offset(task.start, task.duration);\r\n                task.tooltipInfo = this.getTooltipInfo(task, formatters);\r\n                return task;\r\n            });\r\n        }\r\n\r\n        /**\r\n        * Gets all unique types from the tasks array\r\n        * @param dataView The data model.\r\n        */\r\n        private static getAllTasksTypes(dataView: DataView): TaskTypes {\r\n            let types: string[] = [];\r\n            let groupName: string = \"\";\r\n            let taskTypes: TaskTypes;\r\n            let data = dataView.table.rows;\r\n            let index = _.findIndex(dataView.table.columns, col => col.roles.hasOwnProperty(\"Legend\"));\r\n\r\n            if (index !== -1) {\r\n                groupName = dataView.table.columns[index].displayName;\r\n                types = _.unique(data, (d) => d[index]).map((d) => d[index]);\r\n            }\r\n\r\n            taskTypes = {\r\n                typeName: groupName,\r\n                types: types\r\n            };\r\n\r\n            return taskTypes;\r\n        }\r\n\r\n        /**\r\n        * Get the tooltip info (data display names & formated values)\r\n        * @param task All task attributes.\r\n        * @param formatters Formatting options for gantt attributes.\r\n        */\r\n        private getTooltipInfo(task: Task, formatters: GanttChartFormatters, timeInterval: string = \"Days\") {\r\n            let tooltipDataArray: TooltipDataItem[] = [];\r\n\r\n            if (task.taskType)\r\n                tooltipDataArray.push({ displayName: Gantt.capabilities.dataRoles[0].name, value: task.taskType });\r\n\r\n            tooltipDataArray.push({ displayName: Gantt.capabilities.dataRoles[1].name, value: task.name });\r\n            if (!isNaN(task.start.getDate()))\r\n                tooltipDataArray.push({ displayName: Gantt.capabilities.dataRoles[2].name, value: formatters.startDateFormatter.format(task.start.toLocaleDateString()) });\r\n\r\n            tooltipDataArray.push({ displayName: Gantt.capabilities.dataRoles[3].name, value: formatters.durationFormatter.format(task.duration) + \" \" + timeInterval });\r\n            tooltipDataArray.push({ displayName: Gantt.capabilities.dataRoles[4].name, value: formatters.completionFormatter.format(task.completion) });\r\n\r\n            if (task.resource)\r\n                tooltipDataArray.push({ displayName: Gantt.capabilities.dataRoles[5].name, value: task.resource });\r\n\r\n            return tooltipDataArray;\r\n        }\r\n\r\n        /**\r\n         * Get task property from the data view\r\n         * @param columnSource\r\n         * @param child\r\n         * @param propertyName The property to get\r\n         */\r\n        private getTaskProperty<T>(columnSource: DataViewMetadataColumn[], child: DataViewTableRow, propertyName: string): T {\r\n            if (!child ||\r\n                !columnSource ||\r\n                !(columnSource.length > 0) ||\r\n                !columnSource[0].roles)\r\n                return null;\r\n\r\n            let index = columnSource.indexOf(columnSource.filter(x=> x.roles[propertyName])[0]);\r\n            return index !== -1 ? <T>child[index] : null;\r\n        }\r\n\r\n        /**\r\n         * Check if dataView has a given role\r\n         * @param column The dataView headers\r\n         * @param name The role to find\r\n         */\r\n        private hasRole(column: DataViewMetadataColumn, name: string) {\r\n            var roles = column.roles;\r\n            return roles && roles[name];\r\n        }\r\n\r\n        /**\r\n         * Check if task has data for task\r\n         * @param dataView\r\n         */\r\n        private isChartHasTask(dataView: DataView): boolean {\r\n            if (dataView.table &&\r\n                dataView.table.columns) {\r\n                for (let column of dataView.table.columns) {\r\n                    if (this.hasRole(column, \"Task\")) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n\r\n        /**\r\n         * Get legend data, calculate position and draw it\r\n         * @param ganttChartData Data for series and legend\r\n         */\r\n        private renderLegend(legendData: LegendData): void {\r\n            if (!legendData)\r\n                return;\r\n\r\n            if (this.legendObjectProperties) {\r\n                LegendData.update(legendData, this.legendObjectProperties);\r\n                var position: string;\r\n                position = <string>this.legendObjectProperties[legendProps.position];\r\n\r\n                if (position)\r\n                    this.legend.changeOrientation(LegendPosition[position]);\r\n            }\r\n\r\n            let viewport = this.viewport;\r\n            this.legend.drawLegend(legendData, { height: viewport.height, width: viewport.width });\r\n            Legend.positionChartArea(this.ganttSvg, this.legend);\r\n        }\r\n\r\n        private parseLegendProperties(dataView: DataView): void {\r\n            if (!dataView || !dataView.metadata) {\r\n                this.legendObjectProperties = {};\r\n                return;\r\n            }\r\n\r\n            this.legendObjectProperties = DataViewObjects.getObject(dataView.metadata.objects, 'legend', {});\r\n        }\r\n\r\n        /**\r\n        * Called on data change or resizing\r\n        * @param options The visual option that contains the dataview and the viewport\r\n        */\r\n        public update(options: VisualUpdateOptions) {\r\n            if (!options.dataViews || !options.dataViews[0])\r\n                return;\r\n            let dataView = options.dataViews[0];\r\n\r\n            if (!this.isChartHasTask(dataView) || options.dataViews[0].table.rows.length === 0) {\r\n                this.clearViewport();\r\n                return;\r\n            }\r\n\r\n            this.dataView = dataView;\r\n            let viewport = options.viewport;\r\n            this.viewport = viewport;\r\n            this.updateChartSize(viewport);\r\n\r\n            let viewModel: GanttViewModel = Gantt.converter(dataView, this.colors),\r\n                formatters: GanttChartFormatters = this.parseSettings(dataView),\r\n                tasks: Task[] = this.createTasks(dataView, formatters);\r\n\r\n            this.parseLegendProperties(dataView);\r\n            this.renderLegend(viewModel.legendData);\r\n            this.data.series = this.createSeries(dataView.metadata.objects, tasks);\r\n            this.viewModel = viewModel;\r\n\r\n            if (this.interactivityService) {\r\n                this.interactivityService.applySelectionStateToData(tasks);\r\n                this.interactivityService.applySelectionStateToData(this.data.series);\r\n            }\r\n\r\n            if (tasks.length > 0) {\r\n                let tasksSortedByStartDate: Task[] = _.sortBy(tasks, (t) => t.start);\r\n                let tasksSortedByEndDate: Task[] = _.sortBy(tasks, (t) => t.end);\r\n                let dateTypeMilliseconds = this.getDateType();\r\n\r\n                let startDate: Date = tasksSortedByStartDate[0].start,\r\n                    endDate: Date = tasksSortedByEndDate[tasks.length - 1].end,\r\n                    ticks = Math.ceil(Math.round(endDate.valueOf() - startDate.valueOf()) / dateTypeMilliseconds);\r\n\r\n                ticks = ticks === 0 || ticks === 1 ? 2 : ticks;\r\n                let axisLength = ticks * 50;\r\n                this.ganttSvg\r\n                    .attr({\r\n                        height: PixelConverter.toString(tasks.length * ChartLineHeight + this.margin.top),\r\n                        width: PixelConverter.toString(this.margin.left + this.viewModel.taskLabelsWidth + axisLength + Gantt.DefaultValues.ResourceWidth)\r\n                    });\r\n\r\n                let viewportIn: IViewport = {\r\n                    height: viewport.height,\r\n                    width: axisLength\r\n                };\r\n\r\n                let xAxisProperties = this.calculateAxes(viewportIn, this.textProperties, startDate, endDate, axisLength, ticks, false);\r\n                this.timeScale = <D3.Scale.TimeScale>xAxisProperties.scale;\r\n\r\n                this.renderAxis(xAxisProperties, 200);\r\n                this.renderTasks(tasks);\r\n\r\n                this.createMilestoneLine(tasks);\r\n                this.updateTaskLabels(tasks, viewModel.taskLabelsWidth);\r\n                this.updateElementsPositions(viewport, this.margin);\r\n\r\n                if (this.interactivityService) {\r\n                    let behaviorOptions: GanttBehaviorOptions = {\r\n                        clearCatcher: this.clearCatcher,\r\n                        taskSelection: this.taskGroup.selectAll(Selectors.SingleTask.selector),\r\n                        legendSelection: this.body.selectAll(Selectors.LegendItems.selector),\r\n                        interactivityService: this.interactivityService\r\n                    };\r\n                    this.interactivityService.bind(tasks, this.behavior, behaviorOptions);\r\n                }\r\n            }\r\n        }\r\n        \r\n        private getDateType(): number {\r\n            let milliSeconds: number = MillisecondsInWeek;\r\n\r\n            switch (this.viewModel.dateType) {\r\n                case \"Day\":\r\n                    milliSeconds = MillisecondsInADay;\r\n                    break;\r\n\r\n                case \"Week\":\r\n                    milliSeconds = MillisecondsInWeek;\r\n                    break;\r\n\r\n                case \"Month\":\r\n                    milliSeconds = MillisecondsInAMonth;\r\n                    break;\r\n\r\n                case \"Year\":\r\n                    milliSeconds = MillisecondsInAYear;\r\n                    break;\r\n            }\r\n\r\n            return milliSeconds;\r\n        }\r\n\r\n        private calculateAxes(\r\n            viewportIn: IViewport,\r\n            textProperties: TextProperties,\r\n            startDate: Date,\r\n            endDate: Date,\r\n            axisLength: number,\r\n            ticksCount: number,\r\n            scrollbarVisible: boolean): IAxisProperties {\r\n\r\n            let dataTypeDatetime = ValueType.fromPrimitiveTypeAndCategory(PrimitiveType.Date);\r\n            let category: DataViewMetadataColumn = { displayName: \"StartDate\", queryName: \"StartDate\", type: dataTypeDatetime, index: 0 };\r\n            let visualOptions: CalculateScaleAndDomainOptions = {\r\n                viewport: viewportIn,\r\n                margin: this.margin,\r\n                forcedXDomain: [startDate, endDate],\r\n                forceMerge: false,\r\n                showCategoryAxisLabel: false,\r\n                showValueAxisLabel: false,\r\n                categoryAxisScaleType: powerbi.visuals.axisScale.linear,\r\n                valueAxisScaleType: null,\r\n                valueAxisDisplayUnits: 0,\r\n                categoryAxisDisplayUnits: 0,\r\n                trimOrdinalDataOnOverflow: false,\r\n                forcedTickCount: ticksCount\r\n            };\r\n\r\n            let width = viewportIn.width;\r\n            let axes = this.calculateAxesProperties(viewportIn, visualOptions, axisLength, category);\r\n            axes.willLabelsFit = AxisHelper.LabelLayoutStrategy.willLabelsFit(\r\n                axes,\r\n                width,\r\n                TextMeasurementService.measureSvgTextWidth,\r\n                textProperties);\r\n\r\n            // If labels do not fit and we are not scrolling, try word breaking\r\n            axes.willLabelsWordBreak = (!axes.willLabelsFit && !scrollbarVisible) && AxisHelper.LabelLayoutStrategy.willLabelsWordBreak(\r\n                axes, this.margin, width, TextMeasurementService.measureSvgTextWidth,\r\n                TextMeasurementService.estimateSvgTextHeight, TextMeasurementService.getTailoredTextOrDefault,\r\n                textProperties);\r\n\r\n            return axes;\r\n        }\r\n\r\n        private calculateAxesProperties(viewportIn: IViewport, options: CalculateScaleAndDomainOptions, axisLength: number, metaDataColumn: DataViewMetadataColumn): IAxisProperties {\r\n            let xAxisProperties = AxisHelper.createAxis({\r\n                pixelSpan: viewportIn.width,\r\n                dataDomain: options.forcedXDomain,\r\n                metaDataColumn: metaDataColumn,\r\n                formatString: Gantt.DefaultValues.ganttFormatString,\r\n                outerPadding: 0,\r\n                isScalar: true,\r\n                isVertical: false,\r\n                forcedTickCount: options.forcedTickCount,\r\n                useTickIntervalForDisplayUnits: true,\r\n                isCategoryAxis: true,\r\n                getValueFn: (index, type) => {\r\n                    return valueFormatter.format(new Date(index), Gantt.DefaultValues.ganttFormatString);\r\n                },\r\n                scaleType: options.categoryAxisScaleType,\r\n                axisDisplayUnits: options.categoryAxisDisplayUnits,\r\n            });\r\n\r\n            xAxisProperties.axisLabel = metaDataColumn.displayName;\r\n            return xAxisProperties;\r\n        }\r\n\r\n        private renderAxis(xAxisProperties: IAxisProperties, duration: number): void {\r\n            let xAxis = xAxisProperties.axis;\r\n            xAxis.orient('bottom');\r\n\r\n            this.axisGroup.transition().duration(duration).call(xAxis);\r\n        }\r\n        /**\r\n        * Update task labels and add its tooltips \r\n        * @param tasks All tasks array\r\n        * @param width The task label width\r\n        */\r\n        private updateTaskLabels(tasks: Task[], width: number): void {\r\n            let axisLabel: D3.UpdateSelection;\r\n            let taskLineCoordinateX: number = 15;\r\n            let taskLabelsShow = this.viewModel ? this.viewModel.taskLabelsShow : true;\r\n            let taskLabelsColor = this.viewModel ? this.viewModel.taskLabelsColor : Gantt.DefaultValues.TaskLabelColor;\r\n            let taskLabelsFontSize = this.viewModel ? this.viewModel.taskLabelsFontSize : Gantt.DefaultValues.LabelFontSize;\r\n\r\n            if (taskLabelsShow) {\r\n                axisLabel = this.lineGroup.selectAll(Selectors.Label.selector).data(tasks);\r\n                axisLabel.enter().append(\"text\").classed(Selectors.Label.class, true);\r\n                axisLabel.attr({\r\n                    x: taskLineCoordinateX,\r\n                    y: (task: Task, i: number) => this.getTaskLabelCoordinateY(task.id),\r\n                    fill: taskLabelsColor,\r\n                    \"stroke-width\": 1\r\n                })\r\n                    .style(\"font-size\", PixelConverter.fromPoint(taskLabelsFontSize))\r\n                    .text((task) => { return task.name; });\r\n\r\n                axisLabel.call(AxisHelper.LabelLayoutStrategy.clip, width - 20, TextMeasurementService.svgEllipsis);\r\n                axisLabel.append(\"title\").text((task) => { return task.name; });\r\n                axisLabel.exit().remove();\r\n            }\r\n            else {\r\n                this.lineGroup.selectAll(Selectors.Label.selector).remove();\r\n            }\r\n        }\r\n\r\n        private renderTasks(tasks: Task[]) {\r\n            let taskSelection: D3.UpdateSelection = this.taskGroup.selectAll(Selectors.SingleTask.selector).data(tasks);\r\n            let taskProgressColor = this.viewModel ? this.viewModel.taskProgressColor : Gantt.DefaultValues.ProgressColor;\r\n            let taskResourceShow = this.viewModel ? this.viewModel.taskResourceShow : true;\r\n            let padding: number = 4;\r\n            let taskResourceColor = this.viewModel ? this.viewModel.taskResourceColor : Gantt.DefaultValues.TaskResourceColor;\r\n            let taskResourceFontSize: number = this.viewModel ? this.viewModel.taskResourceFontSize : Gantt.DefaultValues.ResourceFontSize;\r\n\r\n            //render task group container \r\n            taskSelection.enter().append(\"g\").classed(Selectors.SingleTask.class, true);\r\n            //render task main rect\r\n            let taskRect = taskSelection.selectAll(Selectors.TaskRect.selector).data((d: Task) => [d]);\r\n            taskRect.enter().append(\"rect\").classed(Selectors.TaskRect.class, true);\r\n            taskRect.classed(Selectors.TaskRect.class, true).attr({\r\n                x: (task: Task) => this.timeScale(task.start),\r\n                y: (task: Task) => this.getBarYCoordinate(task.id),\r\n                width: (task: Task) => this.taskDurationToWidth(task),\r\n                height: () => this.getBarHeight()\r\n            }).style(\"fill\", (task: Task) => task.color);\r\n            taskRect.exit().remove();\r\n\r\n            //render task progress rect \r\n            let taskProgress = taskSelection.selectAll(Selectors.TaskProgress.selector).data((d: Task) => [d]);\r\n            taskProgress.enter().append(\"rect\").classed(Selectors.TaskProgress.class, true);\r\n            taskProgress.attr({\r\n                x: (task: Task) => this.timeScale(task.start),\r\n                y: (task: Task) => this.getBarYCoordinate(task.id) + this.getBarHeight() / 2 - Gantt.DefaultValues.ProgressBarHeight / 2,\r\n                width: (task: Task) => this.setTaskProgress(task),\r\n                height: Gantt.DefaultValues.ProgressBarHeight\r\n            }).style(\"fill\", taskProgressColor);\r\n            taskProgress.exit().remove();\r\n\r\n            if (taskResourceShow) {\r\n                //render task resource labels\r\n                let taskResource = taskSelection.selectAll(Selectors.TaskResource.selector).data((d: Task) => [d]);\r\n                taskResource.enter().append(\"text\").classed(Selectors.TaskResource.class, true);\r\n                taskResource.attr({\r\n                    x: (task: Task) => this.timeScale(task.end) + padding,\r\n                    y: (task: Task) => (this.getBarYCoordinate(task.id) + (this.getBarHeight() / 2) + padding)\r\n                })\r\n                    .text((task: Task) => task.resource)\r\n                    .style({\r\n                        fill: taskResourceColor,\r\n                        \"font-size\": PixelConverter.fromPoint(taskResourceFontSize)\r\n                    }).call(AxisHelper.LabelLayoutStrategy.clip,\r\n                    Gantt.DefaultValues.ResourceWidth - 10,\r\n                    TextMeasurementService.svgEllipsis);\r\n\r\n                taskResource.exit().remove();\r\n            }\r\n            else {\r\n                taskSelection.selectAll(Selectors.TaskResource.selector).remove();\r\n            }\r\n\r\n            TooltipManager.addTooltip(taskSelection, (tooltipEvent: TooltipEvent) => (<Task>tooltipEvent.data).tooltipInfo);\r\n            taskSelection.exit().remove();\r\n        }\r\n\r\n        public onClearSelection() {\r\n            this.selectionManager.clear();\r\n        }\r\n\r\n        /**\r\n         * Returns the matching Y coordinate for a given task index \r\n         * @param taskIndex Task Number\r\n         */\r\n        private getTaskLabelCoordinateY(taskIndex: number): number {\r\n            let fontSize: number = +this.getTaskLabelFontSize();\r\n            return (ChartLineHeight * taskIndex) + (this.getBarHeight() + 5 - (40 - fontSize) / 4);\r\n        }\r\n\r\n        /**\r\n         * Set the task progress bar in the gantt\r\n         * @param task All task attributes\r\n         */\r\n        private setTaskProgress(task: Task): number {\r\n            let fraction = task.completion / 1.0,\r\n                y = this.timeScale,\r\n                progress = (y(task.end) - y(task.start)) * fraction;\r\n\r\n            return progress;\r\n        }\r\n\r\n        /**\r\n         * Set the task progress bar in the gantt\r\n         * @param lineNumber Line number that represents the task number\r\n         */\r\n        private getBarYCoordinate(lineNumber: number): number {\r\n            return (ChartLineHeight * lineNumber) + (PaddingTasks);\r\n        }\r\n\r\n        private getBarHeight(): number {\r\n            return ChartLineHeight / 1.5;\r\n        }\r\n\r\n        /**\r\n        * convert task duration to width in the time scale\r\n        * @param task The task to convert\r\n        */\r\n        private taskDurationToWidth(task: Task): number {\r\n            return this.timeScale(task.end) - this.timeScale(task.start);\r\n        }\r\n\r\n        private getTooltipForMilstoneLine(timestamp: number, milestoneTitle: string): TooltipDataItem[] {\r\n            let stringDate = new Date(timestamp).toDateString();\r\n            let tooltip: TooltipDataItem[] = [{ displayName: milestoneTitle, value: stringDate }];\r\n            return tooltip;\r\n        }\r\n\r\n        /**\r\n        * Create vertical dotted line that represent milestone in the time axis (by default it shows not time)\r\n        * @param tasks All tasks array\r\n        * @param timestamp the milestone to be shown in the time axis (default Date.now())\r\n        */\r\n        private createMilestoneLine(tasks: Task[], milestoneTitle: string = \"Today\", timestamp: number = Date.now()): void {\r\n            let line: Line[] = [{\r\n                x1: this.timeScale(timestamp),\r\n                y1: 0,\r\n                x2: this.timeScale(timestamp),\r\n                y2: this.getMilestoneLineLength(tasks.length),\r\n                tooltipInfo: this.getTooltipForMilstoneLine(timestamp, milestoneTitle)\r\n            }];\r\n\r\n            let chartLineSelection: D3.UpdateSelection = this.chartGroup.selectAll(Selectors.ChartLine.selector).data(line);\r\n            chartLineSelection.enter().append(\"line\").classed(Selectors.ChartLine.class, true);\r\n            chartLineSelection.attr({\r\n                x1: (line: Line) => line.x1,\r\n                y1: (line: Line) => line.y1,\r\n                x2: (line: Line) => line.x2,\r\n                y2: (line: Line) => line.y2,\r\n                tooltipInfo: (line: Line) => line.tooltipInfo\r\n            });\r\n\r\n            TooltipManager.addTooltip(chartLineSelection, (tooltipEvent: TooltipEvent) => (<Line>tooltipEvent.data).tooltipInfo);\r\n            chartLineSelection.exit().remove();\r\n        }\r\n\r\n        private updateElementsPositions(viewport: IViewport, margin: IMargin): void {\r\n            let viewModel = this.viewModel;\r\n            this.axisGroup.attr(\"transform\", SVGUtil.translate(viewModel.taskLabelsWidth + margin.left, 15));\r\n            this.chartGroup.attr(\"transform\", SVGUtil.translate(viewModel.taskLabelsWidth + margin.left, margin.top));\r\n            this.lineGroup.attr(\"transform\", SVGUtil.translate(0, margin.top));\r\n        }\r\n       \r\n        /**\r\n         * Returns the width of the now line based on num of tasks\r\n         * @param numOfTasks Number of tasks\r\n         */\r\n        private getMilestoneLineLength(numOfTasks: number): number {\r\n            return numOfTasks * ChartLineHeight;\r\n        }\r\n\r\n        private getTaskLabelFontSize(): number {\r\n            return DataViewObjects.getValue<number>(this.dataView.metadata.objects, GanttChartProps.taskLabels.fontSize, Gantt.DefaultValues.LabelFontSize);\r\n        }\r\n            \r\n        /** \r\n         * handle \"Legend\" card\r\n         * @param enumeration The instance to be pushed into \"Legend\" card\r\n         * @param objects Dataview objects\r\n         */\r\n        private enumerateLegendOptions(enumeration: ObjectEnumerationBuilder, objects: DataViewObjects) {\r\n            enumeration.pushInstance({\r\n                displayName: GanttChartProps.legend.show.objectName,\r\n                selector: null,\r\n                properties: {\r\n                    show: DataViewObjects.getValue<boolean>(objects, GanttChartProps.legend.show, true),\r\n                    position: DataViewObjects.getValue<boolean>(objects, GanttChartProps.legend.position, true), //TODO: change type of prop\r\n                    showTitle: DataViewObjects.getValue<boolean>(objects, GanttChartProps.legend.showTitle, true),\r\n                    titleText: DataViewObjects.getValue<string>(objects, GanttChartProps.legend.titleText, \"\"), //TODO: default text ?\r\n                    labelColor: DataViewObjects.getFillColor(objects, GanttChartProps.legend.labelColor, Gantt.DefaultValues.LegendLabelColor),\r\n                    fontSize: DataViewObjects.getValue<number>(objects, GanttChartProps.legend.fontSize, Gantt.DefaultValues.LegendFontSize)\r\n                },\r\n                objectName: GanttChartProps.legend.show.objectName\r\n            });\r\n        }\r\n\r\n        /** \r\n        * handle \"Data Colors\" card\r\n        * @param enumeration The instance to be pushed into \"Data Colors\" card\r\n        * @param objects Dataview objects\r\n        */\r\n        private enumerateDataPoints(enumeration: ObjectEnumerationBuilder, objects: DataViewObjects) {\r\n            let taskSeries: GanttSeries[] = this.data.series;\r\n\r\n            taskSeries.forEach((item: GanttSeries) => {\r\n                enumeration.pushInstance({\r\n                    objectName: 'dataPoint',\r\n                    displayName: item.name,\r\n                    selector: ColorHelper.normalizeSelector(item.identity.getSelector(), false),\r\n                    properties: {\r\n                        fill: { solid: { color: item.fill } }\r\n                    }\r\n                });\r\n            });\r\n        }\r\n            \r\n        /** \r\n        * handle \"Task Completion\" card\r\n        * @param enumeration The instance to be pushed into \"Task Completion\" card\r\n        * @param objects Dataview objects\r\n        */\r\n        private enumerateTaskCompletion(enumeration: ObjectEnumerationBuilder, objects: DataViewObjects) {\r\n            enumeration.pushInstance({\r\n                selector: null,\r\n                properties: {\r\n                    fill: DataViewObjects.getFillColor(objects, GanttChartProps.taskCompletion.fill, Gantt.DefaultValues.ProgressColor)\r\n                },\r\n                objectName: GanttChartProps.taskCompletion.fill.objectName\r\n            });\r\n        }\r\n        \r\n        /** \r\n        * handle \"Labels\" card\r\n        * @param enumeration The instance to be pushed into \"Data Labels\" card\r\n        * @param objects Dataview objects\r\n        */\r\n        private enumerateTaskLabels(enumeration: ObjectEnumerationBuilder, objects: DataViewObjects) {\r\n            enumeration.pushInstance({\r\n                selector: null,\r\n                properties: {\r\n                    show: DataViewObjects.getValue<boolean>(objects, GanttChartProps.taskLabels.show, true),\r\n                    fill: DataViewObjects.getFillColor(objects, GanttChartProps.taskLabels.fill, Gantt.DefaultValues.TaskLabelColor),\r\n                    fontSize: DataViewObjects.getValue<number>(objects, GanttChartProps.taskLabels.fontSize, Gantt.DefaultValues.LabelFontSize),\r\n                    width: DataViewObjects.getValue<number>(objects, GanttChartProps.taskLabels.width, Gantt.DefaultValues.TaskLabelWidth),\r\n                },\r\n                objectName: GanttChartProps.taskLabels.show.objectName\r\n            });\r\n        }\r\n      \r\n        /** \r\n        * handle \"Data Labels\" card\r\n        * @param enumeration The instance to be pushed into \"Task Resource\" card\r\n        * @param objects Dataview objects\r\n        */\r\n        private enumerateDataLabels(enumeration: ObjectEnumerationBuilder, objects: DataViewObjects) {\r\n            enumeration.pushInstance({\r\n                selector: null,\r\n                properties: {\r\n                    show: DataViewObjects.getValue<boolean>(objects, GanttChartProps.taskResource.show, true),\r\n                    fill: DataViewObjects.getFillColor(objects, GanttChartProps.taskResource.fill, Gantt.DefaultValues.TaskResourceColor),\r\n                    fontSize: DataViewObjects.getValue<number>(objects, GanttChartProps.taskResource.fontSize, Gantt.DefaultValues.ResourceFontSize)\r\n                },\r\n                objectName: GanttChartProps.taskResource.show.objectName\r\n            });\r\n        }\r\n\r\n        private enumerateDateType(enumeration: ObjectEnumerationBuilder, objects: DataViewObjects) {\r\n            enumeration.pushInstance({\r\n                selector: null,\r\n                properties: {\r\n                    type: DataViewObjects.getValue<string>(objects, GanttChartProps.ganttDateType.type, DefaultDateType),\r\n                },\r\n                objectName: GanttChartProps.ganttDateType.type.objectName\r\n            });\r\n        }        \r\n        /** \r\n        * handle the property pane options\r\n        * @param objects Dataview enumerate objects\r\n        */\r\n        public enumerateObjectInstances(options: EnumerateVisualObjectInstancesOptions): VisualObjectInstanceEnumeration {\r\n            let dataView = this.dataView;\r\n            if (!dataView)\r\n                return;\r\n\r\n            let enumeration = new ObjectEnumerationBuilder();\r\n\r\n            switch (options.objectName) {\r\n                case 'legend':\r\n                    this.enumerateLegendOptions(enumeration, dataView.metadata.objects);\r\n                    break;\r\n                case 'dataPoint':\r\n                    this.enumerateDataPoints(enumeration, dataView.metadata.objects);\r\n                    break;\r\n                case 'taskLabels':\r\n                    this.enumerateTaskLabels(enumeration, dataView.metadata.objects);\r\n                    break;\r\n                case 'taskCompletion':\r\n                    this.enumerateTaskCompletion(enumeration, dataView.metadata.objects);\r\n                    break;\r\n                case 'taskResource':\r\n                    this.enumerateDataLabels(enumeration, dataView.metadata.objects);\r\n                    break;\r\n                case 'ganttDateType':\r\n                    this.enumerateDateType(enumeration, dataView.metadata.objects);\r\n                    break;\r\n            }\r\n            return enumeration.complete();\r\n        }\r\n    }\r\n\r\n    export interface GanttBehaviorOptions {\r\n        clearCatcher: D3.Selection;\r\n        taskSelection: D3.Selection;\r\n        legendSelection: D3.Selection;\r\n        interactivityService: IInteractivityService;\r\n    }\r\n\r\n    export class GanttChartBehavior implements IInteractiveBehavior {\r\n        private options: GanttBehaviorOptions;\r\n\r\n        public bindEvents(options: GanttBehaviorOptions, selectionHandler: ISelectionHandler) {\r\n            this.options = options;\r\n            let clearCatcher = options.clearCatcher;\r\n\r\n            options.taskSelection.on('click', (d: SelectableDataPoint) => {\r\n                selectionHandler.handleSelection(d, d3.event.ctrlKey);\r\n                d3.event.stopPropagation();\r\n            });\r\n\r\n            clearCatcher.on('click', () => {\r\n                selectionHandler.handleClearSelection();\r\n            });\r\n        }\r\n\r\n        public renderSelection(hasSelection: boolean) {\r\n            let options = this.options;\r\n            let ganttMaxOpacity = Gantt.getMaxTaskOpacity();\r\n            let ganttMinOpacity = Gantt.getMinTaskOpacity();\r\n\r\n            options.taskSelection.style(\"opacity\", (d: SelectableDataPoint) => {\r\n                return (hasSelection && !d.selected) ? ganttMinOpacity : ganttMaxOpacity;\r\n            });\r\n\r\n        }\r\n    }\r\n\r\n    export class GanttChartWarning implements IVisualWarning {\r\n        public get code(): string {\r\n            return \"GanttChartWarning\";\r\n        }\r\n\r\n        public getMessages(resourceProvider: IStringResourceProvider): IVisualErrorMessage {\r\n            let message: string = \"This visual requires task value\",\r\n                titleKey: string = \"\",\r\n                detailKey: string = \"\",\r\n                visualMessage: IVisualErrorMessage;\r\n\r\n            visualMessage = {\r\n                message: message,\r\n                title: resourceProvider.get(titleKey),\r\n                detail: resourceProvider.get(detailKey)\r\n            };\r\n\r\n            return visualMessage;\r\n        }\r\n    }\r\n}","/*\r\n*  Power BI Visualizations\r\n*\r\n*  Copyright (c) Microsoft Corporation\r\n*  All rights reserved. \r\n*  MIT License\r\n*\r\n*  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n*  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n*  in the Software without restriction, including without limitation the rights\r\n*  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n*  copies of the Software, and to permit persons to whom the Software is\r\n*  furnished to do so, subject to the following conditions:\r\n*\r\n*  The above copyright notice and this permission notice shall be included in \r\n*  all copies or substantial portions of the Software.\r\n*\r\n*  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n*  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n*  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n*  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n*  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n*  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n*  THE SOFTWARE.\r\n*/\r\n\r\nmodule powerbi.visuals.samples {\r\n\timport ClassAndSelector = jsCommon.CssConstants.ClassAndSelector;\r\n\timport createClassAndSelector = jsCommon.CssConstants.createClassAndSelector;\r\n\timport SelectionManager = utility.SelectionManager;\r\n\timport px = jsCommon.PixelConverter.toString;\r\n\timport pt = jsCommon.PixelConverter.fromPoint;\r\n\timport fromPointToPixel = jsCommon.PixelConverter.fromPointToPixel;\r\n\r\n\texport const Months: IEnumType = createEnumType([\r\n\t\t{ value: 1, displayName: 'January' },\r\n\t\t{ value: 2, displayName: 'February' },\r\n\t\t{ value: 3, displayName: 'March' },\r\n\t\t{ value: 4, displayName: 'April' },\r\n\t\t{ value: 5, displayName: 'May' },\r\n\t\t{ value: 6, displayName: 'June' },\r\n\t\t{ value: 7, displayName: 'July' },\r\n\t\t{ value: 8, displayName: 'August' },\r\n\t\t{ value: 9, displayName: 'September' },\r\n\t\t{ value: 10, displayName: 'October' },\r\n\t\t{ value: 11, displayName: 'November' },\r\n\t\t{ value: 12, displayName: 'December' }\r\n\t]);\r\n\r\n\texport const WeekDays: IEnumType = createEnumType([\r\n\t\t{ value: 0, displayName: 'Sunday' },\r\n\t\t{ value: 1, displayName: 'Monday' },\r\n\t\t{ value: 2, displayName: 'Tuesday' },\r\n\t\t{ value: 3, displayName: 'Wednesday' },\r\n\t\t{ value: 4, displayName: 'Thursday' },\r\n\t\t{ value: 5, displayName: 'Friday' },\r\n\t\t{ value: 6, displayName: 'Saturday' }\r\n\t]);\r\n\r\n\texport enum GranularityType {\r\n\t\tyear,\r\n\t\tquarter,\r\n\t\tmonth,\r\n\t\tweek,\r\n\t\tday\r\n\t}\r\n\r\n\texport interface GranularityName {\r\n\t\tgranularityType: GranularityType;\r\n\t\tname: string;\r\n\t}\r\n\r\n\texport interface TimelineMargins {\r\n\t\tLeftMargin: number;\r\n\t\tRightMargin: number;\r\n\t\tTopMargin: number;\r\n\t\tBottomMargin: number;\r\n\t\tCellWidth: number;\r\n\t\tCellHeight: number;\r\n\t\tStartXpoint: number;\r\n\t\tStartYpoint: number;\r\n\t\tElementWidth: number;\r\n\t\tMinCellWidth: number;\r\n\t\tMaxCellHeight: number;\r\n\t\tPeriodSlicerRectWidth: number;\r\n\t\tPeriodSlicerRectHeight: number;\r\n\t}\r\n\r\n\texport interface DefaultTimelineProperties {\r\n\t\tDefaultLabelsShow: boolean;\r\n\t\tTimelineDefaultTextSize: number;\r\n\t\tTimelineDefaultCellColor: string;\r\n\t\tTimelineDefaultCellColorOut: string;\r\n\t\tTimelineDefaultTimeRangeShow: boolean;\r\n\t\tDefaultTimeRangeColor: string;\r\n\t\tDefaultLabelColor: string;\r\n\t\tDefaultGranularity: GranularityType;\r\n\t\tDefaultFirstMonth: number;\r\n\t\tDefaultFirstDay: number;\r\n\t\tDefaultFirstWeekDay: number;\r\n\t}\r\n\r\n\texport interface TimelineSelectors {\r\n\t\tTimelineVisual: ClassAndSelector;\r\n\t\tSelectionRangeContainer: ClassAndSelector;\r\n\t\ttextLabel: ClassAndSelector;\r\n\t\tLowerTextCell: ClassAndSelector;\r\n\t\tUpperTextCell: ClassAndSelector;\r\n\t\tUpperTextArea: ClassAndSelector;\r\n\t\tLowerTextArea: ClassAndSelector;\r\n\t\tRangeTextArea: ClassAndSelector;\r\n\t\tCellsArea: ClassAndSelector;\r\n\t\tCursorsArea: ClassAndSelector;\r\n\t\tMainArea: ClassAndSelector;\r\n\t\tSelectionCursor: ClassAndSelector;\r\n\t\tCell: ClassAndSelector;\r\n\t\tCellRect: ClassAndSelector;\r\n\t\tVertLine: ClassAndSelector;\r\n\t\tTimelineSlicer: ClassAndSelector;\r\n\t\tPeriodSlicerGranularities: ClassAndSelector;\r\n\t\tPeriodSlicerSelection: ClassAndSelector;\r\n\t\tPeriodSlicerSelectionRect: ClassAndSelector;\r\n\t\tPeriodSlicerRect: ClassAndSelector;\r\n\t}\r\n\r\n\texport interface TimelineLabel {\r\n\t\ttitle: string;\r\n\t\ttext: string;\r\n\t\tid: number;\r\n\t}\r\n\r\n\texport interface ExtendedLabel {\r\n\t\tyearLabels?: TimelineLabel[];\r\n\t\tquarterLabels?: TimelineLabel[];\r\n\t\tmonthLabels?: TimelineLabel[];\r\n\t\tweekLabels?: TimelineLabel[];\r\n\t\tdayLabels?: TimelineLabel[];\r\n\t}\r\n\r\n\tconst SelectedCellColorProp: DataViewObjectPropertyIdentifier = { objectName: 'cells', propertyName: 'fillSelected' };\r\n\tconst UnselectedCellColorProp: DataViewObjectPropertyIdentifier = { objectName: 'cells', propertyName: 'fillUnselected' };\r\n\tconst TimeRangeColorProp: DataViewObjectPropertyIdentifier = { objectName: 'rangeHeader', propertyName: 'fontColor' };\r\n\tconst TimeRangeSizeProp: DataViewObjectPropertyIdentifier = { objectName: 'rangeHeader', propertyName: 'textSize' };\r\n\tconst TimeRangeShowProp: DataViewObjectPropertyIdentifier = { objectName: 'rangeHeader', propertyName: 'show' };\r\n\tconst LabelsColorProp: DataViewObjectPropertyIdentifier = { objectName: 'labels', propertyName: 'fontColor' };\r\n\tconst LabelsSizeProp: DataViewObjectPropertyIdentifier = { objectName: 'labels', propertyName: 'textSize' };\r\n\tconst LabelsShowProp: DataViewObjectPropertyIdentifier = { objectName: 'labels', propertyName: 'show' };\r\n\tconst CalendarMonthProp: DataViewObjectPropertyIdentifier = { objectName: 'calendar', propertyName: 'month' };\r\n\tconst CalendarDayProp: DataViewObjectPropertyIdentifier = { objectName: 'calendar', propertyName: 'day' };\r\n\tconst WeekDayProp: DataViewObjectPropertyIdentifier = { objectName: 'weekDay', propertyName: 'day' };\r\n\tconst GranularityNames: GranularityName[] = [\r\n\t\t{\r\n\t\t\tgranularityType: GranularityType.year,\r\n\t\t\tname: \"year\"\r\n\t\t}, {\r\n\t\t\tgranularityType: GranularityType.quarter,\r\n\t\t\tname: \"quarter\"\r\n\t\t}, {\r\n\t\t\tgranularityType: GranularityType.month,\r\n\t\t\tname: \"month\"\r\n\t\t}, {\r\n\t\t\tgranularityType: GranularityType.week,\r\n\t\t\tname: \"week\"\r\n\t\t}, {\r\n\t\t\tgranularityType: GranularityType.day,\r\n\t\t\tname: \"day\"\r\n\t\t}];\r\n\r\n\texport interface DatePeriod {\r\n\t\tidentifierArray: (string | number)[];\r\n\t\tstartDate: Date;\r\n\t\tendDate: Date;\r\n\t\tyear: number;\r\n\t\tweek: number[];\r\n\t\tfraction: number;\r\n\t\tindex: number;\r\n\t}\r\n\r\n\texport interface Granularity {\r\n\t\tgetType(): GranularityType;\r\n\t\tsplitDate(date: Date): (string | number)[];\r\n\t\tgetDatePeriods(): DatePeriod[];\r\n\t\tresetDatePeriods(): void;\r\n\t\tgetExtendedLabel(): ExtendedLabel;\r\n\t\tsetExtendedLabel(extendedLabel: ExtendedLabel): void;\r\n\t\tcreateLabels(granularity: Granularity): TimelineLabel[];\r\n\t\tsameLabel(firstDatePeriod: DatePeriod, secondDatePeriod: DatePeriod): boolean;\r\n\t\tgenerateLabel(datePeriod: DatePeriod): TimelineLabel;\r\n\t\taddDate(date: Date, identifierArray: (string | number)[]);\r\n\t\tsetNewEndDate(date: Date): void;\r\n\t\tsplitPeriod(index: number, newFraction: number, newDate: Date): void;\r\n\t}\r\n\r\n\texport interface TimelineCursorOverElement {\r\n\t\tindex: number;\r\n\t\tdatapoint: TimelineDatapoint;\r\n\t}\r\n\r\n\texport class TimelineGranularity {\r\n\t\tprivate datePeriods: DatePeriod[] = [];\r\n\t\tprivate extendedLabel: ExtendedLabel;\r\n\r\n\t\t/**\r\n\t\t* Returns the short month name of the given date (e.g. Jan, Feb, Mar)\r\n\t\t*/\r\n\t\tpublic shortMonthName(date: Date): string {\r\n\t\t\treturn date.toString().split(' ')[1];\r\n\t\t}\r\n\r\n\t\tpublic resetDatePeriods(): void {\r\n\t\t\tthis.datePeriods = [];\r\n\t\t}\r\n\r\n\t\tpublic getDatePeriods() {\r\n\t\t\treturn this.datePeriods;\r\n\t\t}\r\n\r\n\t\tpublic getExtendedLabel(): ExtendedLabel {\r\n\t\t\treturn this.extendedLabel;\r\n\t\t}\r\n\r\n\t\tpublic setExtendedLabel(extendedLabel: ExtendedLabel): void {\r\n\t\t\tthis.extendedLabel = extendedLabel;\r\n\t\t}\r\n\r\n\t\tpublic createLabels(granularity: Granularity): TimelineLabel[] {\r\n\t\t\tlet labels: TimelineLabel[] = [];\r\n\t\t\tlet lastDatePeriod: DatePeriod;\r\n\t\t\t_.map(this.datePeriods, (x) => {\r\n\t\t\t\tif (_.isEmpty(labels) || !granularity.sameLabel(x, lastDatePeriod)) {\r\n\t\t\t\t\tlastDatePeriod = x;\r\n\t\t\t\t\tlabels.push(granularity.generateLabel(x));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn labels;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t* Adds the new date into the given datePeriods array\r\n\t\t* If the date corresponds to the last date period, given the current granularity,\r\n\t\t* it will be added to that date period. Otherwise, a new date period will be added to the array.\r\n\t\t* i.e. using Month granularity, Feb 2 2015 corresponds to Feb 3 2015.\r\n\t\t* It is assumed that the given date does not correspond to previous date periods, other than the last date period\r\n\t\t*/\r\n\t\tpublic addDate(date: Date, identifierArray: (string | number)[]): void {\r\n\t\t\tlet datePeriods: DatePeriod[] = this.getDatePeriods();\r\n\t\t\tlet lastDatePeriod: DatePeriod = datePeriods[datePeriods.length - 1];\r\n\t\t\tif (datePeriods.length === 0 || !_.isEqual(lastDatePeriod.identifierArray, identifierArray)) {\r\n\t\t\t\tif (datePeriods.length > 0)\r\n\t\t\t\t\tlastDatePeriod.endDate = date;\r\n\t\t\t\tdatePeriods.push({\r\n\t\t\t\t\tidentifierArray: identifierArray,\r\n\t\t\t\t\tstartDate: date,\r\n\t\t\t\t\tendDate: date,\r\n\t\t\t\t\tweek: this.determineWeek(date),\r\n\t\t\t\t\tyear: this.determineYear(date),\r\n\t\t\t\t\tfraction: 1,\r\n\t\t\t\t\tindex: datePeriods.length\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tlastDatePeriod.endDate = date;\r\n\t\t}\r\n\r\n\t\tpublic setNewEndDate(date: Date): void {\r\n\t\t\t_.last(this.datePeriods).endDate = date;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Splits a given period into two periods.\r\n\t\t * The new period is added after the index of the old one, while the old one is simply updated.\r\n\t\t * @param index The index of the date priod to be split\r\n\t\t * @param newFraction The fraction value of the new date period\r\n\t\t * @param newDate The date in which the date period is split\r\n\t\t */\r\n\t\tpublic splitPeriod(index: number, newFraction: number, newDate: Date): void {\r\n\t\t\tlet oldDatePeriod: DatePeriod = this.datePeriods[index];\r\n\t\t\toldDatePeriod.fraction -= newFraction;\r\n\t\t\tlet newDateObject: DatePeriod = {\r\n\t\t\t\tidentifierArray: oldDatePeriod.identifierArray,\r\n\t\t\t\tstartDate: newDate,\r\n\t\t\t\tendDate: oldDatePeriod.endDate,\r\n\t\t\t\tweek: this.determineWeek(newDate),\r\n\t\t\t\tyear: this.determineYear(newDate),\r\n\t\t\t\tfraction: newFraction,\r\n\t\t\t\tindex: oldDatePeriod.index + oldDatePeriod.fraction\r\n\t\t\t};\r\n\t\t\toldDatePeriod.endDate = newDate;\r\n\t\t\tthis.datePeriods.splice(index + 1, 0, newDateObject);\r\n\t\t}\r\n\r\n\t\tprivate previousMonth(month: number): number {\r\n\t\t\treturn (month > 0) ? month - 1 : 11;\r\n\t\t}\r\n\r\n\t\tprivate nextMonth(month: number): number {\r\n\t\t\treturn (month < 11) ? month + 1 : 0;\r\n\t\t}\r\n\r\n\t\tprivate countWeeks(startDate: Date, endDate: Date): number {\r\n\t\t\tlet totalDays: number;\r\n\t\t\tif (endDate.getFullYear() === startDate.getFullYear() && endDate.getMonth() === startDate.getMonth() && endDate.getDate() >= startDate.getDate())\r\n\t\t\t\ttotalDays = endDate.getDate() - startDate.getDate();\r\n\t\t\telse {\r\n\t\t\t\ttotalDays = endDate.getDate() - 1;\r\n\t\t\t\tlet lastMonth = this.nextMonth(startDate.getMonth());\r\n\t\t\t\tlet month = endDate.getMonth();\r\n\t\t\t\twhile (month !== lastMonth) {\r\n\t\t\t\t\ttotalDays += new Date(endDate.getFullYear(), month, 0).getDate();\r\n\t\t\t\t\tmonth = this.previousMonth(month);\r\n\t\t\t\t}\r\n\t\t\t\ttotalDays += new Date(endDate.getFullYear(), lastMonth, 0).getDate() - startDate.getDate();\r\n\t\t\t}\r\n\t\t\treturn 1 + Math.floor(totalDays / 7);\r\n\t\t}\r\n\r\n\t\tpublic determineWeek(date: Date): number[] {\r\n\t\t\tvar year = date.getFullYear();\r\n\t\t\tif (this.inPreviousYear(date))\r\n\t\t\t\tyear--;\r\n\t\t\tlet dateOfFirstWeek: Date = Timeline.calendar.getDateOfFirstWeek(year);\r\n\t\t\tlet weeks: number = this.countWeeks(dateOfFirstWeek, date);\r\n\t\t\treturn [weeks, year];\r\n\t\t}\r\n\r\n\t\tprivate inPreviousYear(date: Date): boolean {\r\n\t\t\tlet dateOfFirstWeek: Date = Timeline.calendar.getDateOfFirstWeek(date.getFullYear());\r\n\t\t\treturn date < dateOfFirstWeek;\r\n\t\t}\r\n\r\n\t\tpublic determineYear(date: Date): number {\r\n\t\t\tlet firstDay: Date = new Date(date.getFullYear(), Timeline.calendar.getFirstMonthOfYear(), Timeline.calendar.getFirstDayOfYear());\r\n\t\t\treturn date.getFullYear() - ((firstDay <= date) ? 0 : 1);\r\n\t\t}\r\n\t}\r\n\r\n\texport class DayGranularity extends TimelineGranularity implements Granularity {\r\n\t\tpublic getType(): GranularityType {\r\n\t\t\treturn GranularityType.day;\r\n\t\t}\r\n\r\n\t\tpublic splitDate(date: Date): (string | number)[] {\r\n\t\t\treturn [this.shortMonthName(date), date.getDate(), date.getFullYear()];\r\n\t\t}\r\n\r\n\t\tpublic sameLabel(firstDatePeriod: DatePeriod, secondDatePeriod: DatePeriod): boolean {\r\n\t\t\treturn firstDatePeriod.startDate.getTime() === secondDatePeriod.startDate.getTime();\r\n\t\t}\r\n\r\n\t\tpublic generateLabel(datePeriod: DatePeriod): TimelineLabel {\r\n\t\t\treturn {\r\n\t\t\t\ttitle: this.shortMonthName(datePeriod.startDate) + ' ' + datePeriod.startDate.getDate() + ' - ' + datePeriod.year,\r\n\t\t\t\ttext: datePeriod.startDate.getDate().toString(),\r\n\t\t\t\tid: datePeriod.index\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\texport class MonthGranularity extends TimelineGranularity implements Granularity {\r\n\t\tpublic getType(): GranularityType {\r\n\t\t\treturn GranularityType.month;\r\n\t\t}\r\n\r\n\t\tpublic splitDate(date: Date): (string | number)[] {\r\n\t\t\treturn [this.shortMonthName(date), date.getFullYear()];\r\n\t\t}\r\n\r\n\t\tpublic sameLabel(firstDatePeriod: DatePeriod, secondDatePeriod: DatePeriod): boolean {\r\n\t\t\treturn this.shortMonthName(firstDatePeriod.startDate) === this.shortMonthName(secondDatePeriod.startDate);\r\n\t\t}\r\n\r\n\t\tpublic generateLabel(datePeriod: DatePeriod): TimelineLabel {\r\n\t\t\tlet shortMonthName = this.shortMonthName(datePeriod.startDate);\r\n\t\t\treturn {\r\n\t\t\t\ttitle: shortMonthName,\r\n\t\t\t\ttext: shortMonthName,\r\n\t\t\t\tid: datePeriod.index\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\texport class WeekGranularity extends TimelineGranularity implements Granularity {\r\n\t\tpublic getType(): GranularityType {\r\n\t\t\treturn GranularityType.week;\r\n\t\t}\r\n\r\n\t\tpublic splitDate(date: Date): (string | number)[] {\r\n\t\t\treturn this.determineWeek(date);\r\n\t\t}\r\n\r\n\t\tpublic sameLabel(firstDatePeriod: DatePeriod, secondDatePeriod: DatePeriod): boolean {\r\n\t\t\treturn _.isEqual(firstDatePeriod.week, secondDatePeriod.week);\r\n\t\t}\r\n\r\n\t\tpublic generateLabel(datePeriod: DatePeriod): TimelineLabel {\r\n\t\t\treturn {\r\n\t\t\t\ttitle: 'Week ' + datePeriod.week[0] + ' - ' + datePeriod.week[1],\r\n\t\t\t\ttext: 'W' + datePeriod.week[0],\r\n\t\t\t\tid: datePeriod.index\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\texport class QuarterGranularity extends TimelineGranularity implements Granularity {\r\n\t\t/**\r\n\t\t * Returns the date's quarter name (e.g. Q1, Q2, Q3, Q4)\r\n\t\t * @param date A date \r\n\t\t */\r\n\t\tprivate quarterText(date: Date): string {\r\n\t\t\tlet quarter = 3;\r\n\t\t\tlet year = date.getFullYear();\r\n\t\t\twhile (date < Timeline.calendar.getQuarterStartDate(year, quarter))\r\n\t\t\t\tif (quarter > 0)\r\n\t\t\t\t\tquarter--;\r\n\t\t\t\telse {\r\n\t\t\t\t\tquarter = 3;\r\n\t\t\t\t\tyear--;\r\n\t\t\t\t}\r\n\t\t\tquarter++;\r\n\t\t\treturn 'Q' + quarter;\r\n\t\t}\r\n\r\n\t\tpublic getType(): GranularityType {\r\n\t\t\treturn GranularityType.quarter;\r\n\t\t}\r\n\r\n\t\tpublic splitDate(date: Date): (string | number)[] {\r\n\t\t\treturn [this.quarterText(date), date.getFullYear()];\r\n\t\t}\r\n\r\n\t\tpublic sameLabel(firstDatePeriod: DatePeriod, secondDatePeriod: DatePeriod): boolean {\r\n\t\t\treturn this.quarterText(firstDatePeriod.startDate) === this.quarterText(secondDatePeriod.startDate)\r\n\t\t\t\t&& firstDatePeriod.year === secondDatePeriod.year;\r\n\t\t}\r\n\r\n\t\tpublic generateLabel(datePeriod: DatePeriod): TimelineLabel {\r\n\t\t\tlet quarter = this.quarterText(datePeriod.startDate);\r\n\t\t\treturn {\r\n\t\t\t\ttitle: quarter + ' ' + datePeriod.year,\r\n\t\t\t\ttext: quarter,\r\n\t\t\t\tid: datePeriod.index\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\texport class YearGranularity extends TimelineGranularity implements Granularity {\r\n\t\tpublic getType(): GranularityType {\r\n\t\t\treturn GranularityType.year;\r\n\t\t}\r\n\r\n\t\tpublic splitDate(date: Date): (string | number)[] {\r\n\t\t\treturn [date.getFullYear()];\r\n\t\t}\r\n\r\n\t\tpublic sameLabel(firstDatePeriod: DatePeriod, secondDatePeriod: DatePeriod): boolean {\r\n\t\t\treturn firstDatePeriod.year === secondDatePeriod.year;\r\n\t\t}\r\n\r\n\t\tpublic generateLabel(datePeriod: DatePeriod): TimelineLabel {\r\n\t\t\treturn {\r\n\t\t\t\ttitle: 'Year ' + datePeriod.year,\r\n\t\t\t\ttext: datePeriod.year.toString(),\r\n\t\t\t\tid: datePeriod.index\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\texport class TimelineGranularityData {\r\n\t\tprivate dates: Date[];\r\n\t\tprivate granularities: Granularity[];\r\n\t\tprivate endingDate: Date;\r\n\r\n\t\t/**\r\n\t\t * Returns the date of the previos day \r\n\t\t * @param date The following date\r\n\t\t */\r\n\t\tpublic static previousDay(date: Date): Date {\r\n\t\t\tlet prevDay: Date = new Date(date.getTime());\r\n\t\t\tprevDay.setDate(prevDay.getDate() - 1);\r\n\t\t\treturn prevDay;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns the date of the next day \r\n\t\t * @param date The previous date\r\n\t\t */\r\n\t\tpublic static nextDay(date: Date): Date {\r\n\t\t\tlet nextDay: Date = new Date(date.getTime());\r\n\t\t\tnextDay.setDate(nextDay.getDate() + 1);\r\n\t\t\treturn nextDay;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t* Returns an array of dates with all the days between the start date and the end date\r\n\t\t*/\r\n\t\tprivate setDatesRange(startDate: Date, endDate: Date): void {\r\n\t\t\tthis.dates = [];\r\n\t\t\tlet date: Date = startDate;\r\n\t\t\twhile (date <= endDate) {\r\n\t\t\t\tthis.dates.push(date);\r\n\t\t\t\tdate = TimelineGranularityData.nextDay(date);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconstructor(startDate: Date, endDate: Date) {\r\n\t\t\tthis.granularities = [];\r\n\t\t\tthis.setDatesRange(startDate, endDate);\r\n\t\t\tlet lastDate: Date = this.dates[this.dates.length - 1];\r\n\t\t\tthis.endingDate = TimelineGranularityData.nextDay(lastDate);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Adds a new granularity to the array of granularities.\r\n\t\t * Resets the new granularity, adds all dates to it, and then edits the last date period with the ending date.\r\n\t\t * @param granularity The new granularity to be added\r\n\t\t */\r\n\t\tpublic addGranularity(granularity: Granularity): void {\r\n\t\t\tgranularity.resetDatePeriods();\r\n\t\t\tfor (let date of this.dates) {\r\n\t\t\t\tlet identifierArray: (string | number)[] = granularity.splitDate(date);\r\n\t\t\t\tgranularity.addDate(date, identifierArray);\r\n\t\t\t}\r\n\t\t\tgranularity.setNewEndDate(this.endingDate);\r\n\t\t\tthis.granularities.push(granularity);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns a specific granularity from the array of granularities\r\n\t\t * @param index The index of the requested granularity\r\n\t\t */\r\n\t\tpublic getGranularity(index: number): Granularity {\r\n\t\t\treturn this.granularities[index];\r\n\t\t}\r\n\r\n\t\tpublic createGranularities(): void {\r\n\t\t\tthis.granularities = [];\r\n\t\t\tthis.addGranularity(new YearGranularity());\r\n\t\t\tthis.addGranularity(new QuarterGranularity());\r\n\t\t\tthis.addGranularity(new MonthGranularity());\r\n\t\t\tthis.addGranularity(new WeekGranularity());\r\n\t\t\tthis.addGranularity(new DayGranularity());\r\n\t\t}\r\n\r\n\t\tpublic createLabels(): void {\r\n\t\t\tthis.granularities.forEach((x) => {\r\n\t\t\t\tx.setExtendedLabel({\r\n\t\t\t\t\tdayLabels: x.getType() >= GranularityType.day ? x.createLabels(this.granularities[GranularityType.day]) : [],\r\n\t\t\t\t\tweekLabels: x.getType() >= GranularityType.week ? x.createLabels(this.granularities[GranularityType.week]) : [],\r\n\t\t\t\t\tmonthLabels: x.getType() >= GranularityType.month ? x.createLabels(this.granularities[GranularityType.month]) : [],\r\n\t\t\t\t\tquarterLabels: x.getType() >= GranularityType.quarter ? x.createLabels(this.granularities[GranularityType.quarter]) : [],\r\n\t\t\t\t\tyearLabels: x.getType() >= GranularityType.year ? x.createLabels(this.granularities[GranularityType.year]) : [],\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\texport class Utils {\r\n\t\t/**\r\n\t\t * Returns the date of the start of the selection\r\n\t\t * @param timelineData The TimelineData which contains all the date periods\r\n\t\t */\r\n\t\tpublic static getStartSelectionDate(timelineData: TimelineData): Date {\r\n\t\t\treturn timelineData.currentGranularity.getDatePeriods()[timelineData.selectionStartIndex].startDate;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns the date of the end of the selection\r\n\t\t * @param timelineData The TimelineData which contains all the date periods\r\n\t\t */\r\n\t\tpublic static getEndSelectionDate(timelineData: TimelineData): Date {\r\n\t\t\treturn timelineData.currentGranularity.getDatePeriods()[timelineData.selectionEndIndex].endDate;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns the date period of the end of the selection\r\n\t\t * @param timelineData The TimelineData which contains all the date periods\r\n\t\t */\r\n\t\tpublic static getEndSelectionPeriod(timelineData: TimelineData): DatePeriod {\r\n\t\t\treturn timelineData.currentGranularity.getDatePeriods()[timelineData.selectionEndIndex];\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns the color of a cell, depending on whether its date period is between the selected date periods\r\n\t\t * @param d The TimelineDataPoint of the cell\r\n\t\t * @param timelineData The TimelineData with the selected date periods\r\n\t\t * @param timelineFormat The TimelineFormat with the chosen colors\r\n\t\t */\r\n\t\tpublic static getCellColor(d: TimelineDatapoint, timelineData: TimelineData, cellFormat: CellFormat): string {\r\n\t\t\tlet inSelectedPeriods: boolean = d.datePeriod.startDate >= Utils.getStartSelectionDate(timelineData) && d.datePeriod.endDate <= Utils.getEndSelectionDate(timelineData);\r\n\t\t\treturn inSelectedPeriods ? cellFormat.colorInProperty : cellFormat.colorOutProperty;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns the granularity type of the given granularity name\r\n\t\t * @param granularityName The name of the granularity\r\n\t\t */\r\n\t\tpublic static getGranularityType(granularityName: string): GranularityType {\r\n\t\t\tlet index: number = _.findIndex(GranularityNames, x => x.name === granularityName);\r\n\t\t\treturn GranularityNames[index].granularityType;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns the name of the granularity type\r\n\t\t * @param granularity The type of granularity\r\n\t\t */\r\n\t\tpublic static getGranularityName(granularity: GranularityType): string {\r\n\t\t\tlet index: number = _.findIndex(GranularityNames, x => x.granularityType === granularity);\r\n\t\t\treturn GranularityNames[index].name;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Splits the date periods of the current granularity, in case the stard and end of the selection is in between a date period.\r\n\t\t * i.e. for a quarter granularity and a selection between Feb 6 and Dec 23, the date periods for Q1 and Q4 will be split accordingly\r\n\t\t * @param timelineData The TimelineData that contains the date periods\r\n\t\t * @param startDate The starting date of the selection\r\n\t\t * @param endDate The ending date of the selection\r\n\t\t */\r\n\t\tpublic static separateSelection(timelineData: TimelineData, startDate: Date, endDate: Date): void {\r\n\t\t\tlet datePeriods: DatePeriod[] = timelineData.currentGranularity.getDatePeriods();\r\n\t\t\tlet startDateIndex: number = _.findIndex(datePeriods, x => startDate < x.endDate);\r\n\t\t\tlet endDateIndex: number = _.findIndex(datePeriods, x => endDate <= x.endDate);\r\n\t\t\ttimelineData.selectionStartIndex = startDateIndex;\r\n\t\t\ttimelineData.selectionEndIndex = endDateIndex;\r\n\t\t\tlet startRatio: number = Utils.getDateRatio(datePeriods[startDateIndex], startDate, true);\r\n\t\t\tlet endRatio: number = Utils.getDateRatio(datePeriods[endDateIndex], endDate, false);\r\n\t\t\tif (endRatio > 0)\r\n\t\t\t\ttimelineData.currentGranularity.splitPeriod(endDateIndex, endRatio, endDate);\r\n\t\t\tif (startRatio > 0) {\r\n\t\t\t\tlet startFration: number = datePeriods[startDateIndex].fraction - startRatio;\r\n\t\t\t\ttimelineData.currentGranularity.splitPeriod(startDateIndex, startFration, startDate);\r\n\t\t\t\ttimelineData.selectionStartIndex++;\r\n\t\t\t\ttimelineData.selectionEndIndex++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns the ratio of the given date compared to the whole date period.\r\n\t\t * The ratio is calculated either from the start or the end of the date period.\r\n\t\t * i.e. the ratio of Feb 7 2016 compared to the month of Feb 2016,\r\n\t\t * is 0.2142 from the start of the month, or 0.7857 from the end of the month.\r\n\t\t * @param datePeriod The date period that contain the specified date\r\n\t\t * @param date The date\r\n\t\t * @param fromStart Whether to calculater the ratio from the start of the date period.\r\n\t\t */\r\n\t\tpublic static getDateRatio(datePeriod: DatePeriod, date: Date, fromStart: boolean): number {\r\n\t\t\tlet dateDifference: number = fromStart ? date.getTime() - datePeriod.startDate.getTime() : datePeriod.endDate.getTime() - date.getTime();\r\n\t\t\tlet periodDifference: number = datePeriod.endDate.getTime() - datePeriod.startDate.getTime();\r\n\t\t\treturn periodDifference === 0 ? 0 : dateDifference / periodDifference;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t* Returns the time range text, depending on the given granularity (e.g. \"Feb 3 2014 - Apr 5 2015\", \"Q1 2014 - Q2 2015\")\r\n\t\t*/\r\n\t\tpublic static timeRangeText(timelineData: TimelineData): string {\r\n\t\t\tlet startSelectionDateArray: (string | number)[] = timelineData.currentGranularity.splitDate(Utils.getStartSelectionDate(timelineData));\r\n\t\t\tlet endSelectionDateArray: (string | number)[] = timelineData.currentGranularity.splitDate(Utils.getEndSelectionPeriod(timelineData).startDate);\r\n\t\t\treturn startSelectionDateArray.join(' ') + ' - ' + endSelectionDateArray.join(' ');\r\n\t\t}\r\n\r\n\t\tpublic static dateRangeText(datePeriod: DatePeriod): string {\r\n\t\t\treturn datePeriod.startDate.toDateString() + ' - ' + TimelineGranularityData.previousDay(datePeriod.endDate).toDateString();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Combines the first two partial date periods, into a single date period.\r\n\t\t * Returns whether a partial date period was found.\r\n\t\t * i.e. combines \"Feb 1 2016 - Feb 5 2016\" with \"Feb 5 2016 - Feb 29 2016\" into \"Feb 1 2016 - Feb 29 2016\"\r\n\t\t * @param datePeriods The list of date periods\r\n\t\t */\r\n\t\tpublic static unseparateSelection(datePeriods: DatePeriod[]): boolean {\r\n\t\t\tlet separationIndex: number = _.findIndex(datePeriods, x => x.fraction < 1);\r\n\t\t\tif (separationIndex >= 0) {\r\n\t\t\t\tdatePeriods[separationIndex].endDate = datePeriods[separationIndex + 1].endDate;\r\n\t\t\t\tdatePeriods[separationIndex].fraction += datePeriods[separationIndex + 1].fraction;\r\n\t\t\t\tdatePeriods.splice(separationIndex + 1, 1);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\texport interface TimelineProperties {\r\n\t\tleftMargin: number;\r\n\t\trightMargin: number;\r\n\t\ttopMargin: number;\r\n\t\tbottomMargin: number;\r\n\t\ttextYPosition: number;\r\n\t\tstartXpoint: number;\r\n\t\tstartYpoint: number;\r\n\t\telementWidth: number;\r\n\t\telement: any;\r\n\t\tcellWidth: number;\r\n\t\tcellHeight: number;\r\n\t\tcellsYPosition: number;\r\n\t}\r\n\r\n\texport interface TimelineFormat {\r\n\t\tcellFormat?: CellFormat;\r\n\t\trangeTextFormat?: LabelFormat;\r\n\t\tlabelFormat?: LabelFormat;\r\n\t\tcalendarFormat?: CalendarFormat;\r\n\t}\r\n\r\n\texport interface LabelFormat {\r\n\t\tshowProperty: boolean;\r\n\t\tsizeProperty: number;\r\n\t\tcolorProperty: string;\r\n\t}\r\n\r\n\texport interface CalendarFormat {\r\n\t\tfirstMonthProperty: number;\r\n\t\tfirstDayProperty: number;\r\n\t\tweekDayProperty: number;\r\n\t}\r\n\r\n\texport interface CellFormat {\r\n\t\tcolorInProperty: string;\r\n\t\tcolorOutProperty: string;\r\n\t}\r\n\r\n\texport interface TimelineData {\r\n\t\tdragging?: boolean;\r\n\t\tcategorySourceName?: string;\r\n\t\tcolumnIdentity?: powerbi.data.SQColumnRefExpr;\r\n\t\ttimelineDatapoints?: TimelineDatapoint[];\r\n\t\telementsCount?: number;\r\n\t\tselectionStartIndex?: number;\r\n\t\tselectionEndIndex?: number;\r\n\t\tcursorDataPoints?: CursorDatapoint[];\r\n\t\tcurrentGranularity?: Granularity;\r\n\t}\r\n\r\n\texport interface CursorDatapoint {\r\n\t\tx: number;\r\n\t\tcursorIndex: number;\r\n\t\tselectionIndex: number;\r\n\t}\r\n\r\n\texport interface TimelineDatapoint {\r\n\t\tindex: number;\r\n\t\tdatePeriod: DatePeriod;\r\n\t}\r\n\r\n\texport interface DateDictionary {\r\n\t\t[year: number]: Date;\r\n\t}\r\n\r\n\texport class Calendar {\r\n\t\tprivate firstDayOfWeek: number;\r\n\t\tprivate firstMonthOfYear: number;\r\n\t\tprivate firstDayOfYear: number;\r\n\t\tprivate dateOfFirstWeek: DateDictionary;\r\n\t\tprivate quarterFirstMonths: number[];\r\n\r\n\t\tpublic getFirstDayOfWeek(): number {\r\n\t\t\treturn this.firstDayOfWeek;\r\n\t\t}\r\n\r\n\t\tpublic getFirstMonthOfYear(): number {\r\n\t\t\treturn this.firstMonthOfYear;\r\n\t\t}\r\n\r\n\t\tpublic getFirstDayOfYear(): number {\r\n\t\t\treturn this.firstDayOfYear;\r\n\t\t}\r\n\r\n\t\tpublic getQuarterStartDate(year: number, quarterIndex: number): Date {\r\n\t\t\treturn new Date(year, this.quarterFirstMonths[quarterIndex], this.firstDayOfYear);\r\n\t\t}\r\n\r\n\t\tpublic isChanged(calendarFormat: CalendarFormat): boolean {\r\n\t\t\treturn this.firstMonthOfYear !== (calendarFormat.firstMonthProperty - 1)\r\n\t\t\t\t|| this.firstDayOfYear !== calendarFormat.firstDayProperty\r\n\t\t\t\t|| this.firstDayOfWeek !== calendarFormat.weekDayProperty;\r\n\t\t}\r\n\r\n\t\tconstructor(calendarFormat: CalendarFormat) {\r\n\t\t\tthis.firstDayOfWeek = calendarFormat.weekDayProperty;\r\n\t\t\tthis.firstMonthOfYear = calendarFormat.firstMonthProperty - 1;\r\n\t\t\tthis.firstDayOfYear = calendarFormat.firstDayProperty;\r\n\t\t\tthis.dateOfFirstWeek = {};\r\n\t\t\tthis.quarterFirstMonths = [0, 3, 6, 9].map((x) => x + this.firstMonthOfYear);\r\n\t\t}\r\n\r\n\t\tprivate calculateDateOfFirstWeek(year: number): Date {\r\n\t\t\tlet date: Date = new Date(year, this.firstMonthOfYear, this.firstDayOfYear);\r\n\t\t\twhile (date.getDay() !== this.firstDayOfWeek)\r\n\t\t\t\tdate = TimelineGranularityData.nextDay(date);\r\n\t\t\treturn date;\r\n\t\t}\r\n\r\n\t\tpublic getDateOfFirstWeek(year: number): Date {\r\n\t\t\tif (!this.dateOfFirstWeek[year])\r\n\t\t\t\tthis.dateOfFirstWeek[year] = this.calculateDateOfFirstWeek(year);\r\n\t\t\treturn this.dateOfFirstWeek[year];\r\n\t\t}\r\n\t}\r\n\r\n\texport class Timeline implements IVisual {\r\n\t\tprivate requiresNoUpdate: boolean = false;\r\n\t\tprivate foreignSelection: boolean = false;\r\n\t\tprivate timelineProperties: TimelineProperties;\r\n\t\tprivate timelineFormat: TimelineFormat;\r\n\t\tprivate timelineData: TimelineData;\r\n\t\tprivate timelineGranularityData: TimelineGranularityData;\r\n\t\tprivate hostServices: IVisualHostServices;\r\n\t\tprivate svg: D3.Selection;\r\n\t\tprivate timelineDiv: D3.Selection;\r\n\t\tprivate body: D3.Selection;\r\n\t\tprivate rangeText: D3.Selection;\r\n\t\tprivate mainGroupElement: D3.Selection;\r\n\t\tprivate yearLabelsElement: D3.Selection;\r\n\t\tprivate quarterLabelsElement: D3.Selection;\r\n\t\tprivate monthLabelsElement: D3.Selection;\r\n\t\tprivate weekLabelsElement: D3.Selection;\r\n\t\tprivate dayLabelsElement: D3.Selection;\r\n\t\tprivate cellsElement: D3.Selection;\r\n\t\tprivate cursorGroupElement: D3.Selection;\r\n\t\tprivate selectorContainer: D3.Selection;\r\n\t\tprivate options: VisualUpdateOptions;\r\n\t\tprivate periodSlicerRect: D3.Selection;\r\n\t\tprivate selectedText: D3.Selection;\r\n\t\tprivate selector = ['Y', 'Q', 'M', 'W', 'D'];\r\n\t\tprivate initialized: boolean;\r\n\t\tprivate selectionManager: SelectionManager;\r\n\t\tprivate clearCatcher: D3.Selection;\r\n\t\tprivate dataView: DataView;\r\n\t\tprivate valueType: string;\r\n\t\tprivate values: any[];\r\n\t\tprivate svgWidth: number;\r\n\t\tprivate newGranularity: GranularityType;\r\n\t\tpublic static calendar: Calendar;\r\n\t\tpublic static capabilities: VisualCapabilities = {\r\n\t\t\tdataRoles: [{\r\n                name: 'Time',\r\n                kind: powerbi.VisualDataRoleKind.Grouping,\r\n                displayName: 'Time'\r\n            }],\r\n\t\t\tdataViewMappings: [{\r\n\t\t\t\tconditions: [\r\n\t\t\t\t\t{ 'Time': { max: 1 } }\r\n\t\t\t\t],\r\n\t\t\t\tcategorical: {\r\n\t\t\t\t\tcategories: {\r\n\t\t\t\t\t\tfor: { in: 'Time' },\r\n\t\t\t\t\t\tdataReductionAlgorithm: { sample: {} }\r\n\t\t\t\t\t},\r\n\t\t\t\t\tvalues: {\r\n\t\t\t\t\t\tselect:\r\n\t\t\t\t\t\t[{\r\n\t\t\t\t\t\t\tbind: { to: 'Time' }\r\n\t\t\t\t\t\t}]\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t}],\r\n\t\t\tobjects: {\r\n\t\t\t\tgeneral: {\r\n\t\t\t\t\tdisplayName: 'General',\r\n\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\tformatString: {\r\n\t\t\t\t\t\t\ttype: {\r\n\t\t\t\t\t\t\t\tformatting: {\r\n\t\t\t\t\t\t\t\t\tformatString: true\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tselected: {\r\n\t\t\t\t\t\t\ttype: { bool: true }\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfilter: {\r\n\t\t\t\t\t\t\ttype: { filter: {} },\r\n\t\t\t\t\t\t\trule: {\r\n\t\t\t\t\t\t\t\toutput: {\r\n\t\t\t\t\t\t\t\t\tproperty: 'selected',\r\n\t\t\t\t\t\t\t\t\tselector: ['Time'],\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tcalendar: {\r\n\t\t\t\t\tdisplayName: 'Fiscal Year Start',\r\n\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\tmonth: {\r\n\t\t\t\t\t\t\tdisplayName: 'Month',\r\n\t\t\t\t\t\t\ttype: { enumeration: Months }\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tday: {\r\n\t\t\t\t\t\t\tdisplayName: 'Day',\r\n\t\t\t\t\t\t\ttype: { numeric: true }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tweekDay: {\r\n\t\t\t\t\tdisplayName: 'First Day of Week',\r\n\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\tday: {\r\n\t\t\t\t\t\t\tdisplayName: 'Day',\r\n\t\t\t\t\t\t\ttype: { enumeration: WeekDays }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\trangeHeader: {\r\n\t\t\t\t\tdisplayName: 'Range Header',\r\n\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\tshow: {\r\n\t\t\t\t\t\t\tdisplayName: 'Show',\r\n\t\t\t\t\t\t\ttype: { bool: true }\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfontColor: {\r\n\t\t\t\t\t\t\tdisplayName: 'Font color',\r\n\t\t\t\t\t\t\ttype: { fill: { solid: { color: true } } }\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttextSize: {\r\n\t\t\t\t\t\t\tdisplayName: 'Text Size',\r\n\t\t\t\t\t\t\ttype: { numeric: true }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcells: {\r\n\t\t\t\t\tdisplayName: 'Cells',\r\n\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\tfillSelected: {\r\n\t\t\t\t\t\t\tdisplayName: 'Selected cell color',\r\n\t\t\t\t\t\t\ttype: { fill: { solid: { color: true } } }\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfillUnselected: {\r\n\t\t\t\t\t\t\tdisplayName: 'Unselected cell color',\r\n\t\t\t\t\t\t\ttype: { fill: { solid: { color: true } } }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tlabels: {\r\n\t\t\t\t\tdisplayName: 'Labels',\r\n\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\tshow: {\r\n\t\t\t\t\t\t\tdisplayName: 'Show',\r\n\t\t\t\t\t\t\ttype: { bool: true }\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfontColor: {\r\n\t\t\t\t\t\t\tdisplayName: 'Font color',\r\n\t\t\t\t\t\t\ttype: { fill: { solid: { color: true } } }\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttextSize: {\r\n\t\t\t\t\t\t\tdisplayName: 'Text Size',\r\n\t\t\t\t\t\t\ttype: { numeric: true }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tprivate timelineMargins: TimelineMargins =\r\n\t\t{\r\n\t\t\tLeftMargin: 15,\r\n\t\t\tRightMargin: 15,\r\n\t\t\tTopMargin: 15,\r\n\t\t\tBottomMargin: 10,\r\n\t\t\tCellWidth: 40,\r\n\t\t\tCellHeight: 25,\r\n\t\t\tStartXpoint: 10,\r\n\t\t\tStartYpoint: 20,\r\n\t\t\tElementWidth: 30,\r\n\t\t\tMinCellWidth: 30,\r\n\t\t\tMaxCellHeight: 60,\r\n\t\t\tPeriodSlicerRectWidth: 15,\r\n\t\t\tPeriodSlicerRectHeight: 23\r\n\t\t};\r\n\r\n\t\tprivate defaultTimelineProperties: DefaultTimelineProperties =\r\n\t\t{\r\n\t\t\tDefaultLabelsShow: true,\r\n\t\t\tTimelineDefaultTextSize: 9,\r\n\t\t\tTimelineDefaultCellColor: \"#ADD8E6\",\r\n\t\t\tTimelineDefaultCellColorOut: \"#FFFFFF\",\r\n\t\t\tTimelineDefaultTimeRangeShow: true,\r\n\t\t\tDefaultTimeRangeColor: \"#777777\",\r\n\t\t\tDefaultLabelColor: \"#777777\",\r\n\t\t\tDefaultGranularity: GranularityType.month,\r\n\t\t\tDefaultFirstMonth: 1,\r\n\t\t\tDefaultFirstDay: 1,\r\n\t\t\tDefaultFirstWeekDay: 0\r\n\t\t};\r\n\r\n\t\tprivate timelineSelectors: TimelineSelectors =\r\n\t\t{\r\n\t\t\tTimelineVisual: createClassAndSelector('Timeline'),\r\n\t\t\tSelectionRangeContainer: createClassAndSelector('selectionRangeContainer'),\r\n\t\t\ttextLabel: createClassAndSelector('label'),\r\n\t\t\tLowerTextCell: createClassAndSelector('lowerTextCell'),\r\n\t\t\tUpperTextCell: createClassAndSelector('upperTextCell'),\r\n\t\t\tUpperTextArea: createClassAndSelector('upperTextArea'),\r\n\t\t\tLowerTextArea: createClassAndSelector('lowerTextArea'),\r\n\t\t\tRangeTextArea: createClassAndSelector('rangeTextArea'),\r\n\t\t\tCellsArea: createClassAndSelector('cellsArea'),\r\n\t\t\tCursorsArea: createClassAndSelector('cursorsArea'),\r\n\t\t\tMainArea: createClassAndSelector('mainArea'),\r\n\t\t\tSelectionCursor: createClassAndSelector('selectionCursor'),\r\n\t\t\tCell: createClassAndSelector('cell'),\r\n\t\t\tCellRect: createClassAndSelector('cellRect'),\r\n\t\t\tVertLine: createClassAndSelector('timelineVertLine'),\r\n\t\t\tTimelineSlicer: createClassAndSelector('timelineSlicer'),\r\n\t\t\tPeriodSlicerGranularities: createClassAndSelector('periodSlicerGranularities'),\r\n\t\t\tPeriodSlicerSelection: createClassAndSelector('periodSlicerSelection'),\r\n\t\t\tPeriodSlicerSelectionRect: createClassAndSelector('periodSlicerSelectionRect'),\r\n\t\t\tPeriodSlicerRect: createClassAndSelector('periodSlicerRect')\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Changes the current granularity depending on the given granularity type\r\n\t\t * Separates the new granularity's date periods which contain the start/end selection\r\n\t\t * Unseparates the date periods of the previous granularity.\r\n\t\t * @param granularity The new granularity type\r\n\t\t */\r\n\t\tpublic changeGranularity(granularity: GranularityType, startDate: Date, endDate: Date): void {\r\n\t\t\tif (Utils.unseparateSelection(this.timelineData.currentGranularity.getDatePeriods()))\r\n\t\t\t\tUtils.unseparateSelection(this.timelineData.currentGranularity.getDatePeriods());\r\n\t\t\tthis.timelineData.currentGranularity = this.timelineGranularityData.getGranularity(granularity);\r\n\t\t\tUtils.separateSelection(this.timelineData, startDate, endDate);\r\n\t\t}\r\n\r\n\t\tpublic init(options: VisualInitOptions): void {\r\n\t\t\tthis.hostServices = options.host;\r\n\t\t\tthis.initialized = false;\r\n\t\t\tlet element = options.element;\r\n\t\t\tthis.selectionManager = new SelectionManager({ hostServices: options.host });\r\n\r\n\t\t\tthis.timelineProperties = {\r\n\t\t\t\telement: element,\r\n\t\t\t\ttextYPosition: 50,\r\n\t\t\t\tcellsYPosition: this.timelineMargins.TopMargin * 3 + 65,\r\n\t\t\t\ttopMargin: this.timelineMargins.TopMargin,\r\n\t\t\t\tbottomMargin: this.timelineMargins.BottomMargin,\r\n\t\t\t\tleftMargin: this.timelineMargins.LeftMargin,\r\n\t\t\t\tstartXpoint: this.timelineMargins.StartXpoint,\r\n\t\t\t\tstartYpoint: this.timelineMargins.StartYpoint,\r\n\t\t\t\tcellWidth: this.timelineMargins.CellWidth,\r\n\t\t\t\tcellHeight: this.timelineMargins.CellHeight,\r\n\t\t\t\telementWidth: this.timelineMargins.ElementWidth,\r\n\t\t\t\trightMargin: this.timelineMargins.RightMargin\r\n\t\t\t};\r\n\r\n\t\t\tthis.body = d3.select(element.get(0));\r\n\t\t\tthis.timelineDiv = this.body.append('div');\r\n\t\t\tthis.svg = this.timelineDiv.append('svg').attr('width', px(options.viewport.width)).classed(this.timelineSelectors.TimelineVisual.class, true);\r\n\t\t\tthis.clearCatcher = appendClearCatcher(this.svg);\r\n\r\n\t\t\tthis.clearCatcher.data([this])\r\n\t\t\t\t.on(\"click\", (timeline: Timeline) => timeline.clear())\r\n\t\t\t\t.on(\"touchstart\", (timeline: Timeline) => timeline.clear());\r\n\r\n\t\t\tthis.rangeText = this.svg.append('g').classed(this.timelineSelectors.RangeTextArea.class, true).append('text');\r\n\t\t\tthis.mainGroupElement = this.svg.append('g').classed(this.timelineSelectors.MainArea.class, true);\r\n\t\t\tthis.yearLabelsElement = this.mainGroupElement.append('g');\r\n\t\t\tthis.quarterLabelsElement = this.mainGroupElement.append('g');\r\n\t\t\tthis.monthLabelsElement = this.mainGroupElement.append('g');\r\n\t\t\tthis.weekLabelsElement = this.mainGroupElement.append('g');\r\n\t\t\tthis.dayLabelsElement = this.mainGroupElement.append('g');\r\n\t\t\tthis.cellsElement = this.mainGroupElement.append('g').classed(this.timelineSelectors.CellsArea.class, true);\r\n\t\t\tthis.cursorGroupElement = this.svg.append('g').classed(this.timelineSelectors.CursorsArea.class, true);\r\n\t\t}\r\n\r\n\t\tprivate clear(): void {\r\n\t\t\tthis.selectionManager.clear();\r\n\r\n\t\t\tif (this.timelineData) {\r\n\t\t\t\tthis.timelineData.selectionStartIndex = 0;\r\n\t\t\t\tthis.timelineData.selectionEndIndex = this.timelineData.currentGranularity.getDatePeriods().length - 1;\r\n\t\t\t\tif (_.any(this.timelineData.timelineDatapoints, (x) => x.index % 1 !== 0))\r\n\t\t\t\t\tthis.selectPeriod(this.timelineData.currentGranularity.getType());\r\n\t\t\t\telse {\r\n\t\t\t\t\tTimeline.updateCursors(this.timelineData, this.timelineProperties.cellWidth);\r\n\t\t\t\t\tthis.fillCells(this.timelineFormat.cellFormat);\r\n\t\t\t\t\tthis.renderCursors(this.timelineData, this.timelineFormat, this.timelineProperties.cellHeight, this.timelineProperties.cellsYPosition);\r\n\t\t\t\t\tthis.renderTimeRangeText(this.timelineData, this.timelineFormat.rangeTextFormat);\r\n\t\t\t\t}\r\n\t\t\t\tthis.setSelection(this.timelineData);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tprivate drawGranular(timelineProperties: TimelineProperties): void {\r\n\t\t\tlet dragPeriodRectState: boolean = false;\r\n\t\t\tlet startXpoint = timelineProperties.startXpoint;\r\n\t\t\tlet startYpoint = timelineProperties.startYpoint;\r\n\t\t\tlet elementWidth = timelineProperties.elementWidth;\r\n\t\t\tthis.selectorContainer = this.svg.append('g').classed(this.timelineSelectors.TimelineSlicer.class, true);\r\n\r\n\t\t\tthis.selectorContainer.on('mouseleave', d => dragPeriodRectState = false);\r\n\t\t\tlet fillRect = this.selectorContainer.append('rect');\r\n\t\t\tlet selectorPeriods = this.selector;\r\n\t\t\tfillRect.attr({\r\n\t\t\t\theight: px(1),\r\n\t\t\t\tx: px(startXpoint),\r\n\t\t\t\ty: px(startYpoint + 2),\r\n\t\t\t\twidth: px((selectorPeriods.length - 1) * elementWidth)\r\n\t\t\t});\r\n\r\n\t\t\tlet fillVertLine = this.selectorContainer.selectAll(\"vertLines\")\r\n\t\t\t\t.data(selectorPeriods).enter().append('rect');\r\n\t\t\tfillVertLine\r\n\t\t\t\t.classed(this.timelineSelectors.VertLine.class, true)\r\n\t\t\t\t.attr({\r\n\t\t\t\t\tx: (d, index) => px(startXpoint + index * elementWidth),\r\n\t\t\t\t\ty: px(startYpoint),\r\n\t\t\t\t\twidth: px(2),\r\n\t\t\t\t\theight: px(3)\r\n\t\t\t\t})\r\n\t\t\t\t.style({ 'cursor': 'pointer' });\r\n\r\n\t\t\tlet text = this.selectorContainer.selectAll(this.timelineSelectors.PeriodSlicerGranularities.selector)\r\n\t\t\t\t.data(selectorPeriods)\r\n\t\t\t\t.enter()\r\n\t\t\t\t.append(\"text\")\r\n\t\t\t\t.classed(this.timelineSelectors.PeriodSlicerGranularities.class, true);\r\n\r\n\t\t\tlet textLabels: any;\r\n\t\t\ttextLabels = text.text((d) => d)\r\n\t\t\t\t.attr({\r\n\t\t\t\t\tx: (d, index) => px(startXpoint - 3 + index * elementWidth),\r\n\t\t\t\t\ty: px(startYpoint - 3)\r\n\t\t\t\t});\r\n\t\t\tthis.selectedText = this.selectorContainer.append(\"text\").classed(this.timelineSelectors.PeriodSlicerSelection.class, true);\r\n\t\t\tthis.selectedText.text(Utils.getGranularityName(this.defaultTimelineProperties.DefaultGranularity))\r\n\t\t\t\t.attr({\r\n\t\t\t\t\tx: px(startXpoint + 2 * elementWidth),\r\n\t\t\t\t\ty: px(startYpoint + 17),\r\n\t\t\t\t});\r\n\r\n\t\t\tlet selRects = this.selectorContainer\r\n\t\t\t\t.selectAll(this.timelineSelectors.PeriodSlicerSelectionRect.selector)\r\n\t\t\t\t.data(selectorPeriods)\r\n\t\t\t\t.enter()\r\n\t\t\t\t.append('rect')\r\n\t\t\t\t.classed(this.timelineSelectors.PeriodSlicerSelectionRect.class, true);\r\n\r\n\t\t\tlet clickHandler: (d: any, index: number) => void = (d: any, index: number) => {\r\n\t\t\t\tthis.selectPeriod(index);\r\n\t\t\t\tdragPeriodRectState = true;\r\n\t\t\t};\r\n\r\n\t\t\tselRects.attr({\r\n\t\t\t\t\tx: (d, index) => px(startXpoint - elementWidth / 2 + index * elementWidth),\r\n\t\t\t\t\ty: px(3),\r\n\t\t\t\t\twidth: px(elementWidth),\r\n\t\t\t\t\theight: px(23)\r\n\t\t\t\t})\r\n\t\t\t\t.style({ 'cursor': 'pointer' })\r\n\t\t\t\t.on('mousedown', clickHandler)\r\n\t\t\t\t.on('touchstart', clickHandler)\r\n\t\t\t\t.on('mouseup', () => dragPeriodRectState = false)\r\n\t\t\t\t.on('touchend', () => dragPeriodRectState = false)\r\n\t\t\t\t.on(\"mouseover\", (d, index) => {\r\n\t\t\t\t\tif (dragPeriodRectState) {\r\n\t\t\t\t\t\tthis.selectPeriod(index);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\tlet dragPeriodRect = d3.behavior.drag()\r\n\t\t\t\t.on(\"dragstart\", function (e, b) {\r\n\t\t\t\t\tdragPeriodRectState = true;\r\n\t\t\t\t})\r\n\t\t\t\t.on(\"dragend\", function (e, b) {\r\n\t\t\t\t\tdragPeriodRectState = false;\r\n\t\t\t\t});\r\n\r\n\t\t\tthis.periodSlicerRect = this.selectorContainer\r\n\t\t\t\t.append('rect').classed(this.timelineSelectors.PeriodSlicerRect.class, true)\r\n\t\t\t\t.attr({\r\n\t\t\t\t\tx: px(startXpoint - 6 + this.defaultTimelineProperties.DefaultGranularity * elementWidth),\r\n\t\t\t\t\ty: px(startYpoint - 16),\r\n\t\t\t\t\trx: px(4),\r\n\t\t\t\t\twidth: px(15),\r\n\t\t\t\t\theight: px(23)\r\n\t\t\t\t})\r\n\t\t\t\t.on('mouseup', d => dragPeriodRectState = false);\r\n\t\t\tthis.periodSlicerRect.call(dragPeriodRect);\r\n\t\t}\r\n\r\n\t\tpublic redrawPeriod(granularity: GranularityType): void {\r\n\t\t\tlet dx = this.timelineMargins.StartXpoint + granularity * this.timelineMargins.ElementWidth;\r\n\t\t\tthis.periodSlicerRect.transition().attr(\"x\", px(dx - 7));\r\n\t\t\tthis.selectedText.text(Utils.getGranularityName(granularity));\r\n\t\t\tlet startDate: Date = Utils.getStartSelectionDate(this.timelineData);\r\n\t\t\tlet endDate: Date = Utils.getEndSelectionDate(this.timelineData);\r\n\t\t\tthis.changeGranularity(granularity, startDate, endDate);\r\n\t\t}\r\n\r\n\t\tprivate static setMeasures(labelFormat: LabelFormat, granularityType: GranularityType, datePeriodsCount: number, viewport: IViewport, timelineProperties: TimelineProperties, timelineMargins: TimelineMargins) {\r\n\t\t\ttimelineProperties.cellsYPosition = timelineProperties.textYPosition;\r\n\t\t\tlet labelSize = fromPointToPixel(labelFormat.sizeProperty);\r\n\t\t\tif (labelFormat.showProperty)\r\n\t\t\t\ttimelineProperties.cellsYPosition += labelSize * 1.5 * (granularityType + 1);\r\n\t\t\tlet svgHeight = Math.max(0, viewport.height - timelineMargins.TopMargin);\r\n\t\t\tlet maxHeight = viewport.width - timelineMargins.RightMargin - timelineMargins.MinCellWidth * datePeriodsCount;\r\n\t\t\tlet height = Math.max(timelineMargins.MinCellWidth, Math.min(timelineMargins.MaxCellHeight, maxHeight, svgHeight - timelineProperties.cellsYPosition - 20));\r\n\t\t\tlet width = Math.max(timelineMargins.MinCellWidth, (viewport.width - height - timelineMargins.RightMargin) / datePeriodsCount);\r\n\t\t\ttimelineProperties.cellHeight = height;\r\n\t\t\ttimelineProperties.cellWidth = width;\r\n\t\t}\r\n\r\n\t\tprivate visualChangeOnly(options: VisualUpdateOptions): boolean {\r\n\t\t\tif (options && options.dataViews && options.dataViews[0] && options.dataViews[0].metadata &&\r\n\t\t\t\tthis.options && this.options.dataViews && this.options.dataViews[0] && this.options.dataViews[0].metadata) {\r\n\t\t\t\tlet newObjects = options.dataViews[0].metadata.objects;\r\n\t\t\t\tlet oldObjects = this.options.dataViews[0].metadata.objects;\r\n\t\t\t\tlet properties = ['rangeHeader', 'cells', 'labels'];\r\n\t\t\t\tlet metadataChanged = !properties.every((x) => _.isEqual(newObjects ? newObjects[x] : undefined, oldObjects ? oldObjects[x] : undefined));\r\n\t\t\t\treturn options.suppressAnimations || metadataChanged;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tprivate unavailableType(dataViewCategorical: DataViewCategorical): boolean {\r\n\t\t\treturn !dataViewCategorical.categories\r\n\t\t\t\t|| dataViewCategorical.categories.length !== 1\r\n\t\t\t\t|| !dataViewCategorical.categories[0].values\r\n\t\t\t\t|| dataViewCategorical.categories[0].values.length === 0\r\n\t\t\t\t|| !dataViewCategorical.categories[0].source\r\n\t\t\t\t|| !dataViewCategorical.categories[0].source.type;\r\n\t\t}\r\n\r\n\t\tprivate unavailableChildIdentityField(dataViewTree: DataViewTree): boolean {\r\n\t\t\treturn !dataViewTree.root || !dataViewTree.root.childIdentityFields || dataViewTree.root.childIdentityFields.length === 0;\r\n\t\t}\r\n\r\n\t\tprivate createTimelineOptions(dataView: DataView): boolean {\r\n\t\t\tthis.dataView = dataView;\r\n\t\t\tif (!dataView.categorical\r\n\t\t\t\t|| !dataView.metadata\r\n\t\t\t\t|| this.unavailableType(dataView.categorical)\r\n\t\t\t\t|| !dataView.tree\r\n\t\t\t\t|| this.unavailableChildIdentityField(dataView.tree))\r\n\t\t\t\treturn false;\r\n\t\t\tlet columnExp = <powerbi.data.SQColumnRefExpr>dataView.tree.root.childIdentityFields[0];\r\n\t\t\tthis.valueType = columnExp ? columnExp.ref : null;\r\n\t\t\tif (!(dataView.categorical.categories[0].source.type.dateTime ||\r\n\t\t\t\t(dataView.categorical.categories[0].source.type.numeric && (this.valueType === 'Year' || this.valueType === 'Date'))))\r\n\t\t\t\treturn false;\r\n\t\t\tthis.values = this.prepareValues(this.dataView.categorical.categories[0].values);\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t//Public for testability.\r\n\t\tpublic prepareValues(values) {\r\n\t\t\t// remove null strings and rebuild string type date \r\n\t\t\t// (BUG #7266283 IN PBI-service)\r\n\t\t\tvalues = values.filter(Boolean);\r\n\t\t\tfor (var i in values) { \r\n\t\t\t\tvar item = values[i];\r\n\t\t\t\tif(typeof(item) === 'String' && (String(new Date(item)) !== 'Invalid Date')){\r\n\t\t\t\t\treturn values[i] = new Date(item);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\treturn values;\r\n\t\t}\r\n\r\n\t\tprivate createTimelineData() {\r\n\t\t\tlet startDate: Date;\r\n\t\t\tlet endDate: Date;\r\n\t\t\tif (this.valueType === 'Year') {\r\n\t\t\t\tlet years: number[] = this.values;\r\n\t\t\t\tstartDate = new Date(_.min(years), 0);\r\n\t\t\t\tendDate = new Date(_.max(years), 11);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tlet dates: Date[] = this.values;\r\n\t\t\t\tstartDate = _.min(dates);\r\n\t\t\t\tendDate = _.max(dates);\r\n\t\t\t}\r\n\t\t\tif (!this.initialized)\r\n\t\t\t\tthis.drawGranular(this.timelineProperties);\r\n\t\t\tif (this.initialized) {\r\n\t\t\t\tlet actualEndDate = TimelineGranularityData.nextDay(endDate);\r\n\t\t\t\tlet daysPeriods = this.timelineGranularityData.getGranularity(GranularityType.day).getDatePeriods();\r\n\t\t\t\tlet prevStartDate = daysPeriods[0].startDate;\r\n\t\t\t\tlet prevEndDate = daysPeriods[daysPeriods.length - 1].endDate;\r\n\t\t\t\tlet changedSelection = startDate.getTime() >= prevStartDate.getTime() && actualEndDate.getTime() <= prevEndDate.getTime();\r\n\t\t\t\tthis.newGranularity = this.timelineData.currentGranularity.getType();\r\n\t\t\t\tif (changedSelection) {\r\n\t\t\t\t\tthis.foreignSelection = true;\r\n\t\t\t\t\tthis.changeGranularity(this.newGranularity, startDate, actualEndDate);\r\n\t\t\t\t\tthis.timelineFormat = Timeline.fillTimelineFormat(this.options.dataViews[0].metadata.objects, this.defaultTimelineProperties);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (actualEndDate < prevEndDate)\r\n\t\t\t\t\t\tendDate = daysPeriods[daysPeriods.length - 1].startDate;\r\n\t\t\t\t\tif (startDate > prevStartDate)\r\n\t\t\t\t\t\tstartDate = prevStartDate;\r\n\t\t\t\t\tthis.initialized = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!this.initialized) {\r\n\t\t\t\tthis.timelineGranularityData = new TimelineGranularityData(startDate, endDate);\r\n\t\t\t\tthis.timelineData = {\r\n\t\t\t\t\telementsCount: 0,\r\n\t\t\t\t\ttimelineDatapoints: [],\r\n\t\t\t\t\tcursorDataPoints: new Array<CursorDatapoint>()\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic update(options: VisualUpdateOptions): void {\r\n\t\t\tlet visualChange: boolean = this.visualChangeOnly(options);\r\n\t\t\tthis.requiresNoUpdate = this.requiresNoUpdate && !visualChange;\r\n\t\t\tif (this.requiresNoUpdate) {\r\n\t\t\t\tif (this.foreignSelection)\r\n\t\t\t\t\tthis.foreignSelection = false;\r\n\t\t\t\telse\r\n\t\t\t\t\tthis.requiresNoUpdate = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.options = options;\r\n\t\t\tif (!options.dataViews || !options.dataViews[0])\r\n\t\t\t\treturn;\r\n\t\t\tlet validOptions: boolean = this.createTimelineOptions(options.dataViews[0]);\r\n\t\t\tif (!validOptions) {\r\n\t\t\t\tthis.clearData();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.newGranularity = this.defaultTimelineProperties.DefaultGranularity;\r\n\t\t\tif (!visualChange)\r\n\t\t\t\tthis.createTimelineData();\r\n\t\t\tthis.timelineFormat = Timeline.converter(this.timelineData, this.timelineProperties, this.defaultTimelineProperties, this.timelineGranularityData, options.dataViews[0], this.initialized, this.newGranularity, options.viewport, this.timelineMargins);\r\n\t\t\tthis.render(this.timelineData, this.timelineFormat, this.timelineProperties, options);\r\n\t\t\tthis.initialized = true;\r\n\t\t}\r\n\r\n\t\tpublic selectPeriod(periodNameIndex): void {\r\n\t\t\tthis.redrawPeriod(periodNameIndex);\r\n\t\t\tthis.timelineFormat = Timeline.converter(this.timelineData, this.timelineProperties, this.defaultTimelineProperties, this.timelineGranularityData, this.options.dataViews[0], this.initialized, this.timelineData.currentGranularity.getType(), this.options.viewport, this.timelineMargins);\r\n\t\t\tthis.render(this.timelineData, this.timelineFormat, this.timelineProperties, this.options);\r\n\t\t}\r\n\r\n\t\tprivate static isDataNotMatch(dataView): boolean {\r\n\t\t\tif (dataView.categorical.categories.length <= 0 ||\r\n\t\t\t\tdataView.categorical.categories[0] === undefined ||\r\n\t\t\t\tdataView.categorical.categories[0].identityFields === undefined ||\r\n\t\t\t\tdataView.categorical.categories[0].identityFields.length <= 0)\r\n\t\t\t\treturn true;\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tpublic static converter(timelineData: TimelineData, timelineProperties: TimelineProperties, defaultTimelineProperties: DefaultTimelineProperties, timelineGranularityData: TimelineGranularityData, dataView: DataView, initialized: boolean, granularityType: GranularityType, viewport: IViewport, timelineMargins: TimelineMargins): TimelineFormat {\r\n\t\t\tlet timelineFormat = Timeline.fillTimelineFormat(dataView.metadata.objects, defaultTimelineProperties);\r\n\t\t\tif (!initialized) {\r\n\t\t\t\ttimelineData.cursorDataPoints.push({ x: 0, selectionIndex: 0, cursorIndex: 0 });\r\n\t\t\t\ttimelineData.cursorDataPoints.push({ x: 0, selectionIndex: 0, cursorIndex: 1 });\r\n\t\t\t}\r\n\t\t\tif (!initialized || Timeline.calendar.isChanged(timelineFormat.calendarFormat)) {\r\n\t\t\t\tTimeline.calendar = new Calendar(timelineFormat.calendarFormat);\r\n\t\t\t\ttimelineGranularityData.createGranularities();\r\n\t\t\t\ttimelineGranularityData.createLabels();\r\n\t\t\t\ttimelineData.currentGranularity = timelineGranularityData.getGranularity(granularityType);\r\n\t\t\t\ttimelineData.selectionStartIndex = 0;\r\n\t\t\t\ttimelineData.selectionEndIndex = timelineData.currentGranularity.getDatePeriods().length - 1;\r\n\t\t\t}\r\n\t\t\ttimelineData.categorySourceName = dataView.categorical.categories[0].source.displayName;\r\n\t\t\ttimelineData.columnIdentity = <powerbi.data.SQColumnRefExpr>dataView.categorical.categories[0].identityFields[0];\r\n\t\t\tif (dataView.categorical.categories[0].source.type.numeric) {\r\n\t\t\t\ttimelineData.columnIdentity.ref = \"Date\";\r\n\t\t\t}\r\n\t\t\tif (this.isDataNotMatch(dataView))\r\n\t\t\t\treturn;\r\n\t\t\tlet timelineElements: DatePeriod[] = timelineData.currentGranularity.getDatePeriods();\r\n\t\t\ttimelineData.elementsCount = timelineElements.length;\r\n\t\t\ttimelineData.timelineDatapoints = [];\r\n\t\t\tfor (let currentTimePeriod of timelineElements) {\r\n\t\t\t\tlet datapoint: TimelineDatapoint = {\r\n\t\t\t\t\tindex: currentTimePeriod.index,\r\n\t\t\t\t\tdatePeriod: currentTimePeriod\r\n\t\t\t\t};\r\n\t\t\t\ttimelineData.timelineDatapoints.push(datapoint);\r\n\t\t\t}\r\n\t\t\tlet countFullCells = timelineData.currentGranularity.getDatePeriods().filter((x) => x.index % 1 === 0).length;\r\n\t\t\tTimeline.setMeasures(timelineFormat.labelFormat, timelineData.currentGranularity.getType(), countFullCells, viewport, timelineProperties, timelineMargins);\r\n\t\t\tTimeline.updateCursors(timelineData, timelineProperties.cellWidth);\r\n\t\t\treturn timelineFormat;\r\n\t\t}\r\n\r\n\t\tprivate render(timelineData: TimelineData, timelineFormat: TimelineFormat, timelineProperties: TimelineProperties, options: VisualUpdateOptions): void {\r\n\t\t\tlet timelineDatapointsCount = this.timelineData.timelineDatapoints.filter((x) => x.index % 1 === 0).length;\r\n\t\t\tthis.svgWidth = 1 + this.timelineProperties.cellHeight + timelineProperties.cellWidth * timelineDatapointsCount;\r\n\t\t\tthis.renderTimeRangeText(timelineData, timelineFormat.rangeTextFormat);\r\n\t\t\tthis.timelineDiv.attr({\r\n\t\t\t\theight: px(options.viewport.height),\r\n\t\t\t\twidth: px(options.viewport.width),\r\n\t\t\t\t'drag-resize-disabled': true\r\n\t\t\t}).style({\r\n\t\t\t\t'overflow-x': 'auto',\r\n\t\t\t\t'overflow-y': 'auto'\r\n\t\t\t});\r\n\t\t\tthis.svg.attr({\r\n\t\t\t\theight: px(Math.max(0, options.viewport.height - this.timelineMargins.TopMargin)),\r\n\t\t\t\twidth: px(Math.max(0, this.svgWidth))\r\n\t\t\t});\r\n\t\t\tlet fixedTranslateString: string = SVGUtil.translate(timelineProperties.leftMargin, timelineProperties.topMargin);\r\n\t\t\tlet translateString: string = SVGUtil.translate(timelineProperties.cellHeight / 2, timelineProperties.topMargin);\r\n\t\t\tthis.mainGroupElement.attr('transform', translateString);\r\n\t\t\tthis.selectorContainer.attr('transform', fixedTranslateString);\r\n\t\t\tthis.cursorGroupElement.attr('transform', translateString);\r\n\r\n\t\t\tlet extendedLabels = this.timelineData.currentGranularity.getExtendedLabel();\r\n\t\t\tlet granularityType = this.timelineData.currentGranularity.getType();\r\n\t\t\tlet yPos = 0, yDiff = 1.50;\r\n\t\t\tthis.renderLabels(extendedLabels.yearLabels, this.yearLabelsElement, yPos, granularityType === 0);\r\n\t\t\tyPos += yDiff;\r\n\t\t\tthis.renderLabels(extendedLabels.quarterLabels, this.quarterLabelsElement, yPos, granularityType === 1);\r\n\t\t\tyPos += yDiff;\r\n\t\t\tthis.renderLabels(extendedLabels.monthLabels, this.monthLabelsElement, yPos, granularityType === 2);\r\n\t\t\tyPos += yDiff;\r\n\t\t\tthis.renderLabels(extendedLabels.weekLabels, this.weekLabelsElement, yPos, granularityType === 3);\r\n\t\t\tyPos += yDiff;\r\n\t\t\tthis.renderLabels(extendedLabels.dayLabels, this.dayLabelsElement, yPos, granularityType === 4);\r\n\t\t\tthis.renderCells(timelineData, timelineFormat, timelineProperties, options.suppressAnimations);\r\n\t\t\tthis.renderCursors(timelineData, timelineFormat, timelineProperties.cellHeight, timelineProperties.cellsYPosition);\r\n\t\t}\r\n\r\n\t\tprivate renderLabels(labels: TimelineLabel[], labelsElement: D3.Selection, index: number, isLast: boolean): void {\r\n\t\t\tlet labelTextSelection = labelsElement.selectAll(this.timelineSelectors.textLabel.selector);\r\n\t\t\tif (!this.timelineFormat.labelFormat.showProperty) {\r\n\t\t\t\tlabelTextSelection.remove();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet labelsGroupSelection = labelTextSelection.data(labels);\r\n\t\t\tlabelsGroupSelection.enter().append('text').classed(this.timelineSelectors.textLabel.class, true);\r\n\r\n\t\t\tlabelsGroupSelection.text((x: TimelineLabel, id: number) => {\r\n\t\t\t\tif (!isLast && id === 0 && labels.length > 1) {\r\n\t\t\t\t\tlet fontSize = pt(this.timelineFormat.labelFormat.sizeProperty);\r\n\t\t\t\t\tlet textProperties: powerbi.TextProperties = {\r\n\t\t\t\t\t\ttext: labels[0].text,\r\n\t\t\t\t\t\tfontFamily: 'arial',\r\n\t\t\t\t\t\tfontSize: fontSize\r\n\t\t\t\t\t};\r\n\t\t\t\t\tlet halfFirstTextWidth = TextMeasurementService.measureSvgTextWidth(textProperties) / 2;\r\n\t\t\t\t\ttextProperties = {\r\n\t\t\t\t\t\ttext: labels[1].text,\r\n\t\t\t\t\t\tfontFamily: 'arial',\r\n\t\t\t\t\t\tfontSize: fontSize\r\n\t\t\t\t\t};\r\n\t\t\t\t\tlet halfSecondTextWidth = TextMeasurementService.measureSvgTextWidth(textProperties) / 2;\r\n\t\t\t\t\tlet diff = this.timelineProperties.cellWidth * (labels[1].id - labels[0].id);\r\n\t\t\t\t\tif (diff < halfFirstTextWidth + halfSecondTextWidth)\r\n\t\t\t\t\t\treturn \"\";\r\n\t\t\t\t}\r\n\t\t\t\tlet labelFormattedTextOptions: LabelFormattedTextOptions = {\r\n\t\t\t\t\tlabel: x.text,\r\n\t\t\t\t\tmaxWidth: this.timelineProperties.cellWidth * (isLast ? 0.90 : 3),\r\n\t\t\t\t\tfontSize: this.timelineFormat.labelFormat.sizeProperty\r\n\t\t\t\t};\r\n\t\t\t\treturn dataLabelUtils.getLabelFormattedText(labelFormattedTextOptions);\r\n\t\t\t})\r\n\t\t\t\t.style('font-size', pt(this.timelineFormat.labelFormat.sizeProperty))\r\n\t\t\t\t.attr({\r\n\t\t\t\t\tx: (x: TimelineLabel) => (x.id + 0.5) * this.timelineProperties.cellWidth,\r\n\t\t\t\t\ty: this.timelineProperties.textYPosition + (1 + index) * fromPointToPixel(this.timelineFormat.labelFormat.sizeProperty),\r\n\t\t\t\t\tfill: this.timelineFormat.labelFormat.colorProperty\r\n\t\t\t\t}).append('title').text((x: TimelineLabel) => x.title);\r\n\t\t\tlabelsGroupSelection.exit().remove();\r\n\t\t}\r\n\r\n\t\tprivate clearData(): void {\r\n\t\t\tthis.initialized = false;\r\n\t\t\tthis.mainGroupElement.selectAll(this.timelineSelectors.CellRect.selector).remove();\r\n\t\t\tthis.mainGroupElement.selectAll(this.timelineSelectors.textLabel.selector).remove();\r\n\t\t\tthis.rangeText.text(\"\");\r\n\t\t\tthis.cursorGroupElement.selectAll(this.timelineSelectors.SelectionCursor.selector).remove();\r\n\t\t\tthis.svg.select(this.timelineSelectors.TimelineSlicer.selector).remove();\r\n\t\t}\r\n\r\n\t\tprivate static updateCursors(timelineData: TimelineData, cellWidth: number): void {\r\n\t\t\tlet startDate: DatePeriod = timelineData.timelineDatapoints[timelineData.selectionStartIndex].datePeriod;\r\n\t\t\ttimelineData.cursorDataPoints[0].selectionIndex = startDate.index;\r\n\t\t\tlet endDate: DatePeriod = timelineData.timelineDatapoints[timelineData.selectionEndIndex].datePeriod;\r\n\t\t\ttimelineData.cursorDataPoints[1].selectionIndex = (endDate.index + endDate.fraction);\r\n\t\t}\r\n\r\n\t\tprivate static fillTimelineFormat(objects: any, timelineProperties: DefaultTimelineProperties): TimelineFormat {\r\n\t\t\tlet timelineFormat: TimelineFormat =\r\n\t\t\t\t{\r\n\t\t\t\t\trangeTextFormat: {\r\n\t\t\t\t\t\tshowProperty: DataViewObjects.getValue<boolean>(objects, TimeRangeShowProp, timelineProperties.TimelineDefaultTimeRangeShow),\r\n\t\t\t\t\t\tcolorProperty: DataViewObjects.getFillColor(objects, TimeRangeColorProp, timelineProperties.DefaultTimeRangeColor),\r\n\t\t\t\t\t\tsizeProperty: DataViewObjects.getValue<number>(objects, TimeRangeSizeProp, timelineProperties.TimelineDefaultTextSize)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcellFormat: {\r\n\t\t\t\t\t\tcolorInProperty: DataViewObjects.getFillColor(objects, SelectedCellColorProp, timelineProperties.TimelineDefaultCellColor),\r\n\t\t\t\t\t\tcolorOutProperty: DataViewObjects.getFillColor(objects, UnselectedCellColorProp, timelineProperties.TimelineDefaultCellColorOut)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlabelFormat: {\r\n\t\t\t\t\t\tshowProperty: DataViewObjects.getValue<boolean>(objects, LabelsShowProp, timelineProperties.DefaultLabelsShow),\r\n\t\t\t\t\t\tcolorProperty: DataViewObjects.getFillColor(objects, LabelsColorProp, timelineProperties.DefaultLabelColor),\r\n\t\t\t\t\t\tsizeProperty: DataViewObjects.getValue<number>(objects, LabelsSizeProp, timelineProperties.TimelineDefaultTextSize)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcalendarFormat: {\r\n\t\t\t\t\t\tfirstMonthProperty: DataViewObjects.getValue<number>(objects, CalendarMonthProp, 1),\r\n\t\t\t\t\t\tfirstDayProperty: Math.max(1, Math.min(31, DataViewObjects.getValue<number>(objects, CalendarDayProp, timelineProperties.DefaultFirstDay))),\r\n\t\t\t\t\t\tweekDayProperty: Math.max(0, Math.min(6, DataViewObjects.getValue<number>(objects, WeekDayProp, timelineProperties.DefaultFirstWeekDay)))\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\treturn timelineFormat;\r\n\t\t}\r\n\r\n\t\tpublic fillCells(cellFormat: CellFormat): void {\r\n\t\t\tlet dataPoints = this.timelineData.timelineDatapoints;\r\n\t\t\tlet cellSelection = this.mainGroupElement.selectAll(this.timelineSelectors.CellRect.selector).data(dataPoints);\r\n\t\t\tcellSelection.attr('fill', d => Utils.getCellColor(d, this.timelineData, cellFormat));\r\n\t\t}\r\n\r\n\t\tpublic renderCells(timelineData: TimelineData, timelineFormat: TimelineFormat, timelineProperties: TimelineProperties, suppressAnimations: any): void {\r\n\t\t\tlet allDataPoints = timelineData.timelineDatapoints;\r\n\t\t\tlet totalX = 0;\r\n\t\t\tlet cellsSelection = this.cellsElement.selectAll(this.timelineSelectors.CellRect.selector).data(allDataPoints);\r\n\t\t\tcellsSelection.enter().append('rect').classed(this.timelineSelectors.CellRect.class, true);\r\n\t\t\tcellsSelection\r\n\t\t\t\t.attr({\r\n\t\t\t\t\theight: px(timelineProperties.cellHeight),\r\n\t\t\t\t\twidth: (d: TimelineDatapoint) => px(d.datePeriod.fraction * timelineProperties.cellWidth),\r\n\t\t\t\t\tx: (d: TimelineDatapoint) => {\r\n\t\t\t\t\t\tlet value = totalX;\r\n\t\t\t\t\t\ttotalX += d.datePeriod.fraction * timelineProperties.cellWidth;\r\n\t\t\t\t\t\treturn px(value);\r\n\t\t\t\t\t},\r\n\t\t\t\t\ty: px(timelineProperties.cellsYPosition),\r\n\t\t\t\t\tid: (d: TimelineDatapoint) => d.index\r\n\t\t\t\t});\r\n\r\n\t\t\tlet clickHandler: (d: TimelineDatapoint, index: number) => void = (d: TimelineDatapoint, index: number) => {\r\n\t\t\t\td3.event.preventDefault();\r\n\t\t\t\tlet cursorDataPoints = this.timelineData.cursorDataPoints;\r\n\t\t\t\tlet keyEvent: any = d3.event;\r\n\t\t\t\tif (keyEvent.altKey || keyEvent.shiftKey) {\r\n\t\t\t\t\tif (this.timelineData.selectionEndIndex < index) {\r\n\t\t\t\t\t\tcursorDataPoints[1].selectionIndex = (d.datePeriod.index + d.datePeriod.fraction);\r\n\t\t\t\t\t\ttimelineData.selectionEndIndex = index;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tcursorDataPoints[0].selectionIndex = d.datePeriod.index;\r\n\t\t\t\t\t\ttimelineData.selectionStartIndex = index;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttimelineData.selectionStartIndex = index;\r\n\t\t\t\t\ttimelineData.selectionEndIndex = index;\r\n\t\t\t\t\tcursorDataPoints[0].selectionIndex = d.datePeriod.index;\r\n\t\t\t\t\tcursorDataPoints[1].selectionIndex = (d.datePeriod.index + d.datePeriod.fraction);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.fillCells(timelineFormat.cellFormat);\r\n\t\t\t\tthis.renderCursors(timelineData, timelineFormat, timelineProperties.cellHeight, timelineProperties.cellsYPosition);\r\n\t\t\t\tthis.renderTimeRangeText(timelineData, timelineFormat.rangeTextFormat);\r\n\t\t\t\tthis.setSelection(timelineData);\r\n\t\t\t};\r\n\r\n\t\t\tcellsSelection\r\n\t\t\t\t.on('click', clickHandler)\r\n\t\t\t\t.on(\"touchstart\", clickHandler);\r\n\r\n\t\t\tthis.fillCells(timelineFormat.cellFormat);\r\n\t\t\tcellsSelection.exit().remove();\r\n\t\t}\r\n\r\n\t\tpublic dragstarted(): void {\r\n\t\t\tthis.timelineData.dragging = true;\r\n\t\t}\r\n\r\n\t\tpublic dragged(currentCursor: CursorDatapoint): void {\r\n\t\t\tif (this.timelineData.dragging === true) {\r\n\t\t\t\tlet xScale = 1;\r\n\t\t\t\tlet container = d3.select(this.timelineSelectors.TimelineVisual.selector);\r\n\r\n\t\t\t\tif (container) {\r\n\t\t\t\t\tlet transform = container.style(\"transform\");\r\n\t\t\t\t\tif (transform !== undefined && transform !== 'none') {\r\n\t\t\t\t\t\tlet str = transform.split(\"(\")[1];\r\n\t\t\t\t\t\txScale = Number(str.split(\", \")[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet cursorOverElement: TimelineCursorOverElement = this.findCursorOverElement(d3.event.x);\r\n\r\n\t\t\t\tif (!cursorOverElement) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet currentlyMouseOverElement: TimelineDatapoint = cursorOverElement.datapoint,\r\n\t\t\t\t\tcurrentlyMouseOverElementIndex: number = cursorOverElement.index;\r\n\r\n\t\t\t\tif (currentCursor.cursorIndex === 0 && currentlyMouseOverElementIndex <= this.timelineData.selectionEndIndex) {\r\n\t\t\t\t\tthis.timelineData.selectionStartIndex = currentlyMouseOverElementIndex;\r\n\t\t\t\t\tthis.timelineData.cursorDataPoints[0].selectionIndex = currentlyMouseOverElement.datePeriod.index;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (currentCursor.cursorIndex === 1 && currentlyMouseOverElementIndex >= this.timelineData.selectionStartIndex) {\r\n\t\t\t\t\tthis.timelineData.selectionEndIndex = currentlyMouseOverElementIndex;\r\n\t\t\t\t\tthis.timelineData.cursorDataPoints[1].selectionIndex = (currentlyMouseOverElement.datePeriod.index + currentlyMouseOverElement.datePeriod.fraction);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.fillCells(this.timelineFormat.cellFormat);\r\n\t\t\t\tthis.renderCursors(this.timelineData, this.timelineFormat, this.timelineProperties.cellHeight, this.timelineProperties.cellsYPosition);\r\n\t\t\t\tthis.renderTimeRangeText(this.timelineData, this.timelineFormat.rangeTextFormat);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Note: Public for testability.\r\n\t\t */\r\n\t\tpublic findCursorOverElement(x: number): TimelineCursorOverElement {\r\n\t\t\tlet timelineDatapoints: TimelineDatapoint[] = this.timelineData.timelineDatapoints || [],\r\n\t\t\t\tlength: number = timelineDatapoints.length,\r\n\t\t\t\tcellWidth: number = this.timelineProperties.cellWidth;\r\n\r\n\t\t\tif (timelineDatapoints[0] && timelineDatapoints[1] && x <= timelineDatapoints[1].index * cellWidth) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tindex: 0,\r\n\t\t\t\t\tdatapoint: timelineDatapoints[0]\r\n\t\t\t\t};\r\n\t\t\t} else if (timelineDatapoints[length - 1] && x >= timelineDatapoints[length - 1].index * cellWidth) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tindex: length - 1,\r\n\t\t\t\t\tdatapoint: timelineDatapoints[length - 1]\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tfor (let i = 1; i < length; i++) {\r\n\t\t\t\tlet left: number = timelineDatapoints[i].index * cellWidth,\r\n\t\t\t\t\tright: number = timelineDatapoints[i + 1].index * cellWidth;\r\n\r\n\t\t\t\tif (x >= left && x <= right) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tindex: i,\r\n\t\t\t\t\t\tdatapoint: timelineDatapoints[i]\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tpublic dragended(): void {\r\n\t\t\tthis.setSelection(this.timelineData);\r\n\t\t}\r\n\r\n\t\tprivate drag = d3.behavior.drag()\r\n\t\t\t.origin((d: CursorDatapoint) => {\r\n\t\t\t\td.x = d.selectionIndex * this.timelineProperties.cellWidth;\r\n\r\n\t\t\t\treturn d;\r\n\t\t\t})\r\n\t\t\t.on(\"dragstart\", () => { this.dragstarted(); })\r\n\t\t\t.on(\"drag\", (d: CursorDatapoint) => { this.dragged(d); })\r\n\t\t\t.on(\"dragend\", () => { this.dragended(); });\r\n\r\n\t\tpublic renderCursors(timelineData: TimelineData, timelineFormat: TimelineFormat, cellHeight: number, cellsYPosition: number): D3.UpdateSelection {\r\n\t\t\tlet cursorSelection = this.cursorGroupElement.selectAll(this.timelineSelectors.SelectionCursor.selector).data(timelineData.cursorDataPoints);\r\n\t\t\tcursorSelection.enter().append('path').classed(this.timelineSelectors.SelectionCursor.class, true);\r\n\r\n\t\t\tcursorSelection.attr(\"transform\", (d: CursorDatapoint) => SVGUtil.translate(d.selectionIndex * this.timelineProperties.cellWidth, cellHeight / 2 + cellsYPosition)).attr({\r\n\t\t\t\td: d3.svg.arc()\r\n\t\t\t\t\t.innerRadius(0)\r\n\t\t\t\t\t.outerRadius(cellHeight / 2)\r\n\t\t\t\t\t.startAngle(d => d.cursorIndex * Math.PI + Math.PI)\r\n\t\t\t\t\t.endAngle(d => d.cursorIndex * Math.PI + 2 * Math.PI)\r\n\t\t\t})\r\n\t\t\t\t.call(this.drag);\r\n\r\n\t\t\tcursorSelection.exit().remove();\r\n\t\t\treturn cursorSelection;\r\n\t\t}\r\n\r\n\t\tpublic renderTimeRangeText(timelineData: TimelineData, timeRangeFormat: LabelFormat): void {\r\n            let leftMargin = (GranularityNames.length + 2) * this.timelineProperties.elementWidth;\r\n            let maxWidth = this.svgWidth - leftMargin - this.timelineProperties.leftMargin;\r\n\r\n\t\t\tif (timeRangeFormat.showProperty && maxWidth > 0) {\r\n\t\t\t\tlet timeRangeText = Utils.timeRangeText(timelineData);\r\n\t\t\t\tlet labelFormattedTextOptions: LabelFormattedTextOptions = {\r\n\t\t\t\t\tlabel: timeRangeText,\r\n\t\t\t\t\tmaxWidth: maxWidth,\r\n\t\t\t\t\tfontSize: timeRangeFormat.sizeProperty\r\n\t\t\t\t};\r\n\t\t\t\tlet actualText = dataLabelUtils.getLabelFormattedText(labelFormattedTextOptions);\r\n\t\t\t\tthis.rangeText.classed(this.timelineSelectors.SelectionRangeContainer.class, true);\r\n\t\t\t\tthis.rangeText.attr({\r\n\t\t\t\t\tx: (GranularityNames.length) * (this.timelineProperties.elementWidth + this.timelineProperties.leftMargin),\r\n\t\t\t\t\ty: 40,\r\n\t\t\t\t\tfill: timeRangeFormat.colorProperty\r\n\t\t\t\t})\r\n\t\t\t\t\t.style({\r\n\t\t\t\t\t\t'font-size': pt(timeRangeFormat.sizeProperty)\r\n\t\t\t\t\t}).text(actualText)\r\n\t\t\t\t\t.append('title').text(timeRangeText);;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tthis.rangeText.text(\"\");\r\n\t\t}\r\n\r\n\t\tpublic setSelection(timelineData: TimelineData): void {\r\n\t\t\tthis.requiresNoUpdate = true;\r\n\t\t\tlet lower: data.SQConstantExpr = powerbi.data.SQExprBuilder.dateTime(Utils.getStartSelectionDate(timelineData));\r\n\t\t\tlet upper: data.SQConstantExpr = powerbi.data.SQExprBuilder.dateTime(new Date(Utils.getEndSelectionDate(timelineData).getTime() - 1));\r\n\t\t\tlet filterExpr = powerbi.data.SQExprBuilder.between(timelineData.columnIdentity, lower, upper);\r\n\t\t\tlet filter = powerbi.data.SemanticFilter.fromSQExpr(filterExpr);\r\n\t\t\tlet objects: VisualObjectInstancesToPersist = {\r\n\t\t\t\tmerge: [\r\n\t\t\t\t\t<VisualObjectInstance>{\r\n\t\t\t\t\t\tobjectName: \"general\",\r\n\t\t\t\t\t\tselector: undefined,\r\n\t\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\t\t\"filter\": filter,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t};\r\n\t\t\tthis.hostServices.persistProperties(objects);\r\n\t\t\tthis.hostServices.onSelect({ data: [] });\r\n\t\t}\r\n\r\n\t\t// This function retruns the values to be displayed in the property pane for each object.\r\n\t\t// Usually it is a bind pass of what the property pane gave you, but sometimes you may want to do\r\n\t\t// validation and return other values/defaults \r\n\t\tpublic enumerateObjectInstances(options: EnumerateVisualObjectInstancesOptions): VisualObjectInstanceEnumeration {\r\n\t\t\tlet enumeration = new ObjectEnumerationBuilder();\r\n\t\t\tswitch (options.objectName) {\r\n\t\t\t\tcase 'rangeHeader':\r\n\t\t\t\t\tthis.enumerateRangeHeader(enumeration, this.dataView);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'cells':\r\n\t\t\t\t\tthis.enumerateCells(enumeration, this.dataView);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'labels':\r\n\t\t\t\t\tthis.enumerateLabels(enumeration, this.dataView);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'calendar':\r\n\t\t\t\t\tthis.enumerateCalendar(enumeration, this.dataView);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'weekDay':\r\n\t\t\t\t\tthis.enumerateWeekDay(enumeration, this.dataView);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\treturn enumeration.complete();\r\n\t\t}\r\n\r\n\t\tpublic enumerateRangeHeader(enumeration: ObjectEnumerationBuilder, dataview: DataView): void {\r\n\t\t\tlet objects = dataview && dataview.metadata ? dataview.metadata.objects : undefined;\r\n\t\t\tenumeration.pushInstance({\r\n\t\t\t\tobjectName: 'rangeHeader',\r\n\t\t\t\tdisplayName: 'Selection Color',\r\n\t\t\t\tselector: null,\r\n\t\t\t\tproperties: {\r\n\t\t\t\t\tshow: DataViewObjects.getValue<boolean>(objects, TimeRangeShowProp, this.defaultTimelineProperties.TimelineDefaultTimeRangeShow),\r\n\t\t\t\t\tfontColor: DataViewObjects.getFillColor(objects, TimeRangeColorProp, this.defaultTimelineProperties.DefaultTimeRangeColor),\r\n\t\t\t\t\ttextSize: DataViewObjects.getValue<number>(objects, TimeRangeSizeProp, this.defaultTimelineProperties.TimelineDefaultTextSize)\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tpublic enumerateCells(enumeration: ObjectEnumerationBuilder, dataview: DataView): void {\r\n\t\t\tlet objects = dataview && dataview.metadata ? dataview.metadata.objects : undefined;\r\n\t\t\tenumeration.pushInstance({\r\n\t\t\t\tobjectName: 'cells',\r\n\t\t\t\tselector: null,\r\n\t\t\t\tproperties: {\r\n\t\t\t\t\tfillSelected: DataViewObjects.getFillColor(objects, SelectedCellColorProp, this.defaultTimelineProperties.TimelineDefaultCellColor),\r\n\t\t\t\t\tfillUnselected: DataViewObjects.getFillColor(objects, UnselectedCellColorProp, this.defaultTimelineProperties.TimelineDefaultCellColorOut)\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tpublic enumerateLabels(enumeration: ObjectEnumerationBuilder, dataview: DataView): void {\r\n\t\t\tlet objects = dataview && dataview.metadata ? dataview.metadata.objects : undefined;\r\n\t\t\tenumeration.pushInstance({\r\n\t\t\t\tobjectName: 'labels',\r\n\t\t\t\tselector: null,\r\n\t\t\t\tproperties: {\r\n\t\t\t\t\tshow: DataViewObjects.getValue<boolean>(objects, LabelsShowProp, this.defaultTimelineProperties.DefaultLabelsShow),\r\n\t\t\t\t\tfontColor: DataViewObjects.getFillColor(objects, LabelsColorProp, this.defaultTimelineProperties.DefaultLabelColor),\r\n\t\t\t\t\ttextSize: DataViewObjects.getValue<number>(objects, LabelsSizeProp, this.defaultTimelineProperties.TimelineDefaultTextSize)\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tpublic enumerateCalendar(enumeration: ObjectEnumerationBuilder, dataview: DataView): void {\r\n\t\t\tlet objects = dataview && dataview.metadata ? dataview.metadata.objects : undefined;\r\n\t\t\tenumeration.pushInstance({\r\n\t\t\t\tobjectName: 'calendar',\r\n\t\t\t\tselector: null,\r\n\t\t\t\tproperties: {\r\n\t\t\t\t\tmonth: Math.max(1, Math.min(12, DataViewObjects.getValue<number>(objects, CalendarMonthProp, 1))),\r\n\t\t\t\t\tday: Math.max(1, Math.min(31, DataViewObjects.getValue<number>(objects, CalendarDayProp, 1))),\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tpublic enumerateWeekDay(enumeration: ObjectEnumerationBuilder, dataview: DataView): void {\r\n\t\t\tlet objects = dataview && dataview.metadata ? dataview.metadata.objects : undefined;\r\n\t\t\tenumeration.pushInstance({\r\n\t\t\t\tobjectName: 'weekDay',\r\n\t\t\t\tselector: null,\r\n\t\t\t\tproperties: {\r\n\t\t\t\t\tday: Math.max(0, Math.min(6, DataViewObjects.getValue<number>(objects, WeekDayProp, 0)))\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved.\r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *\r\n *  The above copyright notice and this permission notice shall be included in\r\n *  all copies or substantial portions of the Software.\r\n *\r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.visuals.samples {\r\n\r\n    import ValueFormatter = powerbi.visuals.valueFormatter;\r\n    import SelectionManager = utility.SelectionManager;\r\n    import ClassAndSelector = jsCommon.CssConstants.ClassAndSelector;\r\n\r\n    export interface StreamData {\r\n        dataPoints: StreamDataPoint[][];\r\n        legendData: LegendData;\r\n        valueFormatter: IValueFormatter;\r\n        categoryFormatter: IValueFormatter;\r\n        streamGraphSettings: StreamGraphSettings;\r\n    }\r\n\r\n    export interface StreamDataPoint {\r\n        x: number;\r\n        y: number;\r\n        y0?: number;\r\n        identity: SelectionId;\r\n    }\r\n\r\n    export interface StreamGraphSettings {\r\n        legendSettings: StreamGraphLegendSettings;\r\n        categoryAxisSettings: StreamGraphAxisSettings;\r\n        valueAxisSettings: StreamGraphAxisSettings;\r\n    }\r\n\r\n    export interface StreamGraphLegendSettings {\r\n        show: boolean;\r\n        showTitle: boolean;\r\n        titleText: string;\r\n        labelColor: string;\r\n        fontSize: number;\r\n    }\r\n\r\n    export interface StreamGraphAxisSettings {\r\n        show: boolean;\r\n        axisColor: string;\r\n        showAxisTitle: boolean;\r\n    }\r\n\r\n    export interface StreamProperty {\r\n        [propertyName: string]: DataViewObjectPropertyIdentifier;\r\n    }\r\n\r\n    const StreamGraphAxisGraphicsContextClassName = 'axisGraphicsContext';\r\n    const StreamGraphXAxisClassName = 'x axis';\r\n    const StreamGraphYAxisClassName = 'y axis';\r\n    const StreamGraphDefaultAxisColor = \"#777\";\r\n    const StreamGraphDefaultFontSizeInPoints: number = 8;\r\n    const DefaultLegendFontSizeInPt = 8;\r\n    const DefaultLegendLabelFillColor: string = '#666666';\r\n    const StreamGraphDefaultFontFamily: string = 'wf_segoe-ui_normal';\r\n    const StreamGraphDefaultFontWeight: string = 'normal';\r\n    const StreamGraphDefaultSettings: StreamGraphSettings = {\r\n        legendSettings: {\r\n            show: true,\r\n            showTitle: true,\r\n            labelColor: DefaultLegendLabelFillColor,\r\n            titleText: \"\",\r\n            fontSize: DefaultLegendFontSizeInPt\r\n        },\r\n        categoryAxisSettings: {\r\n            show: true,\r\n            axisColor: StreamGraphDefaultAxisColor,\r\n            showAxisTitle: false,\r\n        },\r\n        valueAxisSettings: {\r\n            show: true,\r\n            axisColor: StreamGraphDefaultAxisColor,\r\n            showAxisTitle: false,\r\n        },\r\n    };\r\n\r\n    export class StreamGraph implements IVisual {\r\n        private static VisualClassName = 'streamGraph';\r\n\r\n        private static Properties: any = {\r\n            general: {\r\n                formatString: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: 'general',\r\n                    propertyName: 'formatString'\r\n                }\r\n            },\r\n            legend: {\r\n                show: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"legend\",\r\n                    propertyName: \"show\"\r\n                }\r\n            },\r\n            categoryAxis: {\r\n                show: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"categoryAxis\",\r\n                    propertyName: \"show\"\r\n                },\r\n                axisColor: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"categoryAxis\",\r\n                    propertyName: \"axisColor\"\r\n                },\r\n                showAxisTitle: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"categoryAxis\",\r\n                    propertyName: \"showAxisTitle\"\r\n                }\r\n            },\r\n            valueAxis: {\r\n                show: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"valueAxis\",\r\n                    propertyName: \"show\"\r\n                },\r\n                axisColor: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"valueAxis\",\r\n                    propertyName: \"axisColor\"\r\n                },\r\n                showAxisTitle: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"valueAxis\",\r\n                    propertyName: \"showAxisTitle\"\r\n                }\r\n            }\r\n        };\r\n\r\n        private static Layer: ClassAndSelector = {\r\n            'class': 'layer',\r\n            selector: '.layer'\r\n        };\r\n\r\n        private static XAxisLabel: ClassAndSelector = {\r\n            'class': 'xAxisLabel',\r\n            selector: '.xAxisLabel'\r\n        };\r\n\r\n        private static YAxisLabel: ClassAndSelector = {\r\n            'class': 'yAxisLabel',\r\n            selector: '.yAxisLabel'\r\n        };\r\n\r\n        private static MaxNumberOfAxisXValues: number = 5;\r\n\r\n        public static capabilities: VisualCapabilities = {\r\n            dataRoles: [\r\n                {\r\n                    name: 'Category',\r\n                    kind: VisualDataRoleKind.Grouping,\r\n                    displayName: 'Category',\r\n                }, {\r\n                    name: 'Series',\r\n                    kind: VisualDataRoleKind.Grouping,\r\n                    displayName: 'Series',\r\n                }, {\r\n                    name: 'Y',\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: data.createDisplayNameGetter('Role_DisplayName_Values'),\r\n                },\r\n            ],\r\n            dataViewMappings: [{\r\n                conditions: [\r\n                    { 'Category': { max: 1 }, 'Series': { max: 0 } },\r\n                    { 'Category': { max: 1 }, 'Series': { min: 1, max: 1 }, 'Y': { max: 1 } }\r\n                ],\r\n                categorical: {\r\n                    categories: {\r\n                        for: { in: 'Category' },\r\n                        dataReductionAlgorithm: { bottom: {} }\r\n                    },\r\n                    values: {\r\n                        group: {\r\n                            by: 'Series',\r\n                            select: [{ for: { in: 'Y' } }],\r\n                            dataReductionAlgorithm: { bottom: {} }\r\n                        }\r\n                    },\r\n                }\r\n            }],\r\n            objects: {\r\n                general: {\r\n                    displayName: 'General',\r\n                    properties: {\r\n                        formatString: { type: { formatting: { formatString: true } } },\r\n                        wiggle: {\r\n                            type: { bool: true },\r\n                            displayName: 'Wiggle'\r\n                        }\r\n                    }\r\n                },\r\n                categoryAxis: {\r\n                    displayName: 'X-Axis',\r\n                    properties: {\r\n                        show: {\r\n                            displayName: 'show',\r\n                            type: { bool: true }\r\n                        },\r\n                        showAxisTitle: {\r\n                            displayName: 'Title',\r\n                            type: { bool: true }\r\n                        },\r\n                        axisColor: {\r\n                            displayName: 'Color',\r\n                            type: { fill: { solid: { color: true } } }\r\n                        }\r\n                    }\r\n                },\r\n                valueAxis: {\r\n                    displayName: 'Y-Axis',\r\n                    properties: {\r\n                        show: {\r\n                            displayName: 'show',\r\n                            type: { bool: true }\r\n                        },\r\n                        showAxisTitle: {\r\n                            displayName: 'Title',\r\n                            type: { bool: true }\r\n                        },\r\n                        axisColor: {\r\n                            displayName: 'Color',\r\n                            type: { fill: { solid: { color: true } } }\r\n                        }\r\n                    }\r\n                },\r\n                legend: {\r\n                    displayName: 'Legend',\r\n                    properties: {\r\n                        show: {\r\n                            displayName: 'show',\r\n                            type: { bool: true }\r\n                        },\r\n                        position: {\r\n                            displayName: 'Position',\r\n                            type: { enumeration: legendPosition.type }\r\n                        },\r\n                        showTitle: {\r\n                            displayName: 'Title',\r\n                            type: { bool: true }\r\n                        },\r\n                        titleText: {\r\n                            displayName: 'Legend Name',\r\n                            type: { text: true },\r\n                            suppressFormatPainterCopy: true\r\n                        },\r\n                        labelColor: {\r\n                            displayName: 'Color',\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        fontSize: {\r\n                            displayName: 'Text Size',\r\n                            type: { formatting: { fontSize: true } }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        private margin: IMargin = { left: 45, right: 20, bottom: 20, top: 20 };\r\n\r\n        private viewport: IViewport;\r\n\r\n        private svg: D3.Selection;\r\n        private axisGraphicsContext: D3.Selection;\r\n        private xAxis: D3.Selection;\r\n        private yAxis: D3.Selection;\r\n        private colors: IDataColorPalette;\r\n        private selectionManager: utility.SelectionManager;\r\n        private dataView: DataView;\r\n        private legend: ILegend;\r\n        private legendObjectProperties: DataViewObject;\r\n        private data: StreamData;\r\n\r\n        public converter(dataView: DataView, colors: IDataColorPalette): StreamData {\r\n            if (!dataView || !dataView.categorical || !dataView.categorical.values || !dataView.categorical.categories)\r\n                return null;\r\n\r\n            let catDv: DataViewCategorical = dataView.categorical,\r\n                values: DataViewValueColumns = catDv.values,\r\n                dataPoints: StreamDataPoint[][] = [],\r\n                legendData: LegendData = {\r\n                    dataPoints: [],\r\n                    title: values[0].source.displayName,\r\n                    fontSize: StreamGraphDefaultFontSizeInPoints,\r\n                },\r\n                value: number = 0,\r\n                valueFormatter: IValueFormatter,\r\n                categoryFormatter: IValueFormatter;\r\n\r\n            for (let i = 0; i < values.length; i++) {\r\n                dataPoints.push([]);\r\n\r\n                if (values[i].source.groupName) {\r\n                    legendData.dataPoints.push({\r\n                        label: values[i].source.groupName,\r\n                        color: colors.getColorByIndex(i).value,\r\n                        icon: LegendIcon.Box,\r\n                        selected: false,\r\n                        identity: SelectionId.createWithId(values[i].identity)\r\n                    });\r\n                }\r\n\r\n                for (let k = 0; k < values[i].values.length; k++) {\r\n                    let id: SelectionId = SelectionIdBuilder\r\n                        .builder()\r\n                        .withSeries(dataView.categorical.values, dataView.categorical.values[i])\r\n                        .createSelectionId(),\r\n                        y: number = values[i].values[k];\r\n\r\n                    if (y > value) {\r\n                        value = y;\r\n                    }\r\n\r\n                    dataPoints[i].push({\r\n                        x: k,\r\n                        y: y,\r\n                        identity: id\r\n                    });\r\n                }\r\n            }\r\n\r\n            let streamGraphSettings: StreamGraphSettings = this.parseSettings(dataView);\r\n\r\n            valueFormatter = ValueFormatter.create({\r\n                format: \"g\",\r\n                value: value\r\n            });\r\n\r\n            categoryFormatter = ValueFormatter.create({\r\n                format: ValueFormatter.getFormatString(\r\n                    catDv.categories[0].source,\r\n                    StreamGraph.Properties.general.formatString),\r\n                value: catDv.categories[0].values\r\n            });\r\n\r\n            return {\r\n                dataPoints: dataPoints,\r\n                legendData: legendData,\r\n                valueFormatter: valueFormatter,\r\n                categoryFormatter: categoryFormatter,\r\n                streamGraphSettings: streamGraphSettings\r\n            };\r\n        }\r\n\r\n        private parseSettings(dataView: DataView): StreamGraphSettings {\r\n            if (!dataView || !dataView.metadata)\r\n                return StreamGraphDefaultSettings;\r\n\r\n            let objects: DataViewObjects = dataView.metadata.objects;\r\n            let streamGraphSettings = _.clone(StreamGraphDefaultSettings);\r\n\r\n            let categoryAxisSettings = streamGraphSettings.categoryAxisSettings;\r\n            categoryAxisSettings.show = DataViewObjects.getValue<boolean>(objects, StreamGraph.Properties.categoryAxis.show, categoryAxisSettings.show);\r\n            categoryAxisSettings.axisColor = <string>DataViewObjects.getFillColor(objects, StreamGraph.Properties.categoryAxis.axisColor, categoryAxisSettings.axisColor);\r\n            categoryAxisSettings.showAxisTitle = DataViewObjects.getValue<boolean>(objects, StreamGraph.Properties.categoryAxis.showAxisTitle, categoryAxisSettings.showAxisTitle);\r\n\r\n            let valueAxisSettings = streamGraphSettings.valueAxisSettings;\r\n            valueAxisSettings.show = DataViewObjects.getValue<boolean>(objects, StreamGraph.Properties.valueAxis.show, valueAxisSettings.show);\r\n            valueAxisSettings.axisColor = <string>DataViewObjects.getFillColor(objects, StreamGraph.Properties.valueAxis.axisColor, valueAxisSettings.axisColor);\r\n            valueAxisSettings.showAxisTitle = DataViewObjects.getValue<boolean>(objects, StreamGraph.Properties.valueAxis.showAxisTitle, valueAxisSettings.showAxisTitle);\r\n\r\n            return streamGraphSettings;\r\n        }\r\n\r\n        public init(options: VisualInitOptions): void {\r\n            let element: JQuery = options.element;\r\n\r\n            this.selectionManager = new SelectionManager({ hostServices: options.host });\r\n\r\n            this.svg = d3.select(element.get(0))\r\n                .append('svg')\r\n                .classed(StreamGraph.VisualClassName, true)\r\n                .style('position', 'absolute');\r\n\r\n            this.axisGraphicsContext = this.svg.append('g')\r\n                .classed(StreamGraphAxisGraphicsContextClassName, true);\r\n\r\n            this.xAxis = this.axisGraphicsContext.append(\"g\").classed(StreamGraphXAxisClassName, true);\r\n            this.yAxis = this.axisGraphicsContext.append(\"g\").classed(StreamGraphYAxisClassName, true);\r\n\r\n            this.colors = options.style.colorPalette.dataColors;\r\n\r\n            this.legend = createLegend(element, false, null, true);\r\n        }\r\n\r\n        public update(options: VisualUpdateOptions): void {\r\n            if (!options.dataViews || !options.dataViews[0] || !options.dataViews[0].categorical) {\r\n                this.clearData();\r\n                return;\r\n            };\r\n\r\n            this.viewport = {\r\n                width: Math.max(0, options.viewport.width),\r\n                height: Math.max(0, options.viewport.height)\r\n            };\r\n\r\n            let duration: number = options.suppressAnimations ? 0 : 250,\r\n                dataView: DataView = this.dataView = options.dataViews[0],\r\n                data: StreamData = this.data = this.converter(dataView, this.colors);\r\n\r\n            if (!data || !data.dataPoints || !data.dataPoints.length) {\r\n                this.clearData();\r\n                return;\r\n            }\r\n\r\n            let dataPoints: StreamDataPoint[][] = data.dataPoints;\r\n\r\n            this.renderLegend(data);\r\n            this.updateViewPort();\r\n            this.renderXAxisLabels();\r\n            this.renderYAxisLabels();\r\n\r\n            let height: number = Math.max(0, this.viewport.height - this.margin.top);\r\n\r\n            this.svg.attr({\r\n                'width': this.viewport.width,\r\n                'height': height\r\n            });\r\n\r\n            let stack: D3.Layout.StackLayout = d3.layout.stack();\r\n\r\n            if (this.getWiggle(dataView))\r\n                stack.offset('wiggle');\r\n\r\n            let layers: StreamDataPoint[][] = stack(dataPoints);\r\n\r\n            let xScale: D3.Scale.LinearScale = d3.scale.linear()\r\n                .domain([0, dataPoints[0].length - 1])\r\n                .range([this.margin.left, this.viewport.width - this.margin.right]);\r\n\r\n            let yScale: D3.Scale.LinearScale = d3.scale.linear()\r\n                .domain([0, d3.max(layers, (layer) => {\r\n                    return d3.max(layer, (d) => {\r\n                        return d.y0 + d.y;\r\n                    });\r\n                })])\r\n                .range([height - this.margin.bottom, this.margin.top]);\r\n\r\n            let area: D3.Svg.Area = d3.svg.area()\r\n                .interpolate('basis')\r\n                .x(d => xScale(d.x))\r\n                .y0(d => yScale(d.y0))\r\n                .y1(d => yScale(d.y0 + d.y));\r\n\r\n            let selectionManager: SelectionManager = this.selectionManager;\r\n\r\n            let selection: D3.UpdateSelection = this.svg.selectAll(StreamGraph.Layer.selector)\r\n                .data(layers);\r\n\r\n            selection.enter()\r\n                .append('path')\r\n                .classed(StreamGraph.Layer.class, true);\r\n\r\n            selection\r\n                .style(\"fill\", (d, i) => this.colors.getColorByIndex(i).value)\r\n                .on('click', function (d) {\r\n                    selectionManager.select(d[0].identity).then(ids=> {\r\n                        if (ids.length > 0) {\r\n                            selection.style('opacity', 0.5);\r\n                            d3.select(this).style('opacity', 1);\r\n                        } else\r\n                            selection.style('opacity', 1);\r\n                    });\r\n                })\r\n                .transition()\r\n                .duration(duration)\r\n                .attr(\"d\", area);\r\n\r\n            selection.exit().remove();\r\n\r\n            this.drawAxis(data, xScale, yScale);\r\n        }\r\n\r\n        private drawAxis(data: StreamData, xScale: D3.Scale.LinearScale, yScale: D3.Scale.LinearScale) {\r\n            let shiftY: number = this.viewport.height - this.margin.bottom - this.margin.top,\r\n                shiftX: number = this.viewport.width - this.margin.left - this.margin.right,\r\n                xAxis: D3.Svg.Axis = d3.svg.axis();\r\n\r\n            xAxis.scale(xScale)\r\n                .orient(\"bottom\")\r\n                .tickFormat(((item: any, index: number): any => {\r\n                    if (data.categoryFormatter)\r\n                        item = data.categoryFormatter.format(item);\r\n\r\n                    if (index != null && xAxis.tickValues() &&\r\n                        (index === 0 || index === xAxis.tickValues().length - 1)) {\r\n                        item = TextMeasurementService.getTailoredTextOrDefault(\r\n                            StreamGraph.getTextPropertiesFunction(item),\r\n                            (index ? this.margin.right : this.margin.left) * 2);\r\n                    }\r\n                    return item;\r\n                }).bind(xAxis));\r\n\r\n            let yAxis: D3.Svg.Axis = d3.svg.axis()\r\n                .scale(yScale)\r\n                .orient(\"left\")\r\n                .tickFormat((item: any): any => {\r\n                    if (data.valueFormatter) {\r\n                        return data.valueFormatter.format(item);\r\n                    }\r\n                    return item;\r\n                });\r\n\r\n            this.setMaxTicks(xAxis, shiftX, StreamGraph.MaxNumberOfAxisXValues);\r\n            this.setMaxTicks(yAxis, shiftY);\r\n\r\n            let valueAxisSettings = this.data.streamGraphSettings.valueAxisSettings;\r\n            if (valueAxisSettings.show) {\r\n                let axisColor: Fill = valueAxisSettings.axisColor;\r\n                this.yAxis\r\n                    .attr(\"transform\", SVGUtil.translate(this.margin.left, 0))\r\n                    .call(yAxis);\r\n                this.yAxis.selectAll(\"text\").style(\"fill\", axisColor);\r\n            } else\r\n                this.yAxis.selectAll(\"*\").remove();\r\n\r\n            let categoryAxisSettings = this.data.streamGraphSettings.categoryAxisSettings;\r\n            if (categoryAxisSettings.show) {\r\n                let axisColor: Fill = categoryAxisSettings.axisColor;\r\n                this.xAxis\r\n                    .attr(\"transform\", SVGUtil.translate(0, shiftY))\r\n                    .call(xAxis);\r\n                this.xAxis.selectAll(\"text\").style(\"fill\", axisColor);\r\n            } else\r\n                this.xAxis.selectAll(\"*\").remove();\r\n        }\r\n\r\n        private renderYAxisLabels(): void {\r\n            this.yAxis.selectAll(StreamGraph.YAxisLabel.selector).remove();\r\n\r\n            let valueAxisSettings: StreamGraphAxisSettings = this.data.streamGraphSettings.valueAxisSettings;\r\n            if (valueAxisSettings.show) {\r\n                this.margin.left = 45;\r\n                if (valueAxisSettings.showAxisTitle)\r\n                    if (this.dataView.categorical.values.source) {\r\n                        let marginLeft = this.margin.left = 65;\r\n                        let categoryAxisSettings: StreamGraphAxisSettings = this.data.streamGraphSettings.categoryAxisSettings;\r\n                        let isXAxisOn: boolean = categoryAxisSettings.show === true;\r\n                        let isXTitleOn: boolean = categoryAxisSettings.showAxisTitle === true;\r\n                        let height: number = isXAxisOn ? isXTitleOn ? this.viewport.height - this.margin.bottom : this.viewport.height - this.margin.top : this.viewport.height;\r\n                        let yAxisText: string = this.dataView.categorical.values.source.displayName;\r\n                        let yAxisClass: string = StreamGraph.YAxisLabel.class;\r\n                        let yAxisLabel: D3.Selection = this.yAxis.append(\"text\")\r\n                            .style(\"text-anchor\", \"middle\")\r\n                            .text(yAxisText)\r\n                            .call((text: D3.Selection) => {\r\n                                text.each(function () {\r\n                                    let text = d3.select(this);\r\n                                    text.attr({\r\n                                        class: yAxisClass,\r\n                                        transform: \"rotate(-90)\",\r\n                                        y: -marginLeft + 5,\r\n                                        x: -(height / 2),\r\n                                        dy: \"1em\"\r\n                                    });\r\n                                });\r\n                            });\r\n\r\n                        yAxisLabel.call(AxisHelper.LabelLayoutStrategy.clip,\r\n                            height,\r\n                            TextMeasurementService.svgEllipsis);\r\n                    } else\r\n                        valueAxisSettings.showAxisTitle = false;\r\n            } else\r\n                this.margin.left = 20;\r\n        }\r\n\r\n        private renderXAxisLabels(): void {\r\n            this.xAxis.selectAll(StreamGraph.XAxisLabel.selector).remove();\r\n\r\n            let categoryAxisSettings = this.data.streamGraphSettings.categoryAxisSettings;\r\n            if (categoryAxisSettings.show) {\r\n                this.margin.bottom = 20;\r\n                if (categoryAxisSettings.showAxisTitle)\r\n                    if (this.dataView.categorical.categories[0].source) {\r\n                        let marginBottom = this.margin.bottom = 40;\r\n                        let valueAxisSettings: StreamGraphAxisSettings = this.data.streamGraphSettings.valueAxisSettings;\r\n                        let isYAxisOn: boolean = valueAxisSettings.show === true;\r\n                        let isYTitleOn: boolean = valueAxisSettings.showAxisTitle === true;\r\n                        let width: number = isYAxisOn ? isYTitleOn ? this.viewport.width + this.margin.left : this.viewport.width + this.margin.right : this.viewport.width;\r\n                        let xAxisText: string = this.dataView.categorical.categories[0].source.displayName;\r\n                        let xAxisClass: string = StreamGraph.XAxisLabel.class;\r\n                        let xAxisLabel: D3.Selection = this.xAxis.append(\"text\")\r\n                            .style(\"text-anchor\", \"middle\")\r\n                            .text(xAxisText)\r\n                            .call((text: D3.Selection) => {\r\n                                text.each(function () {\r\n                                    let text = d3.select(this);\r\n                                    text.attr({\r\n                                        class: xAxisClass,\r\n                                        transform: SVGUtil.translate(width / 2, marginBottom - 5)\r\n                                    });\r\n                                });\r\n                            });\r\n\r\n                        xAxisLabel.call(AxisHelper.LabelLayoutStrategy.clip,\r\n                            width,\r\n                            TextMeasurementService.svgEllipsis);\r\n                    } else\r\n                        categoryAxisSettings.showAxisTitle = false;\r\n            } else\r\n                this.margin.bottom = 10;\r\n        }\r\n\r\n        private renderLegend(streamGraphData: StreamData): void {\r\n            let legendData: LegendData = streamGraphData.legendData;\r\n            if (!legendData || !this.dataView || !this.dataView.metadata)\r\n                return;\r\n\r\n            this.legendObjectProperties = DataViewObjects.getObject(this.dataView.metadata.objects, \"legend\", {});\r\n\r\n            if (this.legendObjectProperties) {\r\n                LegendData.update(legendData, this.legendObjectProperties);\r\n\r\n                let position: string = <string>this.legendObjectProperties[legendProps.position];\r\n\r\n                if (position)\r\n                    this.legend.changeOrientation(LegendPosition[position]);\r\n            }\r\n            this.legend.drawLegend(legendData, _.clone(this.viewport));\r\n            Legend.positionChartArea(this.svg, this.legend);\r\n        }\r\n\r\n        private updateViewPort(): void {\r\n            let legendMargins: IViewport = this.legend.getMargins();\r\n            let legendPosition = LegendPosition[<string>this.legendObjectProperties[legendProps.position]];\r\n\r\n            switch (legendPosition) {\r\n                case LegendPosition.Top:\r\n                case LegendPosition.TopCenter:\r\n                case LegendPosition.Bottom:\r\n                case LegendPosition.BottomCenter: {\r\n                    this.viewport.height -= legendMargins.height;\r\n                    break;\r\n                }\r\n                case LegendPosition.Left:\r\n                case LegendPosition.LeftCenter:\r\n                case LegendPosition.Right:\r\n                case LegendPosition.RightCenter: {\r\n                    this.viewport.width -= legendMargins.width;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        private setMaxTicks(axis: D3.Svg.Axis, maxSize: number, maxValue?: number): void {\r\n            let maxTicks = maxValue === undefined\r\n                ? this.getTicksByAxis(axis).length\r\n                : Math.min(maxValue, this.getTicksByAxis(axis).length);\r\n\r\n            if (axis.scale().domain.toString() === d3.scale.linear().domain.toString())\r\n                axis.ticks(this.getFittedTickLength(axis, maxSize, maxTicks));\r\n            else\r\n                axis.tickValues(this.getFittedTickValues(axis, maxSize, maxTicks));\r\n        }\r\n\r\n        private getFittedTickLength(axis: D3.Svg.Axis, maxSize: number, maxTicks: number): number {\r\n            for (let ticks: any[] = this.getTicksByAxis(axis), measureTickFunction = this.getMeasureTickFunction(axis, ticks);\r\n                maxTicks > 0 && maxSize > 0 && (this.measureTicks(ticks, measureTickFunction) > maxSize || axis.scale().ticks([maxTicks]).length > maxTicks);\r\n                maxTicks-- , ticks = this.getTicksByAxis(axis)) {\r\n                axis.ticks(maxTicks);\r\n            }\r\n            return maxTicks;\r\n        }\r\n\r\n        private getFittedTickValues(axis: D3.Svg.Axis, maxSize: number, maxTicks: number): any[] {\r\n            let ticks: any[] = this.getTicksByAxis(axis),\r\n                maxWidthOf2Ticks: number,\r\n                tickPairsWidths: any[] = [],\r\n                measureTickFunction: (any) => number = this.getMeasureTickFunction(axis, ticks);\r\n\r\n            for (let currentMaxTicks: number = maxTicks, indexes: number[] = [];\r\n                maxTicks > 0 && maxSize > 0;\r\n                currentMaxTicks-- , indexes = []) {\r\n                switch (currentMaxTicks) {\r\n                    case 0:\r\n                        return [];\r\n                    case 1:\r\n                        indexes = [0];\r\n                        break;\r\n                    case 2:\r\n                        indexes = [0, ticks.length - 1];\r\n                        break;\r\n                    default:\r\n                        let takeEvery: number = ticks.length / (currentMaxTicks - 1);\r\n\r\n                        for (let i = 0; i < currentMaxTicks - 1; i++) {\r\n                            indexes.push(Math.round(takeEvery * i));\r\n                        }\r\n\r\n                        indexes.push(ticks.length - 1);\r\n                        break;\r\n                }\r\n\r\n                let ticksIndexes: any[][] = indexes.map(x => [ticks[x], x]);\r\n                maxWidthOf2Ticks = (maxSize / ticks.length) * 2;\r\n\r\n                ticksIndexes.reduce((a, b) => {\r\n                    tickPairsWidths.push([measureTickFunction(a[0]) + measureTickFunction(b[0]), (b[1] - a[1]) * maxWidthOf2Ticks]);\r\n                    return b;\r\n                });\r\n\r\n                if (!tickPairsWidths.some(x => x[0] > x[1])) {\r\n                    return ticksIndexes.map(x => x[0]);\r\n                }\r\n            }\r\n            return [];\r\n        }\r\n\r\n        private measureTicks(ticks: any[], measureTickFunction: (number) => any): number {\r\n            return ticks.map((x: any) => measureTickFunction(x)).reduce((a: number, b: number) => a + b);\r\n        }\r\n\r\n        private getTicksByAxis(axis: D3.Svg.Axis): any[] {\r\n            let scale = axis.scale();\r\n            let result: any = axis.tickValues() === null\r\n                ? scale.ticks\r\n                    ? scale.ticks.apply(scale, axis.ticks())\r\n                    : scale.domain()\r\n                : axis.tickValues();\r\n\r\n            return result.length === undefined ? [result] : result;\r\n        }\r\n\r\n        private getMeasureTickFunction(axis: D3.Svg.Axis, ticks: string[]): (number) => any {\r\n            let measureFunction = axis.orient() === \"top\" || axis.orient() === \"bottom\"\r\n                ? TextMeasurementService.measureSvgTextWidth\r\n                : TextMeasurementService.measureSvgTextHeight;\r\n\r\n            let cache = {};\r\n\r\n            return function (x: any): number {\r\n                return cache[x]\r\n                    ? cache[x]\r\n                    : cache[x] = measureFunction(StreamGraph.getTextPropertiesFunction(axis.tickFormat()(x))) + axis.tickPadding();\r\n            };\r\n        }\r\n\r\n        private static getTextPropertiesFunction(text: string): TextProperties {\r\n            let fontFamily: string = StreamGraphDefaultFontFamily,\r\n                fontSize: string = jsCommon.PixelConverter.fromPoint(StreamGraphDefaultFontSizeInPoints),\r\n                fontWeight: string = StreamGraphDefaultFontWeight;\r\n\r\n            return { text: text, fontFamily: fontFamily, fontSize: fontSize, fontWeight: fontWeight };\r\n        }\r\n\r\n        private getWiggle(dataView: DataView) {\r\n            if (dataView && dataView.metadata) {\r\n                let objects = dataView.metadata.objects;\r\n\r\n                if (objects) {\r\n                    let general = DataViewObjects.getObject(objects, 'general', undefined);\r\n\r\n                    if (general)\r\n                        return <boolean>general['wiggle'];\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n\r\n        private enumerateValueAxisValues(enumeration: ObjectEnumerationBuilder): void {\r\n\r\n            let valueAxisSettings: StreamGraphAxisSettings = this.data && this.data.streamGraphSettings ? this.data.streamGraphSettings.valueAxisSettings : StreamGraphDefaultSettings.valueAxisSettings;\r\n\r\n            enumeration.pushInstance({\r\n                selector: null,\r\n                objectName: 'valueAxis',\r\n                displayName: \"Y-Axis\",\r\n                properties: {\r\n                    show: valueAxisSettings.show,\r\n                    showAxisTitle: valueAxisSettings.showAxisTitle,\r\n                    axisColor: valueAxisSettings.axisColor,\r\n                }\r\n            });\r\n        }\r\n\r\n        private enumerateCategoryAxisValues(enumeration: ObjectEnumerationBuilder): void {\r\n            let categoryAxisSettings: StreamGraphAxisSettings = this.data && this.data.streamGraphSettings ? this.data.streamGraphSettings.categoryAxisSettings : StreamGraphDefaultSettings.categoryAxisSettings;\r\n\r\n            enumeration.pushInstance({\r\n                selector: null,\r\n                objectName: 'categoryAxis',\r\n                displayName: \"X-Axis\",\r\n                properties: {\r\n                    show: categoryAxisSettings.show,\r\n                    showAxisTitle: categoryAxisSettings.showAxisTitle,\r\n                    axisColor: categoryAxisSettings.axisColor,\r\n                }\r\n            });\r\n        }\r\n\r\n        private enumerateLegend(enumeration: ObjectEnumerationBuilder): void {\r\n            let legendSettings: DataViewObject = this.legendObjectProperties ? this.legendObjectProperties : {};\r\n\r\n            enumeration.pushInstance({\r\n                selector: null,\r\n                objectName: 'legend',\r\n                displayName: \"Legend\",\r\n                properties: {\r\n                    show: this.data && this.data.streamGraphSettings ? this.data.streamGraphSettings.legendSettings.show : true,\r\n                    position: LegendPosition[this.legend.getOrientation()],\r\n                    showTitle: DataViewObject.getValue<boolean>(legendSettings, legendProps.showTitle, true),\r\n                    titleText: DataViewObject.getValue<string>(legendSettings, legendProps.titleText, \"\"),\r\n                    labelColor: DataViewObject.getValue<string>(legendSettings, legendProps.labelColor, DefaultLegendLabelFillColor),\r\n                    fontSize: DataViewObject.getValue<number>(legendSettings, legendProps.fontSize, DefaultLegendFontSizeInPt)\r\n                }\r\n            });\r\n        }\r\n\r\n        private clearData() {\r\n            this.svg.selectAll(StreamGraph.Layer.selector).remove();\r\n            this.legend.drawLegend({ dataPoints: [] }, this.viewport);\r\n            this.yAxis.selectAll(\"*\").remove();\r\n            this.xAxis.selectAll(\"*\").remove();\r\n        }\r\n\r\n        public enumerateObjectInstances(options: EnumerateVisualObjectInstancesOptions): VisualObjectInstanceEnumeration {\r\n            let enumeration: ObjectEnumerationBuilder = new ObjectEnumerationBuilder(),\r\n                dataView = this.dataView;\r\n\r\n            switch (options.objectName) {\r\n                case 'legend':\r\n                    if (dataView\r\n                        && dataView.categorical\r\n                        && dataView.categorical.values\r\n                        && dataView.categorical.values.source)\r\n                            this.enumerateLegend(enumeration);\r\n                    break;\r\n                case 'categoryAxis':\r\n                    this.enumerateCategoryAxisValues(enumeration);\r\n                    break;\r\n                case 'valueAxis':\r\n                    this.enumerateValueAxisValues(enumeration);\r\n                    break;\r\n                case 'general':\r\n                    let general: VisualObjectInstance = {\r\n                        objectName: 'general',\r\n                        displayName: 'General',\r\n                        selector: null,\r\n                        properties: {\r\n                            wiggle: this.getWiggle(dataView)\r\n                        }\r\n                    };\r\n\r\n                    enumeration.pushInstance(general);\r\n                    break;\r\n            }\r\n            return enumeration.complete();\r\n        }\r\n    }\r\n}","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.visuals.samples {\r\n    import SelectionManager = utility.SelectionManager;\r\n    export interface SunburstSlice {\r\n        children?: SunburstSlice[];\r\n        value?: any;\r\n        color?: string;\r\n        name?: string;\r\n        parent?: SunburstSlice;\r\n        selector: SelectionId;\r\n        total: number;\r\n        tooltipInfo?: TooltipDataItem[];\r\n    }\r\n\r\n    export interface SunburstViewModel {\r\n        root: SunburstSlice;\r\n    }\r\n\r\n    export var sunburstRoleNames = {\r\n        nodes: 'Nodes',\r\n        values: 'Values',\r\n    };\r\n\r\n    export class Sunburst implements IVisual {\r\n        private static minOpacity = 0.2;\r\n        private svg: D3.Selection;\r\n        private g: D3.Selection;\r\n        private arc: D3.Svg.Arc;\r\n        private total: number = 0;\r\n        private viewport: IViewport;\r\n        private colors: IDataColorPalette;\r\n        private selectionManager: SelectionManager;\r\n\r\n        private static roleNames = {\r\n            nodes: 'Nodes',\r\n            values: 'Values',\r\n        };\r\n\r\n        public static capabilities: VisualCapabilities = {\r\n            dataRoles: [\r\n                {\r\n                    name: Sunburst.roleNames.nodes,\r\n                    kind: VisualDataRoleKind.Grouping,\r\n                    displayName: 'Groups'\r\n                }, {\r\n                    name: Sunburst.roleNames.values,\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName: 'Values'\r\n                }\r\n            ],\r\n            objects: {\r\n                general: {\r\n                    displayName: data.createDisplayNameGetter('Visual_General'),\r\n                    properties: {\r\n                        formatString: {\r\n                            type: { formatting: { formatString: true } },\r\n                        },\r\n                    },\r\n                },\r\n            },\r\n            dataViewMappings: [{\r\n                conditions: [\r\n                    { 'Groups': { min: 0 }, 'Values': { max: 1 } },\r\n                ],\r\n                matrix: {\r\n                    rows: {\r\n                        for: { in: Sunburst.roleNames.nodes },\r\n                    },\r\n                    values: {\r\n                        for: { in: Sunburst.roleNames.values }\r\n                    },\r\n                }\r\n            }],\r\n        };\r\n\r\n        public init(options: VisualInitOptions): void {\r\n            this.arc = d3.svg.arc()\r\n                .startAngle(function(d) { return d.x; })\r\n                .endAngle(function(d) { return d.x + d.dx; })\r\n                .innerRadius(function(d) { return Math.sqrt(d.y); })\r\n                .outerRadius(function(d) { return Math.sqrt(d.y + d.dy); });\r\n\r\n            this.colors = options.style.colorPalette.dataColors;\r\n            this.selectionManager = new SelectionManager({ hostServices: options.host });\r\n            this.svg = d3.select(options.element.get(0)).append('svg');\r\n            this.svg.classed('mainDrawArea', true);\r\n            this.g = this.svg.append('g');\r\n            this.g.classed(\"container\", true);\r\n            this.svg.append(\"text\")\r\n                .classed(\"sunBurstPercentageFixed\", true);\r\n\r\n            this.svg.on('mousedown', (d) => {\r\n                this.svg.selectAll(\"path\").style(\"opacity\", 1);\r\n                this.svg.select(\".sunBurstPercentageFixed\").style(\"opacity\", 0);\r\n                this.selectionManager.clear();\r\n            });\r\n        }\r\n\r\n        private static setAllUnhide(selection): void {\r\n            selection.attr(\"setUnHide\", \"true\");\r\n        }\r\n\r\n        public update(options: VisualUpdateOptions): void {\r\n            if (options.dataViews.length > 0) {\r\n                var data = this.converter(options.dataViews[0], this.colors);\r\n                this.viewport = options.viewport;\r\n                this.updateInternal(data);\r\n            }\r\n        }\r\n\r\n        private updateInternal(dataRootNode: SunburstSlice): void {\r\n            this.svg.attr({\r\n                'height': this.viewport.height,\r\n                'width': this.viewport.width\r\n            });\r\n            this.g.attr('transform', SVGUtil.translate(this.viewport.width / 2, this.viewport.height / 2));\r\n            var radius = Math.min(this.viewport.width, this.viewport.height) / 2;\r\n            var partition = d3.layout.partition()\r\n                .size([2 * Math.PI, radius * radius])\r\n                .value((d) => { return d.value; });\r\n            var path = this.g.datum(dataRootNode).selectAll(\"path\")\r\n                .data(partition.nodes);\r\n            path.enter().append(\"path\");\r\n            path.attr(\"display\", (d) => { return d.depth ? null : \"none\"; })\r\n                .attr(\"d\", this.arc)\r\n                .style(\"stroke\", \"#fff\")\r\n                .style(\"fill\", (d) => { return d.color; })\r\n                .style(\"fill-rule\", \"evenodd\")\r\n                .on(\"mousedown\", (d) => {\r\n                    if (d.selector) {\r\n                        this.selectionManager.select(d.selector);\r\n                    }\r\n                    d3.selectAll(\"path\").call(Sunburst.setAllUnhide).attr('setUnHide', null);\r\n                    this.highlightPath(d, this, true);\r\n                    var percentageFixedText = this.svg.select(\".sunBurstPercentageFixed\");\r\n                    var percentage = this.total === 0 ? 0 : (100 * d.total / this.total).toPrecision(3);\r\n                    percentageFixedText.text(d ? percentage + \"%\" : \"\");\r\n                    percentageFixedText.style(\"fill\", d.color);\r\n                    this.onResize();\r\n                    event.stopPropagation();\r\n                });\r\n            this.renderTooltip(path);\r\n            path.exit().remove();\r\n\r\n            this.onResize();\r\n        }\r\n\r\n        // Get all parents of the node\r\n        private static getTreePath(node) {\r\n            var path = [];\r\n            var current = node;\r\n            while (current.parent) {\r\n                path.unshift(current);\r\n                current = current.parent;\r\n            }\r\n            return path;\r\n        }\r\n\r\n        private onResize(): void {\r\n            var width = this.viewport.width;\r\n            var height = this.viewport.height;\r\n            var percentageFixedText = this.svg.select(\".sunBurstPercentageFixed\");\r\n            var textWidth = powerbi.TextMeasurementService.measureSvgTextElementWidth(percentageFixedText[0][0]);\r\n\r\n            percentageFixedText.style(\"opacity\", 1);\r\n            percentageFixedText.attr(\"y\", (height / 2 + 4));\r\n            percentageFixedText.attr(\"x\", ((width / 2) - (textWidth / 2)));\r\n        }\r\n\r\n        private highlightPath(d, sunBurst, setUnhide): void {\r\n            var parentsArray = d ? Sunburst.getTreePath(d) : [];\r\n            // Set opacity for all the segments.\r\n            sunBurst.svg.selectAll(\"path\").each(function() {\r\n                if (d3.select(this).attr('setUnHide') !== 'true') {\r\n                    d3.select(this).style(\"opacity\", Sunburst.minOpacity);\r\n                }\r\n            });\r\n            // Highlight only ancestors of the current segment.\r\n            sunBurst.svg.selectAll(\"path\")\r\n                .filter(function(node) {\r\n                    return (parentsArray.indexOf(node) >= 0);\r\n                }).each(function() {\r\n                    d3.select(this).style(\"opacity\", 1);\r\n                    if (setUnhide === true) {\r\n                        d3.select(this).attr('setUnHide', 'true');\r\n                    }\r\n                });\r\n        }\r\n\r\n        private renderTooltip(selection: D3.UpdateSelection): void {\r\n            TooltipManager.addTooltip(selection, (tooltipEvent: TooltipEvent) => {\r\n                return (<SunburstSlice>tooltipEvent.data).tooltipInfo;\r\n            });\r\n        }\r\n\r\n        private static getTooltipData(displayName: string, value: number): TooltipDataItem[] {\r\n            return [{\r\n                displayName: displayName,\r\n                value: value < 0 ? \"\" : value.toString()\r\n            }];\r\n        }\r\n\r\n        private covertTreeNodeToSunBurstNode(originParentNode: DataViewTreeNode, sunburstParentNode: SunburstSlice,\r\n            colors: IColorScale, pathIdentity: DataViewScopeIdentity[], color): SunburstSlice {\r\n            var selector: powerbi.data.Selector;\r\n            if (originParentNode.identity) {\r\n                pathIdentity = pathIdentity.concat([originParentNode.identity]);\r\n                selector = { data: pathIdentity, };\r\n            }\r\n\r\n            var selectionId = pathIdentity.length === 0 ? null : new SelectionId(selector, false);\r\n            var valueToSet = originParentNode.values ? originParentNode.values[0].value : 0;\r\n\r\n            var newSunNode: SunburstSlice = {\r\n                name: originParentNode.name,\r\n                value: Math.max(valueToSet, 0),\r\n                selector: selectionId,\r\n                total: valueToSet\r\n            };\r\n            if (originParentNode.value) {\r\n                newSunNode.color = color ? color : colors.getColor(originParentNode.value).value;\r\n            }\r\n            this.total += newSunNode.value;\r\n            if (originParentNode.children && originParentNode.children.length > 0) {\r\n\r\n                newSunNode.tooltipInfo = Sunburst.getTooltipData(originParentNode.value, -1);\r\n\r\n                newSunNode.children = [];\r\n                for (var i = 0; i < originParentNode.children.length; i++) {\r\n                    var newChild = this.covertTreeNodeToSunBurstNode(originParentNode.children[i], newSunNode, colors, pathIdentity, newSunNode.color);\r\n                    newSunNode.children.push(newChild);\r\n                    newSunNode.total += newChild.total;\r\n                }\r\n            } else {\r\n                newSunNode.tooltipInfo = Sunburst.getTooltipData(originParentNode.value, valueToSet);\r\n            }\r\n            if (sunburstParentNode) {\r\n                newSunNode.parent = sunburstParentNode;\r\n            }\r\n\r\n            return newSunNode;\r\n        }\r\n\r\n        public converter(dataView: DataView, colors: IDataColorPalette): SunburstSlice {\r\n            var colorScale = colors.getNewColorScale();\r\n            this.total = 0;\r\n            var root: SunburstSlice = this.covertTreeNodeToSunBurstNode(dataView.matrix.rows.root, null, colorScale, [], undefined);\r\n\r\n            return root;\r\n        }\r\n    }\r\n}","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.visuals.samples {\r\n    import ClassAndSelector = jsCommon.CssConstants.ClassAndSelector;\r\n    import SelectionManager = utility.SelectionManager;\r\n\r\n    export interface LineDotPoint {\r\n        time: number | Date;\r\n        value: number;\r\n        dot: number;\r\n        sum: number;\r\n        selector: SelectionId;\r\n    }\r\n\r\n    export interface Legend {\r\n        text: string;\r\n        transform?: string;\r\n        dx?: string;\r\n        dy?: string;\r\n    }\r\n\r\n    export interface LineDotChartViewModel {\r\n        points: LineDotPoint[];\r\n        settings: LineDotChartSettings;\r\n        xAxis: IAxisProperties;\r\n        yAxis: IAxisProperties;\r\n        yAxis2: IAxisProperties;\r\n        legends: Legend[];\r\n    };\r\n\r\n    export interface LineDotChartSettings {\r\n        lineFill: string;\r\n        lineThickness: number;\r\n        dotFill: string;\r\n        dotSizeMin: number;\r\n        dotSizeMax: number;\r\n        counterTitle: string;\r\n        // precision: number;\r\n        xAxisTitle: string;\r\n        yAxisTitle: string;\r\n        duration: number;\r\n        isanimated: boolean;\r\n        isstopped: boolean;\r\n    };\r\n\r\n    export class LineDotChart implements IVisual {\r\n        private selectionManager: SelectionManager;\r\n        private hostServices: IVisualHostServices;\r\n        private isDateTime: boolean;\r\n\r\n        private static DefaultSettings: LineDotChartSettings = {\r\n            lineFill: 'rgb(102, 212, 204)',\r\n            lineThickness: 3,\r\n            dotFill: '#005c55',\r\n            dotSizeMin: 4,\r\n            dotSizeMax: 38,\r\n            counterTitle: 'Total features',\r\n            // precision: 2,\r\n            xAxisTitle: '',\r\n            yAxisTitle: '',\r\n            duration: 20,\r\n            isanimated: true,\r\n            isstopped: true\r\n        };\r\n\r\n        /**\r\n        * Informs the System what it can do\r\n        * Fields, Formatting options, data reduction & QnA hints\r\n        */\r\n        public static capabilities: VisualCapabilities = {\r\n            dataRoles: [\r\n                {\r\n                    name: \"Date\",\r\n                    kind: VisualDataRoleKind.Grouping,\r\n                    displayName: 'Date'\r\n                }, \r\n                {\r\n                    name: \"Values\",\r\n                    kind: VisualDataRoleKind.Measure,\r\n                    displayName:'Values'\r\n                },\r\n                // {\r\n                //     name: \"Labels\",\r\n                //     kind: VisualDataRoleKind.Measure,\r\n                //     displayName: 'Labels'\r\n                // }\r\n            ],\r\n            dataViewMappings: [{\r\n                conditions: [{\r\n                    \"Date\": {\r\n                        min: 0,\r\n                        max: 1\r\n                    },\r\n                    \"Values\": {\r\n                        min: 0,\r\n                        max: 1\r\n                    },\r\n                    \"Labels\": {\r\n                        min: 0,\r\n                        max: 1\r\n                    }\r\n                }],\r\n                categorical: {\r\n                    categories: {\r\n                        for: { in: \"Date\" },\r\n                        dataReductionAlgorithm: { sample: {} }\r\n                    },\r\n                    values: {\r\n                        for: { in: \"Values\" }\r\n                    },\r\n                    // labels: {\r\n                    //     for: { in: \"Labels\" }\r\n                    // }\r\n                }\r\n            }],\r\n            objects: {\r\n                general: {\r\n                    displayName: data.createDisplayNameGetter(\"Visual_General\"),\r\n                    properties: {\r\n                        formatString: {\r\n                            type: {\r\n                                formatting: {\r\n                                    formatString: true\r\n                                }\r\n                            },\r\n                        }\r\n                    },\r\n                },\r\n                lineoptions: {\r\n                    displayName: 'Line',\r\n                    properties: {\r\n                        fill: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Fill'),\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        lineThickness: {\r\n                            displayName: 'Thickness',\r\n                            type: { numeric: true }\r\n                        }\r\n                    }\r\n                },\r\n                dotoptions: {\r\n                    displayName: 'Dot',\r\n                    properties: {\r\n                        color: {\r\n                            displayName: data.createDisplayNameGetter('Visual_Fill'),\r\n                            type: { fill: { solid: { color: true } } }\r\n                        },\r\n                        dotSizeMin: {\r\n                            displayName: 'Min size',\r\n                            type: { numeric: true }\r\n                        },\r\n                        dotSizeMax: {\r\n                            displayName: 'Min size',\r\n                            type: { numeric: true }\r\n                        }\r\n                    }\r\n                },\r\n                counteroptions: {\r\n                    displayName: 'Counter',\r\n                    properties: {\r\n                        counterTitle: {\r\n                            displayName: 'Title',\r\n                            type: { text: true }\r\n                        }\r\n                    }\r\n                },\r\n                misc: {\r\n                    displayName: 'Animation',\r\n                    properties: {\r\n                        isanimated: {\r\n                            displayName: 'Animated',\r\n                            type: { bool: true }\r\n                        },\r\n                        isstopped: {\r\n                            displayName: 'Stop on load',\r\n                            type: { bool: true }\r\n                        },\r\n                        duration: {\r\n                            displayName: 'Time',\r\n                            type: { numeric: true }\r\n                        }\r\n                    }\r\n                }\r\n                // ,\r\n                // labels: {\r\n                //     displayName: data.createDisplayNameGetter('Visual_DataPointsLabels'),\r\n                //     properties: {\r\n                //         labelPrecision: {\r\n                //             displayName: data.createDisplayNameGetter('Visual_Precision'),\r\n                //             type: { numeric: true }\r\n                //         }\r\n                //     }\r\n                // }\r\n            }\r\n        };\r\n\r\n        private static Identity: ClassAndSelector = {\r\n            \"class\": \"lineDotChart\",\r\n            selector: \".lineDotChart\"\r\n        };\r\n\r\n        private static Axes: ClassAndSelector = {\r\n            \"class\": \"axes\",\r\n            selector: \".axes\"\r\n        };\r\n\r\n        private static Axis: ClassAndSelector = {\r\n            \"class\": \"axis\",\r\n            selector: \".axis\"\r\n        };\r\n\r\n        private static Legends: ClassAndSelector = {\r\n            \"class\": \"legends\",\r\n            selector: \".legends\"\r\n        };\r\n\r\n        private static Legend: ClassAndSelector = {\r\n            \"class\": \"legend\",\r\n            selector: \".legend\"\r\n        };\r\n\r\n        private static Values: ClassAndSelector = {\r\n            \"class\": \"line\",\r\n            selector: \".line\"\r\n        };\r\n\r\n        private static Properties: any = {\r\n            general: {\r\n                formatString: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"general\",\r\n                    propertyName: \"formatString\"\r\n                }\r\n            },\r\n            lineoptions: {\r\n                fill: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"lineoptions\",\r\n                    propertyName: \"fill\"\r\n                },\r\n                lineThickness: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"lineoptions\",\r\n                    propertyName: \"lineThickness\"\r\n                }\r\n            },\r\n            dotoptions: {\r\n                color: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"dotoptions\",\r\n                    propertyName: \"color\"\r\n                },\r\n                dotSizeMin: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"dotoptions\",\r\n                    propertyName: \"dotSizeMin\"\r\n                },\r\n                dotSizeMax: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"dotoptions\",\r\n                    propertyName: \"dotSizeMax\"\r\n                }\r\n            },\r\n            counteroptions: {\r\n                counterTitle: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"counteroptions\",\r\n                    propertyName: \"counterTitle\"\r\n                }\r\n            },\r\n            // labels: {\r\n            //     labelPrecision: <DataViewObjectPropertyIdentifier>{\r\n            //         objectName: \"labels\",\r\n            //         propertyName: \"labelPrecision\"\r\n            //     }\r\n            // },\r\n            misc: {\r\n                isanimated: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"misc\",\r\n                    propertyName: \"isanimated\"\r\n                },\r\n                isstopped: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"misc\",\r\n                    propertyName: \"isstopped\"\r\n                },\r\n                duration: <DataViewObjectPropertyIdentifier>{\r\n                    objectName: \"misc\",\r\n                    propertyName: \"duration\"\r\n                }\r\n            }\r\n        };\r\n\r\n        private model: LineDotChartViewModel;\r\n        private root: D3.Selection;\r\n        private main: D3.Selection;\r\n        private axes: D3.Selection;\r\n        private axisX: D3.Selection;\r\n        private axisY: D3.Selection;\r\n        private axisY2: D3.Selection;\r\n        private legends: D3.Selection;\r\n        private line: D3.Selection;\r\n        private colors: IDataColorPalette;\r\n\r\n        private margin: IMargin = {\r\n            top: 10,\r\n            right: 30,\r\n            bottom: 10,\r\n            left: 10\r\n        };\r\n\r\n        private LegendSize: number = 50;\r\n        private AxisSize: number = 30;\r\n\r\n        /* One time setup*/\r\n        public init(options: VisualInitOptions): void {\r\n            this.hostServices = options.host;\r\n            this.selectionManager = new SelectionManager({ hostServices: this.hostServices });\r\n            this.root = d3.select(options.element.get(0))\r\n                .append('svg')\r\n                .classed(LineDotChart.Identity.class, true);\r\n\r\n            this.root.on('click', (d: LineDotPoint) => { this.clearSelection(); } );\r\n\r\n            this.main = this.root.append('g');\r\n            this.axes = this.main.append('g').classed(LineDotChart.Axes.class, true);\r\n            this.axisX = this.axes.append('g').classed(LineDotChart.Axis.class, true);\r\n            this.axisY = this.axes.append('g').classed(LineDotChart.Axis.class, true);\r\n            this.axisY2 = this.axes.append('g').classed(LineDotChart.Axis.class, true);\r\n            this.legends = this.main.append('g').classed(LineDotChart.Legends.class, true);\r\n            this.line = this.main.append('g').classed(LineDotChart.Values.class, true);\r\n\r\n            this.colors = options.style && options.style.colorPalette\r\n                ? options.style.colorPalette.dataColors\r\n                : new DataColorPalette();\r\n        }\r\n\r\n        /* Called for data, size, formatting changes*/\r\n        public update(options: VisualUpdateOptions) {\r\n            if (!options.dataViews || !options.dataViews[0]) {\r\n                return;\r\n            }\r\n\r\n            var viewport: IViewport = options.viewport;\r\n            var model: LineDotChartViewModel = this.model = this.converter(options.dataViews[0], viewport);\r\n            // if (!model) {\r\n            //     return;\r\n            // }\r\n\r\n            this.clearSelection();\r\n            this.resize(viewport);\r\n            // this.draw(model, !options.suppressAnimations);\r\n            this.draw(model);\r\n        }\r\n\r\n        /*About to remove your visual, do clean up here */\r\n        public destroy() {\r\n            this.root = null;\r\n        }\r\n\r\n        public setIsStopped(isstopped: Boolean): void {\r\n            var objects: VisualObjectInstancesToPersist = {\r\n                merge: [\r\n                    <VisualObjectInstance>{\r\n                        objectName: \"misc\",\r\n                        selector: undefined,\r\n                        properties: {\r\n                            \"isstopped\": isstopped,\r\n                        }\r\n                    }\r\n                ]\r\n            };\r\n            this.hostServices.persistProperties(objects);\r\n            this.hostServices.onSelect({ data: [] });\r\n        }\r\n\r\n        public enumerateObjectInstances(options: EnumerateVisualObjectInstancesOptions): VisualObjectInstance[] {\r\n            var instances: VisualObjectInstance[] = [];\r\n\r\n            if (!this.model || !this.model.settings) {\r\n                return instances;\r\n            }\r\n\r\n            var settings: LineDotChartSettings = this.model.settings;\r\n\r\n            switch (options.objectName) {\r\n                case \"lineoptions\":\r\n                    var lineoptions: VisualObjectInstance = {\r\n                        objectName: \"lineoptions\",\r\n                        displayName: \"lineoptions\",\r\n                        selector: null,\r\n                        properties: {\r\n                            fill: settings.lineFill,\r\n                            lineThickness: settings.lineThickness\r\n                        }\r\n                    };\r\n\r\n                    instances.push(lineoptions);\r\n                    break;\r\n\r\n                case \"dotoptions\":\r\n                    var dotoptions: VisualObjectInstance = {\r\n                        objectName: \"dotoptions\",\r\n                        displayName: \"dotoptions\",\r\n                        selector: null,\r\n                        properties: {\r\n                            color: settings.dotFill,\r\n                            dotSizeMin: settings.dotSizeMin,\r\n                            dotSizeMax: settings.dotSizeMax\r\n                        }\r\n                    };\r\n\r\n                    instances.push(dotoptions);\r\n                    break;\r\n\r\n                case \"counteroptions\":\r\n                    var counteroptions: VisualObjectInstance = {\r\n                        objectName: \"counteroptions\",\r\n                        displayName: \"counteroptions\",\r\n                        selector: null,\r\n                        properties: {\r\n                            counterTitle: settings.counterTitle\r\n                        }\r\n                    };\r\n\r\n                    instances.push(counteroptions);\r\n                    break;\r\n\r\n                // case \"labels\":\r\n                //     var labels: VisualObjectInstance = {\r\n                //         objectName: \"labels\",\r\n                //         displayName: \"labels\",\r\n                //         selector: null,\r\n                //         properties: {\r\n                //             labelPrecision: settings.precision\r\n                //         }\r\n                //     };\r\n\r\n                //     instances.push(labels);\r\n                //     break;\r\n\r\n                case \"misc\": \r\n                    var misc: VisualObjectInstance = {\r\n                        objectName: \"misc\",\r\n                        displayName: \"misc\",\r\n                        selector: null,\r\n                        properties: {\r\n                            isanimated: settings.isanimated,\r\n                            isstopped: settings.isstopped,\r\n                            duration: settings.duration\r\n                        }\r\n                    };\r\n\r\n                    instances.push(misc);\r\n                    break;\r\n            }\r\n\r\n            return instances;\r\n        }\r\n\r\n        private selectDot(dotelement: SVGCircleElement, selector: SelectionId) {\r\n            var dot: D3.Selection = d3.select(dotelement);\r\n            if (!dot.classed('point_selected')) {\r\n                if (selector) {\r\n                    this.selectionManager.select(selector);\r\n                }\r\n\r\n                this.root.classed(\"filtered\", true);\r\n                this.line.selectAll('circle.point')\r\n                    .classed('point_selected', false);\r\n                d3.select(dotelement)\r\n                    .classed('point_selected', true);\r\n            } else {\r\n                this.clearSelection();\r\n            }\r\n\r\n            d3.event.stopPropagation();\r\n        }\r\n\r\n        private clearSelection(): void {\r\n            this.root.classed(\"filtered\", false);\r\n            this.root.selectAll(\"circle.point\").classed(\"point_selected\", false);\r\n            this.selectionManager.clear();\r\n        }\r\n\r\n        // Convert a DataView into a view model\r\n        private converter(dataView: DataView, viewport: IViewport): LineDotChartViewModel {\r\n            if (!dataView.categorical ||\r\n                !dataView.categorical.categories ||\r\n                !dataView.categorical.categories[0] ||\r\n                !dataView.categorical.categories[0].values ||\r\n                !(dataView.categorical.categories[0].values.length > 0) ||\r\n                !dataView.categorical ||\r\n                !dataView.categorical.values ||\r\n                !dataView.categorical.values[0] ||\r\n                !dataView.categorical.values[0].values ||\r\n                !(dataView.categorical.values[0].values.length > 0)\r\n            ) {\r\n                return null;\r\n            }\r\n\r\n            var values: any[] = [];\r\n            var metadataColumn: DataViewMetadataColumn;\r\n            var extent: any[];\r\n            var min: any;\r\n            var max: any;\r\n            var that = this;\r\n\r\n            var categoryType: ValueType = AxisHelper.getCategoryValueType(dataView.categorical.categories[0].source, true);\r\n            this.isDateTime = AxisHelper.isDateTime(categoryType);\r\n            var isScalar = true;\r\n\r\n            var settings: LineDotChartSettings = this.parseSettings(dataView);\r\n            var effectiveWidth: number = Math.max(0, viewport.width - this.margin.left - this.margin.right - this.LegendSize - this.AxisSize);\r\n            var effectiveHeight: number = Math.max(0, viewport.height - this.margin.top - this.margin.bottom - this.LegendSize);\r\n\r\n            var format: string = \"\";\r\n            var formatter: IValueFormatter;\r\n\r\n            // X for categories\r\n            values = dataView.categorical.categories[0].values;\r\n            metadataColumn = dataView.categorical.categories[0].source;\r\n            extent = d3.extent(values);\r\n\r\n            if (this.isDateTime) {\r\n                min = extent[0].getTime();\r\n                max = extent[1].getTime();\r\n\r\n                min = new Date(min);\r\n                max = new Date(max + (max - min)*.05);\r\n\r\n                // var xDomain: number[] = isScalar ? [min, max] : [min.getTime(), max.getTime()]\r\n                // var format: string = \"MMM dd yyyy HH:mm\";\r\n                format = \"MMM dd yyyy\";\r\n                formatter = valueFormatter.create({ format: format });\r\n            } else {\r\n                min = extent[0];\r\n                max = extent[1];\r\n\r\n                max = max + (max - min)*.05;\r\n\r\n                formatter = valueFormatter.create({ value: 0 });\r\n            }\r\n\r\n            var xAxis = AxisHelper.createAxis({\r\n                pixelSpan: effectiveWidth,\r\n                dataDomain: [min, max],\r\n                metaDataColumn: metadataColumn,\r\n                formatString: null,\r\n                //formatString: LineDotChart.Properties.general.formatString,\r\n                outerPadding: 0,\r\n                isCategoryAxis: true,\r\n                isScalar: isScalar,\r\n                isVertical: false,\r\n                forcedTickCount: undefined,\r\n                useTickIntervalForDisplayUnits: true,\r\n                // axisPrecision: settings.precision,\r\n                getValueFn: (index, type) => {\r\n                    if(that.isDateTime) {\r\n                        return formatter.format(new Date(index));\r\n                    } else {\r\n                        return index;\r\n                    }\r\n                }\r\n            });\r\n            xAxis.formatter = formatter;\r\n\r\n            metadataColumn = dataView.categorical.values[0].source;\r\n\r\n            values = dataView.categorical.values[0].values;\r\n            extent = d3.extent(values);\r\n            min = extent[0];\r\n            max = extent[1];\r\n\r\n            var result: LineDotPoint[] = [];\r\n            var value_sum: number = 0;\r\n            var value: number = 0;\r\n            var time: number = 0;\r\n            var selector: SelectionId;\r\n\r\n            for (var i = 0; i < dataView.categorical.categories[0].values.length; i++) {\r\n                value = dataView.categorical.values[0].values[i];\r\n                time = dataView.categorical.categories[0].values[i];\r\n                value_sum += value;\r\n                selector = SelectionId.createWithId(dataView.categorical.categories[0].identity[i]);\r\n                result.push({\r\n                    dot: (value - min) / (max - min),\r\n                    value: value,\r\n                    sum: value_sum,\r\n                    time: time,\r\n                    selector: selector\r\n                });\r\n            }\r\n\r\n            // make some space for counter + 25%\r\n            value_sum = value_sum + (value_sum - min) * 0.10;\r\n\r\n            var yAxis = AxisHelper.createAxis({\r\n                pixelSpan: effectiveHeight,\r\n                dataDomain: [min, value_sum],\r\n                metaDataColumn: metadataColumn,\r\n                formatString: null,\r\n                outerPadding: 0,\r\n                isCategoryAxis: false,\r\n                isScalar: true,\r\n                isVertical: true,\r\n                useTickIntervalForDisplayUnits: true\r\n            });\r\n\r\n            var yAxis2 = AxisHelper.createAxis({\r\n                pixelSpan: effectiveHeight,\r\n                dataDomain: [min, value_sum],\r\n                metaDataColumn: metadataColumn,\r\n                formatString: null,\r\n                outerPadding: 0,\r\n                isCategoryAxis: false,\r\n                isScalar: true,\r\n                isVertical: true,\r\n                useTickIntervalForDisplayUnits: true\r\n            });\r\n            yAxis2.axis.orient('right');\r\n\r\n            // Show gridlines on the chart to make the values more readable.\r\n            // TODO: Make this a configuration setting that can be toggled.\r\n            // xAxis.axis = xAxis.axis.tickSize(-effectiveHeight);\r\n            // yAxis.axis = yAxis.axis.tickSize(-effectiveWidth);\r\n            return {\r\n                points: result,\r\n                settings: settings,\r\n                xAxis: xAxis,\r\n                yAxis: yAxis,\r\n                yAxis2: yAxis2,\r\n                legends: this.generateAxisLabels(viewport, settings)\r\n            };\r\n        }\r\n\r\n        private parseSettings(dataView: DataView): LineDotChartSettings {\r\n            if (!dataView ||\r\n                !dataView.metadata ||\r\n                !dataView.metadata.columns ||\r\n                !dataView.metadata.columns[0]) {\r\n                return null;\r\n            }\r\n\r\n            var objects: DataViewObjects = dataView.metadata.objects;\r\n            var lineFillColorHelper: ColorHelper = new ColorHelper(this.colors, LineDotChart.Properties.lineoptions.fill, LineDotChart.DefaultSettings.lineFill);\r\n            var dotFillColorHelper: ColorHelper = new ColorHelper(this.colors, LineDotChart.Properties.dotoptions.color, LineDotChart.DefaultSettings.dotFill);\r\n            var xAxisTitle: string = LineDotChart.DefaultSettings.xAxisTitle;\r\n            var yAxisTitle: string = LineDotChart.DefaultSettings.yAxisTitle;\r\n\r\n            if (\r\n                dataView.categorical.categories[0] &&\r\n                dataView.categorical.categories[0].source &&\r\n                dataView.categorical.categories[0].source.displayName &&\r\n                dataView.categorical.values[0] &&\r\n                dataView.categorical.values[0].source &&\r\n                dataView.categorical.values[0].source.displayName) {\r\n                xAxisTitle = dataView.categorical.categories[0].source.displayName;\r\n                yAxisTitle = dataView.categorical.values[0].source.displayName;\r\n            }\r\n\r\n            var lineThickness: number = LineDotChart.DefaultSettings.lineThickness;\r\n            var dotSizeMin: number = LineDotChart.DefaultSettings.dotSizeMin;\r\n            var dotSizeMax: number = LineDotChart.DefaultSettings.dotSizeMax;\r\n            var counterTitle: string = LineDotChart.DefaultSettings.counterTitle;\r\n            var isanimated: boolean = LineDotChart.DefaultSettings.isanimated;\r\n            var isstopped: boolean = LineDotChart.DefaultSettings.isstopped;\r\n            var duration: number = LineDotChart.DefaultSettings.duration;\r\n            if (objects) {\r\n                lineThickness = DataViewObjects.getValue(\r\n                    objects,\r\n                    LineDotChart.Properties.lineoptions.lineThickness,\r\n                    LineDotChart.DefaultSettings.lineThickness\r\n                );\r\n                dotSizeMin = DataViewObjects.getValue(\r\n                    objects,\r\n                    LineDotChart.Properties.dotoptions.dotSizeMin,\r\n                    LineDotChart.DefaultSettings.dotSizeMin\r\n                );\r\n                dotSizeMax = DataViewObjects.getValue(\r\n                    objects,\r\n                    LineDotChart.Properties.dotoptions.dotSizeMax,\r\n                    LineDotChart.DefaultSettings.dotSizeMax\r\n                );\r\n                counterTitle = DataViewObjects.getValue(\r\n                    objects,\r\n                    LineDotChart.Properties.counteroptions.counterTitle,\r\n                    LineDotChart.DefaultSettings.counterTitle\r\n                );\r\n                isanimated = DataViewObjects.getValue(\r\n                    objects,\r\n                    LineDotChart.Properties.misc.isanimated,\r\n                    LineDotChart.DefaultSettings.isanimated\r\n                );\r\n                isstopped = DataViewObjects.getValue(\r\n                    objects,\r\n                    LineDotChart.Properties.misc.isstopped,\r\n                    LineDotChart.DefaultSettings.isstopped\r\n                );\r\n                duration = DataViewObjects.getValue(\r\n                    objects,\r\n                    LineDotChart.Properties.misc.duration,\r\n                    LineDotChart.DefaultSettings.duration\r\n                );\r\n                \r\n            }\r\n\r\n            return {\r\n                // precision: LineDotChart.getPrecision(objects),\r\n                xAxisTitle: xAxisTitle,\r\n                yAxisTitle: yAxisTitle,\r\n                lineFill: lineFillColorHelper.getColorForMeasure(objects, ''),\r\n                lineThickness: lineThickness,\r\n                dotFill: dotFillColorHelper.getColorForMeasure(objects, ''),\r\n                dotSizeMin: dotSizeMin,\r\n                dotSizeMax: dotSizeMax,\r\n                counterTitle: counterTitle,\r\n                isstopped: isstopped,\r\n                isanimated: isanimated,\r\n                duration: duration\r\n            };\r\n        }\r\n\r\n        // private static getPrecision(objects: DataViewObjects): number {\r\n        //     if (!objects) {\r\n        //         return LineDotChart.DefaultSettings.precision;\r\n        //     }\r\n\r\n        //     var precision: number = DataViewObjects.getValue(\r\n        //         objects,\r\n        //         LineDotChart.Properties.labels.labelPrecision,\r\n        //         LineDotChart.DefaultSettings.precision);\r\n\r\n        //     if (precision < LineDotChart.MinPrecision) {\r\n        //         return LineDotChart.MinPrecision;\r\n        //     }\r\n\r\n        //     return precision;\r\n        // }\r\n\r\n        private generateAxisLabels(viewport: IViewport, settings: LineDotChartSettings): Legend[] {\r\n            return [\r\n                {\r\n                    transform: SVGUtil.translate(\r\n                        (viewport.width - this.margin.left - this.margin.right) / 2,\r\n                        (viewport.height - this.margin.top - this.margin.bottom)),\r\n                    text: settings.xAxisTitle,\r\n                    dx: \"1em\",\r\n                    dy: \"-1em\"\r\n                }, {\r\n                    transform: SVGUtil.translateAndRotate(\r\n                        0,\r\n                        (viewport.height - this.margin.top - this.margin.bottom) / 2,\r\n                        0,\r\n                        0,\r\n                        270),\r\n                    text: settings.yAxisTitle,\r\n                    dx: \"3em\"\r\n                }\r\n            ];\r\n        }\r\n\r\n        private resize(viewport: IViewport): void {\r\n            this.root.attr({\r\n                'height': Math.max(0, viewport.height),\r\n                'width': Math.max(0, viewport.width)\r\n            });\r\n\r\n            this.main.attr('transform', SVGUtil.translate(this.margin.left, this.margin.top));\r\n            this.legends.attr('transform', SVGUtil.translate(this.margin.left, this.margin.top));\r\n            this.line.attr('transform', SVGUtil.translate(this.margin.left + this.LegendSize, 0));\r\n            this.axes.attr('transform', SVGUtil.translate(this.margin.left + this.LegendSize, 0));\r\n            this.axisX.attr('transform', SVGUtil.translate(0, viewport.height - this.margin.top - this.margin.bottom - this.LegendSize));\r\n            this.axisY2.attr('transform', SVGUtil.translate(viewport.width - this.margin.left - this.margin.right - this.LegendSize - this.AxisSize, 0));\r\n        }\r\n\r\n        private draw(model: LineDotChartViewModel): void {\r\n            var that = this;\r\n            // Clear canvas\r\n            this.line.selectAll('*').remove();\r\n\r\n            this.legends.selectAll('*').remove();\r\n            this.axisX.selectAll('*').remove();\r\n            this.axisY.selectAll('*').remove();\r\n            this.axisY2.selectAll('*').remove();\r\n\r\n            if (!model) {\r\n                return;\r\n            }\r\n\r\n            this.renderLegends(model);\r\n\r\n            if (model && model.points && model.points.length) {\r\n\r\n                this.axisX.call(model.xAxis.axis);\r\n                this.axisY.call(model.yAxis.axis);\r\n                this.axisY2.call(model.yAxis2.axis);\r\n\r\n                if (model.settings.isanimated) {\r\n                    var playBtn = this.line\r\n                        .append(\"g\")\r\n                        .classed(\"lineDotChart__playBtn\", true)\r\n                        .attr(\"transform\", \"translate(40, 20)\");\r\n\r\n                    playBtn\r\n                        .append(\"circle\")\r\n                        .attr(\"r\", 34 / 2);\r\n\r\n                    // play / reset buttin\r\n                    if (model.settings.isstopped) {\r\n                        playBtn\r\n                            .append(\"path\")\r\n                            .attr(\"d\", \"M0 2l10 6-10 6z\")\r\n                            .attr(\"transform\", \"translate(-4,-8)\");\r\n\r\n                        playBtn\r\n                            .on('click.lineDotChart__playBt', function() {\r\n                                that.setIsStopped(false);\r\n                            });\r\n\r\n                        return;\r\n                    } else {\r\n                        playBtn\r\n                            .append(\"path\")\r\n                            .attr(\"d\", \"M0 2l10 6-10 6z\")\r\n                            .attr(\"transform-origin\", \"center\")\r\n                            .attr(\"transform\", \"translate(6, 8) rotate(180)\");\r\n\r\n                        playBtn\r\n                            .append(\"rect\")\r\n                            .attr(\"width\", \"2\")\r\n                            .attr(\"height\", \"12\")\r\n                            .attr(\"transform\", \"translate(-7,-6)\");\r\n\r\n                        playBtn\r\n                            .on('click.lineDotChart__playBt', function() {\r\n                                that.setIsStopped(true);\r\n                            });\r\n                    }\r\n                }\r\n\r\n                var clip = this.line\r\n                    .append(\"clipPath\")\r\n                    .attr(\"id\", \"lineClip\")\r\n                    .append(\"rect\")\r\n                    .attr(\"x\", 0)\r\n                    .attr(\"y\", 0)\r\n                    .attr(\"width\", 1)\r\n                    .attr(\"height\", 10000);\r\n\r\n                // Draw the line\r\n                var line: D3.Svg.Line = d3.svg.line()\r\n                    .x((d: LineDotPoint) => model.xAxis.scale(d.time))\r\n                    .y((d: LineDotPoint) => model.yAxis.scale(d.sum));\r\n                    // .interpolate(\"basis\");\r\n\r\n                var lineSelection: D3.UpdateSelection = this.line.selectAll('path.plot')\r\n                    .data([model.points]);\r\n\r\n                lineSelection.enter().append('path');\r\n                lineSelection\r\n                    .classed('plot', true)\r\n                    .attr('stroke', (d, i) => model.settings.lineFill)\r\n                    .attr('stroke-width', model.settings.lineThickness)\r\n                    .attr('d', line);\r\n\r\n                var totalLength: number = (<SVGPathElement>lineSelection.node()).getTotalLength();\r\n                var line_left = (<SVGPathElement>lineSelection.node()).getPointAtLength(0).x;\r\n                var line_right = (<SVGPathElement>lineSelection.node()).getPointAtLength(totalLength).x;\r\n\r\n                lineSelection\r\n                    .attr(\"clip-path\", \"url(\" + location.href + \"#lineClip)\");\r\n\r\n                if(!model.settings.isanimated) {\r\n                    clip\r\n                        .interrupt()\r\n                        .attr('x', line_left)\r\n                        .attr('width', line_right - line_left);\r\n                } else {\r\n                    clip\r\n                        .attr('x', line_left)\r\n                        .interrupt()\r\n                        .transition()\r\n                        .ease(\"linear\")\r\n                        .duration(model.settings.duration * 1000)\r\n                        .attr('width', line_right - line_left);\r\n                }\r\n                lineSelection\r\n                    .exit().remove();\r\n\r\n                var point_time: number = 300;\r\n                var counter_time: number = 0; // point_time / 100;\r\n\r\n                // Draw the individual data points that will be shown on hover with a tooltip\r\n                var lineTipSelection: D3.UpdateSelection = this.line.selectAll('circle.point')\r\n                    .data(model.points);\r\n\r\n                var that = this;\r\n\r\n                lineTipSelection.enter()\r\n                    .append('circle')\r\n                    .attr('fill', model.settings.dotFill)\r\n                    .attr('opacity', .77)\r\n                    .attr('r', (d: LineDotPoint) => model.settings.dotSizeMin + d.dot * (model.settings.dotSizeMax - model.settings.dotSizeMin))\r\n                    .classed('point', true)\r\n                    .on('mouseover.point', this.showDataPoint)\r\n                    .on('mouseout.point', this.hideDataPoint)\r\n                    .on(\"click.point\", function(d: LineDotPoint) {\r\n                        that.selectDot(this, d.selector);\r\n                    });\r\n\r\n                if (!model.settings.isanimated) {\r\n                    lineTipSelection\r\n                        .interrupt()\r\n                        .attr('transform', (d: LineDotPoint) => \r\n                            'translate(' + model.xAxis.scale(d.time) + ' ' + model.yAxis.scale(d.sum) + ') scale(1)'\r\n                        );\r\n                } else {\r\n                    lineTipSelection\r\n                        .interrupt()\r\n                        .attr('transform', (d: LineDotPoint) => \r\n                            'translate(' + model.xAxis.scale(d.time) + ' ' + model.yAxis.scale(d.sum) + ') scale(0.005)'\r\n                        )\r\n                        .transition()\r\n                        .duration(point_time)\r\n                        .delay((d: LineDotPoint, i: number) => this.pointDelay(model.points, i, model.settings.duration))\r\n                        .ease(\"linear\")\r\n                        .attr('transform', (d: LineDotPoint) => \r\n                            'translate(' + model.xAxis.scale(d.time) + ' ' + model.yAxis.scale(d.sum) + ') scale(3.4)'\r\n                        )\r\n                        .transition()\r\n                        .duration(point_time)\r\n                        .delay((d: LineDotPoint, i: number) => this.pointDelay(model.points, i, model.settings.duration) + point_time)\r\n                        .ease(\"elastic\")\r\n                        .attr('transform', (d: LineDotPoint) =>\r\n                            'translate(' + model.xAxis.scale(d.time) + ' ' + model.yAxis.scale(d.sum) + ') scale(1)'\r\n                        );\r\n                }\r\n\r\n                lineTipSelection.exit().remove();\r\n\r\n                for (var i = 0; i < lineTipSelection[0].length; i++) {\r\n                    this.addTooltip(model, lineTipSelection[0][i]);\r\n                }\r\n\r\n                // Feature Counter text \r\n                var lineTextSelection: D3.UpdateSelection = this.line.selectAll('text')\r\n                    .data(model.points);\r\n\r\n                lineTextSelection.enter()\r\n                    .append(\"text\")\r\n                    .classed('text', true)\r\n                    .text((d: LineDotPoint, i: number) => {\r\n                        // if (model.points[i + 1]) {\r\n                            return model.settings.counterTitle + ' ' + (i + 1);\r\n                        // } else {\r\n                        //     // TODO: CRAZY hard code\r\n                        //     return model.settings.counterTitle + ' 265'\r\n                        // }\r\n                    })\r\n                    .attr('x', line_right - 260)\r\n                    .attr('y', 30);\r\n\r\n                if (!model.settings.isanimated) {\r\n                    // opacity 1 only for last\r\n                    lineTextSelection\r\n                        .interrupt()\r\n                        .attr('transform', 'translate(0 0)')\r\n                        .attr('opacity', (d: LineDotPoint, i: number) => Number(i === model.points.length - 1));\r\n                } else {\r\n                    lineTextSelection\r\n                        // .attr('transform', 'translate(-40 0)')\r\n                        .attr('opacity', 0)\r\n                        .interrupt()\r\n                        .transition()\r\n                        .duration(counter_time)\r\n                        .delay((d: LineDotPoint, i: number) => this.pointDelay(model.points, i, model.settings.duration))\r\n                        .attr('transform', 'translate(0 0)')\r\n                        .attr('opacity', 1)\r\n                        .transition()\r\n                        .duration(counter_time)\r\n                        .delay((d: LineDotPoint, i: number) => {\r\n                            if (model.points[i + 1]) {\r\n                                return this.pointDelay(model.points, i+1, model.settings.duration);\r\n                            } else {\r\n                                return Number.POSITIVE_INFINITY;\r\n                            }\r\n                        })\r\n                        // .attr('transform', 'translate(40 0)')\r\n                        .attr('opacity', 0)\r\n                     ;\r\n\r\n                }\r\n                lineTextSelection.exit().remove();\r\n\r\n            }\r\n        }\r\n\r\n        private pointDelay(points: LineDotPoint[], num: number, animation_duration: number): number {\r\n            if (!points.length || !points[num] || num === 0) {\r\n                return 0;\r\n            }\r\n            if (this.isDateTime) {\r\n                let time: Date = <Date>points[num].time;\r\n                var min: number = (<Date>points[0].time).getTime();\r\n                var max: number = (<Date>points[points.length - 1].time).getTime();\r\n                var val: number = time.getTime();\r\n            } else {\r\n                let time: number = <number>points[num].time;\r\n                var min: number = <number>points[0].time;\r\n                var max: number = <number>points[points.length - 1].time;\r\n                var val: number = time;\r\n            }\r\n            return animation_duration * 1000 * (val - min) / (max - min);\r\n        }\r\n\r\n        private showDataPoint(data: LineDotPoint, index: number): void {\r\n            d3.select(<any>this).classed('show', true);\r\n        }\r\n\r\n        private hideDataPoint(data: LineDotPoint, index: number): void {\r\n            d3.select(<any>this).classed('show', false);\r\n        }\r\n\r\n        private addTooltip(model: LineDotChartViewModel, element: any): void {\r\n            var selection: D3.Selection = d3.select(element);\r\n            var data: LineDotPoint = selection.datum();\r\n            TooltipManager.addTooltip(selection, (event) => {\r\n                return [\r\n                    {\r\n                        displayName: model.settings.xAxisTitle,\r\n                        value: model.xAxis.formatter.format(data.time)\r\n                    },\r\n                    {\r\n                        displayName: model.settings.yAxisTitle,\r\n                        value: data.value.toString()\r\n                    }\r\n                ];\r\n            });\r\n        }\r\n\r\n        private renderLegends(model: LineDotChartViewModel): void {\r\n            var legendSelection: D3.UpdateSelection = this.legends\r\n                .selectAll(LineDotChart.Legend.selector)\r\n                .data(model.legends);\r\n\r\n            legendSelection\r\n                .enter()\r\n                .append(\"svg:text\");\r\n\r\n            legendSelection\r\n                .attr(\"x\", 0)\r\n                .attr(\"y\", 0)\r\n                .attr(\"dx\", (item: Legend) => item.dx)\r\n                .attr(\"dy\", (item: Legend) => item.dy)\r\n                .attr(\"transform\", (item: Legend) => item.transform)\r\n                .text((item: Legend) => item.text)\r\n                .classed(LineDotChart.Legend.class, true);\r\n\r\n            legendSelection\r\n                .exit()\r\n                .remove();\r\n        }\r\n    }\r\n}\r\n","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *\r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *\r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.visuals.plugins {\r\n    export let sunburstCustom: IVisualPlugin = {\r\n        name: 'sunburstCustom',\r\n        watermarkKey: 'defaultWatermark',\r\n        capabilities: samples.Sunburst.capabilities,\r\n        create: () => new samples.Sunburst()\r\n    };\r\n\r\n    export let asterPlot: IVisualPlugin = {\r\n        name: 'asterPlot',\r\n        capabilities: samples.AsterPlot.capabilities,\r\n        create: () => new samples.AsterPlot()\r\n    };\r\n\r\n    export var tornadoChart: IVisualPlugin = {\r\n        name: \"tornadoChart\",\r\n        capabilities: samples.TornadoChart.capabilities,\r\n        create: () => new samples.TornadoChart()\r\n    };\r\n\r\n    export var sankeyDiagram: IVisualPlugin = {\r\n        name: \"sankeyDiagram\",\r\n        capabilities: samples.SankeyDiagram.capabilities,\r\n        create: () => new samples.SankeyDiagram()\r\n    };\r\n\r\n    export let mekkoChart: IVisualPlugin = {\r\n        name: 'mekkoChart',\r\n        watermarkKey: 'mekko',\r\n        capabilities: samples.MekkoChart.capabilities,\r\n        create: () => new samples.MekkoChart({ chartType: samples.MekkoChartType.HundredPercentStackedColumn }),\r\n        customizeQuery: ColumnChart.customizeQuery,\r\n        getSortableRoles: (visualSortableOptions?: VisualSortableOptions) => ColumnChart.getSortableRoles(visualSortableOptions),\r\n    };\r\n    \r\n    export var bulletChart: IVisualPlugin = {\r\n        name: \"bulletChart\",\r\n        capabilities: samples.BulletChart.capabilities,\r\n        create: () => new samples.BulletChart()\r\n    };\r\n\t\r\n\texport var wordCloud: IVisualPlugin = {\r\n        name: \"wordCloud\",\r\n        capabilities: samples.WordCloud.capabilities,\r\n        create: () => new samples.WordCloud()\r\n    };\r\n\t\r\n\texport var chicletSlicer: IVisualPlugin = {\r\n        name: 'chicletSlicer',\r\n        capabilities: samples.ChicletSlicer.capabilities,\r\n        create: () => new samples.ChicletSlicer()\r\n    };\r\n\t\r\n\texport var chordChart: IVisualPlugin = {\r\n        name: \"chordChart\",\r\n        capabilities: samples.ChordChart.capabilities,\r\n        create: () => new samples.ChordChart()\r\n    };\r\n\t\r\n\texport var enhancedScatterChart: IVisualPlugin = {\r\n        name: 'enhancedScatterChart',\r\n        capabilities: samples.EnhancedScatterChart.capabilities,\r\n        create: () => new samples.EnhancedScatterChart()\r\n    };\r\n\t\r\n\texport var radarChart: IVisualPlugin = {\r\n        name: 'radarChart',\r\n        capabilities: samples.RadarChart.capabilities,\r\n        create: () => new samples.RadarChart()\r\n    };\r\n\t\r\n\texport var dotPlot: IVisualPlugin = {\r\n        name: 'dotPlot',\r\n        capabilities: samples.DotPlot.capabilities,\r\n        create: () => new samples.DotPlot()\r\n    };\r\n\r\n    export var histogram: IVisualPlugin = {\r\n        name: \"histogram\",\r\n        capabilities: samples.Histogram.capabilities,\r\n        create: () => new samples.Histogram()\r\n    };\r\n\r\n\texport var timeline: IVisualPlugin = {\r\n        name: 'timeline',\r\n        capabilities: samples.Timeline.capabilities,\r\n        create: () => new samples.Timeline()\r\n    };\r\n\t\r\n\texport var forceGraph: IVisualPlugin = {\r\n        name: \"forceGraph\",\r\n        capabilities: samples.ForceGraph.capabilities,\r\n        create: () => new samples.ForceGraph()\r\n    };\r\n\r\n    export let gantt: IVisualPlugin = {\r\n        name: \"gantt\",\r\n        capabilities: samples.Gantt.capabilities,\r\n        create: () => new samples.Gantt()\r\n    };\r\n\r\n    export let streamGraph: IVisualPlugin = {\r\n        name: \"streamGraph\",\r\n        capabilities: samples.StreamGraph.capabilities,\r\n        create: () => new samples.StreamGraph()\r\n    };\r\n\r\n    export var lineDotChart: IVisualPlugin = {\r\n        name: \"lineDotChart\",\r\n        capabilities: samples.LineDotChart.capabilities,\r\n        create: () => new samples.LineDotChart()\r\n    };\r\n}","\r\n/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *\r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *\r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.visuals.visualPluginFactory {\r\n    export class CustomVisualPluginService extends VisualPluginService {\r\n        private customVisualPlugins: jsCommon.IStringDictionary<IVisualPlugin>;\r\n\r\n        public constructor() {\r\n            super({});\r\n\r\n            this.initCustomVisualPlugins();\r\n        }\r\n\r\n        public getVisuals(): IVisualPlugin[] {\r\n            let registry: jsCommon.IStringDictionary<IVisualPlugin> = this.customVisualPlugins,\r\n                names: string[] = Object.keys(registry);\r\n\r\n            return names.map((name: string) => registry[name]);\r\n        }\r\n\r\n        public getPlugin(type: string): IVisualPlugin {\r\n            if (!type) {\r\n                return null;\r\n            }\r\n\r\n            let plugin: IVisualPlugin = this.customVisualPlugins[type];\r\n\r\n            if (!plugin) {\r\n                return null;\r\n            }\r\n\r\n            return plugin;\r\n        }\r\n\r\n        public capabilities(type: string): VisualCapabilities {\r\n            let plugin: IVisualPlugin = this.getPlugin(type);\r\n\r\n            if (plugin) {\r\n                return plugin.capabilities;\r\n            }\r\n\r\n            return {};\r\n        }\r\n\r\n        private initCustomVisualPlugins(): void {\r\n            // Aster Plot\r\n            createPlugin(this.customVisualPlugins, powerbi.visuals.plugins.asterPlot, () => new samples.AsterPlot());\r\n\r\n            // Tornado Chart\r\n            createPlugin(this.customVisualPlugins, powerbi.visuals.plugins.tornadoChart, () => new samples.TornadoChart({\r\n                animator: new BaseAnimator()\r\n            }));\r\n\r\n            // Sankey Diagram\r\n            createPlugin(this.customVisualPlugins, powerbi.visuals.plugins.sankeyDiagram, () => new samples.SankeyDiagram());\r\n\r\n            // Mekko Chart\r\n            createPlugin(this.customVisualPlugins, powerbi.visuals.plugins.mekkoChart, () => new samples.MekkoChart({\r\n                chartType: samples.MekkoChartType.HundredPercentStackedColumn,\r\n                isScrollable: true,\r\n                animator: new WebColumnChartAnimator(),\r\n                behavior: new CartesianChartBehavior([new ColumnChartWebBehavior()])\r\n            }));\r\n\r\n            // Bullet Chart\r\n            createPlugin(this.customVisualPlugins, powerbi.visuals.plugins.bulletChart, () => new samples.BulletChart());\r\n\r\n            // Word Cloud\r\n            createPlugin(this.customVisualPlugins, powerbi.visuals.plugins.wordCloud, () => new samples.WordCloud({\r\n                animator: new BaseAnimator()\r\n            }));\r\n\r\n            // Chiclet Slicer\r\n            createPlugin(this.customVisualPlugins, powerbi.visuals.plugins.chicletSlicer, () => new samples.ChicletSlicer({\r\n                behavior: new samples.ChicletSlicerWebBehavior()\r\n            }));\r\n\r\n            // Enhanced Scatter Chart\r\n            createPlugin(this.customVisualPlugins, powerbi.visuals.plugins.enhancedScatterChart, () => new samples.EnhancedScatterChart());\r\n\r\n            // Radar Chart\r\n            createPlugin(this.customVisualPlugins, powerbi.visuals.plugins.radarChart, () => new samples.RadarChart({\r\n                animator: new BaseAnimator()\r\n            }));\r\n            // DotPlot\r\n            createPlugin(this.customVisualPlugins, powerbi.visuals.plugins.dotPlot, () => new samples.DotPlot({\r\n                animator: new BaseAnimator()\r\n            }));\r\n\r\n            // Histogram\r\n            createPlugin(this.customVisualPlugins, powerbi.visuals.plugins.histogram, () => new samples.Histogram({\r\n                animator: new BaseAnimator()\r\n            }));\r\n\r\n            // Force Graph\r\n            createPlugin(this.customVisualPlugins, powerbi.visuals.plugins.forceGraph, () => new samples.ForceGraph());\r\n\r\n            // Gantt Chart\r\n            createPlugin(this.customVisualPlugins, powerbi.visuals.plugins.gantt, () => new samples.Gantt());\r\n\r\n            // Stream Graph\r\n            createPlugin(this.customVisualPlugins, powerbi.visuals.plugins.streamGraph, () => new samples.StreamGraph());\r\n        }\r\n    }\r\n\r\n    export function createCustomVisualPluginService(): IVisualPluginService {\r\n        return new CustomVisualPluginService();\r\n    }\r\n}"],"sourceRoot":"../ts/customVisuals"}
{"version":3,"sources":["../ts/visualsExtensibility/telemetry/generateGuid.ts","../ts/visualsExtensibility/telemetry/events.ts","../ts/visualsExtensibility/components/selectionManager.ts","../ts/visualsExtensibility/components/selectionIdBuilder.ts","../ts/visualsExtensibility/versioning/VisualAdapter.ts","VisualsExtensibility.js","../ts/visualsExtensibility/versioning/VisualSafeExecutionWrapper.ts","../ts/visualsExtensibility/versioning/versions/v1.0.0.ts","../ts/visualsExtensibility/versioning/versions/v1.1.0.ts"],"names":["powerbi","powerbi.visuals","powerbi.visuals.telemetry","powerbi.visuals.telemetry.generateGuid","isError","errorSource","undefined","errorCode","info","name","apiVersion","custom","parentId","event","category","time","Date","now","id","telemetry","generateGuid","getFormattedInfoObject","formattedObject","ErrorSource","privateFields","orgInfoFields","ExtensibilityVisualApiUsageLoggers","loggers","visualType","isCustom","source","lineNumber","columnNumber","stack","message","VisualExceptionLoggers","powerbi.extensibility","powerbi.extensibility.SelectionManager","powerbi.extensibility.SelectionManager.constructor","powerbi.extensibility.SelectionManager.select","powerbi.extensibility.SelectionManager.hasSelection","powerbi.extensibility.SelectionManager.clear","powerbi.extensibility.SelectionManager.getSelectionIds","powerbi.extensibility.SelectionManager.sendSelectionToHost","powerbi.extensibility.SelectionManager.selectInternal","powerbi.extensibility.SelectionManager.containsSelection","powerbi.extensibility.SelectionIdBuilder","powerbi.extensibility.SelectionIdBuilder.withCategory","powerbi.extensibility.SelectionIdBuilder.withSeries","powerbi.extensibility.SelectionIdBuilder.withMeasure","powerbi.extensibility.SelectionIdBuilder.createSelectionId","powerbi.extensibility.SelectionIdBuilder.ensureDataMap","powerbi.extensibility.createVisualAdapter","powerbi.extensibility.VisualAdapter","powerbi.extensibility.VisualAdapter.constructor","powerbi.extensibility.VisualAdapter.init","powerbi.extensibility.VisualAdapter.update","powerbi.extensibility.VisualAdapter.destroy","powerbi.extensibility.VisualAdapter.enumerateObjectInstances","powerbi.extensibility.VisualAdapter.onResizing","powerbi.extensibility.VisualAdapter.onDataChanged","powerbi.extensibility.VisualAdapter.onViewModeChanged","powerbi.extensibility.VisualAdapter.onClearSelection","powerbi.extensibility.VisualAdapter.canResizeTo","powerbi.extensibility.VisualAdapter.unwrap","get","powerbi.extensibility.VisualAdapter.visualNew","enumerable","configurable","powerbi.extensibility.VisualAdapter.visualLegacy","powerbi.extensibility.VisualAdapter.visualHasMethod","powerbi.extensibility.VisualAdapter.getVersionIndex","powerbi.extensibility.VisualAdapter.overloadMethods","powerbi.extensibility.VisualAdapter.getCompiledOverloads","powerbi.extensibility.VisualSafeExecutionWrapper","powerbi.extensibility.VisualSafeExecutionWrapper.constructor","powerbi.extensibility.VisualSafeExecutionWrapper.init","powerbi.extensibility.VisualSafeExecutionWrapper.destroy","powerbi.extensibility.VisualSafeExecutionWrapper.update","powerbi.extensibility.VisualSafeExecutionWrapper.onResizing","powerbi.extensibility.VisualSafeExecutionWrapper.onDataChanged","powerbi.extensibility.VisualSafeExecutionWrapper.onViewModeChanged","powerbi.extensibility.VisualSafeExecutionWrapper.onClearSelection","powerbi.extensibility.VisualSafeExecutionWrapper.canResizeTo","powerbi.extensibility.VisualSafeExecutionWrapper.enumerateObjectInstances","powerbi.extensibility.VisualSafeExecutionWrapper.unwrap","powerbi.extensibility.VisualSafeExecutionWrapper.executeSafely","powerbi.extensibility.v100","powerbi.extensibility.v110"],"mappings":"AA0BA,GAAOA,UAAP,SAAOA,GAAQA,GAAAA,IAAAA,SAAAA,GAAQC,GAAAA,IAAAA,SAAAA,GAKnBC,QAAAA,KACIC,GAAIA,GAAOA,GACPA,EAAMA,CAEVA,KAAKA,EAAMA,EAASA,GAANA,EAAUA,GAAOA,EAAGA,CAC9BA,GAAIA,GAAiCA,GAAhBA,KAAKA,SAAgBA,CAC1CA,QAAQA,GACJA,IAAKA,GACLA,IAAKA,IACLA,IAAKA,IACLA,IAAKA,IACDA,GAAQA,IAGhBA,GAAQA,EAAeA,SAASA,IAGpCA,MAAOA,GAjBKD,EAAAA,aAAYA,GALTD,EAAAA,EAAAA,YAAAA,EAAAA,gBAARD,EAAAA,EAAAA,UAAAA,EAAAA,cAARA,UAAAA,YCAP,IAAOA,UAAP,SAAOA,GAAQA,GAAAA,IAAAA,SAAAA,GAAQC,GAAAA,IAAAA,SAAAA,GAiBRC,EAAAA,4BAA8BA,SAASA,EAAcA,EAAoBA,EAAiBA,EAAkBA,EAA0BA,EAAsCA,GAAhE,SAAAE,IAAAA,GAAA,GAA0B,SAAAC,IAAAA,EAAAC,QAAsC,SAAAC,IAAAA,EAAAD,OACnL,IAAIE,IACAC,KAAMA,EACNC,WAAYA,EACZC,OAAQA,EACRC,SAAUA,EACVR,QAASA,EACTC,YAAaA,EACbE,UAAWA,GAGXM,GACAJ,KAAM,mCACNK,SAAU,EACVC,KAAMC,KAAKC,MACXC,GAAIC,EAAAC,eACJC,uBAAwB,WACpB,GAAIC,IACAb,KAAMD,EAAKC,KACXC,WAAYF,EAAKE,WACjBC,OAAQH,EAAKG,OACbC,SAAUJ,EAAKI,SACfR,QAASI,EAAKJ,QAQlB,OANgC,mBAArBI,GAAKH,cACZiB,EAA6B,YAAIH,EAAAI,YAAYf,EAAKH,cAExB,mBAAnBG,GAAKD,YACZe,EAA2B,UAAId,EAAKD,WAEjCe,GAEXd,KAAMA,EACNgB,iBACAC,iBAOJ,OAJkD,mBAAvCN,GAAAO,qCACPb,EAAMc,QAAUR,EAAAO,oCAGbb,GAmBAX,EAAAA,gBAAkBA,SAASA,EAAoBA,EAAmBA,EAAoBA,EAAgBA,EAAoBA,EAAsBA,EAAeA,GACtK,GAAIM,IACAoB,WAAYA,EACZC,SAAUA,EACVnB,WAAYA,EACZoB,OAAQA,EACRC,WAAYA,EACZC,aAAcA,EACdC,MAAOA,EACPC,QAASA,GAGTrB,GACAJ,KAAM,sBACNK,SAAU,EACVC,KAAMC,KAAKC,MACXC,GAAIC,EAAAC,eACJC,uBAAwB,WACpB,GAAIC,IACAM,WAAYpB,EAAKoB,WACjBC,SAAUrB,EAAKqB,SACfnB,WAAYF,EAAKE,WACjBoB,OAAQtB,EAAKsB,OACbC,WAAYvB,EAAKuB,WACjBC,aAAcxB,EAAKwB,aACnBC,MAAOzB,EAAKyB,MACZC,QAAS1B,EAAK0B,QAElB,OAAOZ,IAEXd,KAAMA,EACNgB,iBACAC,iBAOJ,OAJsC,mBAA3BN,GAAAgB,yBACPtB,EAAMc,QAAUR,EAAAgB,wBAGbtB,IApHQZ,EAAAA,EAAAA,YAAAA,EAAAA,gBAARD,EAAAA,EAAAA,UAAAA,EAAAA,cAARA,UAAAA,YCAP,IAAOA,UAAP,SAAOA,GAAQA,GAAAA,IAAAA,SAAAA,GAOXoC,GAAAA,GAAAA,WAKIC,QAAAA,GAAmBA,GACfC,KAAKA,aAAeA,EAAQA,aAC5BA,KAAKA,eACLA,KAAKA,eAAiBA,KAAKA,aAAaA,iBAoEhDD,MAjEWA,GAAAA,UAAAA,OAAPA,SAAcA,EAA2BA,GAAAE,SAAAA,IAAAA,GAAAA,EACrCA,IAAIA,GAAsCA,KAAKA,eAAeA,OAW9DA,OATIA,MAAKA,aAAaA,wBAClBA,KAAKA,qBAAqBA,KAG1BA,KAAKA,eAAeA,EAAaA,GACjCA,KAAKA,oBAAoBA,KAAKA,cAGlCA,EAAQA,QAAQA,KAAKA,aACdA,EAAQA,SAGZF,EAAAA,UAAAA,aAAPA,WACIG,MAAOA,MAAKA,YAAYA,OAASA,GAG9BH,EAAAA,UAAAA,MAAPA,WACII,GAAIA,GAAUA,KAAKA,eAAeA,OAIlCA,OAHAA,MAAKA,eACLA,KAAKA,wBACLA,EAAQA,QAAQA,MACTA,EAAQA,SAGZJ,EAAAA,UAAAA,gBAAPA,WACIK,MAAOA,MAAKA,aAGRL,EAAAA,UAAAA,oBAARA,SAA4BA,GACxBM,GAAIA,IACAA,KAAMA,EACDA,OAAOA,SAACA,GAAwBA,MAAAA,GAAMA,gBACtCA,IAAIA,SAACA,GAAwBA,MAAAA,GAAMA,iBAGxCA,EAA6BA,EAC5BA,OAAOA,SAACA,GAAwBA,MAAAA,GAAMA,wBAA0BA,EAAMA,gBACtEA,IAAIA,SAACA,GAAwBA,MAAAA,GAAMA,wBAEpCA,IAASA,EAAMA,OAASA,IACxBA,EAAWA,MAAQA,GAEvBA,KAAKA,aAAaA,SAASA,IAGvBN,EAAAA,UAAAA,eAARA,SAAuBA,EAA2BA,GAC1CO,EAAiBA,kBAAkBA,KAAKA,YAAaA,GACrDA,KAAKA,YAAcA,EACbA,KAAKA,YAAYA,OAAOA,SAAAA,GAAKA,OAACA,EAAYA,OAAOA,KACjDA,KAAKA,YAAYA,OAASA,GACrBA,MAEPA,EACAA,KAAKA,YAAYA,KAAKA,GAEtBA,KAAKA,aAAeA,IAIlBP,EAAAA,kBAAdA,SAAgCA,EAAsBA,GAClDQ,MAAOA,GAAKA,KAAKA,SAAAA,GAAKA,MAAAA,GAAGA,OAAOA,MAExCR,IA5EaD,GAAAA,iBAAgBA,GAPlBpC,EAAAA,EAAAA,gBAAAA,EAAAA,oBAARA,UAAAA,YCAP,IAAOA,UAAP,SAAOA,GAAQA,GAAAA,IAAAA,SAAAA,GAOXoC,GAAAA,GAAAA,WAAAU,QAAAA,MAkCAA,MA9BWA,GAAAA,UAAAA,aAAPA,SAAoBA,EAAwCA,GAIxDC,MAHIA,IAAkBA,EAAeA,QAAUA,EAAeA,OAAOA,WAAaA,EAAeA,WAC7FA,KAAKA,gBAAgBA,EAAeA,OAAOA,WAAaA,EAAeA,SAASA,IAE7EA,MAGJD,EAAAA,UAAAA,WAAPA,SAAkBA,EAAoCA,GAIlDE,MAHIA,IAAgBA,EAAaA,QAAUA,EAAaA,OAAOA,WAAaA,IACxEA,KAAKA,gBAAgBA,EAAaA,OAAOA,WAAaA,EAAYA,UAE/DA,MAGJF,EAAAA,UAAAA,YAAPA,SAAmBA,GAGfG,MAFAA,MAAKA,QAAUA,EAERA,MAGJH,EAAAA,UAAAA,kBAAPA,WACII,MAAOA,GAAAA,QAAQA,YAAYA,sCAAsCA,KAAKA,gBAAiBA,KAAKA,UAGxFJ,EAAAA,UAAAA,cAARA,WAIIK,MAHKA,MAAKA,UACNA,KAAKA,YAEFA,KAAKA,SAEpBL,IAlCaV,GAAAA,mBAAkBA,GAPpBpC,EAAAA,EAAAA,gBAAAA,EAAAA,oBAARA,UAAAA,YCAP,IAAOA,UAAP,SAAOA,GAAQA,GAAAA,IAAAA,SAAAA,GASXoC,QAAAA,GAAoCA,EAA6BA,GAC7DgB,GAAIA,IACAA,KAAMA,EAAaA,KACnBA,WAAYA,EAAaA,WACzBA,SAAUA,EAAaA,OAE3BA,OAAOA,IAAIA,GAAAA,2BAA2BA,GAAIA,GAAcA,EAAiCA,GAAmBA,EAAwCA,GAZxJhB,GAAOA,GAA8BA,EAAAA,QAAQA,UAAUA,2BAI5CA,GAAAA,qBAEKA,EAAAA,oBAAmBA,CASnCA,IAAAA,GAAAA,WAOIiB,QAAAA,GAAYA,EAA6BA,GACrCC,KAAKA,iBAAmBA,EACxBA,KAAKA,OAASA,CAEdA,IAAIA,GAAUA,EAAaA,WACvBA,EAAeA,KAAKA,gBAAgBA,GACpCA,GAAUA,CAETA,GAGIA,EAAeA,IACpBA,KAAKA,gBAAkBA,EACvBA,KAAKA,QAASA,GAIdA,GAAUA,EARVA,KAAKA,QAASA,EAWdA,KAAKA,kBACLA,KAAKA,iBAAiBA,SAClBA,EACAA,KAAKA,OAAOA,KACZA,KAAKA,OAAOA,aACVA,KAAKA,OAAOA,OACdA,OACAA,EACAA,EAAAA,QAAQA,UAAUA,YAAYA,MAmI9CD,MA9HWA,GAAAA,UAAAA,KAAPA,SAAYA,GAIRE,GAFAA,EAAQA,QAAQA,QAEZA,KAAKA,OACLA,KAAKA,OAASA,KAAKA,OAAOA,SAC1BA,KAAKA,aAAaA,KAAKA,OAEtBA,CACDA,GAAIA,GAAOA,EAAAA,kBAAkBA,KAAKA,iBAAiBA,YAAYA,EAAQA,KACvEA,MAAKA,OAASA,KAAKA,OAAOA,QACtBA,QAASA,EAAQA,QAAQA,IAAIA,GAC7BA,KAAMA,IAEVA,KAAKA,oBAINF,EAAAA,UAAAA,OAAPA,SAAcA,GACNG,EAAQA,KAAOA,EAAAA,iBAAiBA,QAAUA,KAAKA,gBAAgBA,cAC/DA,KAAKA,WAAWA,EAAQA,UACjBA,KAAKA,gBAAgBA,UAC5BA,KAAKA,aAAaA,OAAOA,MAEpBA,EAAQA,MAAQA,EAAQA,KAAOA,EAAAA,iBAAiBA,OACjDA,KAAKA,cAAwCA,EAAEA,KAAKA,GAAUA,YAAaA,mBAE3EA,EAAQA,KAAOA,EAAAA,iBAAiBA,UAChCA,KAAKA,kBAAkBA,EAAQA,YAKpCH,EAAAA,UAAAA,QAAPA,WACQI,KAAKA,gBAAgBA,YACrBA,KAAKA,aAAaA,WAInBJ,EAAAA,UAAAA,yBAAPA,SAAgCA,GAC5BK,MAAKA,MAAKA,gBAAgBA,4BAGnBA,KAAKA,aAAaA,yBAAyBA,GAHlDA,QAMGL,EAAAA,UAAAA,WAAPA,SAAkBA,GACVM,KAAKA,gBAAgBA,eACrBA,KAAKA,aAAaA,WAAWA,IAI9BN,EAAAA,UAAAA,cAAPA,SAAqBA,GACbO,KAAKA,gBAAgBA,kBACrBA,KAAKA,aAAaA,cAAcA,IAIjCP,EAAAA,UAAAA,kBAAPA,SAAyBA,GACjBQ,KAAKA,gBAAgBA,sBACrBA,KAAKA,aAAaA,kBAAkBA,IAIrCR,EAAAA,UAAAA,iBAAPA,WACQS,KAAKA,gBAAgBA,qBACrBA,KAAKA,aAAaA,oBAInBT,EAAAA,UAAAA,YAAPA,SAAmBA,GACfU,MAAIA,MAAKA,gBAAgBA,eACdA,KAAKA,aAAaA,YAAYA,GADzCA,QAKGV,EAAAA,UAAAA,OAAPA,WACIW,MAAwBA,MAAKA,QAGjCX,OAAAA,eAAYA,EAAAA,UAAAA,aCwUJY,IDxURZ,WACIa,MAAIA,MAAKA,OAATA,OACsCA,KAAKA,QC2UvCC,YAAY,EACZC,cAAc,IDzUtBf,OAAAA,eAAYA,EAAAA,UAAAA,gBC4UJY,ID5URZ,WACIgB,MAAKA,MAAKA,OACcA,KAAKA,OAD7BA,QCgVIF,YAAY,EACZC,cAAc,ID7Udf,EAAAA,UAAAA,gBAARA,SAAwBA,GACpBiB,GAAIA,GAASA,KAAKA,OAASA,KAAKA,aAAeA,KAAKA,SACpDA,OAAOA,IAAUA,EAAEA,WAAWA,EAAOA,KAGjCjB,EAAAA,UAAAA,gBAARA,SAAwBA,GACpBkB,GAAIA,EAEAA,IAAKA,GADDA,GAAeA,EAAcA,kBAAkBA,OAC1CA,EAAIA,EAAOA,EAAJA,EAAkBA,IAC9BA,GAAIA,EAAcA,kBAAkBA,GAAGA,UAAYA,EAC/CA,MAAOA,EAInBA,OAAOA,IAGHlB,EAAAA,UAAAA,gBAARA,WACImB,GAAIA,GAAYA,KAAKA,sBACrBA,KAAKA,GAAIA,KAAOA,GACZA,KAAKA,GAAOA,EAAUA,IAItBnB,EAAAA,UAAAA,qBAARA,WAIIoB,IAAKA,GAHDA,MACAA,EAAeA,KAAKA,gBACpBA,EAAYA,KAAKA,UACZA,EAAIA,EAAQA,GAALA,EAAmBA,IAAKA,CACpCA,GAAIA,GAAkBA,EAAcA,kBAAkBA,GAAGA,SACrDA,GAAEA,WAAWA,IACbA,EAAEA,OAAOA,EAAWA,EAAgBA,IAG5CA,MAAOA,IAEfpB,IAtKajB,GAAAA,cAAaA,GAlBfpC,EAAAA,EAAAA,gBAAAA,EAAAA,oBAARA,UAAAA,YEAP,IAAOA,UAAP,SAAOA,GAAQA,GAAAA,IAAAA,SAAAA,GAIXoC,GAAOA,GAAkBA,EAAQA,QAAQA,UAAUA,gBAEnDA,EAAAA,WACIsC,QAAAA,GACYA,EACAA,EACAA,EACAA,GAHAC,KAAAA,cAAAA,EACAA,KAAAA,WAAAA,EACAA,KAAAA,iBAAAA,EACAA,KAAAA,OAAAA,EA2EhBD,MAzEWA,GAAAA,UAAAA,KAAPA,SAAYA,GAAZE,GAAAA,GAAAA,IACQA,MAAKA,cAAcA,MACnBA,KAAKA,cAAcA,WAAMA,MAAAA,GAAKA,cAAcA,KAAKA,MAIlDF,EAAAA,UAAAA,QAAPA,WAAAG,GAAAA,GAAAA,IACQA,MAAKA,cAAcA,SACnBA,KAAKA,cAAcA,WAAMA,MAAAA,GAAKA,cAAcA,aAG7CH,EAAAA,UAAAA,OAAPA,SAAcA,GAAdI,GAAAA,GAAAA,IACQA,MAAKA,cAAcA,QACnBA,KAAKA,cAAcA,WAAMA,MAAAA,GAAKA,cAAcA,OAAOA,MAGpDJ,EAAAA,UAAAA,WAAPA,SAAkBA,GAAlBK,GAAAA,GAAAA,IACQA,MAAKA,cAAcA,YACnBA,KAAKA,cAAcA,WAAMA,MAAAA,GAAKA,cAAcA,WAAWA,MAGxDL,EAAAA,UAAAA,cAAPA,SAAqBA,GAArBM,GAAAA,GAAAA,IACQA,MAAKA,cAAcA,eACnBA,KAAKA,cAAcA,WAAMA,MAAAA,GAAKA,cAAcA,cAAcA,MAG3DN,EAAAA,UAAAA,kBAAPA,SAAyBA,GAAzBO,GAAAA,GAAAA,IACQA,MAAKA,cAAcA,mBACnBA,KAAKA,cAAcA,WAAMA,MAAAA,GAAKA,cAAcA,kBAAkBA,MAG/DP,EAAAA,UAAAA,iBAAPA,WAAAQ,GAAAA,GAAAA,IACQA,MAAKA,cAAcA,kBACnBA,KAAKA,cAAcA,WAAMA,MAAAA,GAAKA,cAAcA,sBAG7CR,EAAAA,UAAAA,YAAPA,SAAmBA,GAAnBS,GAAAA,GAAAA,IACIA,OAAIA,MAAKA,cAAcA,YACZA,KAAKA,cAAcA,WAAMA,MAAAA,GAAKA,cAAcA,YAAYA,KADnEA,QAIGT,EAAAA,UAAAA,yBAAPA,SAAgCA,GAAhCU,GAAAA,GAAAA,IACIA,OAAIA,MAAKA,cAAcA,yBACZA,KAAKA,cAAcA,WAAMA,MAAAA,GAAKA,cAAcA,yBAAyBA,KADhFA,QAIGV,EAAAA,UAAAA,OAAPA,WACIW,GAAIA,GAA0CA,KAAKA,aACnDA,OAAOA,GAAOA,OAASA,EAAOA,SAAWA,GAGrCX,EAAAA,UAAAA,cAARA,SAAsBA,GAClBY,IACIA,MAAOA,KACTA,MAAOA,IACAA,KAAKA,OAINA,KAAKA,kBACLA,KAAKA,iBAAiBA,SAClBA,EACAA,KAAKA,WAAWA,KAChBA,KAAKA,WAAWA,OAChBA,KAAKA,WAAWA,WAChBA,EAAUA,SACVA,EAAUA,WACVA,EAAUA,aACVA,EAAUA,MACVA,EAAUA,WAI9BZ,IAhFatC,GAAAA,2BAA0BA,GAN5BpC,EAAAA,EAAAA,gBAAAA,EAAAA,oBAARA,UAAAA,YCAP,IAAOA,UAAP,SAAOA,GAAQA,GAAAA,IAAAA,SAAAA,GAAcoC,GAAAA,IAAAA,SAAAA,GACzBmD,GAAIA,GAAgDA,SAACA,GACjDA,OACIA,OAAQA,SAACA,GACDA,EAAOA,QACPA,EAAOA,QACHA,SAAUA,EAAQA,SAClBA,UAAWA,EAAQA,UACnBA,KAAMA,EAAQA,MAAQA,EAAAA,iBAAiBA,QAInDA,QAASA,WACDA,EAAOA,SACPA,EAAOA,WAGfA,yBAA0BA,SAACA,GACvBA,MAAIA,GAAOA,yBACAA,EAAOA,yBAAyBA,GAD3CA,UAORA,EAAiCA,SAACA,GAClCA,SAGJA,GAAAA,kBAAkBA,MACdA,QAASA,QACTA,UAAWA,EACXA,YAAaA,KAhCQnD,EAAAA,EAAAA,OAAAA,EAAAA,WAAdpC,EAAAA,EAAAA,gBAAAA,EAAAA,oBAARA,UAAAA,YCAP,IAAOA,UAAP,SAAOA,GAAQA,GAAAA,IAAAA,SAAAA,GAAcoC,GAAAA,IAAAA,SAAAA,GACzBoD,GAAIA,GAAiCA,SAACA,GAClCA,OACIA,yBAA0BA,WAAMA,MAAAA,IAAIA,GAAAA,QAAQA,oBAC5CA,uBAAwBA,WAAMA,MAAAA,IAAIA,GAAAA,kBAAmBA,aAAcA,MAI3EA,GAAAA,kBAAkBA,MACdA,QAASA,QACTA,YAAaA,KAVQpD,EAAAA,EAAAA,OAAAA,EAAAA,WAAdpC,EAAAA,EAAAA,gBAAAA,EAAAA,oBAARA,UAAAA","file":"VisualsExtensibility.min.js","sourcesContent":["/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.visuals.telemetry {\r\n    /**\r\n     * Creates a client-side Guid string.\r\n     * @returns A string representation of a Guid.\r\n     */\r\n    export function generateGuid(): string {\r\n        let guid = \"\",\r\n            idx = 0;\r\n\r\n        for (idx = 0; idx < 32; idx += 1) {\r\n            let guidDigitsItem = Math.random() * 16 | 0;\r\n            switch (idx) {\r\n                case 8:\r\n                case 12:\r\n                case 16:\r\n                case 20:\r\n                    guid += \"-\";\r\n                    break;\r\n            }\r\n            guid += guidDigitsItem.toString(16);\r\n        }\r\n\r\n        return guid;\r\n    }\r\n}","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.visuals.telemetry {\r\n\r\n    /**\r\n    * Event fired when a visual is loaded through the visual adapter\r\n    * @param name Name (guid) of the visual. \r\n    * @param apiVersion Api version used by the visual. \r\n    * @param custom Is the visual custom? \r\n    * @param parentId Id of the parent event \r\n    * @param isError True - action failed. \r\n    * @param errorSource Source of the error. PowerBI = PowerBI has a problem, External = External Service (e.g. on-prem AS server is down), User = User error (e.g. uploading too much and hitting resource limitations. \r\n    * @param errorCode PowerBI Error Code \r\n    *\r\n    * Generated by: Extensibility/events.bond\r\n    */\r\n\r\n    export declare var ExtensibilityVisualApiUsageLoggers: number;\r\n\r\n    export var ExtensibilityVisualApiUsage = function(name: string, apiVersion: string, custom: boolean, parentId: string, isError: boolean = false, errorSource: ErrorSource = undefined, errorCode: string = undefined): ITelemetryEventI<IPBIExtensibilityVisualApiUsage> {\r\n        var info = {\r\n            name: name,\r\n            apiVersion: apiVersion,\r\n            custom: custom,\r\n            parentId: parentId,\r\n            isError: isError,\r\n            errorSource: errorSource,\r\n            errorCode: errorCode,\r\n        };\r\n\r\n        var event: ITelemetryEventI<IPBIExtensibilityVisualApiUsage> = {\r\n            name: 'PBI.Extensibility.VisualApiUsage',\r\n            category: TelemetryCategory.CustomerAction,\r\n            time: Date.now(),\r\n            id: generateGuid(),\r\n            getFormattedInfoObject: function() {\r\n                var formattedObject = {\r\n                    name: info.name,\r\n                    apiVersion: info.apiVersion,\r\n                    custom: info.custom,\r\n                    parentId: info.parentId,\r\n                    isError: info.isError,\r\n                };\r\n                if (typeof info.errorSource !== 'undefined') {\r\n                    formattedObject['errorSource'] = ErrorSource[info.errorSource];\r\n                }\r\n                if (typeof info.errorCode !== 'undefined') {\r\n                    formattedObject['errorCode'] = info.errorCode;\r\n                }\r\n                return formattedObject;\r\n            },\r\n            info: info,\r\n            privateFields: [],\r\n            orgInfoFields: []\r\n        };\r\n\r\n        if (typeof ExtensibilityVisualApiUsageLoggers !== 'undefined') {\r\n            event.loggers = ExtensibilityVisualApiUsageLoggers;\r\n        }\r\n\r\n        return event;\r\n    };\r\n\r\n    /**\r\n    * Event fired for uncaught exception in IVisual.\r\n    * @param visualType Type of the visual. \r\n    * @param isCustom Is the visual custom? \r\n    * @param apiVersion Api version used by the visual \r\n    * @param source Source URL \r\n    * @param lineNumber Line number \r\n    * @param columnNumber Column number \r\n    * @param stack Stack trace \r\n    * @param message Error exception message. \r\n    *\r\n    * Generated by JsCommon/commonTelemetryEvents.bond\r\n    */\r\n\r\n    export declare var VisualExceptionLoggers: number;\r\n\r\n    export var VisualException = function(visualType: string, isCustom: boolean, apiVersion: string, source: string, lineNumber: number, columnNumber: number, stack: string, message: string): ITelemetryEventI<IPBIVisualException> {\r\n        var info = {\r\n            visualType: visualType,\r\n            isCustom: isCustom,\r\n            apiVersion: apiVersion,\r\n            source: source,\r\n            lineNumber: lineNumber,\r\n            columnNumber: columnNumber,\r\n            stack: stack,\r\n            message: message,\r\n        };\r\n\r\n        var event: ITelemetryEventI<IPBIVisualException> = {\r\n            name: 'PBI.VisualException',\r\n            category: TelemetryCategory.CriticalError,\r\n            time: Date.now(),\r\n            id: generateGuid(),\r\n            getFormattedInfoObject: function() {\r\n                var formattedObject = {\r\n                    visualType: info.visualType,\r\n                    isCustom: info.isCustom,\r\n                    apiVersion: info.apiVersion,\r\n                    source: info.source,\r\n                    lineNumber: info.lineNumber,\r\n                    columnNumber: info.columnNumber,\r\n                    stack: info.stack,\r\n                    message: info.message,\r\n                };\r\n                return formattedObject;\r\n            },\r\n            info: info,\r\n            privateFields: [],\r\n            orgInfoFields: []\r\n        };\r\n\r\n        if (typeof VisualExceptionLoggers !== 'undefined') {\r\n            event.loggers = VisualExceptionLoggers;\r\n        }\r\n\r\n        return event;\r\n    };\r\n}","/*\r\n*  Power BI Visualizations\r\n*\r\n*  Copyright (c) Microsoft Corporation\r\n*  All rights reserved. \r\n*  MIT License\r\n*\r\n*  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n*  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n*  in the Software without restriction, including without limitation the rights\r\n*  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n*  copies of the Software, and to permit persons to whom the Software is\r\n*  furnished to do so, subject to the following conditions:\r\n*   \r\n*  The above copyright notice and this permission notice shall be included in \r\n*  all copies or substantial portions of the Software.\r\n*   \r\n*  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n*  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n*  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n*  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n*  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n*  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n*  THE SOFTWARE.\r\n*/\r\n\r\nmodule powerbi.extensibility {\r\n    import ISelectionId = visuals.ISelectionId;\r\n    \r\n    export interface SelectionManagerOptions{\r\n        hostServices: IVisualHostServices;\r\n    };\r\n\r\n    export class SelectionManager implements ISelectionManager {\r\n        private selectedIds: ISelectionId[];\r\n        private hostServices: IVisualHostServices;\r\n        private promiseFactory: IPromiseFactory;\r\n\r\n        public constructor(options: SelectionManagerOptions) {\r\n            this.hostServices = options.hostServices;\r\n            this.selectedIds = [];\r\n            this.promiseFactory = this.hostServices.promiseFactory();\r\n        }\r\n        \r\n        public select(selectionId: ISelectionId, multiSelect: boolean = false): IPromise<ISelectionId[]> {\r\n            let defered: IDeferred<data.Selector[]> = this.promiseFactory.defer();\r\n            \r\n            if (this.hostServices.shouldRetainSelection()) {\r\n                this.sendSelectionToHost([selectionId]);\r\n            }\r\n            else {\r\n                this.selectInternal(selectionId, multiSelect);\r\n                this.sendSelectionToHost(this.selectedIds);\r\n            }\r\n\r\n            defered.resolve(this.selectedIds);\r\n            return defered.promise;\r\n        }\r\n\r\n        public hasSelection(): boolean {\r\n            return this.selectedIds.length > 0;\r\n        }\r\n\r\n        public clear(): IPromise<{}> {\r\n            let defered = this.promiseFactory.defer();\r\n            this.selectedIds = [];\r\n            this.sendSelectionToHost([]);\r\n            defered.resolve(null);\r\n            return defered.promise;\r\n        }\r\n\r\n        public getSelectionIds(): ISelectionId[] {\r\n            return this.selectedIds;\r\n        }\r\n\r\n        private sendSelectionToHost(ids: ISelectionId[]) {\r\n            let selectArgs: SelectEventArgs = {\r\n                data: ids\r\n                    .filter((value: ISelectionId) => value.hasIdentity())\r\n                    .map((value: ISelectionId) => value.getSelector())\r\n            };\r\n\r\n            let data2: SelectorsByColumn[] = ids\r\n                .filter((value: ISelectionId) => value.getSelectorsByColumn() && value.hasIdentity())\r\n                .map((value: ISelectionId) => value.getSelectorsByColumn());\r\n\r\n            if (data2 && data2.length > 0)\r\n                selectArgs.data2 = data2;\r\n\r\n            this.hostServices.onSelect(selectArgs);\r\n        }\r\n\r\n        private selectInternal(selectionId: ISelectionId, multiSelect: boolean) {\r\n            if (SelectionManager.containsSelection(this.selectedIds, selectionId)) {\r\n                this.selectedIds = multiSelect\r\n                    ? this.selectedIds.filter(d => !selectionId.equals(d))\r\n                    : this.selectedIds.length > 1\r\n                        ? [selectionId] : [];\r\n            } else {\r\n                if (multiSelect)\r\n                    this.selectedIds.push(selectionId);\r\n                else\r\n                    this.selectedIds = [selectionId];\r\n            }\r\n        }\r\n\r\n        public static containsSelection(list: ISelectionId[], id: ISelectionId) {\r\n            return list.some(d => id.equals(d));\r\n        }\r\n    }\r\n} ","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.extensibility {\r\n    import ISelectionId = visuals.ISelectionId;\r\n    \r\n    /**\r\n     * This class is designed to simplify the creation of SelectionId objects\r\n     * It allows chaining to build up an object before calling 'create' to build a SelectionId\r\n     */\r\n    export class SelectionIdBuilder implements ISelectionIdBuilder {\r\n        private dataMap: SelectorForColumn;\r\n        private measure: string;\r\n\r\n        public withCategory(categoryColumn: DataViewCategoryColumn, index: number): this{\r\n            if (categoryColumn && categoryColumn.source && categoryColumn.source.queryName && categoryColumn.identity)\r\n                this.ensureDataMap()[categoryColumn.source.queryName] = categoryColumn.identity[index];\r\n            \r\n            return this;\r\n        }\r\n\r\n        public withSeries(seriesColumn: DataViewValueColumns, valueColumn: DataViewValueColumn | DataViewValueColumnGroup): this {\r\n            if (seriesColumn && seriesColumn.source && seriesColumn.source.queryName && valueColumn)\r\n                this.ensureDataMap()[seriesColumn.source.queryName] = valueColumn.identity;\r\n\r\n            return this;\r\n        }\r\n\r\n        public withMeasure(measureId: string): this {\r\n            this.measure = measureId;\r\n\r\n            return this;\r\n        }\r\n\r\n        public createSelectionId(): ISelectionId {\r\n            return visuals.SelectionId.createWithSelectorForColumnAndMeasure(this.ensureDataMap(), this.measure);\r\n        }\r\n\r\n        private ensureDataMap(): SelectorForColumn {\r\n            if (!this.dataMap)\r\n                this.dataMap = {};\r\n\r\n            return this.dataMap;\r\n        }\r\n    }\r\n}\r\n","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.extensibility {\r\n\r\n    import ITelemetryService = visuals.telemetry.ITelemetryService;\r\n    import ExtensibilityVisualApiUsage = visuals.telemetry.ExtensibilityVisualApiUsage;\r\n    import VisualTelemetryInfo = visuals.telemetry.VisualTelemetryInfo;\r\n\r\n    //TODO: refactor this into a service\r\n    export let visualApiVersions: VisualVersion[] = [];\r\n\r\n    export function createVisualAdapter(visualPlugin: IVisualPlugin, telemetryService?: powerbi.ITelemetryService | ITelemetryService): powerbi.IVisual {\r\n        let visualTelemetryInfo: VisualTelemetryInfo = {\r\n            name: visualPlugin.name,\r\n            apiVersion: visualPlugin.apiVersion,\r\n            custom: !!visualPlugin.custom\r\n        };\r\n        return new VisualSafeExecutionWrapper(new VisualAdapter(visualPlugin, <ITelemetryService>telemetryService), visualTelemetryInfo, <ITelemetryService>telemetryService);\r\n    }\r\n\r\n    export class VisualAdapter implements powerbi.IVisual, WrappedVisual {\r\n        private visual: powerbi.IVisual | powerbi.extensibility.IVisual;\r\n        private apiVersionIndex: number;\r\n        private plugin: powerbi.IVisualPlugin;\r\n        private telemetryService: ITelemetryService;\r\n        private legacy: boolean;\r\n\r\n        constructor(visualPlugin: IVisualPlugin, telemetryService?: ITelemetryService) {\r\n            this.telemetryService = telemetryService;\r\n            this.plugin = visualPlugin;\r\n            \r\n            let version = visualPlugin.apiVersion;\r\n            let versionIndex = this.getVersionIndex(version);\r\n            let isError = false;\r\n            \r\n            if (!version) {\r\n                this.legacy = true;\r\n            }\r\n            else if (versionIndex > -1) {\r\n                this.apiVersionIndex = versionIndex;\r\n                this.legacy = false;\r\n            }\r\n            else {\r\n                debug.assertFail(\"The API version '\" + version + \"' is invalid.\");\r\n                isError = true;\r\n            }\r\n\r\n            if (this.telemetryService) {\r\n                this.telemetryService.logEvent(\r\n                    ExtensibilityVisualApiUsage,\r\n                    this.plugin.name,\r\n                    this.plugin.apiVersion,\r\n                    !!this.plugin.custom,\r\n                    undefined,\r\n                    isError,\r\n                    visuals.telemetry.ErrorSource.User\r\n                );\r\n            }\r\n        }\r\n\r\n        public init(options: powerbi.VisualInitOptions) {\r\n\r\n            options.element.empty();\r\n\r\n            if (this.legacy) {\r\n                this.visual = this.plugin.create();\r\n                this.visualLegacy.init(options);\r\n            }\r\n            else {\r\n                let host = visualApiVersions[this.apiVersionIndex].hostAdapter(options.host);\r\n                this.visual = this.plugin.create({\r\n                    element: options.element.get(0),\r\n                    host: host\r\n                });\r\n                this.overloadMethods();\r\n            }\r\n        }\r\n\r\n        public update(options: powerbi.VisualUpdateOptions): void {\r\n            if (options.type & VisualUpdateType.Resize && this.visualHasMethod('onResizing')) {\r\n                this.onResizing(options.viewport);\r\n            } else if (this.visualHasMethod('update')) {\r\n                this.visualLegacy.update(options);\r\n            } else {\r\n                if (!options.type || options.type & VisualUpdateType.Data) {\r\n                    this.onDataChanged(<VisualDataChangedOptions>_.pick(options, ['dataViews', 'operationKind']));\r\n                }\r\n                if (options.type & VisualUpdateType.ViewMode) {\r\n                    this.onViewModeChanged(options.viewMode);\r\n                }\r\n            }\r\n        }\r\n\r\n        public destroy(): void {\r\n            if (this.visualHasMethod('destroy')) {\r\n                this.visualLegacy.destroy();\r\n            }\r\n        }\r\n\r\n        public enumerateObjectInstances(options: EnumerateVisualObjectInstancesOptions): VisualObjectInstanceEnumeration {\r\n            if (!this.visualHasMethod('enumerateObjectInstances')) {\r\n                return;\r\n            }\r\n            return this.visualLegacy.enumerateObjectInstances(options);\r\n        }\r\n\r\n        public onResizing(finalViewport: IViewport): void {\r\n            if (this.visualHasMethod('onResizing')) {\r\n                this.visualLegacy.onResizing(finalViewport);\r\n            }\r\n        }\r\n\r\n        public onDataChanged(options: VisualDataChangedOptions): void {\r\n            if (this.visualHasMethod('onDataChanged')) {\r\n                this.visualLegacy.onDataChanged(options);\r\n            }\r\n        }\r\n\r\n        public onViewModeChanged(viewMode: ViewMode): void {\r\n            if (this.visualHasMethod('onViewModeChanged')) {\r\n                this.visualLegacy.onViewModeChanged(viewMode);\r\n            }\r\n        }\r\n\r\n        public onClearSelection(): void {\r\n            if (this.visualHasMethod('onClearSelection')) {\r\n                this.visualLegacy.onClearSelection();\r\n            }\r\n        }\r\n\r\n        public canResizeTo(viewport: IViewport): boolean {\r\n            if (this.visualHasMethod('canResizeTo')) {\r\n                return this.visualLegacy.canResizeTo(viewport);\r\n            }\r\n        }\r\n\r\n        public unwrap(): powerbi.IVisual {\r\n            return <powerbi.IVisual>this.visual;\r\n        }\r\n\r\n        private get visualNew(): powerbi.extensibility.IVisual {\r\n            if (this.legacy) return;\r\n            return <powerbi.extensibility.IVisual>this.visual;\r\n        }\r\n\r\n        private get visualLegacy(): powerbi.IVisual {\r\n            if (!this.legacy) return;\r\n            return <powerbi.IVisual>this.visual;\r\n        }\r\n\r\n        private visualHasMethod(methodName: string): boolean {\r\n            let visual = this.legacy ? this.visualLegacy : this.visualNew;\r\n            return visual && _.isFunction(visual[methodName]);\r\n        }\r\n\r\n        private getVersionIndex(version: string): number {\r\n            if (version) {\r\n                let versionCount = extensibility.visualApiVersions.length;\r\n                for (let i = 0; i < versionCount; i++) {\r\n                    if (extensibility.visualApiVersions[i].version === version) {\r\n                        return i;\r\n                    }\r\n                }\r\n            }\r\n            return -1;\r\n        }\r\n\r\n        private overloadMethods(): void {\r\n            let overloads = this.getCompiledOverloads();\r\n            for (let key in overloads) {\r\n                this[key] = overloads[key];\r\n            }\r\n        }\r\n\r\n        private getCompiledOverloads(): VisualVersionOverloads {\r\n            let overloads: VisualVersionOverloads = {};\r\n            let versionIndex = this.apiVersionIndex;\r\n            let visualNew = this.visualNew;\r\n            for (let i = 0; i <= versionIndex; i++) {\r\n                let overloadFactory = extensibility.visualApiVersions[i].overloads;\r\n                if (_.isFunction(overloadFactory)) {\r\n                    _.assign(overloads, overloadFactory(visualNew));\r\n                }\r\n            }\r\n            return overloads;\r\n        }\r\n    }\r\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved.\n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *\n *  The above copyright notice and this permission notice shall be included in\n *  all copies or substantial portions of the Software.\n *\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n///<reference path=\"../../Typedefs/jquery/jquery.d.ts\"/>\n///<reference path=\"../../Typedefs/globalize/globalize.d.ts\"/>\n///<reference path=\"../../Typedefs/lodash/lodash.d.ts\"/>\n/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved.\n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *\n *  The above copyright notice and this permission notice shall be included in\n *  all copies or substantial portions of the Software.\n *\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\nvar powerbi;\n(function (powerbi) {\n    var visuals;\n    (function (visuals) {\n        var telemetry;\n        (function (telemetry) {\n            /**\n             * Creates a client-side Guid string.\n             * @returns A string representation of a Guid.\n             */\n            function generateGuid() {\n                var guid = \"\", idx = 0;\n                for (idx = 0; idx < 32; idx += 1) {\n                    var guidDigitsItem = Math.random() * 16 | 0;\n                    switch (idx) {\n                        case 8:\n                        case 12:\n                        case 16:\n                        case 20:\n                            guid += \"-\";\n                            break;\n                    }\n                    guid += guidDigitsItem.toString(16);\n                }\n                return guid;\n            }\n            telemetry.generateGuid = generateGuid;\n        })(telemetry = visuals.telemetry || (visuals.telemetry = {}));\n    })(visuals = powerbi.visuals || (powerbi.visuals = {}));\n})(powerbi || (powerbi = {}));\n/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved.\n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *\n *  The above copyright notice and this permission notice shall be included in\n *  all copies or substantial portions of the Software.\n *\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\nvar powerbi;\n(function (powerbi) {\n    var visuals;\n    (function (visuals) {\n        var telemetry;\n        (function (telemetry) {\n            telemetry.ExtensibilityVisualApiUsage = function (name, apiVersion, custom, parentId, isError, errorSource, errorCode) {\n                if (isError === void 0) { isError = false; }\n                if (errorSource === void 0) { errorSource = undefined; }\n                if (errorCode === void 0) { errorCode = undefined; }\n                var info = {\n                    name: name,\n                    apiVersion: apiVersion,\n                    custom: custom,\n                    parentId: parentId,\n                    isError: isError,\n                    errorSource: errorSource,\n                    errorCode: errorCode,\n                };\n                var event = {\n                    name: 'PBI.Extensibility.VisualApiUsage',\n                    category: 1 /* CustomerAction */,\n                    time: Date.now(),\n                    id: telemetry.generateGuid(),\n                    getFormattedInfoObject: function () {\n                        var formattedObject = {\n                            name: info.name,\n                            apiVersion: info.apiVersion,\n                            custom: info.custom,\n                            parentId: info.parentId,\n                            isError: info.isError,\n                        };\n                        if (typeof info.errorSource !== 'undefined') {\n                            formattedObject['errorSource'] = telemetry.ErrorSource[info.errorSource];\n                        }\n                        if (typeof info.errorCode !== 'undefined') {\n                            formattedObject['errorCode'] = info.errorCode;\n                        }\n                        return formattedObject;\n                    },\n                    info: info,\n                    privateFields: [],\n                    orgInfoFields: []\n                };\n                if (typeof telemetry.ExtensibilityVisualApiUsageLoggers !== 'undefined') {\n                    event.loggers = telemetry.ExtensibilityVisualApiUsageLoggers;\n                }\n                return event;\n            };\n            telemetry.VisualException = function (visualType, isCustom, apiVersion, source, lineNumber, columnNumber, stack, message) {\n                var info = {\n                    visualType: visualType,\n                    isCustom: isCustom,\n                    apiVersion: apiVersion,\n                    source: source,\n                    lineNumber: lineNumber,\n                    columnNumber: columnNumber,\n                    stack: stack,\n                    message: message,\n                };\n                var event = {\n                    name: 'PBI.VisualException',\n                    category: 2 /* CriticalError */,\n                    time: Date.now(),\n                    id: telemetry.generateGuid(),\n                    getFormattedInfoObject: function () {\n                        var formattedObject = {\n                            visualType: info.visualType,\n                            isCustom: info.isCustom,\n                            apiVersion: info.apiVersion,\n                            source: info.source,\n                            lineNumber: info.lineNumber,\n                            columnNumber: info.columnNumber,\n                            stack: info.stack,\n                            message: info.message,\n                        };\n                        return formattedObject;\n                    },\n                    info: info,\n                    privateFields: [],\n                    orgInfoFields: []\n                };\n                if (typeof telemetry.VisualExceptionLoggers !== 'undefined') {\n                    event.loggers = telemetry.VisualExceptionLoggers;\n                }\n                return event;\n            };\n        })(telemetry = visuals.telemetry || (visuals.telemetry = {}));\n    })(visuals = powerbi.visuals || (powerbi.visuals = {}));\n})(powerbi || (powerbi = {}));\n/*\n*  Power BI Visualizations\n*\n*  Copyright (c) Microsoft Corporation\n*  All rights reserved.\n*  MIT License\n*\n*  Permission is hereby granted, free of charge, to any person obtaining a copy\n*  of this software and associated documentation files (the \"\"Software\"\"), to deal\n*  in the Software without restriction, including without limitation the rights\n*  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n*  copies of the Software, and to permit persons to whom the Software is\n*  furnished to do so, subject to the following conditions:\n*\n*  The above copyright notice and this permission notice shall be included in\n*  all copies or substantial portions of the Software.\n*\n*  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n*  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n*  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n*  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n*  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n*  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n*  THE SOFTWARE.\n*/\nvar powerbi;\n(function (powerbi) {\n    var extensibility;\n    (function (extensibility) {\n        ;\n        var SelectionManager = (function () {\n            function SelectionManager(options) {\n                this.hostServices = options.hostServices;\n                this.selectedIds = [];\n                this.promiseFactory = this.hostServices.promiseFactory();\n            }\n            SelectionManager.prototype.select = function (selectionId, multiSelect) {\n                if (multiSelect === void 0) { multiSelect = false; }\n                var defered = this.promiseFactory.defer();\n                if (this.hostServices.shouldRetainSelection()) {\n                    this.sendSelectionToHost([selectionId]);\n                }\n                else {\n                    this.selectInternal(selectionId, multiSelect);\n                    this.sendSelectionToHost(this.selectedIds);\n                }\n                defered.resolve(this.selectedIds);\n                return defered.promise;\n            };\n            SelectionManager.prototype.hasSelection = function () {\n                return this.selectedIds.length > 0;\n            };\n            SelectionManager.prototype.clear = function () {\n                var defered = this.promiseFactory.defer();\n                this.selectedIds = [];\n                this.sendSelectionToHost([]);\n                defered.resolve(null);\n                return defered.promise;\n            };\n            SelectionManager.prototype.getSelectionIds = function () {\n                return this.selectedIds;\n            };\n            SelectionManager.prototype.sendSelectionToHost = function (ids) {\n                var selectArgs = {\n                    data: ids\n                        .filter(function (value) { return value.hasIdentity(); })\n                        .map(function (value) { return value.getSelector(); })\n                };\n                var data2 = ids\n                    .filter(function (value) { return value.getSelectorsByColumn() && value.hasIdentity(); })\n                    .map(function (value) { return value.getSelectorsByColumn(); });\n                if (data2 && data2.length > 0)\n                    selectArgs.data2 = data2;\n                this.hostServices.onSelect(selectArgs);\n            };\n            SelectionManager.prototype.selectInternal = function (selectionId, multiSelect) {\n                if (SelectionManager.containsSelection(this.selectedIds, selectionId)) {\n                    this.selectedIds = multiSelect\n                        ? this.selectedIds.filter(function (d) { return !selectionId.equals(d); })\n                        : this.selectedIds.length > 1\n                            ? [selectionId] : [];\n                }\n                else {\n                    if (multiSelect)\n                        this.selectedIds.push(selectionId);\n                    else\n                        this.selectedIds = [selectionId];\n                }\n            };\n            SelectionManager.containsSelection = function (list, id) {\n                return list.some(function (d) { return id.equals(d); });\n            };\n            return SelectionManager;\n        })();\n        extensibility.SelectionManager = SelectionManager;\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\n})(powerbi || (powerbi = {}));\n/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved.\n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *\n *  The above copyright notice and this permission notice shall be included in\n *  all copies or substantial portions of the Software.\n *\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\nvar powerbi;\n(function (powerbi) {\n    var extensibility;\n    (function (extensibility) {\n        /**\n         * This class is designed to simplify the creation of SelectionId objects\n         * It allows chaining to build up an object before calling 'create' to build a SelectionId\n         */\n        var SelectionIdBuilder = (function () {\n            function SelectionIdBuilder() {\n            }\n            SelectionIdBuilder.prototype.withCategory = function (categoryColumn, index) {\n                if (categoryColumn && categoryColumn.source && categoryColumn.source.queryName && categoryColumn.identity)\n                    this.ensureDataMap()[categoryColumn.source.queryName] = categoryColumn.identity[index];\n                return this;\n            };\n            SelectionIdBuilder.prototype.withSeries = function (seriesColumn, valueColumn) {\n                if (seriesColumn && seriesColumn.source && seriesColumn.source.queryName && valueColumn)\n                    this.ensureDataMap()[seriesColumn.source.queryName] = valueColumn.identity;\n                return this;\n            };\n            SelectionIdBuilder.prototype.withMeasure = function (measureId) {\n                this.measure = measureId;\n                return this;\n            };\n            SelectionIdBuilder.prototype.createSelectionId = function () {\n                return powerbi.visuals.SelectionId.createWithSelectorForColumnAndMeasure(this.ensureDataMap(), this.measure);\n            };\n            SelectionIdBuilder.prototype.ensureDataMap = function () {\n                if (!this.dataMap)\n                    this.dataMap = {};\n                return this.dataMap;\n            };\n            return SelectionIdBuilder;\n        })();\n        extensibility.SelectionIdBuilder = SelectionIdBuilder;\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\n})(powerbi || (powerbi = {}));\n/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved.\n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *\n *  The above copyright notice and this permission notice shall be included in\n *  all copies or substantial portions of the Software.\n *\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\nvar powerbi;\n(function (powerbi) {\n    var extensibility;\n    (function (extensibility) {\n        var ExtensibilityVisualApiUsage = powerbi.visuals.telemetry.ExtensibilityVisualApiUsage;\n        //TODO: refactor this into a service\n        extensibility.visualApiVersions = [];\n        function createVisualAdapter(visualPlugin, telemetryService) {\n            var visualTelemetryInfo = {\n                name: visualPlugin.name,\n                apiVersion: visualPlugin.apiVersion,\n                custom: !!visualPlugin.custom\n            };\n            return new extensibility.VisualSafeExecutionWrapper(new VisualAdapter(visualPlugin, telemetryService), visualTelemetryInfo, telemetryService);\n        }\n        extensibility.createVisualAdapter = createVisualAdapter;\n        var VisualAdapter = (function () {\n            function VisualAdapter(visualPlugin, telemetryService) {\n                this.telemetryService = telemetryService;\n                this.plugin = visualPlugin;\n                var version = visualPlugin.apiVersion;\n                var versionIndex = this.getVersionIndex(version);\n                var isError = false;\n                if (!version) {\n                    this.legacy = true;\n                }\n                else if (versionIndex > -1) {\n                    this.apiVersionIndex = versionIndex;\n                    this.legacy = false;\n                }\n                else {\n                    debug.assertFail(\"The API version '\" + version + \"' is invalid.\");\n                    isError = true;\n                }\n                if (this.telemetryService) {\n                    this.telemetryService.logEvent(ExtensibilityVisualApiUsage, this.plugin.name, this.plugin.apiVersion, !!this.plugin.custom, undefined, isError, powerbi.visuals.telemetry.ErrorSource.User);\n                }\n            }\n            VisualAdapter.prototype.init = function (options) {\n                options.element.empty();\n                if (this.legacy) {\n                    this.visual = this.plugin.create();\n                    this.visualLegacy.init(options);\n                }\n                else {\n                    var host = extensibility.visualApiVersions[this.apiVersionIndex].hostAdapter(options.host);\n                    this.visual = this.plugin.create({\n                        element: options.element.get(0),\n                        host: host\n                    });\n                    this.overloadMethods();\n                }\n            };\n            VisualAdapter.prototype.update = function (options) {\n                if (options.type & powerbi.VisualUpdateType.Resize && this.visualHasMethod('onResizing')) {\n                    this.onResizing(options.viewport);\n                }\n                else if (this.visualHasMethod('update')) {\n                    this.visualLegacy.update(options);\n                }\n                else {\n                    if (!options.type || options.type & powerbi.VisualUpdateType.Data) {\n                        this.onDataChanged(_.pick(options, ['dataViews', 'operationKind']));\n                    }\n                    if (options.type & powerbi.VisualUpdateType.ViewMode) {\n                        this.onViewModeChanged(options.viewMode);\n                    }\n                }\n            };\n            VisualAdapter.prototype.destroy = function () {\n                if (this.visualHasMethod('destroy')) {\n                    this.visualLegacy.destroy();\n                }\n            };\n            VisualAdapter.prototype.enumerateObjectInstances = function (options) {\n                if (!this.visualHasMethod('enumerateObjectInstances')) {\n                    return;\n                }\n                return this.visualLegacy.enumerateObjectInstances(options);\n            };\n            VisualAdapter.prototype.onResizing = function (finalViewport) {\n                if (this.visualHasMethod('onResizing')) {\n                    this.visualLegacy.onResizing(finalViewport);\n                }\n            };\n            VisualAdapter.prototype.onDataChanged = function (options) {\n                if (this.visualHasMethod('onDataChanged')) {\n                    this.visualLegacy.onDataChanged(options);\n                }\n            };\n            VisualAdapter.prototype.onViewModeChanged = function (viewMode) {\n                if (this.visualHasMethod('onViewModeChanged')) {\n                    this.visualLegacy.onViewModeChanged(viewMode);\n                }\n            };\n            VisualAdapter.prototype.onClearSelection = function () {\n                if (this.visualHasMethod('onClearSelection')) {\n                    this.visualLegacy.onClearSelection();\n                }\n            };\n            VisualAdapter.prototype.canResizeTo = function (viewport) {\n                if (this.visualHasMethod('canResizeTo')) {\n                    return this.visualLegacy.canResizeTo(viewport);\n                }\n            };\n            VisualAdapter.prototype.unwrap = function () {\n                return this.visual;\n            };\n            Object.defineProperty(VisualAdapter.prototype, \"visualNew\", {\n                get: function () {\n                    if (this.legacy)\n                        return;\n                    return this.visual;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(VisualAdapter.prototype, \"visualLegacy\", {\n                get: function () {\n                    if (!this.legacy)\n                        return;\n                    return this.visual;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            VisualAdapter.prototype.visualHasMethod = function (methodName) {\n                var visual = this.legacy ? this.visualLegacy : this.visualNew;\n                return visual && _.isFunction(visual[methodName]);\n            };\n            VisualAdapter.prototype.getVersionIndex = function (version) {\n                if (version) {\n                    var versionCount = extensibility.visualApiVersions.length;\n                    for (var i = 0; i < versionCount; i++) {\n                        if (extensibility.visualApiVersions[i].version === version) {\n                            return i;\n                        }\n                    }\n                }\n                return -1;\n            };\n            VisualAdapter.prototype.overloadMethods = function () {\n                var overloads = this.getCompiledOverloads();\n                for (var key in overloads) {\n                    this[key] = overloads[key];\n                }\n            };\n            VisualAdapter.prototype.getCompiledOverloads = function () {\n                var overloads = {};\n                var versionIndex = this.apiVersionIndex;\n                var visualNew = this.visualNew;\n                for (var i = 0; i <= versionIndex; i++) {\n                    var overloadFactory = extensibility.visualApiVersions[i].overloads;\n                    if (_.isFunction(overloadFactory)) {\n                        _.assign(overloads, overloadFactory(visualNew));\n                    }\n                }\n                return overloads;\n            };\n            return VisualAdapter;\n        })();\n        extensibility.VisualAdapter = VisualAdapter;\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\n})(powerbi || (powerbi = {}));\n/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved.\n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *\n *  The above copyright notice and this permission notice shall be included in\n *  all copies or substantial portions of the Software.\n *\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\nvar powerbi;\n(function (powerbi) {\n    var extensibility;\n    (function (extensibility) {\n        var VisualException = powerbi.visuals.telemetry.VisualException;\n        var VisualSafeExecutionWrapper = (function () {\n            function VisualSafeExecutionWrapper(wrappedVisual, visualInfo, telemetryService, silent) {\n                this.wrappedVisual = wrappedVisual;\n                this.visualInfo = visualInfo;\n                this.telemetryService = telemetryService;\n                this.silent = silent;\n            }\n            VisualSafeExecutionWrapper.prototype.init = function (options) {\n                var _this = this;\n                if (this.wrappedVisual.init) {\n                    this.executeSafely(function () { return _this.wrappedVisual.init(options); });\n                }\n            };\n            VisualSafeExecutionWrapper.prototype.destroy = function () {\n                var _this = this;\n                if (this.wrappedVisual.destroy)\n                    this.executeSafely(function () { return _this.wrappedVisual.destroy(); });\n            };\n            VisualSafeExecutionWrapper.prototype.update = function (options) {\n                var _this = this;\n                if (this.wrappedVisual.update)\n                    this.executeSafely(function () { return _this.wrappedVisual.update(options); });\n            };\n            VisualSafeExecutionWrapper.prototype.onResizing = function (finalViewport) {\n                var _this = this;\n                if (this.wrappedVisual.onResizing)\n                    this.executeSafely(function () { return _this.wrappedVisual.onResizing(finalViewport); });\n            };\n            VisualSafeExecutionWrapper.prototype.onDataChanged = function (options) {\n                var _this = this;\n                if (this.wrappedVisual.onDataChanged)\n                    this.executeSafely(function () { return _this.wrappedVisual.onDataChanged(options); });\n            };\n            VisualSafeExecutionWrapper.prototype.onViewModeChanged = function (viewMode) {\n                var _this = this;\n                if (this.wrappedVisual.onViewModeChanged)\n                    this.executeSafely(function () { return _this.wrappedVisual.onViewModeChanged(viewMode); });\n            };\n            VisualSafeExecutionWrapper.prototype.onClearSelection = function () {\n                var _this = this;\n                if (this.wrappedVisual.onClearSelection)\n                    this.executeSafely(function () { return _this.wrappedVisual.onClearSelection(); });\n            };\n            VisualSafeExecutionWrapper.prototype.canResizeTo = function (viewport) {\n                var _this = this;\n                if (this.wrappedVisual.canResizeTo)\n                    return this.executeSafely(function () { return _this.wrappedVisual.canResizeTo(viewport); });\n            };\n            VisualSafeExecutionWrapper.prototype.enumerateObjectInstances = function (options) {\n                var _this = this;\n                if (this.wrappedVisual.enumerateObjectInstances)\n                    return this.executeSafely(function () { return _this.wrappedVisual.enumerateObjectInstances(options); });\n            };\n            VisualSafeExecutionWrapper.prototype.unwrap = function () {\n                var visual = this.wrappedVisual;\n                return visual.unwrap ? visual.unwrap() : visual;\n            };\n            VisualSafeExecutionWrapper.prototype.executeSafely = function (callback) {\n                try {\n                    return callback();\n                }\n                catch (exception) {\n                    if (!this.silent) {\n                        console.error(\"Visual exception\", exception.stack || exception);\n                    }\n                    if (this.telemetryService) {\n                        this.telemetryService.logEvent(VisualException, this.visualInfo.name, this.visualInfo.custom, this.visualInfo.apiVersion, exception.fileName, exception.lineNumber, exception.columnNumber, exception.stack, exception.message);\n                    }\n                }\n            };\n            return VisualSafeExecutionWrapper;\n        })();\n        extensibility.VisualSafeExecutionWrapper = VisualSafeExecutionWrapper;\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\n})(powerbi || (powerbi = {}));\n/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved.\n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *\n *  The above copyright notice and this permission notice shall be included in\n *  all copies or substantial portions of the Software.\n *\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\nvar powerbi;\n(function (powerbi) {\n    var extensibility;\n    (function (extensibility) {\n        var v100;\n        (function (v100) {\n            var overloadFactory = function (visual) {\n                return {\n                    update: function (options) {\n                        if (visual.update) {\n                            visual.update({\n                                viewport: options.viewport,\n                                dataViews: options.dataViews,\n                                type: options.type || powerbi.VisualUpdateType.Data\n                            });\n                        }\n                    },\n                    destroy: function () {\n                        if (visual.destroy) {\n                            visual.destroy();\n                        }\n                    },\n                    enumerateObjectInstances: function (options) {\n                        if (visual.enumerateObjectInstances) {\n                            return visual.enumerateObjectInstances(options);\n                        }\n                    }\n                };\n            };\n            var hostAdapter = function (host) {\n                return {};\n            };\n            extensibility.visualApiVersions.push({\n                version: '1.0.0',\n                overloads: overloadFactory,\n                hostAdapter: hostAdapter\n            });\n        })(v100 = extensibility.v100 || (extensibility.v100 = {}));\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\n})(powerbi || (powerbi = {}));\n/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved.\n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *\n *  The above copyright notice and this permission notice shall be included in\n *  all copies or substantial portions of the Software.\n *\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\nvar powerbi;\n(function (powerbi) {\n    var extensibility;\n    (function (extensibility) {\n        var v110;\n        (function (v110) {\n            var hostAdapter = function (host) {\n                return {\n                    createSelectionIdBuilder: function () { return new powerbi.visuals.SelectionIdBuilder(); },\n                    createSelectionManager: function () { return new extensibility.SelectionManager({ hostServices: host }); }\n                };\n            };\n            extensibility.visualApiVersions.push({\n                version: '1.1.0',\n                hostAdapter: hostAdapter\n            });\n        })(v110 = extensibility.v110 || (extensibility.v110 = {}));\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\n})(powerbi || (powerbi = {}));\n\n\n","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.extensibility {\r\n\r\n    import ITelemetryService = visuals.telemetry.ITelemetryService;\r\n    import VisualTelemetryInfo = visuals.telemetry.VisualTelemetryInfo;\r\n    import VisualException = powerbi.visuals.telemetry.VisualException;\r\n\r\n    export class VisualSafeExecutionWrapper implements powerbi.IVisual, WrappedVisual {\r\n        constructor(\r\n            private wrappedVisual: powerbi.IVisual,\r\n            private visualInfo: VisualTelemetryInfo,\r\n            private telemetryService: ITelemetryService,\r\n            private silent?: boolean) { }\r\n\r\n        public init(options: VisualInitOptions): void {\r\n            if (this.wrappedVisual.init) {\r\n                this.executeSafely(() => this.wrappedVisual.init(options));\r\n            }\r\n        }\r\n\r\n        public destroy(): void {\r\n            if (this.wrappedVisual.destroy)\r\n                this.executeSafely(() => this.wrappedVisual.destroy());\r\n        }\r\n\r\n        public update(options: powerbi.VisualUpdateOptions): void {\r\n            if (this.wrappedVisual.update)\r\n                this.executeSafely(() => this.wrappedVisual.update(options));\r\n        }\r\n\r\n        public onResizing(finalViewport: IViewport): void {\r\n            if (this.wrappedVisual.onResizing)\r\n                this.executeSafely(() => this.wrappedVisual.onResizing(finalViewport));\r\n        }\r\n\r\n        public onDataChanged(options: VisualDataChangedOptions): void {\r\n            if (this.wrappedVisual.onDataChanged)\r\n                this.executeSafely(() => this.wrappedVisual.onDataChanged(options));\r\n        }\r\n\r\n        public onViewModeChanged(viewMode: ViewMode): void {\r\n            if (this.wrappedVisual.onViewModeChanged)\r\n                this.executeSafely(() => this.wrappedVisual.onViewModeChanged(viewMode));\r\n        }\r\n\r\n        public onClearSelection(): void {\r\n            if (this.wrappedVisual.onClearSelection)\r\n                this.executeSafely(() => this.wrappedVisual.onClearSelection());\r\n        }\r\n\r\n        public canResizeTo(viewport: IViewport): boolean {\r\n            if (this.wrappedVisual.canResizeTo)\r\n                return this.executeSafely(() => this.wrappedVisual.canResizeTo(viewport));\r\n        }\r\n\r\n        public enumerateObjectInstances(options: EnumerateVisualObjectInstancesOptions): VisualObjectInstanceEnumeration {\r\n            if (this.wrappedVisual.enumerateObjectInstances)\r\n                return this.executeSafely(() => this.wrappedVisual.enumerateObjectInstances(options));\r\n        }\r\n\r\n        public unwrap(): powerbi.IVisual {\r\n            let visual = <powerbi.IVisual & WrappedVisual>this.wrappedVisual;\r\n            return visual.unwrap ? visual.unwrap() : visual;\r\n        }\r\n\r\n        private executeSafely(callback: () => any): any {\r\n            try {\r\n                return callback();\r\n            } catch (exception) {\r\n                if (!this.silent) {\r\n                    console.error(\"Visual exception\", exception.stack || exception);\r\n                }\r\n\r\n                if (this.telemetryService) {\r\n                    this.telemetryService.logEvent(\r\n                        VisualException,\r\n                        this.visualInfo.name,\r\n                        this.visualInfo.custom,\r\n                        this.visualInfo.apiVersion,\r\n                        exception.fileName,\r\n                        exception.lineNumber,\r\n                        exception.columnNumber,\r\n                        exception.stack,\r\n                        exception.message);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.extensibility.v100 {\r\n    let overloadFactory: VisualVersionOverloadFactory = (visual: IVisual) => {\r\n        return {\r\n            update: (options: powerbi.VisualUpdateOptions) => {\r\n                if (visual.update) {\r\n                    visual.update({\r\n                        viewport: options.viewport,\r\n                        dataViews: options.dataViews,\r\n                        type: options.type || VisualUpdateType.Data\r\n                    });\r\n                }\r\n            },\r\n            destroy: () => {\r\n                if (visual.destroy) {\r\n                    visual.destroy();\r\n                }\r\n            },\r\n            enumerateObjectInstances: (options: EnumerateVisualObjectInstancesOptions) => {\r\n                if (visual.enumerateObjectInstances) {\r\n                    return visual.enumerateObjectInstances(options);\r\n                }\r\n            }\r\n        };\r\n    };\r\n\r\n    let hostAdapter: VisualHostAdapter = (host: IVisualHostServices): IVisualHost => {\r\n        return {};\r\n    };\r\n\r\n    visualApiVersions.push({\r\n        version: '1.0.0',\r\n        overloads: overloadFactory,\r\n        hostAdapter: hostAdapter\r\n    });\r\n}","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.extensibility.v110 {\r\n    let hostAdapter: VisualHostAdapter = (host: powerbi.IVisualHostServices): IVisualHost => {\r\n        return {\r\n            createSelectionIdBuilder: () => new visuals.SelectionIdBuilder(),\r\n            createSelectionManager: () => new SelectionManager({ hostServices: host })\r\n        };\r\n    };\r\n\r\n    visualApiVersions.push({\r\n        version: '1.1.0',\r\n        hostAdapter: hostAdapter\r\n    });\r\n}"],"sourceRoot":"/source/"}
{"version":3,"sources":["typedefs/typedefs.ts","telemetry/generateGuid.ts","telemetry/events.ts","components/selectionManager.ts","components/selectionIdBuilder.ts","versioning/VisualAdapter.ts","versioning/VisualSafeExecutionWrapper.ts","versioning/versions/v1.0.0.ts","versioning/versions/v1.1.0.ts"],"names":["powerbi","powerbi.visuals","powerbi.visuals.telemetry","powerbi.visuals.telemetry.generateGuid","powerbi.extensibility","powerbi.extensibility.SelectionManager","powerbi.extensibility.SelectionManager.constructor","powerbi.extensibility.SelectionManager.select","powerbi.extensibility.SelectionManager.hasSelection","powerbi.extensibility.SelectionManager.clear","powerbi.extensibility.SelectionManager.getSelectionIds","powerbi.extensibility.SelectionManager.sendSelectionToHost","powerbi.extensibility.SelectionManager.selectInternal","powerbi.extensibility.SelectionManager.containsSelection","powerbi.extensibility.SelectionIdBuilder","powerbi.extensibility.SelectionIdBuilder.constructor","powerbi.extensibility.SelectionIdBuilder.withCategory","powerbi.extensibility.SelectionIdBuilder.withSeries","powerbi.extensibility.SelectionIdBuilder.withMeasure","powerbi.extensibility.SelectionIdBuilder.createSelectionId","powerbi.extensibility.SelectionIdBuilder.ensureDataMap","powerbi.extensibility.createVisualAdapter","powerbi.extensibility.VisualAdapter","powerbi.extensibility.VisualAdapter.constructor","powerbi.extensibility.VisualAdapter.init","powerbi.extensibility.VisualAdapter.update","powerbi.extensibility.VisualAdapter.destroy","powerbi.extensibility.VisualAdapter.enumerateObjectInstances","powerbi.extensibility.VisualAdapter.onResizing","powerbi.extensibility.VisualAdapter.onDataChanged","powerbi.extensibility.VisualAdapter.onViewModeChanged","powerbi.extensibility.VisualAdapter.onClearSelection","powerbi.extensibility.VisualAdapter.canResizeTo","powerbi.extensibility.VisualAdapter.unwrap","powerbi.extensibility.VisualAdapter.visualNew","powerbi.extensibility.VisualAdapter.visualLegacy","powerbi.extensibility.VisualAdapter.visualHasMethod","powerbi.extensibility.VisualAdapter.getVersionIndex","powerbi.extensibility.VisualAdapter.overloadMethods","powerbi.extensibility.VisualAdapter.getCompiledOverloads","powerbi.extensibility.VisualSafeExecutionWrapper","powerbi.extensibility.VisualSafeExecutionWrapper.constructor","powerbi.extensibility.VisualSafeExecutionWrapper.init","powerbi.extensibility.VisualSafeExecutionWrapper.destroy","powerbi.extensibility.VisualSafeExecutionWrapper.update","powerbi.extensibility.VisualSafeExecutionWrapper.onResizing","powerbi.extensibility.VisualSafeExecutionWrapper.onDataChanged","powerbi.extensibility.VisualSafeExecutionWrapper.onViewModeChanged","powerbi.extensibility.VisualSafeExecutionWrapper.onClearSelection","powerbi.extensibility.VisualSafeExecutionWrapper.canResizeTo","powerbi.extensibility.VisualSafeExecutionWrapper.enumerateObjectInstances","powerbi.extensibility.VisualSafeExecutionWrapper.unwrap","powerbi.extensibility.VisualSafeExecutionWrapper.executeSafely","powerbi.extensibility.v100","powerbi.extensibility.v110"],"mappings":"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A,CAACA;gBACtCA,CAACA;gBAACA,IAAIA,CAACA,EAAEA,CAACA,CAACA,IAAIA,CAACA,eAAeA,CAACA,QAAQA,CAACA,CAACA,CAACA,CAACA;oBACxCA,IAAIA,CAACA,YAAYA,CAACA,MAAMA,CAACA,OAAOA,CAACA,CAACA;gBACtCA,CAACA;gBAACA,IAAIA,CAACA,CAACA;oBACJA,EAAEA,CAACA,CAACA,CAACA,OAAOA,CAACA,IAAIA,IAAIA,OAAOA,CAACA,IAAIA,GAAGA,wBAAgBA,CAACA,IAAIA,CAACA,CAACA,CAACA;wBACxDA,IAAIA,CAACA,aAAaA,CAA2BA,CAACA,CAACA,IAAIA,CAACA,OAAOA,EAAEA,CAACA,WAAWA,EAAEA,eAAeA,CAACA,CAACA,CAACA,CAACA;oBAClGA,CAACA;oBACDA,EAAEA,CAACA,CAACA,OAAOA,CAACA,IAAIA,GAAGA,wBAAgBA,CAACA,QAAQA,CAACA,CAACA,CAACA;wBAC3CA,IAAIA,CAACA,iBAAiBA,CAACA,OAAOA,CAACA,QAAQA,CAACA,CAACA;oBAC7CA,CAACA;gBACLA,CAACA;YACLA,CAACA;YAEMH,+BAAOA,GAAdA;gBACII,EAAEA,CAACA,CAACA,IAAIA,CAACA,eAAeA,CAACA,SAASA,CAACA,CAACA,CAACA,CAACA;oBAClCA,IAAIA,CAACA,YAAYA,CAACA,OAAOA,EAAEA,CAACA;gBAChCA,CAACA;YACLA,CAACA;YAEMJ,gDAAwBA,GAA/BA,UAAgCA,OAA8CA;gBAC1EK,EAAEA,CAACA,CAACA,CAACA,IAAIA,CAACA,eAAeA,CAACA,0BAA0BA,CAACA,CAACA,CAACA,CAACA;oBACpDA,MAAMA,CAACA;gBACXA,CAACA;gBACDA,MAAMA,CAACA,IAAIA,CAACA,YAAYA,CAACA,wBAAwBA,CAACA,OAAOA,CAACA,CAACA;YAC/DA,CAACA;YAEML,kCAAUA,GAAjBA,UAAkBA,aAAwBA;gBACtCM,EAAEA,CAACA,CAACA,IAAIA,CAACA,eAAeA,CAACA,YAAYA,CAACA,CAACA,CAACA,CAACA;oBACrCA,IAAIA,CA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","file":"VisualsExtensibility.js","sourcesContent":["/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\n///<reference path=\"../../Typedefs/jquery/jquery.d.ts\"/>\r\n///<reference path=\"../../Typedefs/globalize/globalize.d.ts\"/>\r\n///<reference path=\"../../Typedefs/lodash/lodash.d.ts\"/>\r\n","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.visuals.telemetry {\r\n    /**\r\n     * Creates a client-side Guid string.\r\n     * @returns A string representation of a Guid.\r\n     */\r\n    export function generateGuid(): string {\r\n        let guid = \"\",\r\n            idx = 0;\r\n\r\n        for (idx = 0; idx < 32; idx += 1) {\r\n            let guidDigitsItem = Math.random() * 16 | 0;\r\n            switch (idx) {\r\n                case 8:\r\n                case 12:\r\n                case 16:\r\n                case 20:\r\n                    guid += \"-\";\r\n                    break;\r\n            }\r\n            guid += guidDigitsItem.toString(16);\r\n        }\r\n\r\n        return guid;\r\n    }\r\n}","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.visuals.telemetry {\r\n\r\n    /**\r\n    * Event fired when a visual is loaded through the visual adapter\r\n    * @param name Name (guid) of the visual. \r\n    * @param apiVersion Api version used by the visual. \r\n    * @param custom Is the visual custom? \r\n    * @param parentId Id of the parent event \r\n    * @param isError True - action failed. \r\n    * @param errorSource Source of the error. PowerBI = PowerBI has a problem, External = External Service (e.g. on-prem AS server is down), User = User error (e.g. uploading too much and hitting resource limitations. \r\n    * @param errorCode PowerBI Error Code \r\n    *\r\n    * Generated by: Extensibility/events.bond\r\n    */\r\n\r\n    export declare var ExtensibilityVisualApiUsageLoggers: number;\r\n\r\n    export var ExtensibilityVisualApiUsage = function(name: string, apiVersion: string, custom: boolean, parentId: string, isError: boolean = false, errorSource: ErrorSource = undefined, errorCode: string = undefined): ITelemetryEventI<IPBIExtensibilityVisualApiUsage> {\r\n        var info = {\r\n            name: name,\r\n            apiVersion: apiVersion,\r\n            custom: custom,\r\n            parentId: parentId,\r\n            isError: isError,\r\n            errorSource: errorSource,\r\n            errorCode: errorCode,\r\n        };\r\n\r\n        var event: ITelemetryEventI<IPBIExtensibilityVisualApiUsage> = {\r\n            name: 'PBI.Extensibility.VisualApiUsage',\r\n            category: TelemetryCategory.CustomerAction,\r\n            time: Date.now(),\r\n            id: generateGuid(),\r\n            getFormattedInfoObject: function() {\r\n                var formattedObject = {\r\n                    name: info.name,\r\n                    apiVersion: info.apiVersion,\r\n                    custom: info.custom,\r\n                    parentId: info.parentId,\r\n                    isError: info.isError,\r\n                };\r\n                if (typeof info.errorSource !== 'undefined') {\r\n                    formattedObject['errorSource'] = ErrorSource[info.errorSource];\r\n                }\r\n                if (typeof info.errorCode !== 'undefined') {\r\n                    formattedObject['errorCode'] = info.errorCode;\r\n                }\r\n                return formattedObject;\r\n            },\r\n            info: info,\r\n            privateFields: [],\r\n            orgInfoFields: []\r\n        };\r\n\r\n        if (typeof ExtensibilityVisualApiUsageLoggers !== 'undefined') {\r\n            event.loggers = ExtensibilityVisualApiUsageLoggers;\r\n        }\r\n\r\n        return event;\r\n    };\r\n\r\n    /**\r\n    * Event fired for uncaught exception in IVisual.\r\n    * @param visualType Type of the visual. \r\n    * @param isCustom Is the visual custom? \r\n    * @param apiVersion Api version used by the visual \r\n    * @param source Source URL \r\n    * @param lineNumber Line number \r\n    * @param columnNumber Column number \r\n    * @param stack Stack trace \r\n    * @param message Error exception message. \r\n    *\r\n    * Generated by JsCommon/commonTelemetryEvents.bond\r\n    */\r\n\r\n    export declare var VisualExceptionLoggers: number;\r\n\r\n    export var VisualException = function(visualType: string, isCustom: boolean, apiVersion: string, source: string, lineNumber: number, columnNumber: number, stack: string, message: string): ITelemetryEventI<IPBIVisualException> {\r\n        var info = {\r\n            visualType: visualType,\r\n            isCustom: isCustom,\r\n            apiVersion: apiVersion,\r\n            source: source,\r\n            lineNumber: lineNumber,\r\n            columnNumber: columnNumber,\r\n            stack: stack,\r\n            message: message,\r\n        };\r\n\r\n        var event: ITelemetryEventI<IPBIVisualException> = {\r\n            name: 'PBI.VisualException',\r\n            category: TelemetryCategory.CriticalError,\r\n            time: Date.now(),\r\n            id: generateGuid(),\r\n            getFormattedInfoObject: function() {\r\n                var formattedObject = {\r\n                    visualType: info.visualType,\r\n                    isCustom: info.isCustom,\r\n                    apiVersion: info.apiVersion,\r\n                    source: info.source,\r\n                    lineNumber: info.lineNumber,\r\n                    columnNumber: info.columnNumber,\r\n                    stack: info.stack,\r\n                    message: info.message,\r\n                };\r\n                return formattedObject;\r\n            },\r\n            info: info,\r\n            privateFields: [],\r\n            orgInfoFields: []\r\n        };\r\n\r\n        if (typeof VisualExceptionLoggers !== 'undefined') {\r\n            event.loggers = VisualExceptionLoggers;\r\n        }\r\n\r\n        return event;\r\n    };\r\n}","/*\r\n*  Power BI Visualizations\r\n*\r\n*  Copyright (c) Microsoft Corporation\r\n*  All rights reserved. \r\n*  MIT License\r\n*\r\n*  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n*  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n*  in the Software without restriction, including without limitation the rights\r\n*  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n*  copies of the Software, and to permit persons to whom the Software is\r\n*  furnished to do so, subject to the following conditions:\r\n*   \r\n*  The above copyright notice and this permission notice shall be included in \r\n*  all copies or substantial portions of the Software.\r\n*   \r\n*  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n*  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n*  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n*  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n*  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n*  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n*  THE SOFTWARE.\r\n*/\r\n\r\nmodule powerbi.extensibility {\r\n    import ISelectionId = visuals.ISelectionId;\r\n    \r\n    export interface SelectionManagerOptions{\r\n        hostServices: IVisualHostServices;\r\n    };\r\n\r\n    export class SelectionManager implements ISelectionManager {\r\n        private selectedIds: ISelectionId[];\r\n        private hostServices: IVisualHostServices;\r\n        private promiseFactory: IPromiseFactory;\r\n\r\n        public constructor(options: SelectionManagerOptions) {\r\n            this.hostServices = options.hostServices;\r\n            this.selectedIds = [];\r\n            this.promiseFactory = this.hostServices.promiseFactory();\r\n        }\r\n        \r\n        public select(selectionId: ISelectionId, multiSelect: boolean = false): IPromise<ISelectionId[]> {\r\n            let defered: IDeferred<data.Selector[]> = this.promiseFactory.defer();\r\n            \r\n            if (this.hostServices.shouldRetainSelection()) {\r\n                this.sendSelectionToHost([selectionId]);\r\n            }\r\n            else {\r\n                this.selectInternal(selectionId, multiSelect);\r\n                this.sendSelectionToHost(this.selectedIds);\r\n            }\r\n\r\n            defered.resolve(this.selectedIds);\r\n            return defered.promise;\r\n        }\r\n\r\n        public hasSelection(): boolean {\r\n            return this.selectedIds.length > 0;\r\n        }\r\n\r\n        public clear(): IPromise<{}> {\r\n            let defered = this.promiseFactory.defer();\r\n            this.selectedIds = [];\r\n            this.sendSelectionToHost([]);\r\n            defered.resolve(null);\r\n            return defered.promise;\r\n        }\r\n\r\n        public getSelectionIds(): ISelectionId[] {\r\n            return this.selectedIds;\r\n        }\r\n\r\n        private sendSelectionToHost(ids: ISelectionId[]) {\r\n            let selectArgs: SelectEventArgs = {\r\n                data: ids\r\n                    .filter((value: ISelectionId) => value.hasIdentity())\r\n                    .map((value: ISelectionId) => value.getSelector())\r\n            };\r\n\r\n            let data2: SelectorsByColumn[] = ids\r\n                .filter((value: ISelectionId) => value.getSelectorsByColumn() && value.hasIdentity())\r\n                .map((value: ISelectionId) => value.getSelectorsByColumn());\r\n\r\n            if (data2 && data2.length > 0)\r\n                selectArgs.data2 = data2;\r\n\r\n            this.hostServices.onSelect(selectArgs);\r\n        }\r\n\r\n        private selectInternal(selectionId: ISelectionId, multiSelect: boolean) {\r\n            if (SelectionManager.containsSelection(this.selectedIds, selectionId)) {\r\n                this.selectedIds = multiSelect\r\n                    ? this.selectedIds.filter(d => !selectionId.equals(d))\r\n                    : this.selectedIds.length > 1\r\n                        ? [selectionId] : [];\r\n            } else {\r\n                if (multiSelect)\r\n                    this.selectedIds.push(selectionId);\r\n                else\r\n                    this.selectedIds = [selectionId];\r\n            }\r\n        }\r\n\r\n        public static containsSelection(list: ISelectionId[], id: ISelectionId) {\r\n            return list.some(d => id.equals(d));\r\n        }\r\n    }\r\n} ","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.extensibility {\r\n    import ISelectionId = visuals.ISelectionId;\r\n    \r\n    /**\r\n     * This class is designed to simplify the creation of SelectionId objects\r\n     * It allows chaining to build up an object before calling 'create' to build a SelectionId\r\n     */\r\n    export class SelectionIdBuilder implements ISelectionIdBuilder {\r\n        private dataMap: SelectorForColumn;\r\n        private measure: string;\r\n\r\n        public withCategory(categoryColumn: DataViewCategoryColumn, index: number): this{\r\n            if (categoryColumn && categoryColumn.source && categoryColumn.source.queryName && categoryColumn.identity)\r\n                this.ensureDataMap()[categoryColumn.source.queryName] = categoryColumn.identity[index];\r\n            \r\n            return this;\r\n        }\r\n\r\n        public withSeries(seriesColumn: DataViewValueColumns, valueColumn: DataViewValueColumn | DataViewValueColumnGroup): this {\r\n            if (seriesColumn && seriesColumn.source && seriesColumn.source.queryName && valueColumn)\r\n                this.ensureDataMap()[seriesColumn.source.queryName] = valueColumn.identity;\r\n\r\n            return this;\r\n        }\r\n\r\n        public withMeasure(measureId: string): this {\r\n            this.measure = measureId;\r\n\r\n            return this;\r\n        }\r\n\r\n        public createSelectionId(): ISelectionId {\r\n            return visuals.SelectionId.createWithSelectorForColumnAndMeasure(this.ensureDataMap(), this.measure);\r\n        }\r\n\r\n        private ensureDataMap(): SelectorForColumn {\r\n            if (!this.dataMap)\r\n                this.dataMap = {};\r\n\r\n            return this.dataMap;\r\n        }\r\n    }\r\n}\r\n","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.extensibility {\r\n\r\n    import ITelemetryService = visuals.telemetry.ITelemetryService;\r\n    import ExtensibilityVisualApiUsage = visuals.telemetry.ExtensibilityVisualApiUsage;\r\n    import VisualTelemetryInfo = visuals.telemetry.VisualTelemetryInfo;\r\n\r\n    //TODO: refactor this into a service\r\n    export let visualApiVersions: VisualVersion[] = [];\r\n\r\n    export function createVisualAdapter(visualPlugin: IVisualPlugin, telemetryService?: powerbi.ITelemetryService | ITelemetryService): powerbi.IVisual {\r\n        let visualTelemetryInfo: VisualTelemetryInfo = {\r\n            name: visualPlugin.name,\r\n            apiVersion: visualPlugin.apiVersion,\r\n            custom: !!visualPlugin.custom\r\n        };\r\n        return new VisualSafeExecutionWrapper(new VisualAdapter(visualPlugin, <ITelemetryService>telemetryService), visualTelemetryInfo, <ITelemetryService>telemetryService);\r\n    }\r\n\r\n    export class VisualAdapter implements powerbi.IVisual, WrappedVisual {\r\n        private visual: powerbi.IVisual | powerbi.extensibility.IVisual;\r\n        private apiVersionIndex: number;\r\n        private plugin: powerbi.IVisualPlugin;\r\n        private telemetryService: ITelemetryService;\r\n        private legacy: boolean;\r\n\r\n        constructor(visualPlugin: IVisualPlugin, telemetryService?: ITelemetryService) {\r\n            this.telemetryService = telemetryService;\r\n            this.plugin = visualPlugin;\r\n            \r\n            let version = visualPlugin.apiVersion;\r\n            let versionIndex = this.getVersionIndex(version);\r\n            let isError = false;\r\n            \r\n            if (!version) {\r\n                this.legacy = true;\r\n            }\r\n            else if (versionIndex > -1) {\r\n                this.apiVersionIndex = versionIndex;\r\n                this.legacy = false;\r\n            }\r\n            else {\r\n                debug.assertFail(\"The API version '\" + version + \"' is invalid.\");\r\n                isError = true;\r\n            }\r\n\r\n            if (this.telemetryService) {\r\n                this.telemetryService.logEvent(\r\n                    ExtensibilityVisualApiUsage,\r\n                    this.plugin.name,\r\n                    this.plugin.apiVersion,\r\n                    !!this.plugin.custom,\r\n                    undefined,\r\n                    isError,\r\n                    visuals.telemetry.ErrorSource.User\r\n                );\r\n            }\r\n        }\r\n\r\n        public init(options: powerbi.VisualInitOptions) {\r\n\r\n            options.element.empty();\r\n\r\n            if (this.legacy) {\r\n                this.visual = this.plugin.create();\r\n                this.visualLegacy.init(options);\r\n            }\r\n            else {\r\n                let host = visualApiVersions[this.apiVersionIndex].hostAdapter(options.host);\r\n                this.visual = this.plugin.create({\r\n                    element: options.element.get(0),\r\n                    host: host\r\n                });\r\n                this.overloadMethods();\r\n            }\r\n        }\r\n\r\n        public update(options: powerbi.VisualUpdateOptions): void {\r\n            if (options.type & VisualUpdateType.Resize && this.visualHasMethod('onResizing')) {\r\n                this.onResizing(options.viewport);\r\n            } else if (this.visualHasMethod('update')) {\r\n                this.visualLegacy.update(options);\r\n            } else {\r\n                if (!options.type || options.type & VisualUpdateType.Data) {\r\n                    this.onDataChanged(<VisualDataChangedOptions>_.pick(options, ['dataViews', 'operationKind']));\r\n                }\r\n                if (options.type & VisualUpdateType.ViewMode) {\r\n                    this.onViewModeChanged(options.viewMode);\r\n                }\r\n            }\r\n        }\r\n\r\n        public destroy(): void {\r\n            if (this.visualHasMethod('destroy')) {\r\n                this.visualLegacy.destroy();\r\n            }\r\n        }\r\n\r\n        public enumerateObjectInstances(options: EnumerateVisualObjectInstancesOptions): VisualObjectInstanceEnumeration {\r\n            if (!this.visualHasMethod('enumerateObjectInstances')) {\r\n                return;\r\n            }\r\n            return this.visualLegacy.enumerateObjectInstances(options);\r\n        }\r\n\r\n        public onResizing(finalViewport: IViewport): void {\r\n            if (this.visualHasMethod('onResizing')) {\r\n                this.visualLegacy.onResizing(finalViewport);\r\n            }\r\n        }\r\n\r\n        public onDataChanged(options: VisualDataChangedOptions): void {\r\n            if (this.visualHasMethod('onDataChanged')) {\r\n                this.visualLegacy.onDataChanged(options);\r\n            }\r\n        }\r\n\r\n        public onViewModeChanged(viewMode: ViewMode): void {\r\n            if (this.visualHasMethod('onViewModeChanged')) {\r\n                this.visualLegacy.onViewModeChanged(viewMode);\r\n            }\r\n        }\r\n\r\n        public onClearSelection(): void {\r\n            if (this.visualHasMethod('onClearSelection')) {\r\n                this.visualLegacy.onClearSelection();\r\n            }\r\n        }\r\n\r\n        public canResizeTo(viewport: IViewport): boolean {\r\n            if (this.visualHasMethod('canResizeTo')) {\r\n                return this.visualLegacy.canResizeTo(viewport);\r\n            }\r\n        }\r\n\r\n        public unwrap(): powerbi.IVisual {\r\n            return <powerbi.IVisual>this.visual;\r\n        }\r\n\r\n        private get visualNew(): powerbi.extensibility.IVisual {\r\n            if (this.legacy) return;\r\n            return <powerbi.extensibility.IVisual>this.visual;\r\n        }\r\n\r\n        private get visualLegacy(): powerbi.IVisual {\r\n            if (!this.legacy) return;\r\n            return <powerbi.IVisual>this.visual;\r\n        }\r\n\r\n        private visualHasMethod(methodName: string): boolean {\r\n            let visual = this.legacy ? this.visualLegacy : this.visualNew;\r\n            return visual && _.isFunction(visual[methodName]);\r\n        }\r\n\r\n        private getVersionIndex(version: string): number {\r\n            if (version) {\r\n                let versionCount = extensibility.visualApiVersions.length;\r\n                for (let i = 0; i < versionCount; i++) {\r\n                    if (extensibility.visualApiVersions[i].version === version) {\r\n                        return i;\r\n                    }\r\n                }\r\n            }\r\n            return -1;\r\n        }\r\n\r\n        private overloadMethods(): void {\r\n            let overloads = this.getCompiledOverloads();\r\n            for (let key in overloads) {\r\n                this[key] = overloads[key];\r\n            }\r\n        }\r\n\r\n        private getCompiledOverloads(): VisualVersionOverloads {\r\n            let overloads: VisualVersionOverloads = {};\r\n            let versionIndex = this.apiVersionIndex;\r\n            let visualNew = this.visualNew;\r\n            for (let i = 0; i <= versionIndex; i++) {\r\n                let overloadFactory = extensibility.visualApiVersions[i].overloads;\r\n                if (_.isFunction(overloadFactory)) {\r\n                    _.assign(overloads, overloadFactory(visualNew));\r\n                }\r\n            }\r\n            return overloads;\r\n        }\r\n    }\r\n}","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.extensibility {\r\n\r\n    import ITelemetryService = visuals.telemetry.ITelemetryService;\r\n    import VisualTelemetryInfo = visuals.telemetry.VisualTelemetryInfo;\r\n    import VisualException = powerbi.visuals.telemetry.VisualException;\r\n\r\n    export class VisualSafeExecutionWrapper implements powerbi.IVisual, WrappedVisual {\r\n        constructor(\r\n            private wrappedVisual: powerbi.IVisual,\r\n            private visualInfo: VisualTelemetryInfo,\r\n            private telemetryService: ITelemetryService,\r\n            private silent?: boolean) { }\r\n\r\n        public init(options: VisualInitOptions): void {\r\n            if (this.wrappedVisual.init) {\r\n                this.executeSafely(() => this.wrappedVisual.init(options));\r\n            }\r\n        }\r\n\r\n        public destroy(): void {\r\n            if (this.wrappedVisual.destroy)\r\n                this.executeSafely(() => this.wrappedVisual.destroy());\r\n        }\r\n\r\n        public update(options: powerbi.VisualUpdateOptions): void {\r\n            if (this.wrappedVisual.update)\r\n                this.executeSafely(() => this.wrappedVisual.update(options));\r\n        }\r\n\r\n        public onResizing(finalViewport: IViewport): void {\r\n            if (this.wrappedVisual.onResizing)\r\n                this.executeSafely(() => this.wrappedVisual.onResizing(finalViewport));\r\n        }\r\n\r\n        public onDataChanged(options: VisualDataChangedOptions): void {\r\n            if (this.wrappedVisual.onDataChanged)\r\n                this.executeSafely(() => this.wrappedVisual.onDataChanged(options));\r\n        }\r\n\r\n        public onViewModeChanged(viewMode: ViewMode): void {\r\n            if (this.wrappedVisual.onViewModeChanged)\r\n                this.executeSafely(() => this.wrappedVisual.onViewModeChanged(viewMode));\r\n        }\r\n\r\n        public onClearSelection(): void {\r\n            if (this.wrappedVisual.onClearSelection)\r\n                this.executeSafely(() => this.wrappedVisual.onClearSelection());\r\n        }\r\n\r\n        public canResizeTo(viewport: IViewport): boolean {\r\n            if (this.wrappedVisual.canResizeTo)\r\n                return this.executeSafely(() => this.wrappedVisual.canResizeTo(viewport));\r\n        }\r\n\r\n        public enumerateObjectInstances(options: EnumerateVisualObjectInstancesOptions): VisualObjectInstanceEnumeration {\r\n            if (this.wrappedVisual.enumerateObjectInstances)\r\n                return this.executeSafely(() => this.wrappedVisual.enumerateObjectInstances(options));\r\n        }\r\n\r\n        public unwrap(): powerbi.IVisual {\r\n            let visual = <powerbi.IVisual & WrappedVisual>this.wrappedVisual;\r\n            return visual.unwrap ? visual.unwrap() : visual;\r\n        }\r\n\r\n        private executeSafely(callback: () => any): any {\r\n            try {\r\n                return callback();\r\n            } catch (exception) {\r\n                if (!this.silent) {\r\n                    console.error(\"Visual exception\", exception.stack || exception);\r\n                }\r\n\r\n                if (this.telemetryService) {\r\n                    this.telemetryService.logEvent(\r\n                        VisualException,\r\n                        this.visualInfo.name,\r\n                        this.visualInfo.custom,\r\n                        this.visualInfo.apiVersion,\r\n                        exception.fileName,\r\n                        exception.lineNumber,\r\n                        exception.columnNumber,\r\n                        exception.stack,\r\n                        exception.message);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.extensibility.v100 {\r\n    let overloadFactory: VisualVersionOverloadFactory = (visual: IVisual) => {\r\n        return {\r\n            update: (options: powerbi.VisualUpdateOptions) => {\r\n                if (visual.update) {\r\n                    visual.update({\r\n                        viewport: options.viewport,\r\n                        dataViews: options.dataViews,\r\n                        type: options.type || VisualUpdateType.Data\r\n                    });\r\n                }\r\n            },\r\n            destroy: () => {\r\n                if (visual.destroy) {\r\n                    visual.destroy();\r\n                }\r\n            },\r\n            enumerateObjectInstances: (options: EnumerateVisualObjectInstancesOptions) => {\r\n                if (visual.enumerateObjectInstances) {\r\n                    return visual.enumerateObjectInstances(options);\r\n                }\r\n            }\r\n        };\r\n    };\r\n\r\n    let hostAdapter: VisualHostAdapter = (host: IVisualHostServices): IVisualHost => {\r\n        return {};\r\n    };\r\n\r\n    visualApiVersions.push({\r\n        version: '1.0.0',\r\n        overloads: overloadFactory,\r\n        hostAdapter: hostAdapter\r\n    });\r\n}","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\nmodule powerbi.extensibility.v110 {\r\n    let hostAdapter: VisualHostAdapter = (host: powerbi.IVisualHostServices): IVisualHost => {\r\n        return {\r\n            createSelectionIdBuilder: () => new visuals.SelectionIdBuilder(),\r\n            createSelectionManager: () => new SelectionManager({ hostServices: host })\r\n        };\r\n    };\r\n\r\n    visualApiVersions.push({\r\n        version: '1.1.0',\r\n        hostAdapter: hostAdapter\r\n    });\r\n}"],"sourceRoot":"../ts/visualsExtensibility"}